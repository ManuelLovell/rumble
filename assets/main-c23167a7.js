(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const b of u)if(b.type==="childList")for(const e of b.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(u){const b={};return u.integrity&&(b.integrity=u.integrity),u.referrerPolicy&&(b.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?b.credentials="include":u.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function n(u){if(u.ep)return;u.ep=!0;const b=t(u);fetch(u.href,b)}})();class ol{static EXTENSIONID="com.battle-system.rumble";static CLASHID="com.battle-system.clash";static OUTSIDEID="com.battle-system.friends";static MOBILEWIDTH=495}var Mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dt={exports:{}};(function(c,d){(function(t,n){c.exports=n()})(Mt,()=>(()=>{var t={95:(u,b,e)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiceRoller=void 0;const X=e(51);b.DiceRoller=class{constructor(s,l=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,s&&(this.randFunction=s),this.maxRollCount=l}parse(s){return X.parse(s)}roll(s){const l=X.parse(s);return this.rollType(l)}rollValue(s){return this.roll(s).value}rollParsed(s){return this.rollType(s)}rollType(s){let l;switch(s.type){case"diceExpression":l=this.rollDiceExpr(s);break;case"group":l=this.rollGroup(s);break;case"die":l=this.rollDie(s);break;case"expression":l=this.rollExpression(s);break;case"mathfunction":l=this.rollFunction(s);break;case"inline":l=this.rollType(s.expr);break;case"number":l=Object.assign(Object.assign({},s),{success:null,successes:0,failures:0,valid:!0,order:0});break;default:throw new Error(`Unable to render ${s.type}`)}return s.label&&(l.label=s.label),l}rollDiceExpr(s){const l=this.rollType(s.head),i=[l],G=[],h=s.ops.reduce((R,y,L)=>{const J=this.rollType(y.tail);switch(J.order=L,i.push(J),G.push(y.op),y.op){case"+":return R+J.value;case"-":return R-J.value;default:return R}},l.value);return{dice:i,ops:G,success:null,successes:0,failures:0,type:"diceexpressionroll",valid:!0,value:h,order:0}}rollGroup(s){let l=s.rolls.map((y,L)=>Object.assign(Object.assign({},this.rollType(y)),{order:L})),i=0,G=0,h=!1;if(s.mods){const y=s.mods,L=J=>(h=y.some(C=>["failure","success"].includes(C.type)),J=y.reduce((C,g)=>this.applyGroupMod(C,g),J),h&&(J=J.map(C=>(i+=C.successes,G+=C.failures,C.value=C.successes-C.failures,C.success=C.value>0,C))),J);if(l.length===1&&["die","diceexpressionroll"].includes(l[0].type)){const J=l[0];let C=J.type==="die"?J.rolls:J.dice.filter(g=>g.type!=="number").reduce((g,_)=>[...g,..._.type==="die"?_.rolls:_.dice],[]);C=L(C),J.value=C.reduce((g,_)=>_.valid?g+_.value:g,0)}else l=L(l)}const R=l.reduce((y,L)=>L.valid?y+L.value:y,0);return{dice:l,success:h?R>0:null,successes:i,failures:G,type:"grouproll",valid:!0,value:R,order:0}}rollDie(s){const l=this.rollType(s.count);if(l.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let i,G;s.die.type==="fate"?(G={type:"fate",success:null,successes:0,failures:0,valid:!1,value:0,order:0},i=Array.from({length:l.value},(C,g)=>this.generateFateRoll(g))):(G=this.rollType(s.die),i=Array.from({length:l.value},(C,g)=>this.generateDiceRoll(G.value,g))),s.mods&&(i=s.mods.reduce((C,g)=>this.applyMod(C,g),i));let h=0,R=0;s.targets&&(i=s.targets.reduce((C,g)=>this.applyMod(C,g),i).map(C=>(h+=C.successes,R+=C.failures,C.value=C.successes-C.failures,C.success=C.value>0,C)));let y=!1,L=0;if(s.match){const C=s.match,g=i.reduce(($,bl)=>$.set(bl.roll,($.get(bl.roll)||0)+1),new Map),_=new Set(Array.from(g.entries()).filter(([$,bl])=>bl>=C.min.value).filter(([$])=>!(C.mod&&C.expr)||this.successTest(C.mod,this.rollType(C.expr).value,$)).map(([$])=>$));i.filter($=>_.has($.roll)).forEach($=>$.matched=!0),C.count&&(y=!0,L=_.size)}s.sort&&(i=this.applySort(i,s.sort));const J=i.reduce((C,g)=>g.valid?C+g.value:C,0);return{count:l,die:G,rolls:i,success:s.targets?J>0:null,successes:h,failures:R,type:"die",valid:!0,value:y?L:J,order:0,matched:y}}rollExpression(s){const l=this.rollType(s.head),i=[l],G=[],h=s.ops.reduce((R,y)=>{const L=this.rollType(y.tail);switch(i.push(L),G.push(y.op),y.op){case"+":return R+L.value;case"-":return R-L.value;case"*":return R*L.value;case"/":return R/L.value;case"%":return R%L.value;case"**":return R**L.value;default:return R}},l.value);return{dice:i,ops:G,success:null,successes:0,failures:0,type:"expressionroll",valid:!0,value:h,order:0}}rollFunction(s){const l=this.rollType(s.expr);let i;switch(s.op){case"floor":i=Math.floor(l.value);break;case"ceil":i=Math.ceil(l.value);break;case"round":i=Math.round(l.value);break;case"abs":i=Math.abs(l.value);break;default:i=l.value}return{expr:l,op:s.op,success:null,successes:0,failures:0,type:"mathfunction",valid:!0,value:i,order:0}}applyGroupMod(s,l){return this.getGroupModMethod(l)(s)}getGroupModMethod(s){const l=i=>i.value;switch(s.type){case"success":return this.getSuccessMethod(s,l);case"failure":return this.getFailureMethod(s,l);case"keep":return this.getKeepMethod(s,l);case"drop":return this.getDropMethod(s,l);default:throw new Error(`Mod ${s.type} is not recognised`)}}applyMod(s,l){return this.getModMethod(l)(s)}getModMethod(s){const l=i=>i.roll;switch(s.type){case"success":return this.getSuccessMethod(s,l);case"failure":return this.getFailureMethod(s,l);case"crit":return this.getCritSuccessMethod(s,l);case"critfail":return this.getCritFailureMethod(s,l);case"keep":return i=>this.getKeepMethod(s,l)(i).sort((G,h)=>G.order-h.order);case"drop":return i=>this.getDropMethod(s,l)(i).sort((G,h)=>G.order-h.order);case"explode":return this.getExplodeMethod(s);case"compound":return this.getCompoundMethod(s);case"penetrate":return this.getPenetrateMethod(s);case"reroll":return this.getReRollMethod(s);case"rerollOnce":return this.getReRollOnceMethod(s);default:throw new Error(`Mod ${s.type} is not recognised`)}}applySort(s,l){return s.sort((i,G)=>l.asc?i.roll-G.roll:G.roll-i.roll),s.forEach((i,G)=>i.order=G),s}getCritSuccessMethod(s,l){const i=this.rollType(s.expr);return G=>G.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const R=h;return this.successTest(s.mod,i.value,l(h))?R.critical="success":R.critical==="success"&&(R.critical=null),h})}getCritFailureMethod(s,l){const i=this.rollType(s.expr);return G=>G.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const R=h;return this.successTest(s.mod,i.value,l(h))?R.critical="failure":R.critical==="failure"&&(R.critical=null),h})}getSuccessMethod(s,l){const i=this.rollType(s.expr);return G=>G.map(h=>(h.valid&&this.successTest(s.mod,i.value,l(h))&&(h.successes+=1),h))}getFailureMethod(s,l){const i=this.rollType(s.expr);return G=>G.map(h=>(h.valid&&this.successTest(s.mod,i.value,l(h))&&(h.failures+=1),h))}getKeepMethod(s,l){const i=this.rollType(s.expr);return G=>{if(G.length===0)return G;G=G.sort((J,C)=>s.highlow==="l"?l(C)-l(J):l(J)-l(C)).sort((J,C)=>(J.valid?1:0)-(C.valid?1:0));const h=Math.max(Math.min(i.value,G.length),0);let R=0,y=0;const L=G.reduce((J,C)=>(C.valid?1:0)+J,0)-h;for(;y<G.length&&R<L;)G[y].valid&&(G[y].valid=!1,G[y].drop=!0,R++),y++;return G}}getDropMethod(s,l){const i=this.rollType(s.expr);return G=>{G=G.sort((L,J)=>s.highlow==="h"?l(J)-l(L):l(L)-l(J));const h=Math.max(Math.min(i.value,G.length),0);let R=0,y=0;for(;y<G.length&&R<h;)G[y].valid&&(G[y].valid=!1,G[y].drop=!0,R++),y++;return G}}getExplodeMethod(s){const l=s.target?this.rollType(s.target.value):null;return i=>{const G=l?h=>this.successTest(s.target.mod,l.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(i[0].type==="roll"&&G({roll:1})&&G({roll:i[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<i.length;h++){let R=i[h];R.order=h;let y=0;for(;G(R)&&y++<1e3;){R.explode=!0;const L=this.reRoll(R,++h);i.splice(h,0,L),R=L}}return i}}getCompoundMethod(s){const l=s.target?this.rollType(s.target.value):null;return i=>{const G=l?h=>this.successTest(s.target.mod,l.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(i[0].type==="roll"&&G({roll:1})&&G({roll:i[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<i.length;h++){let R=i[h],y=R.roll,L=0;for(;G(R)&&L++<1e3;){R.explode=!0;const J=this.reRoll(R,h+1);y+=J.roll,R=J}i[h].value=y,i[h].roll=y}return i}}getPenetrateMethod(s){const l=s.target?this.rollType(s.target.value):null;return i=>{const G=l?h=>this.successTest(s.target.mod,l.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(l&&i[0].type==="roll"&&G(i[0])&&this.successTest(s.target.mod,l.value,1))throw new Error("Invalid reroll target");for(let h=0;h<i.length;h++){let R=i[h];R.order=h;let y=0;for(;G(R)&&y++<1e3;){R.explode=!0;const L=this.reRoll(R,++h);L.value-=1,i.splice(h,0,L),R=L}}return i}}getReRollMethod(s){const l=s.target?this.successTest.bind(null,s.target.mod,this.rollType(s.target.value).value):this.successTest.bind(null,"=",1);return i=>{if(i[0].type==="roll"&&l(1)&&l(i[0].die))throw new Error("Invalid reroll target");for(let G=0;G<i.length;G++)for(;l(i[G].roll);){i[G].reroll=!0,i[G].valid=!1;const h=this.reRoll(i[G],G+1);i.splice(++G,0,h)}return i}}getReRollOnceMethod(s){const l=s.target?this.successTest.bind(null,s.target.mod,this.rollType(s.target.value).value):this.successTest.bind(null,"=",1);return i=>{if(i[0].type==="roll"&&l(1)&&l(i[0].die))throw new Error("Invalid reroll target");for(let G=0;G<i.length;G++)if(l(i[G].roll)){i[G].reroll=!0,i[G].valid=!1;const h=this.reRoll(i[G],G+1);i.splice(++G,0,h)}return i}}successTest(s,l,i){switch(s){case">":return i>=l;case"<":return i<=l;default:return i==l}}reRoll(s,l){switch(s.type){case"roll":return this.generateDiceRoll(s.die,l);case"fateroll":return this.generateFateRoll(l);default:throw new Error(`Cannot do a reroll of a ${s.type}.`)}}generateDiceRoll(s,l){const i=parseInt((this.randFunction()*s).toFixed(),10)+1;return{critical:i===s?"success":i===1?"failure":null,die:s,matched:!1,order:l,roll:i,success:null,successes:0,failures:0,type:"roll",valid:!0,value:i}}generateFateRoll(s){const l=Math.floor(3*this.randFunction())-1;return{matched:!1,order:s,roll:l,success:null,successes:0,failures:0,type:"fateroll",valid:!0,value:l}}}},619:(u,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiscordRollRenderer=void 0,b.DiscordRollRenderer=class{render(e){return this.doRender(e,!0)}doRender(e,X=!1){let s="";switch(e.type){case"diceexpressionroll":s=this.renderGroupExpr(e);break;case"grouproll":s=this.renderGroup(e);break;case"die":s=this.renderDie(e);break;case"expressionroll":s=this.renderExpression(e);break;case"mathfunction":s=this.renderFunction(e);break;case"roll":return this.renderRoll(e);case"fateroll":return this.renderFateRoll(e);case"number":const l=e.label?` (${e.label})`:"";return`${e.value}${l}`;case"fate":return"F";default:throw new Error("Unable to render")}return e.valid||(s="~~"+s.replace(/~~/g,"")+"~~"),X?this.stripBrackets(s):e.label?`(${e.label}: ${s})`:s}renderGroup(e){const X=[];for(const s of e.dice)X.push(this.doRender(s));return X.length>1?`{ ${X.join(" + ")} } = ${e.value}`:`{ ${this.stripBrackets(X[0])} } = ${e.value}`}renderGroupExpr(e){const X=[];for(const s of e.dice)X.push(this.doRender(s));return X.length>1?`(${X.join(" + ")} = ${e.value})`:X[0]}renderDie(e){const X=[];for(const i of e.rolls)X.push(this.doRender(i));let s=`${X.join(", ")}`;["number","fate"].includes(e.die.type)&&e.count.type==="number"||(s+=`[*Rolling: ${this.doRender(e.count)}d${this.doRender(e.die)}*]`);const l=e.matched?" Match"+(e.value===1?"":"es"):"";return s+=` = ${e.value}${l}`,`(${s})`}renderExpression(e){if(e.dice.length>1){const X=[];for(let s=0;s<e.dice.length-1;s++)X.push(this.doRender(e.dice[s])),X.push(e.ops[s]);return X.push(this.doRender(e.dice.slice(-1)[0])),X.push("="),X.push(e.value+""),`(${X.join(" ")})`}return e.dice[0].type==="number"?e.value+"":this.doRender(e.dice[0])}renderFunction(e){const X=this.doRender(e.expr);return`(${e.op}${this.addBrackets(X)} = ${e.value})`}addBrackets(e){return e.startsWith("(")||(e=`(${e}`),e.endsWith(")")||(e=`${e})`),e}stripBrackets(e){return e.startsWith("(")&&(e=e.substring(1)),e.endsWith(")")&&(e=e.substring(0,e.length-1)),e}renderRoll(e){let X=`${e.roll}`;return e.valid?e.success&&e.value===1?X=`**${e.roll}**`:e.success&&e.value===-1?X=`*${e.roll}*`:e.success||e.critical!=="success"?e.success||e.critical!=="failure"||(X=`*${e.roll}*`):X=`**${e.roll}**`:X=`~~${e.roll}~~`,e.matched&&(X=`__${X}__`),X}renderFateRoll(e){const X=e.roll===0?"0":e.roll>0?"+":"-";let s=`${e.roll}`;return e.valid?e.success&&e.value===1?s=`**${X}**`:e.success&&e.value===-1&&(s=`*${X}*`):s=`~~${X}~~`,e.matched&&(s=`__${s}__`),s}}},607:function(u,b,e){var X=this&&this.__createBinding||(Object.create?function(l,i,G,h){h===void 0&&(h=G);var R=Object.getOwnPropertyDescriptor(i,G);R&&!("get"in R?!i.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return i[G]}}),Object.defineProperty(l,h,R)}:function(l,i,G,h){h===void 0&&(h=G),l[h]=i[G]}),s=this&&this.__exportStar||function(l,i){for(var G in l)G==="default"||Object.prototype.hasOwnProperty.call(i,G)||X(i,l,G)};Object.defineProperty(b,"__esModule",{value:!0}),s(e(95),b),s(e(604),b),s(e(234),b),s(e(619),b),s(e(54),b)},604:(u,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},234:(u,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},54:(u,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},51:u=>{function b(e,X,s,l){this.message=e,this.expected=X,this.found=s,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,b)}(function(e,X){function s(){this.constructor=e}s.prototype=X.prototype,e.prototype=new s})(b,Error),b.buildMessage=function(e,X){var s={literal:function(h){return'"'+i(h.text)+'"'},class:function(h){var R,y="";for(R=0;R<h.parts.length;R++)y+=h.parts[R]instanceof Array?G(h.parts[R][0])+"-"+G(h.parts[R][1]):G(h.parts[R]);return"["+(h.inverted?"^":"")+y+"]"},any:function(h){return"any character"},end:function(h){return"end of input"},other:function(h){return h.description}};function l(h){return h.charCodeAt(0).toString(16).toUpperCase()}function i(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+l(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+l(R)})}function G(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+l(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+l(R)})}return"Expected "+function(h){var R,y,L,J=new Array(h.length);for(R=0;R<h.length;R++)J[R]=(L=h[R],s[L.type](L));if(J.sort(),J.length>0){for(R=1,y=1;R<J.length;R++)J[R-1]!==J[R]&&(J[y]=J[R],y++);J.length=y}switch(J.length){case 1:return J[0];case 2:return J[0]+" or "+J[1];default:return J.slice(0,-1).join(", ")+", or "+J[J.length-1]}}(e)+" but "+function(h){return h?'"'+i(h)+'"':"end of input"}(X)+" found."},u.exports={SyntaxError:b,parse:function(e,X){X=X!==void 0?X:{};var s,l={},i={start:ue},G=ue,h={type:"any"},R=P("[[",!1),y=P("]]",!1),L=function(m,r){return r&&(m.label=r),m},J=">",C=P(">",!1),g="<",_=P("<",!1),$="=",bl=P("=",!1),Tl=P("f",!1),tl=P("cs",!1),Jl=P("cf",!1),wl=P("m",!1),Od=P("t",!1),_d=P("k",!1),qd=P("l",!1),yd=P("h",!1),vd=P("d",!1),ed=P("{",!1),$d=P(",",!1),Be=P("}",!1),td="+",cd=P("+",!1),we=P("s",!1),Ke=P("a",!1),Ee=P("!",!1),ge=P("!!",!1),Jd=P("!p",!1),le=P("r",!1),de=P("ro",!1),Ld=P("F",!1),Ul=P("%",!1),Sd=P("(",!1),Nd=P(")",!1),nd=P("-",!1),Fd=function(m,r){return r.length==0?m:{head:m,type:"expression",ops:r.map(W=>({type:"math",op:W[1],tail:W[3]}))}},ee=P("*",!1),te=P("/",!1),bd="**",ce=P("**",!1),Hd="floor",ne=P("floor",!1),be="ceil",ze=P("ceil",!1),xd="round",se=P("round",!1),Te=P("abs",!1),Ue=Il("integer"),Cd=/^[0-9]/,Bd=Kd([["0","9"]],!1,!1),a=P("[",!1),j=/^[^\]]/,kl=Kd(["]"],!0,!1),yl=P("]",!1),wd=Il("whitespace"),N=/^[ \t\n\r]/,k=Kd([" ","	",`
`,"\r"],!1,!1),o=0,D=0,Pl=[{line:1,column:1}],Wl=0,H=[],F=0;if("startRule"in X){if(!(X.startRule in i))throw new Error(`Can't start parsing from rule "`+X.startRule+'".');G=i[X.startRule]}function P(m,r){return{type:"literal",text:m,ignoreCase:r}}function Kd(m,r,W){return{type:"class",parts:m,inverted:r,ignoreCase:W}}function Il(m){return{type:"other",description:m}}function Ql(m){var r,W=Pl[m];if(W)return W;for(r=m-1;!Pl[r];)r--;for(W={line:(W=Pl[r]).line,column:W.column};r<m;)e.charCodeAt(r)===10?(W.line++,W.column=1):W.column++,r++;return Pl[m]=W,W}function Ed(m,r){var W=Ql(m),Y=Ql(r);return{start:{offset:m,line:W.line,column:W.column},end:{offset:r,line:Y.line,column:Y.column}}}function x(m){o<Wl||(o>Wl&&(Wl=o,H=[]),H.push(m))}function ue(){var m,r,W,Y,B,v;if(m=o,(r=Dl())!==l){for(W=[],e.length>o?(Y=e.charAt(o),o++):(Y=l,F===0&&x(h));Y!==l;)W.push(Y),e.length>o?(Y=e.charAt(o),o++):(Y=l,F===0&&x(h));W!==l?(D=m,v=W,(B=r).root=!0,v&&(B.label=v.join("")),m=r=B):(o=m,m=l)}else o=m,m=l;return m}function xl(){var m,r,W;return m=o,e.charCodeAt(o)===62?(r=J,o++):(r=l,F===0&&x(C)),r===l&&(e.charCodeAt(o)===60?(r=g,o++):(r=l,F===0&&x(_)),r===l&&(e.charCodeAt(o)===61?(r=$,o++):(r=l,F===0&&x(bl)))),r!==l&&(W=rl())!==l?(D=m,m=r={type:"success",mod:r,expr:W}):(o=m,m=l),m}function Cl(){var m,r,W,Y;return m=o,e.charCodeAt(o)===102?(r="f",o++):(r=l,F===0&&x(Tl)),r!==l?(e.charCodeAt(o)===62?(W=J,o++):(W=l,F===0&&x(C)),W===l&&(e.charCodeAt(o)===60?(W=g,o++):(W=l,F===0&&x(_)),W===l&&(e.charCodeAt(o)===61?(W=$,o++):(W=l,F===0&&x(bl)))),W===l&&(W=null),W!==l&&(Y=rl())!==l?(D=m,m=r={type:"failure",mod:W,expr:Y}):(o=m,m=l)):(o=m,m=l),m}function sd(){var m,r,W,Y;return m=o,e.substr(o,2)==="cs"?(r="cs",o+=2):(r=l,F===0&&x(tl)),r!==l?(e.charCodeAt(o)===62?(W=J,o++):(W=l,F===0&&x(C)),W===l&&(e.charCodeAt(o)===60?(W=g,o++):(W=l,F===0&&x(_)),W===l&&(e.charCodeAt(o)===61?(W=$,o++):(W=l,F===0&&x(bl)))),W===l&&(W=null),W!==l&&(Y=rl())!==l?(D=m,m=r={type:"crit",mod:W,expr:Y}):(o=m,m=l)):(o=m,m=l),m}function ud(){var m,r,W,Y;return m=o,e.substr(o,2)==="cf"?(r="cf",o+=2):(r=l,F===0&&x(Jl)),r!==l?(e.charCodeAt(o)===62?(W=J,o++):(W=l,F===0&&x(C)),W===l&&(e.charCodeAt(o)===60?(W=g,o++):(W=l,F===0&&x(_)),W===l&&(e.charCodeAt(o)===61?(W=$,o++):(W=l,F===0&&x(bl)))),W===l&&(W=null),W!==l&&(Y=rl())!==l?(D=m,m=r={type:"critfail",mod:W,expr:Y}):(o=m,m=l)):(o=m,m=l),m}function jl(){var m,r,W,Y;return m=o,e.charCodeAt(o)===107?(r="k",o++):(r=l,F===0&&x(_d)),r!==l?(e.charCodeAt(o)===108?(W="l",o++):(W=l,F===0&&x(qd)),W===l&&(e.charCodeAt(o)===104?(W="h",o++):(W=l,F===0&&x(yd))),W===l&&(W=null),W!==l?((Y=rl())===l&&(Y=null),Y!==l?(D=m,m=r={type:"keep",highlow:W,expr:Y||V}):(o=m,m=l)):(o=m,m=l)):(o=m,m=l),m}function Ml(){var m,r,W,Y;return m=o,e.charCodeAt(o)===100?(r="d",o++):(r=l,F===0&&x(vd)),r!==l?(e.charCodeAt(o)===108?(W="l",o++):(W=l,F===0&&x(qd)),W===l&&(e.charCodeAt(o)===104?(W="h",o++):(W=l,F===0&&x(yd))),W===l&&(W=null),W!==l?((Y=rl())===l&&(Y=null),Y!==l?(D=m,m=r={type:"drop",highlow:W,expr:Y||V}):(o=m,m=l)):(o=m,m=l)):(o=m,m=l),m}function id(){var m,r,W,Y,B,v,w,T,E,z;if(m=o,(r=Xd())!==l){for(W=[],Y=o,(B=Z())!==l?(e.charCodeAt(o)===43?(v=td,o++):(v=l,F===0&&x(cd)),v!==l&&(w=Z())!==l&&(T=Xd())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);Y!==l;)W.push(Y),Y=o,(B=Z())!==l?(e.charCodeAt(o)===43?(v=td,o++):(v=l,F===0&&x(cd)),v!==l&&(w=Z())!==l&&(T=Xd())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);W!==l?(D=m,E=r,m=r=(z=W).length==0?E:{head:E,type:"diceExpression",ops:z.map(U=>({type:"math",op:U[1],tail:U[3]}))}):(o=m,m=l)}else o=m,m=l;return m}function Xd(){var m;return(m=gd())===l&&(m=Dl()),m}function gd(){var m,r,W;return m=o,r=function(){var Y,B,v,w,T;if(Y=o,B=function(){var E,z,U,M,I,Q;if(E=o,z=function(){var O,sl,el,ul;return O=o,(sl=rl())===l&&(sl=null),sl!==l?(e.charCodeAt(o)===100?(el="d",o++):(el=l,F===0&&x(vd)),el!==l?(ul=function(){var Rl,cl;return Rl=o,e.charCodeAt(o)===70?(cl="F",o++):(cl=l,F===0&&x(Ld)),cl===l&&(e.charCodeAt(o)===102?(cl="f",o++):(cl=l,F===0&&x(Tl))),cl!==l&&(D=Rl,cl={type:"fate"}),cl}(),ul===l&&(ul=function(){var Rl,cl;return Rl=o,e.charCodeAt(o)===37?(cl="%",o++):(cl=l,F===0&&x(Ul)),cl!==l&&(D=Rl,cl={type:"number",value:"100"}),cl}(),ul===l&&(ul=rl())),ul!==l?(D=O,O=sl={die:ul,count:sl||{type:"number",value:1},type:"die"}):(o=O,O=l)):(o=O,O=l)):(o=O,O=l),O}(),z!==l){for(U=[],(M=Kl())===l&&(M=Vl())===l&&(M=zd())===l&&(M=ad())===l&&(M=od());M!==l;)U.push(M),(M=Kl())===l&&(M=Vl())===l&&(M=zd())===l&&(M=ad())===l&&(M=od());U!==l?(D=E,Q=U,(I=z).mods=(I.mods||[]).concat(Q),E=z=I):(o=E,E=l)}else o=E,E=l;return E}(),B!==l){for(v=[],(w=Ml())===l&&(w=jl())===l&&(w=xl())===l&&(w=Cl())===l&&(w=ud())===l&&(w=sd());w!==l;)v.push(w),(w=Ml())===l&&(w=jl())===l&&(w=xl())===l&&(w=Cl())===l&&(w=ud())===l&&(w=sd());v!==l?((w=function(){var E,z,U,M,I;return E=o,e.charCodeAt(o)===109?(z="m",o++):(z=l,F===0&&x(wl)),z!==l?(e.charCodeAt(o)===116?(U="t",o++):(U=l,F===0&&x(Od)),U===l&&(U=null),U!==l?((M=md())===l&&(M=null),M!==l?(I=function(){var Q,O,sl;return Q=o,e.charCodeAt(o)===62?(O=J,o++):(O=l,F===0&&x(C)),O===l&&(e.charCodeAt(o)===60?(O=g,o++):(O=l,F===0&&x(_)),O===l&&(e.charCodeAt(o)===61?(O=$,o++):(O=l,F===0&&x(bl)))),O!==l&&(sl=rl())!==l?(D=Q,Q=O={mod:O,expr:sl}):(o=Q,Q=l),Q}(),I===l&&(I=null),I!==l?(D=E,E=z=function(Q,O,sl){const el={type:"match",min:O||{type:"number",value:2},count:!!Q};return sl&&(el.mod=sl.mod,el.expr=sl.expr),el}(U,M,I)):(o=E,E=l)):(o=E,E=l)):(o=E,E=l)):(o=E,E=l),E}())===l&&(w=null),w!==l?(T=function(){var E,z,U;return E=o,e.charCodeAt(o)===115?(z="s",o++):(z=l,F===0&&x(we)),z!==l?(e.charCodeAt(o)===97?(U="a",o++):(U=l,F===0&&x(Ke)),U===l&&(e.charCodeAt(o)===100?(U="d",o++):(U=l,F===0&&x(vd))),U===l&&(U=null),U!==l?(D=E,E=z=U=="d"?{type:"sort",asc:!1}:{type:"sort",asc:!0}):(o=E,E=l)):(o=E,E=l),E}(),T===l&&(T=null),T!==l?(D=Y,Y=B=function(E,z,U,M){const I=z.filter(Q=>["success","failure"].includes(Q.type));return z=z.filter(Q=>!I.includes(Q)),E.mods=(E.mods||[]).concat(z),I.length>0&&(E.targets=I),U&&(E.match=U),M&&(E.sort=M),E}(B,v,w,T)):(o=Y,Y=l)):(o=Y,Y=l)):(o=Y,Y=l)}else o=Y,Y=l;return Y}(),r!==l&&Z()!==l?((W=_l())===l&&(W=null),W!==l?(D=m,m=r=L(r,W)):(o=m,m=l)):(o=m,m=l),m}function zd(){var m,r,W;return m=o,e.charCodeAt(o)===33?(r="!",o++):(r=l,F===0&&x(Ee)),r!==l?((W=Bl())===l&&(W=null),W!==l?(D=m,m=r={type:"explode",target:W}):(o=m,m=l)):(o=m,m=l),m}function Kl(){var m,r,W;return m=o,e.substr(o,2)==="!!"?(r="!!",o+=2):(r=l,F===0&&x(ge)),r!==l?((W=Bl())===l&&(W=null),W!==l?(D=m,m=r={type:"compound",target:W}):(o=m,m=l)):(o=m,m=l),m}function Vl(){var m,r,W;return m=o,e.substr(o,2)==="!p"?(r="!p",o+=2):(r=l,F===0&&x(Jd)),r!==l?((W=Bl())===l&&(W=null),W!==l?(D=m,m=r={type:"penetrate",target:W}):(o=m,m=l)):(o=m,m=l),m}function od(){var m,r,W;return m=o,e.charCodeAt(o)===114?(r="r",o++):(r=l,F===0&&x(le)),r!==l?((W=Bl())===l&&(W=null),W!==l?(D=m,m=r={type:"reroll",target:W||p}):(o=m,m=l)):(o=m,m=l),m}function ad(){var m,r,W;return m=o,e.substr(o,2)==="ro"?(r="ro",o+=2):(r=l,F===0&&x(de)),r!==l?((W=Bl())===l&&(W=null),W!==l?(D=m,m=r={type:"rerollOnce",target:W||p}):(o=m,m=l)):(o=m,m=l),m}function Bl(){var m,r,W;return m=o,e.charCodeAt(o)===62?(r=J,o++):(r=l,F===0&&x(C)),r===l&&(e.charCodeAt(o)===60?(r=g,o++):(r=l,F===0&&x(_)),r===l&&(e.charCodeAt(o)===61?(r=$,o++):(r=l,F===0&&x(bl)))),r===l&&(r=null),r!==l&&(W=rl())!==l?(D=m,m=r={type:"target",mod:r,value:W}):(o=m,m=l),m}function rl(){var m;return(m=Td())===l&&(m=md()),m}function Dl(){var m;return(m=function(){var r,W,Y,B;return r=o,e.substr(o,2)==="[["?(W="[[",o+=2):(W=l,F===0&&x(R)),W!==l&&(Y=Dl())!==l?(e.substr(o,2)==="]]"?(B="]]",o+=2):(B=l,F===0&&x(y)),B!==l?(D=r,r=W={type:"inline",expr:Y}):(o=r,r=l)):(o=r,r=l),r}())===l&&(m=Al())===l&&(m=Td()),m}function Td(){var m,r,W,Y,B,v,w;return m=o,e.charCodeAt(o)===40?(r="(",o++):(r=l,F===0&&x(Sd)),r!==l&&(W=Al())!==l?(e.charCodeAt(o)===41?(Y=")",o++):(Y=l,F===0&&x(Nd)),Y!==l&&Z()!==l?((B=_l())===l&&(B=null),B!==l?(D=m,v=W,(w=B)&&(v.label=w),m=r=v):(o=m,m=l)):(o=m,m=l)):(o=m,m=l),m}function Al(){var m,r,W,Y,B,v,w,T;if(m=o,(r=Ol())!==l){for(W=[],Y=o,(B=Z())!==l?(e.charCodeAt(o)===43?(v=td,o++):(v=l,F===0&&x(cd)),v===l&&(e.charCodeAt(o)===45?(v="-",o++):(v=l,F===0&&x(nd))),v!==l&&(w=Z())!==l&&(T=Ol())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);Y!==l;)W.push(Y),Y=o,(B=Z())!==l?(e.charCodeAt(o)===43?(v=td,o++):(v=l,F===0&&x(cd)),v===l&&(e.charCodeAt(o)===45?(v="-",o++):(v=l,F===0&&x(nd))),v!==l&&(w=Z())!==l&&(T=Ol())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);W!==l?(D=m,m=r=Fd(r,W)):(o=m,m=l)}else o=m,m=l;return m}function Ol(){var m,r,W,Y,B,v,w,T;if(m=o,(r=El())!==l){for(W=[],Y=o,(B=Z())!==l?(e.charCodeAt(o)===42?(v="*",o++):(v=l,F===0&&x(ee)),v===l&&(e.charCodeAt(o)===47?(v="/",o++):(v=l,F===0&&x(te))),v!==l&&(w=Z())!==l&&(T=El())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);Y!==l;)W.push(Y),Y=o,(B=Z())!==l?(e.charCodeAt(o)===42?(v="*",o++):(v=l,F===0&&x(ee)),v===l&&(e.charCodeAt(o)===47?(v="/",o++):(v=l,F===0&&x(te))),v!==l&&(w=Z())!==l&&(T=El())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);W!==l?(D=m,m=r=Fd(r,W)):(o=m,m=l)}else o=m,m=l;return m}function El(){var m,r,W,Y,B,v,w,T;if(m=o,(r=A())!==l){for(W=[],Y=o,(B=Z())!==l?(e.substr(o,2)===bd?(v=bd,o+=2):(v=l,F===0&&x(ce)),v===l&&(e.charCodeAt(o)===37?(v="%",o++):(v=l,F===0&&x(Ul))),v!==l&&(w=Z())!==l&&(T=A())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);Y!==l;)W.push(Y),Y=o,(B=Z())!==l?(e.substr(o,2)===bd?(v=bd,o+=2):(v=l,F===0&&x(ce)),v===l&&(e.charCodeAt(o)===37?(v="%",o++):(v=l,F===0&&x(Ul))),v!==l&&(w=Z())!==l&&(T=A())!==l?Y=B=[B,v,w,T]:(o=Y,Y=l)):(o=Y,Y=l);W!==l?(D=m,m=r=Fd(r,W)):(o=m,m=l)}else o=m,m=l;return m}function A(){var m;return(m=function(){var r,W,Y,B,v;return r=o,W=function(){var w;return e.substr(o,5)===Hd?(w=Hd,o+=5):(w=l,F===0&&x(ne)),w===l&&(e.substr(o,4)===be?(w=be,o+=4):(w=l,F===0&&x(ze)),w===l&&(e.substr(o,5)===xd?(w=xd,o+=5):(w=l,F===0&&x(se)),w===l&&(e.substr(o,3)==="abs"?(w="abs",o+=3):(w=l,F===0&&x(Te))))),w}(),W!==l&&Z()!==l?(e.charCodeAt(o)===40?(Y="(",o++):(Y=l,F===0&&x(Sd)),Y!==l&&Z()!==l&&(B=Al())!==l&&Z()!==l?(e.charCodeAt(o)===41?(v=")",o++):(v=l,F===0&&x(Nd)),v!==l?(D=r,r=W={type:"mathfunction",op:W,expr:B}):(o=r,r=l)):(o=r,r=l)):(o=r,r=l),r}())===l&&(m=function(){var r,W,Y;return r=o,W=function(){var B,v,w,T,E,z,U,M;if(B=o,v=function(){var I,Q,O,sl,el,ul,Rl,cl,ie;if(I=o,e.charCodeAt(o)===123?(Q="{",o++):(Q=l,F===0&&x(ed)),Q!==l)if(Z()!==l)if((O=id())!==l){for(sl=[],el=o,(ul=Z())!==l?(e.charCodeAt(o)===44?(Rl=",",o++):(Rl=l,F===0&&x($d)),Rl!==l&&(cl=Z())!==l&&(ie=id())!==l?el=ul=[ul,Rl,cl,ie]:(o=el,el=l)):(o=el,el=l);el!==l;)sl.push(el),el=o,(ul=Z())!==l?(e.charCodeAt(o)===44?(Rl=",",o++):(Rl=l,F===0&&x($d)),Rl!==l&&(cl=Z())!==l&&(ie=id())!==l?el=ul=[ul,Rl,cl,ie]:(o=el,el=l)):(o=el,el=l);sl!==l&&(el=Z())!==l?(e.charCodeAt(o)===125?(ul="}",o++):(ul=l,F===0&&x(Be)),ul!==l?(D=I,I=Q={rolls:[O,...sl.map(Zc=>Zc[3])],type:"group"}):(o=I,I=l)):(o=I,I=l)}else o=I,I=l;else o=I,I=l;else o=I,I=l;return I}(),v!==l){for(w=[],(T=jl())===l&&(T=Ml())===l&&(T=xl())===l&&(T=Cl());T!==l;)w.push(T),(T=jl())===l&&(T=Ml())===l&&(T=xl())===l&&(T=Cl());w!==l&&(T=Z())!==l?((E=_l())===l&&(E=null),E!==l?(D=B,z=v,M=E,(U=w).length>0&&(z.mods=(z.mods||[]).concat(U)),M&&(z.label=M),B=v=z):(o=B,B=l)):(o=B,B=l)}else o=B,B=l;return B}(),W===l&&(W=gd())===l&&(W=md()),W!==l&&Z()!==l?((Y=_l())===l&&(Y=null),Y!==l?(D=r,r=W=L(W,Y)):(o=r,r=l)):(o=r,r=l),r}())===l&&(m=Td()),m}function md(){var m,r,W,Y;if(F++,m=o,e.charCodeAt(o)===45?(r="-",o++):(r=l,F===0&&x(nd)),r===l&&(r=null),r!==l){if(W=[],Cd.test(e.charAt(o))?(Y=e.charAt(o),o++):(Y=l,F===0&&x(Bd)),Y!==l)for(;Y!==l;)W.push(Y),Cd.test(e.charAt(o))?(Y=e.charAt(o),o++):(Y=l,F===0&&x(Bd));else W=l;W!==l?(D=m,m=r={type:"number",value:parseInt(e.substring(D,o),10)}):(o=m,m=l)}else o=m,m=l;return F--,m===l&&(r=l,F===0&&x(Ue)),m}function _l(){var m,r,W,Y;if(m=o,e.charCodeAt(o)===91?(r="[",o++):(r=l,F===0&&x(a)),r!==l){if(W=[],j.test(e.charAt(o))?(Y=e.charAt(o),o++):(Y=l,F===0&&x(kl)),Y!==l)for(;Y!==l;)W.push(Y),j.test(e.charAt(o))?(Y=e.charAt(o),o++):(Y=l,F===0&&x(kl));else W=l;W!==l?(e.charCodeAt(o)===93?(Y="]",o++):(Y=l,F===0&&x(yl)),Y!==l?(D=m,m=r=W.join("")):(o=m,m=l)):(o=m,m=l)}else o=m,m=l;return m}function Z(){var m,r;for(F++,m=[],N.test(e.charAt(o))?(r=e.charAt(o),o++):(r=l,F===0&&x(k));r!==l;)m.push(r),N.test(e.charAt(o))?(r=e.charAt(o),o++):(r=l,F===0&&x(k));return F--,m===l&&(r=l,F===0&&x(wd)),m}const p={type:"target",mod:"=",value:{type:"number",value:1}},V={type:"number",value:1};if((s=G())!==l&&o===e.length)return s;throw s!==l&&o<e.length&&x({type:"end"}),f=H,K=Wl<e.length?e.charAt(Wl):null,S=Wl<e.length?Ed(Wl,Wl+1):Ed(Wl,Wl),new b(b.buildMessage(f,K),f,K,S);var f,K,S}}}},n={};return function u(b){var e=n[b];if(e!==void 0)return e.exports;var X=n[b]={exports:{}};return t[b].call(X.exports,X,X.exports,u),X.exports}(607)})())})(Dt);var Gc=Dt.exports;let ke=0;class hc{constructor(d={}){this.rollsAsFloats=[],this.dieGroups=[],this.parsedNotation=null,this.finalResults=null,this.targetRollsCritSuccess=d?.targetRollsCritSuccess||d?.targetRollsCrit||!1,this.targetRollsCritFailure=d?.targetRollsCritFailure||d?.targetRollsCrit||!1,this.initParser()}initParser(){this.rollParser=new Gc.DiceRoller((d=this.rollsAsFloats)=>d.length>0?d[ke++]:(console.warn("No result was passed to the dice-roller-parser. Using fallback Math.random"),Math.random()))}parseNotation(d){this.clear(),d=d.replace(/d00/,"d%"),this.parsedNotation=this.rollParser.parse(d);const t=n=>{const u=n.die.value||n.die.type;this.dieGroups.push({qty:n.count.value,sides:u,mods:n.mods})};return this.recursiveSearch(this.parsedNotation,"die",[],t),this.dieGroups}rollNotation(d){return this.finalResults=this.rollParser.rollParsed(d),this.finalResults}clear(){ke=0,this.rollsAsFloats=[],this.dieGroups=[],this.parsedNotation=null,this.finalResults=null}recursiveSearch(d,t,n=[],u){const b=n;return Object.keys(d).forEach(e=>{const X=d[e];e===t?(b.push(X),u&&typeof u=="function"&&u(d)):X&&typeof X=="object"&&this.recursiveSearch(X,t,b,u)}),b}incrementId(d){d=d.toString();let t=d.split(".");return t[1]?t[1]=parseInt(t[1])+1:t[1]=1,t[0]+"."+t[1]}handleRerolls(d=[]){const t=[];return d.forEach((n,u)=>{if(n.mods?.length>0){const b=(s,l,i)=>{switch(l){case">":return s>=i;case"<":return s<=i;case"=":default:return s==i}},e=n.rolls.map(s=>s.rollId),X=s=>{const l=this.incrementId(s);return e.includes(l)};n.mods.forEach(s=>{const l={...n.rolls};switch(s.type){case"explode":case"compound":Object.entries(l).forEach(([i,G])=>{const h=G.sides,R=s.target?.value?.value||h,y=s.target?.mod||">";b(G.value,y,R)&&!X(G.rollId)&&t.push({groupId:u,rollId:this.incrementId(G.rollId),sides:G.sides,qty:1})});break;case"penetrate":Object.entries(l).forEach(([i,G])=>{const h=G.sides,R=s.target?.value?.value||h,y=s.target?.mod||"=";b(G.value,y,R)&&!X(G.rollId)&&t.push({groupId:u,rollId:this.incrementId(G.rollId),sides:G.sides,qty:1})});break;case"reroll":Object.entries(l).forEach(([i,G])=>{G.sides,b(G.value,s.target.mod,s.target.value.value)&&!X(G.rollId)&&t.push({groupId:u,rollId:this.incrementId(G.rollId),sides:G.sides,qty:1})});break;case"rerollOnce":Object.entries(l).forEach(([i,G])=>{const h=s.target?.value?.value,R=s.target.mod;b(G.value,R,h)&&!X(G.rollId)&&!G.rollId.toString().includes(".")&&t.push({groupId:u,rollId:this.incrementId(G.rollId),sides:G.sides,qty:1})});break}})}}),t}handleTargetCritSuccess(d=[]){d.rolls.forEach(t=>{t.successes>=1&&t.critical==="success"&&(t.successes+=1,d.value+=1)})}handleTargetCritFailure(d=[]){d.rolls.forEach(t=>{t.failures>=1&&t.critical==="failure"&&(t.failures+=1,d.value-=1)})}parseFinalResults(d=[]){let t=this.recursiveSearch(d,"rolls");(t.length?t:[d]).forEach(b=>Object.entries(b).forEach(([e,X])=>{try{let s=X.sides;const l=/[dD]\d+/i;typeof s=="string"&&s.match(l)&&(s=parseInt(X.sides.substring(1))),s&&(s==="fate"?this.rollsAsFloats.push((X.value+2)*.25):this.rollsAsFloats.push((X.value-1)/s))}catch{throw console.error("This object is not a properly formatted roll object.",X),new Error("Unable to parse final results")}}));const u=this.rollParser.rollParsed(this.parsedNotation);return this.targetRollsCritSuccess&&u.success!==null&&this.handleTargetCritSuccess(u),this.targetRollsCritFailure&&u.success!==null&&this.handleTargetCritFailure(u),this.finalResults=u,ke=0,this.rollsAsFloats=[],u}}const Xe=()=>{},Rt={d4:{count:0},d6:{count:0},d8:{count:0},d10:{count:0},d12:{count:0},d20:{count:0},d100:{count:0}};function Wt(c){return JSON.parse(JSON.stringify(c))}class rc{baseMessage;target;elem;output;onSubmit;onClear;onReroll;onResults;DRP=new hc;notation=Wt(Rt);constructor(d){const t=window.innerWidth<ol.MOBILEWIDTH;this.baseMessage="Use Buttons to Roll",this.target=d.target?document.querySelector(d.target):document.body,this.elem=this.elem=document.createRange().createContextualFragment(`
            <div class="dice-picker">
                <form>
                    <div class="dice${t?" center":""}">
                        <button class="button-47" value="d4">${t?"4":"D4"}</button>
                        <button class="button-47" value="d6">${t?"6":"D6"}</button>
                        <button class="button-47" value="d8">${t?"8":"D8"}</button>
                        ${t?"</br>":""}
                        <button class="button-47" value="d10">${t?"10":"D10"}</button>
                        <button class="button-47" value="d12">${t?"12":"D12"}</button>
                        <button class="button-47" value="d20">${t?"20":"D20"}</button>
                        <button class="button-47" value="d100">${t?"100":"D100"}</button>
                    </div>
                    <div id="buttonContainer">
                        <button id="resetButton" class="button-47" type="reset">${t?"ðŸš«":"Clear"}</button>
                        <button id="throwButton" class="button-47"type="submit">${t?"ðŸŽ²":"Throw"}</button>
                        <div id="diceNotes" class="output">${this.baseMessage}</div>
                    </div>
                </form>
            </div>
            `),this.onSubmit=d?.onSubmit||Xe,this.onClear=d?.onClear||Xe,this.onReroll=d?.onReroll||Xe,this.onResults=d?.onResults||Xe,this.output=null,this.Initialize()}Initialize(){this.output=this.elem.querySelector(".output");const d=this.elem.querySelector("form"),t=this.elem.querySelectorAll(".dice button");t.forEach(n=>n.addEventListener("click",u=>{u.preventDefault(),this.notation[n.value].count+=1,this.updateNotation(!1)})),t.forEach(n=>n.addEventListener("contextmenu",u=>{u.preventDefault(),this.notation[n.value].count>0&&(this.notation[n.value].count-=1,this.updateNotation(!1))})),d.addEventListener("submit",n=>{n.preventDefault(),this.output.innerHTML!="Use Buttons to Roll"&&this.onSubmit(this.DRP.parseNotation(this.output.innerHTML))}),d.addEventListener("reset",n=>{n.preventDefault(),this.updateNotation(!0)}),this.target.prepend(this.elem)}updateNotation(d){let t="";d?(this.clear(),t=this.baseMessage):t=Object.entries(this.notation).reduce((n,[u,b])=>{let e=b,X="";return n!==""&&(X=" + "),e.count===0?n:n+X+e.count+u},""),this.output.innerHTML=t}setNotation(d={}){this.notation=d,this.updateNotation(!1)}clear(){this.notation=Wt(Rt),this.DRP.clear(),this.onClear()}handleResults(d){const t=/[dD]\d+/i;d.forEach(e=>{typeof e.sides=="string"&&e.sides.match(t)&&(e.sides=parseInt(e.sides.substring(1))),e.rolls.forEach(X=>{typeof X.sides=="string"&&X.sides.match(t)&&(X.sides=parseInt(X.sides.substring(1)))})});const n=this.DRP.handleRerolls(d);if(n.length)return this.onReroll(n),n;const u=this.DRP.parsedNotation?this.DRP.parseFinalResults(d):d,b=new CustomEvent("resultsAvailable",{detail:u});return document.dispatchEvent(b),this.onResults(u),u}ready(){console.log("Dice UI Ready.")}}var At={exports:{}};(function(c,d){(function(t,n){c.exports=n()})(Mt,function(){return function(t){var n={};function u(b){if(n[b])return n[b].exports;var e=n[b]={i:b,l:!1,exports:{}};return t[b].call(e.exports,e,e.exports,u),e.l=!0,e.exports}return u.m=t,u.c=n,u.d=function(b,e,X){u.o(b,e)||Object.defineProperty(b,e,{enumerable:!0,get:X})},u.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},u.t=function(b,e){if(1&e&&(b=u(b)),8&e||4&e&&typeof b=="object"&&b&&b.__esModule)return b;var X=Object.create(null);if(u.r(X),Object.defineProperty(X,"default",{enumerable:!0,value:b}),2&e&&typeof b!="string")for(var s in b)u.d(X,s,function(l){return b[l]}.bind(null,s));return X},u.n=function(b){var e=b&&b.__esModule?function(){return b.default}:function(){return b};return u.d(e,"a",e),e},u.o=function(b,e){return Object.prototype.hasOwnProperty.call(b,e)},u.p="",u(u.s=0)}([function(t,n,u){function b(e){for(var X in e)n.hasOwnProperty(X)||(n[X]=e[X])}Object.defineProperty(n,"__esModule",{value:!0}),b(u(1)),b(u(3))},function(t,n,u){Object.defineProperty(n,"__esModule",{value:!0});const b=u(2);n.DiceRoller=class{constructor(e,X=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,e&&(this.randFunction=e),this.maxRollCount=X}parse(e){return b.parse(e)}roll(e){const X=b.parse(e);return this.rollType(X)}rollValue(e){return this.roll(e).value}rollParsed(e){return this.rollType(e)}rollType(e){let X;switch(e.type){case"diceExpression":X=this.rollDiceExpr(e);break;case"group":X=this.rollGroup(e);break;case"die":X=this.rollDie(e);break;case"expression":X=this.rollExpression(e);break;case"mathfunction":X=this.rollFunction(e);break;case"inline":X=this.rollType(e.expr);break;case"number":X=Object.assign(Object.assign({},e),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${e.type}`)}return e.label&&(X.label=e.label),X}rollDiceExpr(e){const X=this.rollType(e.head),s=[X],l=[],i=e.ops.reduce((G,h,R)=>{const y=this.rollType(h.tail);switch(y.order=R,s.push(y),l.push(h.op),h.op){case"+":return G+y.value;case"-":return G-y.value;default:return G}},X.value);return{dice:s,ops:l,success:!1,type:"diceexpressionroll",valid:!0,value:i,order:0}}rollGroup(e){let X=e.rolls.map((s,l)=>Object.assign(Object.assign({},this.rollType(s)),{order:l}));if(e.mods){const s=e.mods,l=i=>{const G=s.some(h=>["failure","success"].includes(h.type));return i=s.reduce((h,R)=>this.applyGroupMod(h,R),i),G&&(i=i.map(h=>(h.success||(h.value=0,h.success=!0),h))),i};if(X.length===1&&["die","diceexpressionroll"].includes(X[0].type)){const i=X[0];let G=i.type==="die"?i.rolls:i.dice.filter(h=>h.type!=="number").reduce((h,R)=>[...h,...R.type==="die"?R.rolls:R.dice],[]);G=l(G),i.value=G.reduce((h,R)=>R.valid?h+R.value:h,0)}else X=l(X)}return{dice:X,success:!1,type:"grouproll",valid:!0,value:X.reduce((s,l)=>l.valid?s+l.value:s,0),order:0}}rollDie(e){const X=this.rollType(e.count);if(X.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let s,l;e.die.type==="fate"?(l={type:"fate",success:!1,valid:!1,value:0,order:0},s=Array.from({length:X.value},(h,R)=>this.generateFateRoll(R))):(l=this.rollType(e.die),s=Array.from({length:X.value},(h,R)=>this.generateDiceRoll(l.value,R))),e.mods&&(s=e.mods.reduce((h,R)=>this.applyMod(h,R),s)),e.targets&&(s=e.targets.reduce((h,R)=>this.applyMod(h,R),s).map(h=>(h.success||(h.value=0,h.success=!0),h)));let i=!1,G=0;if(e.match){const h=e.match,R=s.reduce((L,J)=>L.set(J.roll,(L.get(J.roll)||0)+1),new Map),y=new Set(Array.from(R.entries()).filter(([L,J])=>J>=h.min.value).filter(([L])=>!(h.mod&&h.expr)||this.successTest(h.mod,this.rollType(h.expr).value,L)).map(([L])=>L));s.filter(L=>y.has(L.roll)).forEach(L=>L.matched=!0),h.count&&(i=!0,G=y.size)}return e.sort&&(s=this.applySort(s,e.sort)),{count:X,die:l,rolls:s,success:!1,type:"die",valid:!0,value:i?G:s.reduce((h,R)=>R.valid?h+R.value:h,0),order:0,matched:i}}rollExpression(e){const X=this.rollType(e.head),s=[X],l=[],i=e.ops.reduce((G,h)=>{const R=this.rollType(h.tail);switch(s.push(R),l.push(h.op),h.op){case"+":return G+R.value;case"-":return G-R.value;case"*":return G*R.value;case"/":return G/R.value;case"%":return G%R.value;case"**":return G**R.value;default:return G}},X.value);return{dice:s,ops:l,success:!1,type:"expressionroll",valid:!0,value:i,order:0}}rollFunction(e){const X=this.rollType(e.expr);let s;switch(e.op){case"floor":s=Math.floor(X.value);break;case"ceil":s=Math.ceil(X.value);break;case"round":s=Math.round(X.value);break;case"abs":s=Math.abs(X.value);break;default:s=X.value}return{expr:X,op:e.op,success:!1,type:"mathfunction",valid:!0,value:s,order:0}}applyGroupMod(e,X){return this.getGroupModMethod(X)(e)}getGroupModMethod(e){const X=s=>s.value;switch(e.type){case"success":return this.getSuccessMethod(e,X);case"failure":return this.getFailureMethod(e,X);case"keep":return this.getKeepMethod(e,X);case"drop":return this.getDropMethod(e,X);default:throw new Error(`Mod ${e.type} is not recognised`)}}applyMod(e,X){return this.getModMethod(X)(e)}getModMethod(e){const X=s=>s.roll;switch(e.type){case"success":return this.getSuccessMethod(e,X);case"failure":return this.getFailureMethod(e,X);case"crit":return this.getCritSuccessMethod(e,X);case"critfail":return this.getCritFailureMethod(e,X);case"keep":return s=>this.getKeepMethod(e,X)(s).sort((l,i)=>l.order-i.order);case"drop":return s=>this.getDropMethod(e,X)(s).sort((l,i)=>l.order-i.order);case"explode":return this.getExplodeMethod(e);case"compound":return this.getCompoundMethod(e);case"penetrate":return this.getPenetrateMethod(e);case"reroll":return this.getReRollMethod(e);case"rerollOnce":return this.getReRollOnceMethod(e);default:throw new Error(`Mod ${e.type} is not recognised`)}}applySort(e,X){return e.sort((s,l)=>X.asc?s.roll-l.roll:l.roll-s.roll),e.forEach((s,l)=>s.order=l),e}getCritSuccessMethod(e,X){const s=this.rollType(e.expr);return l=>l.map(i=>{if(!i.valid||i.type!=="roll"||i.success)return i;const G=i;return this.successTest(e.mod,s.value,X(i))?G.critical="success":G.critical==="success"&&(G.critical=null),i})}getCritFailureMethod(e,X){const s=this.rollType(e.expr);return l=>l.map(i=>{if(!i.valid||i.type!=="roll"||i.success)return i;const G=i;return this.successTest(e.mod,s.value,X(i))?G.critical="failure":G.critical==="failure"&&(G.critical=null),i})}getSuccessMethod(e,X){const s=this.rollType(e.expr);return l=>l.map(i=>(i.valid&&this.successTest(e.mod,s.value,X(i))&&(i.success?i.value+=1:(i.value=1,i.success=!0)),i))}getFailureMethod(e,X){const s=this.rollType(e.expr);return l=>l.map(i=>(i.valid&&this.successTest(e.mod,s.value,X(i))&&(i.success?i.value-=1:(i.value=-1,i.success=!0)),i))}getKeepMethod(e,X){const s=this.rollType(e.expr);return l=>{if(l.length===0)return l;l=l.sort((y,L)=>e.highlow==="l"?X(L)-X(y):X(y)-X(L)).sort((y,L)=>(y.valid?1:0)-(L.valid?1:0));const i=Math.max(Math.min(s.value,l.length),0);let G=0,h=0;const R=l.reduce((y,L)=>(L.valid?1:0)+y,0)-i;for(;h<l.length&&G<R;)l[h].valid&&(l[h].valid=!1,G++),h++;return l}}getDropMethod(e,X){const s=this.rollType(e.expr);return l=>{l=l.sort((R,y)=>e.highlow==="h"?X(y)-X(R):X(R)-X(y));const i=Math.max(Math.min(s.value,l.length),0);let G=0,h=0;for(;h<l.length&&G<i;)l[h].valid&&(l[h].valid=!1,G++),h++;return l}}getExplodeMethod(e){const X=e.target?this.rollType(e.target.value):null;return s=>{const l=X?i=>this.successTest(e.target.mod,X.value,i.roll):i=>this.successTest("=",i.type==="fateroll"?1:i.die,i.roll);if(s[0].type==="roll"&&l({roll:1})&&l({roll:s[0].die}))throw new Error("Invalid reroll target");for(let i=0;i<s.length;i++){let G=s[i];G.order=i;let h=0;for(;l(G)&&h++<1e3;){const R=this.reRoll(G,++i);s.splice(i,0,R),G=R}}return s}}getCompoundMethod(e){const X=e.target?this.rollType(e.target.value):null;return s=>{const l=X?i=>this.successTest(e.target.mod,X.value,i.roll):i=>this.successTest("=",i.type==="fateroll"?1:i.die,i.roll);if(s[0].type==="roll"&&l({roll:1})&&l({roll:s[0].die}))throw new Error("Invalid reroll target");for(let i=0;i<s.length;i++){let G=s[i],h=G.roll,R=0;for(;l(G)&&R++<1e3;){const y=this.reRoll(s[i],++i);h+=y.roll,G=y}G.value=h,G.roll=h}return s}}getPenetrateMethod(e){const X=e.target?this.rollType(e.target.value):null;return s=>{const l=X?i=>this.successTest(e.target.mod,X.value,i.roll):i=>this.successTest("=",i.type==="fateroll"?1:i.die,i.roll);if(X&&s[0].type==="roll"&&l(s[0])&&this.successTest(e.target.mod,X.value,1))throw new Error("Invalid reroll target");for(let i=0;i<s.length;i++){let G=s[i];G.order=i;let h=0;for(;l(G)&&h++<1e3;){const R=this.reRoll(G,++i);R.value-=1,R.roll-=1,s.splice(i,0,R),G=R}}return s}}getReRollMethod(e){const X=e.target?this.successTest.bind(null,e.target.mod,this.rollType(e.target.value).value):this.successTest.bind(null,"=",1);return s=>{if(s[0].type==="roll"&&X(1)&&X(s[0].die))throw new Error("Invalid reroll target");for(let l=0;l<s.length;l++)for(;X(s[l].roll);){s[l].valid=!1;const i=this.reRoll(s[l],l+1);s.splice(++l,0,i)}return s}}getReRollOnceMethod(e){const X=e.target?this.successTest.bind(null,e.target.mod,this.rollType(e.target.value).value):this.successTest.bind(null,"=",1);return s=>{if(s[0].type==="roll"&&X(1)&&X(s[0].die))throw new Error("Invalid reroll target");for(let l=0;l<s.length;l++)if(X(s[l].roll)){s[l].valid=!1;const i=this.reRoll(s[l],l+1);s.splice(++l,0,i)}return s}}successTest(e,X,s){switch(e){case">":return s>=X;case"<":return s<=X;case"=":default:return s==X}}reRoll(e,X){switch(e.type){case"roll":return this.generateDiceRoll(e.die,X);case"fateroll":return this.generateFateRoll(X);default:throw new Error(`Cannot do a reroll of a ${e.type}.`)}}generateDiceRoll(e,X){const s=Math.floor(this.randFunction()*e)+1;return{critical:s===e?"success":s===1?"failure":null,die:e,matched:!1,order:X,roll:s,success:!1,type:"roll",valid:!0,value:s}}generateFateRoll(e){const X=Math.floor(3*this.randFunction())-1;return{matched:!1,order:e,roll:X,success:!1,type:"fateroll",valid:!0,value:X}}}},function(t,n,u){function b(e,X,s,l){this.message=e,this.expected=X,this.found=s,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,b)}(function(e,X){function s(){this.constructor=e}s.prototype=X.prototype,e.prototype=new s})(b,Error),b.buildMessage=function(e,X){var s={literal:function(h){return'"'+i(h.text)+'"'},class:function(h){var R,y="";for(R=0;R<h.parts.length;R++)y+=h.parts[R]instanceof Array?G(h.parts[R][0])+"-"+G(h.parts[R][1]):G(h.parts[R]);return"["+(h.inverted?"^":"")+y+"]"},any:function(h){return"any character"},end:function(h){return"end of input"},other:function(h){return h.description}};function l(h){return h.charCodeAt(0).toString(16).toUpperCase()}function i(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+l(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+l(R)})}function G(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+l(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+l(R)})}return"Expected "+function(h){var R,y,L,J=new Array(h.length);for(R=0;R<h.length;R++)J[R]=(L=h[R],s[L.type](L));if(J.sort(),J.length>0){for(R=1,y=1;R<J.length;R++)J[R-1]!==J[R]&&(J[y]=J[R],y++);J.length=y}switch(J.length){case 1:return J[0];case 2:return J[0]+" or "+J[1];default:return J.slice(0,-1).join(", ")+", or "+J[J.length-1]}}(e)+" but "+function(h){return h?'"'+i(h)+'"':"end of input"}(X)+" found."},t.exports={SyntaxError:b,parse:function(e,X){X=X!==void 0?X:{};var s,l={},i={start:P},G=P,h={type:"any"},R=k("[[",!1),y=k("]]",!1),L=function(Z,p){return p&&(Z.label=p),Z},J=k(">",!1),C=k("<",!1),g=k("=",!1),_=k("f",!1),$=k("cs",!1),bl=k("cf",!1),Tl=k("m",!1),tl=k("t",!1),Jl=k("k",!1),wl=k("l",!1),Od=k("h",!1),_d=k("d",!1),qd=k("{",!1),yd=k(",",!1),vd=k("}",!1),ed=k("+",!1),$d=k("sa",!1),Be=k("sd",!1),td=k("!",!1),cd=k("!!",!1),we=k("!p",!1),Ke=k("r",!1),Ee=k("ro",!1),ge=k("F",!1),Jd=k("%",!1),le=k("(",!1),de=k(")",!1),Ld=k("-",!1),Ul=function(Z,p){return p.length==0?Z:{head:Z,type:"expression",ops:p.map(V=>({type:"math",op:V[1],tail:V[3]}))}},Sd=k("*",!1),Nd=k("/",!1),nd=k("**",!1),Fd=k("floor",!1),ee=k("ceil",!1),te=k("round",!1),bd=k("abs",!1),ce=D("integer"),Hd=/^[0-9]/,ne=o([["0","9"]],!1,!1),be=function(){return{type:"number",value:parseInt(e.substring(j,a),10)}},ze=k("[",!1),xd=/^[^\]]/,se=o(["]"],!0,!1),Te=k("]",!1),Ue=D("whitespace"),Cd=/^[ \t\n\r]/,Bd=o([" ","	",`
`,"\r"],!1,!1),a=0,j=0,kl=[{line:1,column:1}],yl=0,wd=[],N=0;if("startRule"in X){if(!(X.startRule in i))throw new Error(`Can't start parsing from rule "`+X.startRule+'".');G=i[X.startRule]}function k(Z,p){return{type:"literal",text:Z,ignoreCase:p}}function o(Z,p,V){return{type:"class",parts:Z,inverted:p,ignoreCase:V}}function D(Z){return{type:"other",description:Z}}function Pl(Z){var p,V=kl[Z];if(V)return V;for(p=Z-1;!kl[p];)p--;for(V={line:(V=kl[p]).line,column:V.column};p<Z;)e.charCodeAt(p)===10?(V.line++,V.column=1):V.column++,p++;return kl[Z]=V,V}function Wl(Z,p){var V=Pl(Z),f=Pl(p);return{start:{offset:Z,line:V.line,column:V.column},end:{offset:p,line:f.line,column:f.column}}}function H(Z){a<yl||(a>yl&&(yl=a,wd=[]),wd.push(Z))}function F(Z,p,V){return new b(b.buildMessage(Z,p),Z,p,V)}function P(){var Z,p,V,f,K,S;if(Z=a,(p=od())!==l){for(V=[],e.length>a?(f=e.charAt(a),a++):(f=l,N===0&&H(h));f!==l;)V.push(f),e.length>a?(f=e.charAt(a),a++):(f=l,N===0&&H(h));V!==l?(j=Z,S=V,(K=p).root=!0,S&&(K.label=S.join("")),Z=p=K):(a=Z,Z=l)}else a=Z,Z=l;return Z}function Kd(){var Z,p,V;return Z=a,(p=function(){var f,K,S,m,r;if(f=a,(K=function(){var v,w,T,E,z,U,M,I,Q;if(v=a,e.charCodeAt(a)===123?(w="{",a++):(w=l,N===0&&H(qd)),w!==l)if(A()!==l)if((T=sd())!==l){for(E=[],z=a,(U=A())!==l?(e.charCodeAt(a)===44?(M=",",a++):(M=l,N===0&&H(yd)),M!==l&&(I=A())!==l&&(Q=sd())!==l?z=U=[U,M,I,Q]:(a=z,z=l)):(a=z,z=l);z!==l;)E.push(z),z=a,(U=A())!==l?(e.charCodeAt(a)===44?(M=",",a++):(M=l,N===0&&H(yd)),M!==l&&(I=A())!==l&&(Q=sd())!==l?z=U=[U,M,I,Q]:(a=z,z=l)):(a=z,z=l);E!==l&&(z=A())!==l?(e.charCodeAt(a)===125?(U="}",a++):(U=l,N===0&&H(vd)),U!==l?(j=v,w={rolls:[T,...E.map(O=>O[3])],type:"group"},v=w):(a=v,v=l)):(a=v,v=l)}else a=v,v=l;else a=v,v=l;else a=v,v=l;return v}())!==l){for(S=[],(m=xl())===l&&(m=Cl())===l&&(m=Il())===l&&(m=Ql());m!==l;)S.push(m),(m=xl())===l&&(m=Cl())===l&&(m=Il())===l&&(m=Ql());S!==l&&(m=A())!==l?((r=El())===l&&(r=null),r!==l?(j=f,W=K,B=r,(Y=S).length>0&&(W.mods=(W.mods||[]).concat(Y)),B&&(W.label=B),f=K=W):(a=f,f=l)):(a=f,f=l)}else a=f,f=l;var W,Y,B;return f}())===l&&(p=jl())===l&&(p=Ol()),p!==l&&A()!==l?((V=El())===l&&(V=null),V!==l?(j=Z,Z=p=L(p,V)):(a=Z,Z=l)):(a=Z,Z=l),Z}function Il(){var Z,p,V;return Z=a,e.charCodeAt(a)===62?(p=">",a++):(p=l,N===0&&H(J)),p===l&&(e.charCodeAt(a)===60?(p="<",a++):(p=l,N===0&&H(C)),p===l&&(e.charCodeAt(a)===61?(p="=",a++):(p=l,N===0&&H(g)))),p!==l&&(V=Vl())!==l?(j=Z,Z=p={type:"success",mod:p,expr:V}):(a=Z,Z=l),Z}function Ql(){var Z,p,V,f;return Z=a,e.charCodeAt(a)===102?(p="f",a++):(p=l,N===0&&H(_)),p!==l?(e.charCodeAt(a)===62?(V=">",a++):(V=l,N===0&&H(J)),V===l&&(e.charCodeAt(a)===60?(V="<",a++):(V=l,N===0&&H(C)),V===l&&(e.charCodeAt(a)===61?(V="=",a++):(V=l,N===0&&H(g)))),V===l&&(V=null),V!==l&&(f=Vl())!==l?(j=Z,Z=p={type:"failure",mod:V,expr:f}):(a=Z,Z=l)):(a=Z,Z=l),Z}function Ed(){var Z,p,V,f;return Z=a,e.substr(a,2)==="cs"?(p="cs",a+=2):(p=l,N===0&&H($)),p!==l?(e.charCodeAt(a)===62?(V=">",a++):(V=l,N===0&&H(J)),V===l&&(e.charCodeAt(a)===60?(V="<",a++):(V=l,N===0&&H(C)),V===l&&(e.charCodeAt(a)===61?(V="=",a++):(V=l,N===0&&H(g)))),V===l&&(V=null),V!==l&&(f=Vl())!==l?(j=Z,Z=p={type:"crit",mod:V,expr:f}):(a=Z,Z=l)):(a=Z,Z=l),Z}function x(){var Z,p,V,f;return Z=a,e.substr(a,2)==="cf"?(p="cf",a+=2):(p=l,N===0&&H(bl)),p!==l?(e.charCodeAt(a)===62?(V=">",a++):(V=l,N===0&&H(J)),V===l&&(e.charCodeAt(a)===60?(V="<",a++):(V=l,N===0&&H(C)),V===l&&(e.charCodeAt(a)===61?(V="=",a++):(V=l,N===0&&H(g)))),V===l&&(V=null),V!==l&&(f=Vl())!==l?(j=Z,Z=p={type:"critfail",mod:V,expr:f}):(a=Z,Z=l)):(a=Z,Z=l),Z}function ue(){var Z,p,V,f,K;return Z=a,e.charCodeAt(a)===109?(p="m",a++):(p=l,N===0&&H(Tl)),p!==l?(e.charCodeAt(a)===116?(V="t",a++):(V=l,N===0&&H(tl)),V===l&&(V=null),V!==l?((f=Ol())===l&&(f=null),f!==l?((K=function(){var S,m,r;return S=a,e.charCodeAt(a)===62?(m=">",a++):(m=l,N===0&&H(J)),m===l&&(e.charCodeAt(a)===60?(m="<",a++):(m=l,N===0&&H(C)),m===l&&(e.charCodeAt(a)===61?(m="=",a++):(m=l,N===0&&H(g)))),m!==l&&(r=Vl())!==l?(j=S,S=m={mod:m,expr:r}):(a=S,S=l),S}())===l&&(K=null),K!==l?(j=Z,Z=p=function(S,m,r){const W={type:"match",min:m||{type:"number",value:2},count:!!S};return r&&(W.mod=r.mod,W.expr=r.expr),W}(V,f,K)):(a=Z,Z=l)):(a=Z,Z=l)):(a=Z,Z=l)):(a=Z,Z=l),Z}function xl(){var Z,p,V,f;return Z=a,e.charCodeAt(a)===107?(p="k",a++):(p=l,N===0&&H(Jl)),p!==l?(e.charCodeAt(a)===108?(V="l",a++):(V=l,N===0&&H(wl)),V===l&&(e.charCodeAt(a)===104?(V="h",a++):(V=l,N===0&&H(Od))),V===l&&(V=null),V!==l?((f=Vl())===l&&(f=null),f!==l?(j=Z,Z=p={type:"keep",highlow:V,expr:f||_l}):(a=Z,Z=l)):(a=Z,Z=l)):(a=Z,Z=l),Z}function Cl(){var Z,p,V,f;return Z=a,e.charCodeAt(a)===100?(p="d",a++):(p=l,N===0&&H(_d)),p!==l?(e.charCodeAt(a)===108?(V="l",a++):(V=l,N===0&&H(wl)),V===l&&(e.charCodeAt(a)===104?(V="h",a++):(V=l,N===0&&H(Od))),V===l&&(V=null),V!==l?((f=Vl())===l&&(f=null),f!==l?(j=Z,Z=p={type:"drop",highlow:V,expr:f||_l}):(a=Z,Z=l)):(a=Z,Z=l)):(a=Z,Z=l),Z}function sd(){var Z,p,V,f,K,S,m,r;if(Z=a,(p=ud())!==l){for(V=[],f=a,(K=A())!==l?(e.charCodeAt(a)===43?(S="+",a++):(S=l,N===0&&H(ed)),S!==l&&(m=A())!==l&&(r=ud())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);f!==l;)V.push(f),f=a,(K=A())!==l?(e.charCodeAt(a)===43?(S="+",a++):(S=l,N===0&&H(ed)),S!==l&&(m=A())!==l&&(r=ud())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);V!==l?(j=Z,Z=p=function(W,Y){return Y.length==0?W:{head:W,type:"diceExpression",ops:Y.map(B=>({type:"math",op:B[1],tail:B[3]}))}}(p,V)):(a=Z,Z=l)}else a=Z,Z=l;return Z}function ud(){var Z;return(Z=jl())===l&&(Z=od()),Z}function jl(){var Z,p,V;return Z=a,(p=function(){var f,K,S,m,r;if(f=a,(K=function(){var W,Y,B,v;if(W=a,(Y=function(){var E,z,U,M;return E=a,(z=Vl())===l&&(z=null),z!==l?(e.charCodeAt(a)===100?(U="d",a++):(U=l,N===0&&H(_d)),U!==l?((M=function(){var I,Q;return I=a,e.charCodeAt(a)===70?(Q="F",a++):(Q=l,N===0&&H(ge)),Q===l&&(e.charCodeAt(a)===102?(Q="f",a++):(Q=l,N===0&&H(_))),Q!==l&&(j=I,Q={type:"fate"}),I=Q}())===l&&(M=function(){var I,Q;return I=a,e.charCodeAt(a)===37?(Q="%",a++):(Q=l,N===0&&H(Jd)),Q!==l&&(j=I,Q={type:"number",value:"100"}),I=Q}())===l&&(M=Vl()),M!==l?(j=E,z={die:M,count:z||{type:"number",value:1},type:"die"},E=z):(a=E,E=l)):(a=E,E=l)):(a=E,E=l),E}())!==l){for(B=[],(v=id())===l&&(v=Xd())===l&&(v=Ml())===l&&(v=zd())===l&&(v=gd());v!==l;)B.push(v),(v=id())===l&&(v=Xd())===l&&(v=Ml())===l&&(v=zd())===l&&(v=gd());B!==l?(j=W,T=B,(w=Y).mods=(w.mods||[]).concat(T),W=Y=w):(a=W,W=l)}else a=W,W=l;var w,T;return W}())!==l){for(S=[],(m=Cl())===l&&(m=xl())===l&&(m=Il())===l&&(m=Ql())===l&&(m=x())===l&&(m=Ed());m!==l;)S.push(m),(m=Cl())===l&&(m=xl())===l&&(m=Il())===l&&(m=Ql())===l&&(m=x())===l&&(m=Ed());S!==l?((m=ue())===l&&(m=null),m!==l?((r=function(){var W,Y;return W=a,e.substr(a,2)==="sa"?(Y="sa",a+=2):(Y=l,N===0&&H($d)),Y!==l&&(j=W,Y={type:"sort",asc:!0}),W=Y}())===l&&(r=function(){var W,Y;return W=a,e.substr(a,2)==="sd"?(Y="sd",a+=2):(Y=l,N===0&&H(Be)),Y!==l&&(j=W,Y={type:"sort",asc:!1}),W=Y}()),r===l&&(r=null),r!==l?(j=f,K=function(W,Y,B,v){const w=Y.filter(T=>["success","failure"].includes(T.type));return Y=Y.filter(T=>!w.includes(T)),W.mods=(W.mods||[]).concat(Y),w.length>0&&(W.targets=w),B&&(W.match=B),v&&(W.sort=v),W}(K,S,m,r),f=K):(a=f,f=l)):(a=f,f=l)):(a=f,f=l)}else a=f,f=l;return f}())!==l&&A()!==l?((V=El())===l&&(V=null),V!==l?(j=Z,Z=p=L(p,V)):(a=Z,Z=l)):(a=Z,Z=l),Z}function Ml(){var Z,p,V;return Z=a,e.charCodeAt(a)===33?(p="!",a++):(p=l,N===0&&H(td)),p!==l?((V=Kl())===l&&(V=null),V!==l?(j=Z,Z=p={type:"explode",target:V}):(a=Z,Z=l)):(a=Z,Z=l),Z}function id(){var Z,p,V;return Z=a,e.substr(a,2)==="!!"?(p="!!",a+=2):(p=l,N===0&&H(cd)),p!==l?((V=Kl())===l&&(V=null),V!==l?(j=Z,Z=p={type:"compound",target:V}):(a=Z,Z=l)):(a=Z,Z=l),Z}function Xd(){var Z,p,V;return Z=a,e.substr(a,2)==="!p"?(p="!p",a+=2):(p=l,N===0&&H(we)),p!==l?((V=Kl())===l&&(V=null),V!==l?(j=Z,Z=p={type:"penetrate",target:V}):(a=Z,Z=l)):(a=Z,Z=l),Z}function gd(){var Z,p,V;return Z=a,e.charCodeAt(a)===114?(p="r",a++):(p=l,N===0&&H(Ke)),p!==l?((V=Kl())===l&&(V=null),V!==l?(j=Z,Z=p={type:"reroll",target:V||md}):(a=Z,Z=l)):(a=Z,Z=l),Z}function zd(){var Z,p,V;return Z=a,e.substr(a,2)==="ro"?(p="ro",a+=2):(p=l,N===0&&H(Ee)),p!==l?((V=Kl())===l&&(V=null),V!==l?(j=Z,Z=p={type:"rerollOnce",target:V||md}):(a=Z,Z=l)):(a=Z,Z=l),Z}function Kl(){var Z,p,V;return Z=a,e.charCodeAt(a)===62?(p=">",a++):(p=l,N===0&&H(J)),p===l&&(e.charCodeAt(a)===60?(p="<",a++):(p=l,N===0&&H(C)),p===l&&(e.charCodeAt(a)===61?(p="=",a++):(p=l,N===0&&H(g)))),p===l&&(p=null),p!==l&&(V=Vl())!==l?(j=Z,Z=p={type:"target",mod:p,value:V}):(a=Z,Z=l),Z}function Vl(){var Z;return(Z=ad())===l&&(Z=Ol()),Z}function od(){var Z;return(Z=function(){var p,V,f,K;return p=a,e.substr(a,2)==="[["?(V="[[",a+=2):(V=l,N===0&&H(R)),V!==l&&(f=od())!==l?(e.substr(a,2)==="]]"?(K="]]",a+=2):(K=l,N===0&&H(y)),K!==l?(j=p,p=V={type:"inline",expr:f}):(a=p,p=l)):(a=p,p=l),p}())===l&&(Z=Bl())===l&&(Z=ad()),Z}function ad(){var Z,p,V,f,K,S,m;return Z=a,e.charCodeAt(a)===40?(p="(",a++):(p=l,N===0&&H(le)),p!==l&&(V=Bl())!==l?(e.charCodeAt(a)===41?(f=")",a++):(f=l,N===0&&H(de)),f!==l&&A()!==l?((K=El())===l&&(K=null),K!==l?(j=Z,S=V,(m=K)&&(S.label=m),Z=p=S):(a=Z,Z=l)):(a=Z,Z=l)):(a=Z,Z=l),Z}function Bl(){var Z,p,V,f,K,S,m,r;if(Z=a,(p=rl())!==l){for(V=[],f=a,(K=A())!==l?(e.charCodeAt(a)===43?(S="+",a++):(S=l,N===0&&H(ed)),S===l&&(e.charCodeAt(a)===45?(S="-",a++):(S=l,N===0&&H(Ld))),S!==l&&(m=A())!==l&&(r=rl())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);f!==l;)V.push(f),f=a,(K=A())!==l?(e.charCodeAt(a)===43?(S="+",a++):(S=l,N===0&&H(ed)),S===l&&(e.charCodeAt(a)===45?(S="-",a++):(S=l,N===0&&H(Ld))),S!==l&&(m=A())!==l&&(r=rl())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);V!==l?(j=Z,Z=p=Ul(p,V)):(a=Z,Z=l)}else a=Z,Z=l;return Z}function rl(){var Z,p,V,f,K,S,m,r;if(Z=a,(p=Dl())!==l){for(V=[],f=a,(K=A())!==l?(e.charCodeAt(a)===42?(S="*",a++):(S=l,N===0&&H(Sd)),S===l&&(e.charCodeAt(a)===47?(S="/",a++):(S=l,N===0&&H(Nd))),S!==l&&(m=A())!==l&&(r=Dl())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);f!==l;)V.push(f),f=a,(K=A())!==l?(e.charCodeAt(a)===42?(S="*",a++):(S=l,N===0&&H(Sd)),S===l&&(e.charCodeAt(a)===47?(S="/",a++):(S=l,N===0&&H(Nd))),S!==l&&(m=A())!==l&&(r=Dl())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);V!==l?(j=Z,Z=p=Ul(p,V)):(a=Z,Z=l)}else a=Z,Z=l;return Z}function Dl(){var Z,p,V,f,K,S,m,r;if(Z=a,(p=Al())!==l){for(V=[],f=a,(K=A())!==l?(e.substr(a,2)==="**"?(S="**",a+=2):(S=l,N===0&&H(nd)),S===l&&(e.charCodeAt(a)===37?(S="%",a++):(S=l,N===0&&H(Jd))),S!==l&&(m=A())!==l&&(r=Al())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);f!==l;)V.push(f),f=a,(K=A())!==l?(e.substr(a,2)==="**"?(S="**",a+=2):(S=l,N===0&&H(nd)),S===l&&(e.charCodeAt(a)===37?(S="%",a++):(S=l,N===0&&H(Jd))),S!==l&&(m=A())!==l&&(r=Al())!==l?f=K=[K,S,m,r]:(a=f,f=l)):(a=f,f=l);V!==l?(j=Z,Z=p=Ul(p,V)):(a=Z,Z=l)}else a=Z,Z=l;return Z}function Td(){var Z,p,V,f,K;return Z=a,(p=function(){var S;return e.substr(a,5)==="floor"?(S="floor",a+=5):(S=l,N===0&&H(Fd)),S===l&&(e.substr(a,4)==="ceil"?(S="ceil",a+=4):(S=l,N===0&&H(ee)),S===l&&(e.substr(a,5)==="round"?(S="round",a+=5):(S=l,N===0&&H(te)),S===l&&(e.substr(a,3)==="abs"?(S="abs",a+=3):(S=l,N===0&&H(bd))))),S}())!==l&&A()!==l?(e.charCodeAt(a)===40?(V="(",a++):(V=l,N===0&&H(le)),V!==l&&A()!==l&&(f=Bl())!==l&&A()!==l?(e.charCodeAt(a)===41?(K=")",a++):(K=l,N===0&&H(de)),K!==l?(j=Z,Z=p={type:"mathfunction",op:p,expr:f}):(a=Z,Z=l)):(a=Z,Z=l)):(a=Z,Z=l),Z}function Al(){var Z;return(Z=Td())===l&&(Z=Kd())===l&&(Z=ad()),Z}function Ol(){var Z,p,V,f;if(N++,Z=a,e.charCodeAt(a)===45?(p="-",a++):(p=l,N===0&&H(Ld)),p===l&&(p=null),p!==l){if(V=[],Hd.test(e.charAt(a))?(f=e.charAt(a),a++):(f=l,N===0&&H(ne)),f!==l)for(;f!==l;)V.push(f),Hd.test(e.charAt(a))?(f=e.charAt(a),a++):(f=l,N===0&&H(ne));else V=l;V!==l?(j=Z,Z=p=be()):(a=Z,Z=l)}else a=Z,Z=l;return N--,Z===l&&(p=l,N===0&&H(ce)),Z}function El(){var Z,p,V,f;if(Z=a,e.charCodeAt(a)===91?(p="[",a++):(p=l,N===0&&H(ze)),p!==l){if(V=[],xd.test(e.charAt(a))?(f=e.charAt(a),a++):(f=l,N===0&&H(se)),f!==l)for(;f!==l;)V.push(f),xd.test(e.charAt(a))?(f=e.charAt(a),a++):(f=l,N===0&&H(se));else V=l;V!==l?(e.charCodeAt(a)===93?(f="]",a++):(f=l,N===0&&H(Te)),f!==l?(j=Z,Z=p=V.join("")):(a=Z,Z=l)):(a=Z,Z=l)}else a=Z,Z=l;return Z}function A(){var Z,p;for(N++,Z=[],Cd.test(e.charAt(a))?(p=e.charAt(a),a++):(p=l,N===0&&H(Bd));p!==l;)Z.push(p),Cd.test(e.charAt(a))?(p=e.charAt(a),a++):(p=l,N===0&&H(Bd));return N--,Z===l&&(p=l,N===0&&H(Ue)),Z}const md={type:"target",mod:"=",value:{type:"number",value:1}},_l={type:"number",value:1};if((s=G())!==l&&a===e.length)return s;throw s!==l&&a<e.length&&H({type:"end"}),F(wd,yl<e.length?e.charAt(yl):null,yl<e.length?Wl(yl,yl+1):Wl(yl,yl))}}},function(t,n,u){Object.defineProperty(n,"__esModule",{value:!0}),n.DiscordRollRenderer=class{render(b){return this.doRender(b,!0)}doRender(b,e=!1){let X="";switch(b.type){case"diceexpressionroll":X=this.renderGroupExpr(b);break;case"grouproll":X=this.renderGroup(b);break;case"die":X=this.renderDie(b);break;case"expressionroll":X=this.renderExpression(b);break;case"mathfunction":X=this.renderFunction(b);break;case"roll":return this.renderRoll(b);case"fateroll":return this.renderFateRoll(b);case"number":const s=b.label?` (${b.label})`:"";return`${b.value}${s}`;case"fate":return"F";default:throw new Error("Unable to render")}return b.valid||(X="~~"+X.replace(/~~/g,"")+"~~"),e?this.stripBrackets(X):b.label?`(${b.label}: ${X})`:X}renderGroup(b){const e=[];for(const X of b.dice)e.push(this.doRender(X));return e.length>1?`{ ${e.join(" + ")} } = ${b.value}`:`{ ${this.stripBrackets(e[0])} } = ${b.value}`}renderGroupExpr(b){const e=[];for(const X of b.dice)e.push(this.doRender(X));return e.length>1?`(${e.join(" + ")} = ${b.value})`:e[0]}renderDie(b){const e=[];for(const l of b.rolls)e.push(this.doRender(l));let X=`${e.join(", ")}`;["number","fate"].includes(b.die.type)&&b.count.type==="number"||(X+=`[*Rolling: ${this.doRender(b.count)}d${this.doRender(b.die)}*]`);const s=b.matched?` Match${b.value===1?"":"es"}`:"";return X+=` = ${b.value}${s}`,`(${X})`}renderExpression(b){if(b.dice.length>1){const e=[];for(let X=0;X<b.dice.length-1;X++)e.push(this.doRender(b.dice[X])),e.push(b.ops[X]);return e.push(this.doRender(b.dice.slice(-1)[0])),e.push("="),e.push(b.value+""),`(${e.join(" ")})`}return b.dice[0].type==="number"?b.value+"":this.doRender(b.dice[0])}renderFunction(b){const e=this.doRender(b.expr);return`(${b.op}${this.addBrackets(e)} = ${b.value})`}addBrackets(b){return b.startsWith("(")||(b=`(${b}`),b.endsWith(")")||(b=`${b})`),b}stripBrackets(b){return b.startsWith("(")&&(b=b.substring(1)),b.endsWith(")")&&(b=b.substring(0,b.length-1)),b}renderRoll(b){let e=`${b.roll}`;return b.valid?b.success&&b.value===1?e=`**${b.roll}**`:b.success&&b.value===-1?e=`*${b.roll}*`:b.success||b.critical!=="success"?b.success||b.critical!=="failure"||(e=`*${b.roll}*`):e=`**${b.roll}**`:e=`~~${b.roll}~~`,b.matched&&(e=`__${e}__`),e}renderFateRoll(b){const e=b.roll===0?"0":b.roll>0?"+":"-";let X=`${b.roll}`;return b.valid?b.success&&b.value===1?X=`**${e}**`:b.success&&b.value===-1&&(X=`*${e}*`):X=`~~${e}~~`,b.matched&&(X=`__${X}__`),X}}}])})})(At);var Rc=At.exports,Zl=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class Wc{constructor(d){this.messageBus=d}get id(){if(!this.messageBus.userId)throw Error("Unable to get user ID: not ready");return this.messageBus.userId}getSelection(){return Zl(this,void 0,void 0,function*(){const{selection:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_SELECTION",{});return d})}select(d,t){return Zl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:d,replace:t})})}deselect(d){return Zl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_DESELECt",{items:d})})}getName(){return Zl(this,void 0,void 0,function*(){const{name:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_NAME",{});return d})}setName(d){return Zl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_NAME",{name:d})})}getColor(){return Zl(this,void 0,void 0,function*(){const{color:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_COLOR",{});return d})}setColor(d){return Zl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_COLOR",{color:d})})}getSyncView(){return Zl(this,void 0,void 0,function*(){const{syncView:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_SYNC_VIEW",{});return d})}setSyncView(d){return Zl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_SYNC_VIEW",{syncView:d})})}getId(){return Zl(this,void 0,void 0,function*(){const{id:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_ID",{});return d})}getRole(){return Zl(this,void 0,void 0,function*(){const{role:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_ROLE",{});return d})}getMetadata(){return Zl(this,void 0,void 0,function*(){const{metadata:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_METADATA",{});return d})}setMetadata(d){return Zl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_METADATA",{update:d})})}hasPermission(d){return Zl(this,void 0,void 0,function*(){if((yield this.getRole())==="GM")return!0;const{permissions:n}=yield this.messageBus.sendAsync("OBR_ROOM_GET_PERMISSIONS",{});return n.indexOf(d)===-1})}getConnectionId(){return Zl(this,void 0,void 0,function*(){const{connectionId:d}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_CONNECTION_ID",{});return d})}onChange(d){const t=n=>{d(n.player)};return this.messageBus.send("OBR_PLAYER_SUBSCRIBE",{}),this.messageBus.on("OBR_PLAYER_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_PLAYER_UNSUBSCRIBE",{}),this.messageBus.off("OBR_PLAYER_EVENT_CHANGE",t)}}}var Ll=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class Vc{constructor(d){this.messageBus=d}reset(){return Ll(this,void 0,void 0,function*(){const{transform:d}=yield this.messageBus.sendAsync("OBR_VIEWPORT_RESET",{});return d})}animateTo(d){return Ll(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_ANIMATE_TO",{transform:d})})}animateToBounds(d){return Ll(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_ANIMATE_TO_BOUNDS",{bounds:d})})}getPosition(){return Ll(this,void 0,void 0,function*(){const{position:d}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_POSITION",{});return d})}setPosition(d){return Ll(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_SET_POSITION",{position:d})})}getScale(){return Ll(this,void 0,void 0,function*(){const{scale:d}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_SCALE",{});return d})}setScale(d){return Ll(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_SET_SCALE",{scale:d})})}getWidth(){return Ll(this,void 0,void 0,function*(){const{width:d}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_WIDTH",{});return d})}getHeight(){return Ll(this,void 0,void 0,function*(){const{height:d}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_HEIGHT",{});return d})}transformPoint(d){return Ll(this,void 0,void 0,function*(){const{point:t}=yield this.messageBus.sendAsync("OBR_VIEWPORT_TRANSFORM_POINT",{point:d});return t})}inverseTransformPoint(d){return Ll(this,void 0,void 0,function*(){const{point:t}=yield this.messageBus.sendAsync("OBR_VIEWPORT_INVERSE_TRANSFORM_POINT",{point:d});return t})}}function pc(c){return typeof c.id=="string"}var st={exports:{}},pd=typeof Reflect=="object"?Reflect:null,Vt=pd&&typeof pd.apply=="function"?pd.apply:function(d,t,n){return Function.prototype.apply.call(d,t,n)},Re;pd&&typeof pd.ownKeys=="function"?Re=pd.ownKeys:Object.getOwnPropertySymbols?Re=function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:Re=function(d){return Object.getOwnPropertyNames(d)};function Yc(c){console&&console.warn&&console.warn(c)}var Ot=Number.isNaN||function(d){return d!==d};function q(){q.init.call(this)}st.exports=q;st.exports.once=Jc;q.EventEmitter=q;q.prototype._events=void 0;q.prototype._eventsCount=0;q.prototype._maxListeners=void 0;var pt=10;function He(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}Object.defineProperty(q,"defaultMaxListeners",{enumerable:!0,get:function(){return pt},set:function(c){if(typeof c!="number"||c<0||Ot(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");pt=c}});q.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};q.prototype.setMaxListeners=function(d){if(typeof d!="number"||d<0||Ot(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this};function _t(c){return c._maxListeners===void 0?q.defaultMaxListeners:c._maxListeners}q.prototype.getMaxListeners=function(){return _t(this)};q.prototype.emit=function(d){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var u=d==="error",b=this._events;if(b!==void 0)u=u&&b.error===void 0;else if(!u)return!1;if(u){var e;if(t.length>0&&(e=t[0]),e instanceof Error)throw e;var X=new Error("Unhandled error."+(e?" ("+e.message+")":""));throw X.context=e,X}var s=b[d];if(s===void 0)return!1;if(typeof s=="function")Vt(s,this,t);else for(var l=s.length,i=ec(s,l),n=0;n<l;++n)Vt(i[n],this,t);return!0};function qt(c,d,t,n){var u,b,e;if(He(t),b=c._events,b===void 0?(b=c._events=Object.create(null),c._eventsCount=0):(b.newListener!==void 0&&(c.emit("newListener",d,t.listener?t.listener:t),b=c._events),e=b[d]),e===void 0)e=b[d]=t,++c._eventsCount;else if(typeof e=="function"?e=b[d]=n?[t,e]:[e,t]:n?e.unshift(t):e.push(t),u=_t(c),u>0&&e.length>u&&!e.warned){e.warned=!0;var X=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");X.name="MaxListenersExceededWarning",X.emitter=c,X.type=d,X.count=e.length,Yc(X)}return c}q.prototype.addListener=function(d,t){return qt(this,d,t,!1)};q.prototype.on=q.prototype.addListener;q.prototype.prependListener=function(d,t){return qt(this,d,t,!0)};function fc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $t(c,d,t){var n={fired:!1,wrapFn:void 0,target:c,type:d,listener:t},u=fc.bind(n);return u.listener=t,n.wrapFn=u,u}q.prototype.once=function(d,t){return He(t),this.on(d,$t(this,d,t)),this};q.prototype.prependOnceListener=function(d,t){return He(t),this.prependListener(d,$t(this,d,t)),this};q.prototype.removeListener=function(d,t){var n,u,b,e,X;if(He(t),u=this._events,u===void 0)return this;if(n=u[d],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete u[d],u.removeListener&&this.emit("removeListener",d,n.listener||t));else if(typeof n!="function"){for(b=-1,e=n.length-1;e>=0;e--)if(n[e]===t||n[e].listener===t){X=n[e].listener,b=e;break}if(b<0)return this;b===0?n.shift():yc(n,b),n.length===1&&(u[d]=n[0]),u.removeListener!==void 0&&this.emit("removeListener",d,X||t)}return this};q.prototype.off=q.prototype.removeListener;q.prototype.removeAllListeners=function(d){var t,n,u;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[d]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[d]),this;if(arguments.length===0){var b=Object.keys(n),e;for(u=0;u<b.length;++u)e=b[u],e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[d],typeof t=="function")this.removeListener(d,t);else if(t!==void 0)for(u=t.length-1;u>=0;u--)this.removeListener(d,t[u]);return this};function lc(c,d,t){var n=c._events;if(n===void 0)return[];var u=n[d];return u===void 0?[]:typeof u=="function"?t?[u.listener||u]:[u]:t?vc(u):ec(u,u.length)}q.prototype.listeners=function(d){return lc(this,d,!0)};q.prototype.rawListeners=function(d){return lc(this,d,!1)};q.listenerCount=function(c,d){return typeof c.listenerCount=="function"?c.listenerCount(d):dc.call(c,d)};q.prototype.listenerCount=dc;function dc(c){var d=this._events;if(d!==void 0){var t=d[c];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}q.prototype.eventNames=function(){return this._eventsCount>0?Re(this._events):[]};function ec(c,d){for(var t=new Array(d),n=0;n<d;++n)t[n]=c[n];return t}function yc(c,d){for(;d+1<c.length;d++)c[d]=c[d+1];c.pop()}function vc(c){for(var d=new Array(c.length),t=0;t<d.length;++t)d[t]=c[t].listener||c[t];return d}function Jc(c,d){return new Promise(function(t,n){function u(e){c.removeListener(d,b),n(e)}function b(){typeof c.removeListener=="function"&&c.removeListener("error",u),t([].slice.call(arguments))}tc(c,d,b,{once:!0}),d!=="error"&&Lc(c,u,{once:!0})})}function Lc(c,d,t){typeof c.on=="function"&&tc(c,"error",d,t)}function tc(c,d,t,n){if(typeof c.on=="function")n.once?c.once(d,t):c.on(d,t);else if(typeof c.addEventListener=="function")c.addEventListener(d,function u(b){n.once&&c.removeEventListener(d,u),t(b)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c)}var Sc=st.exports;let oe;const Nc=new Uint8Array(16);function Fc(){if(!oe&&(oe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!oe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oe(Nc)}const il=[];for(let c=0;c<256;++c)il.push((c+256).toString(16).slice(1));function Hc(c,d=0){return(il[c[d+0]]+il[c[d+1]]+il[c[d+2]]+il[c[d+3]]+"-"+il[c[d+4]]+il[c[d+5]]+"-"+il[c[d+6]]+il[c[d+7]]+"-"+il[c[d+8]]+il[c[d+9]]+"-"+il[c[d+10]]+il[c[d+11]]+il[c[d+12]]+il[c[d+13]]+il[c[d+14]]+il[c[d+15]]).toLowerCase()}const xc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yt={randomUUID:xc};function Cc(c,d,t){if(Yt.randomUUID&&!d&&!c)return Yt.randomUUID();c=c||{};const n=c.random||(c.rng||Fc)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,d){t=t||0;for(let u=0;u<16;++u)d[t+u]=n[u];return d}return Hc(n)}class Bc extends Sc.EventEmitter{constructor(d,t){super(),this.ready=!1,this.userId=null,this.ref=null,this.handleMessage=n=>{const u=n.data;if(n.origin===this.targetOrigin&&pc(u)){if(u.id==="OBR_READY"){this.ready=!0;const b=u.data;this.ref=b.ref,this.userId=b.userId}this.emit(u.id,u.data)}},this.send=(n,u,b)=>{var e;if(!this.ref)throw Error("Unable to send message: not ready");(e=window.parent)===null||e===void 0||e.postMessage({id:n,data:u,ref:this.ref,nonce:b},this.targetOrigin)},this.sendAsync=(n,u,b=5e3)=>{const e=`_${Cc()}`;return this.send(n,u,e),Promise.race([new Promise((X,s)=>{const l=this;function i(h){l.off(`${n}_RESPONSE${e}`,i),l.off(`${n}_ERROR${e}`,G),X(h)}function G(h){l.off(`${n}_RESPONSE${e}`,i),l.off(`${n}_ERROR${e}`,G),s(h)}this.on(`${n}_RESPONSE${e}`,i),this.on(`${n}_ERROR${e}`,G)}),new Promise((X,s)=>window.setTimeout(()=>s(new Error(`Message ${n} took longer than ${b}ms to get a result`)),b))])},this.roomId=t,this.targetOrigin=d,window.addEventListener("message",this.handleMessage),this.setMaxListeners(100)}destroy(){window.removeEventListener("message",this.handleMessage)}}var ft=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class wc{constructor(d){this.messageBus=d}show(d,t){return ft(this,void 0,void 0,function*(){const{id:n}=yield this.messageBus.sendAsync("OBR_NOTIFICATION_SHOW",{message:d,variant:t});return n})}close(d){return ft(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_NOTIFICATION_CLOSE",{id:d})})}}var Zd=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class Kc{constructor(d){this.messageBus=d}getColor(){return Zd(this,void 0,void 0,function*(){const{color:d}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_COLOR",{});return d})}setColor(d){return Zd(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_COLOR",{color:d})})}getStrokeWidth(){return Zd(this,void 0,void 0,function*(){const{strokeWidth:d}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_STROKE_WIDTH",{});return d})}setStrokeWidth(d){return Zd(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_STROKE_WIDTH",{strokeWidth:d})})}getFilled(){return Zd(this,void 0,void 0,function*(){const{filled:d}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_FILLED",{});return d})}setFilled(d){return Zd(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_FILLED",{filled:d})})}onChange(d){const t=n=>{d(n.fog)};return this.messageBus.send("OBR_SCENE_FOG_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_FOG_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_SCENE_FOG_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_FOG_EVENT_CHANGE",t)}}}var Gl=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class Ec{constructor(d){this.messageBus=d}getDpi(){return Gl(this,void 0,void 0,function*(){const{dpi:d}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_DPI",{});return d})}getScale(){return Gl(this,void 0,void 0,function*(){return yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_SCALE",{})})}setScale(d){return Gl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_SCALE",{scale:d})})}getColor(){return Gl(this,void 0,void 0,function*(){const{color:d}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_COLOR",{});return d})}setColor(d){return Gl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_COLOR",{color:d})})}getOpacity(){return Gl(this,void 0,void 0,function*(){const{opacity:d}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_OPACITY",{});return d})}setOpacity(d){return Gl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_OPACITY",{opacity:d})})}getType(){return Gl(this,void 0,void 0,function*(){const{type:d}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_TYPE",{});return d})}setType(d){return Gl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_TYPE",{type:d})})}getLineType(){return Gl(this,void 0,void 0,function*(){const{lineType:d}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_LINE_TYPE",{});return d})}setLineType(d){return Gl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_LINE_TYPE",{lineType:d})})}getMeasurement(){return Gl(this,void 0,void 0,function*(){const{measurement:d}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_MEASUREMENT",{});return d})}setMeasurement(d){return Gl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_MEASUREMENT",{measurement:d})})}snapPosition(d,t,n){return Gl(this,void 0,void 0,function*(){const{position:u}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_SNAP_POSITION",{position:d,snappingSensitivity:t,useCorners:n});return u})}getDistance(d,t){return Gl(this,void 0,void 0,function*(){const{distance:n}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_DISTANCE",{from:d,to:t});return n})}onChange(d){const t=n=>{d(n.grid)};return this.messageBus.send("OBR_SCENE_GRID_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_GRID_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_SCENE_GRID_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_GRID_EVENT_CHANGE",t)}}}var ae=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class gc{constructor(d){this.messageBus=d}undo(){return ae(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_UNDO",{})})}redo(){return ae(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_REDO",{})})}canUndo(){return ae(this,void 0,void 0,function*(){const{canUndo:d}=yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_CAN_UNDO",{});return d})}canRedo(){return ae(this,void 0,void 0,function*(){const{canRedo:d}=yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_CAN_REDO",{});return d})}}function al(c){for(var d=arguments.length,t=Array(d>1?d-1:0),n=1;n<d;n++)t[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+c+(t.length?" "+t.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function dd(c){return!!c&&!!c[Yl]}function gl(c){var d;return!!c&&(function(t){if(!t||typeof t!="object")return!1;var n=Object.getPrototypeOf(t);if(n===null)return!0;var u=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return u===Object||typeof u=="function"&&Function.toString.call(u)===jc}(c)||Array.isArray(c)||!!c[kd]||!!(!((d=c.constructor)===null||d===void 0)&&d[kd])||xe(c)||Ce(c))}function fd(c,d,t){t===void 0&&(t=!1),zl(c)===0?(t?Object.keys:Zt)(c).forEach(function(n){t&&typeof n=="symbol"||d(n,c[n],c)}):c.forEach(function(n,u){return d(u,n,c)})}function zl(c){var d=c[Yl];return d?d.i>3?d.i-4:d.i:Array.isArray(c)?1:xe(c)?2:Ce(c)?3:0}function Qd(c,d){return zl(c)===2?c.has(d):Object.prototype.hasOwnProperty.call(c,d)}function We(c,d){return zl(c)===2?c.get(d):c[d]}function cc(c,d,t){var n=zl(c);n===2?c.set(d,t):n===3?c.add(t):c[d]=t}function zc(c,d){return c===d?c!==0||1/c==1/d:c!=c&&d!=d}function xe(c){return Ic&&c instanceof Map}function Ce(c){return Qc&&c instanceof Set}function $l(c){return c.o||c.t}function ut(c){if(Array.isArray(c))return Array.prototype.slice.call(c);var d=Mc(c);delete d[Yl];for(var t=Zt(d),n=0;n<t.length;n++){var u=t[n],b=d[u];b.writable===!1&&(b.writable=!0,b.configurable=!0),(b.get||b.set)&&(d[u]={configurable:!0,writable:!0,enumerable:b.enumerable,value:c[u]})}return Object.create(Object.getPrototypeOf(c),d)}function it(c,d){return d===void 0&&(d=!1),Xt(c)||dd(c)||!gl(c)||(zl(c)>1&&(c.set=c.add=c.clear=c.delete=Tc),Object.freeze(c),d&&fd(c,function(t,n){return it(n,!0)},!0)),c}function Tc(){al(2)}function Xt(c){return c==null||typeof c!="object"||Object.isFrozen(c)}function Hl(c){var d=$e[c];return d||al(18,c),d}function Uc(c,d){$e[c]||($e[c]=d)}function yt(){return jd}function Pe(c,d){d&&(Hl("Patches"),c.u=[],c.s=[],c.v=d)}function ye(c){Oe(c),c.p.forEach(kc),c.p=null}function Oe(c){c===jd&&(jd=c.l)}function vt(c){return jd={p:[],l:jd,h:c,m:!0,_:0}}function kc(c){var d=c[Yl];d.i===0||d.i===1?d.j():d.g=!0}function Ie(c,d){d._=d.p.length;var t=d.p[0],n=c!==void 0&&c!==t;return d.h.O||Hl("ES5").S(d,c,n),n?(t[Yl].P&&(ye(d),al(4)),gl(c)&&(c=ve(d,c),d.l||Je(d,c)),d.u&&Hl("Patches").M(t[Yl].t,c,d.u,d.s)):c=ve(d,t,[]),ye(d),d.u&&d.v(d.u,d.s),c!==mt?c:void 0}function ve(c,d,t){if(Xt(d))return d;var n=d[Yl];if(!n)return fd(d,function(X,s){return Jt(c,n,d,X,s,t)},!0),d;if(n.A!==c)return d;if(!n.P)return Je(c,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var u=n.i===4||n.i===5?n.o=ut(n.k):n.o,b=u,e=!1;n.i===3&&(b=new Set(u),u.clear(),e=!0),fd(b,function(X,s){return Jt(c,n,u,X,s,t,e)}),Je(c,u,!1),t&&c.u&&Hl("Patches").N(n,t,c.u,c.s)}return n.o}function Jt(c,d,t,n,u,b,e){if(dd(u)){var X=ve(c,u,b&&d&&d.i!==3&&!Qd(d.R,n)?b.concat(n):void 0);if(cc(t,n,X),!dd(X))return;c.m=!1}else e&&t.add(u);if(gl(u)&&!Xt(u)){if(!c.h.D&&c._<1)return;ve(c,u),d&&d.A.l||Je(c,u)}}function Je(c,d,t){t===void 0&&(t=!1),!c.l&&c.h.D&&c.m&&it(d,t)}function Qe(c,d){var t=c[Yl];return(t?$l(t):c)[d]}function Lt(c,d){if(d in c)for(var t=Object.getPrototypeOf(c);t;){var n=Object.getOwnPropertyDescriptor(t,d);if(n)return n;t=Object.getPrototypeOf(t)}}function _e(c){c.P||(c.P=!0,c.l&&_e(c.l))}function je(c){c.o||(c.o=ut(c.t))}function qe(c,d,t){var n=xe(d)?Hl("MapSet").F(d,t):Ce(d)?Hl("MapSet").T(d,t):c.O?function(u,b){var e=Array.isArray(u),X={i:e?1:0,A:b?b.A:yt(),P:!1,I:!1,R:{},l:b,t:u,k:null,o:null,j:null,C:!1},s=X,l=lt;e&&(s=[X],l=Ud);var i=Proxy.revocable(s,l),G=i.revoke,h=i.proxy;return X.k=h,X.j=G,h}(d,t):Hl("ES5").J(d,t);return(t?t.A:yt()).p.push(n),n}function Pc(c){return dd(c)||al(22,c),function d(t){if(!gl(t))return t;var n,u=t[Yl],b=zl(t);if(u){if(!u.P&&(u.i<4||!Hl("ES5").K(u)))return u.t;u.I=!0,n=St(t,b),u.I=!1}else n=St(t,b);return fd(n,function(e,X){u&&We(u.t,e)===X||cc(n,e,d(X))}),b===3?new Set(n):n}(c)}function St(c,d){switch(d){case 2:return new Map(c);case 3:return Array.from(c)}return ut(c)}function ot(){function c(n){if(!gl(n))return n;if(Array.isArray(n))return n.map(c);if(xe(n))return new Map(Array.from(n.entries()).map(function(e){return[e[0],c(e[1])]}));if(Ce(n))return new Set(Array.from(n).map(c));var u=Object.create(Object.getPrototypeOf(n));for(var b in n)u[b]=c(n[b]);return Qd(n,kd)&&(u[kd]=n[kd]),u}function d(n){return dd(n)?c(n):n}var t="add";Uc("Patches",{$:function(n,u){return u.forEach(function(b){for(var e=b.path,X=b.op,s=n,l=0;l<e.length-1;l++){var i=zl(s),G=e[l];typeof G!="string"&&typeof G!="number"&&(G=""+G),i!==0&&i!==1||G!=="__proto__"&&G!=="constructor"||al(24),typeof s=="function"&&G==="prototype"&&al(24),typeof(s=We(s,G))!="object"&&al(15,e.join("/"))}var h=zl(s),R=c(b.value),y=e[e.length-1];switch(X){case"replace":switch(h){case 2:return s.set(y,R);case 3:al(16);default:return s[y]=R}case t:switch(h){case 1:return y==="-"?s.push(R):s.splice(y,0,R);case 2:return s.set(y,R);case 3:return s.add(R);default:return s[y]=R}case"remove":switch(h){case 1:return s.splice(y,1);case 2:return s.delete(y);case 3:return s.delete(b.value);default:return delete s[y]}default:al(17,X)}}),n},N:function(n,u,b,e){switch(n.i){case 0:case 4:case 2:return function(X,s,l,i){var G=X.t,h=X.o;fd(X.R,function(R,y){var L=We(G,R),J=We(h,R),C=y?Qd(G,R)?"replace":t:"remove";if(L!==J||C!=="replace"){var g=s.concat(R);l.push(C==="remove"?{op:C,path:g}:{op:C,path:g,value:J}),i.push(C===t?{op:"remove",path:g}:C==="remove"?{op:t,path:g,value:d(L)}:{op:"replace",path:g,value:d(L)})}})}(n,u,b,e);case 5:case 1:return function(X,s,l,i){var G=X.t,h=X.R,R=X.o;if(R.length<G.length){var y=[R,G];G=y[0],R=y[1];var L=[i,l];l=L[0],i=L[1]}for(var J=0;J<G.length;J++)if(h[J]&&R[J]!==G[J]){var C=s.concat([J]);l.push({op:"replace",path:C,value:d(R[J])}),i.push({op:"replace",path:C,value:d(G[J])})}for(var g=G.length;g<R.length;g++){var _=s.concat([g]);l.push({op:t,path:_,value:d(R[g])})}G.length<R.length&&i.push({op:"replace",path:s.concat(["length"]),value:G.length})}(n,u,b,e);case 3:return function(X,s,l,i){var G=X.t,h=X.o,R=0;G.forEach(function(y){if(!h.has(y)){var L=s.concat([R]);l.push({op:"remove",path:L,value:y}),i.unshift({op:t,path:L,value:y})}R++}),R=0,h.forEach(function(y){if(!G.has(y)){var L=s.concat([R]);l.push({op:t,path:L,value:y}),i.unshift({op:"remove",path:L,value:y})}R++})}(n,u,b,e)}},M:function(n,u,b,e){b.push({op:"replace",path:[],value:u===mt?void 0:u}),e.push({op:"replace",path:[],value:n})}})}var Nt,jd,at=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ic=typeof Map<"u",Qc=typeof Set<"u",Ft=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mt=at?Symbol.for("immer-nothing"):((Nt={})["immer-nothing"]=!0,Nt),kd=at?Symbol.for("immer-draftable"):"__$immer_draftable",Yl=at?Symbol.for("immer-state"):"__$immer_state",jc=""+Object.prototype.constructor,Zt=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:Object.getOwnPropertyNames,Mc=Object.getOwnPropertyDescriptors||function(c){var d={};return Zt(c).forEach(function(t){d[t]=Object.getOwnPropertyDescriptor(c,t)}),d},$e={},lt={get:function(c,d){if(d===Yl)return c;var t=$l(c);if(!Qd(t,d))return function(u,b,e){var X,s=Lt(b,e);return s?"value"in s?s.value:(X=s.get)===null||X===void 0?void 0:X.call(u.k):void 0}(c,t,d);var n=t[d];return c.I||!gl(n)?n:n===Qe(c.t,d)?(je(c),c.o[d]=qe(c.A.h,n,c)):n},has:function(c,d){return d in $l(c)},ownKeys:function(c){return Reflect.ownKeys($l(c))},set:function(c,d,t){var n=Lt($l(c),d);if(n?.set)return n.set.call(c.k,t),!0;if(!c.P){var u=Qe($l(c),d),b=u?.[Yl];if(b&&b.t===t)return c.o[d]=t,c.R[d]=!1,!0;if(zc(t,u)&&(t!==void 0||Qd(c.t,d)))return!0;je(c),_e(c)}return c.o[d]===t&&(t!==void 0||d in c.o)||Number.isNaN(t)&&Number.isNaN(c.o[d])||(c.o[d]=t,c.R[d]=!0),!0},deleteProperty:function(c,d){return Qe(c.t,d)!==void 0||d in c.t?(c.R[d]=!1,je(c),_e(c)):delete c.R[d],c.o&&delete c.o[d],!0},getOwnPropertyDescriptor:function(c,d){var t=$l(c),n=Reflect.getOwnPropertyDescriptor(t,d);return n&&{writable:!0,configurable:c.i!==1||d!=="length",enumerable:n.enumerable,value:t[d]}},defineProperty:function(){al(11)},getPrototypeOf:function(c){return Object.getPrototypeOf(c.t)},setPrototypeOf:function(){al(12)}},Ud={};fd(lt,function(c,d){Ud[c]=function(){return arguments[0]=arguments[0][0],d.apply(this,arguments)}}),Ud.deleteProperty=function(c,d){return Ud.set.call(this,c,d,void 0)},Ud.set=function(c,d,t){return lt.set.call(this,c[0],d,t,c[0])};var Dc=function(){function c(t){var n=this;this.O=Ft,this.D=!0,this.produce=function(u,b,e){if(typeof u=="function"&&typeof b!="function"){var X=b;b=u;var s=n;return function(L){var J=this;L===void 0&&(L=X);for(var C=arguments.length,g=Array(C>1?C-1:0),_=1;_<C;_++)g[_-1]=arguments[_];return s.produce(L,function($){var bl;return(bl=b).call.apply(bl,[J,$].concat(g))})}}var l;if(typeof b!="function"&&al(6),e!==void 0&&typeof e!="function"&&al(7),gl(u)){var i=vt(n),G=qe(n,u,void 0),h=!0;try{l=b(G),h=!1}finally{h?ye(i):Oe(i)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(L){return Pe(i,e),Ie(L,i)},function(L){throw ye(i),L}):(Pe(i,e),Ie(l,i))}if(!u||typeof u!="object"){if((l=b(u))===void 0&&(l=u),l===mt&&(l=void 0),n.D&&it(l,!0),e){var R=[],y=[];Hl("Patches").M(u,l,R,y),e(R,y)}return l}al(21,u)},this.produceWithPatches=function(u,b){if(typeof u=="function")return function(l){for(var i=arguments.length,G=Array(i>1?i-1:0),h=1;h<i;h++)G[h-1]=arguments[h];return n.produceWithPatches(l,function(R){return u.apply(void 0,[R].concat(G))})};var e,X,s=n.produce(u,b,function(l,i){e=l,X=i});return typeof Promise<"u"&&s instanceof Promise?s.then(function(l){return[l,e,X]}):[s,e,X]},typeof t?.useProxies=="boolean"&&this.setUseProxies(t.useProxies),typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var d=c.prototype;return d.createDraft=function(t){gl(t)||al(8),dd(t)&&(t=Pc(t));var n=vt(this),u=qe(this,t,void 0);return u[Yl].C=!0,Oe(n),u},d.finishDraft=function(t,n){var u=t&&t[Yl],b=u.A;return Pe(b,n),Ie(void 0,b)},d.setAutoFreeze=function(t){this.D=t},d.setUseProxies=function(t){t&&!Ft&&al(20),this.O=t},d.applyPatches=function(t,n){var u;for(u=n.length-1;u>=0;u--){var b=n[u];if(b.path.length===0&&b.op==="replace"){t=b.value;break}}u>-1&&(n=n.slice(u+1));var e=Hl("Patches").$;return dd(t)?e(t,n):this.produce(t,function(X){return e(X,n)})},c}(),fl=new Dc;fl.produce;var Gt=fl.produceWithPatches.bind(fl);fl.setAutoFreeze.bind(fl);fl.setUseProxies.bind(fl);fl.applyPatches.bind(fl);fl.createDraft.bind(fl);fl.finishDraft.bind(fl);var Gd=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};ot();class Ac{constructor(d){this.messageBus=d}getItems(d){return Gd(this,void 0,void 0,function*(){if(Array.isArray(d)){const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEMS",{ids:d});return t}else if(d){const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ALL_ITEMS",{});return t.filter(d)}else{const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ALL_ITEMS",{});return t}})}isItemArray(d){return Array.isArray(d)&&d.every(t=>typeof t!="string")}updateItems(d,t){return Gd(this,void 0,void 0,function*(){let n;this.isItemArray(d)?n=d:n=yield this.getItems(d);const[u,b]=Gt(n,t),e=u.map(X=>({id:X.id,type:X.type}));for(const X of b){const[s,l]=X.path;typeof s=="number"&&typeof l=="string"&&(e[s][l]=u[s][l])}yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_UPDATE_ITEMS",{updates:e})})}addItems(d){return Gd(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_ADD_ITEMS",{items:d})})}deleteItems(d){return Gd(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_DELETE_ITEMS",{ids:d})})}getItemAttachments(d){return Gd(this,void 0,void 0,function*(){const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEM_ATTACHMENTS",{ids:d});return t})}getItemBounds(d){return Gd(this,void 0,void 0,function*(){const{bounds:t}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEM_BOUNDS",{ids:d});return t})}onChange(d){const t=n=>{d(n.items)};return this.messageBus.send("OBR_SCENE_ITEMS_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_ITEMS_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_SCENE_ITEMS_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_ITEMS_EVENT_CHANGE",t)}}}var hd=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};ot();class Oc{constructor(d){this.messageBus=d}getItems(d){return hd(this,void 0,void 0,function*(){if(Array.isArray(d)){const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEMS",{ids:d});return t}else if(d){const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ALL_ITEMS",{});return t.filter(d)}else{const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ALL_ITEMS",{});return t}})}updateItems(d,t,n){return hd(this,void 0,void 0,function*(){const u=yield this.getItems(d),[b,e]=Gt(u,t),X=b.map(s=>({id:s.id,type:s.type}));for(const s of e){const[l,i]=s.path;typeof l=="number"&&typeof i=="string"&&(X[l][i]=b[l][i])}yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_UPDATE_ITEMS",{updates:X,fastUpdate:n})})}addItems(d){return hd(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_ADD_ITEMS",{items:d})})}deleteItems(d){return hd(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_DELETE_ITEMS",{ids:d})})}getItemAttachments(d){return hd(this,void 0,void 0,function*(){const{items:t}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEM_ATTACHMENTS",{ids:d});return t})}getItemBounds(d){return hd(this,void 0,void 0,function*(){const{bounds:t}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEM_BOUNDS",{ids:d});return t})}onChange(d){const t=n=>{d(n.items)};return this.messageBus.send("OBR_SCENE_LOCAL_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_LOCAL_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_SCENE_LOCAL_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_LOCAL_EVENT_CHANGE",t)}}}var Me=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class _c{constructor(d){this.messageBus=d,this.grid=new Ec(d),this.fog=new Kc(d),this.history=new gc(d),this.items=new Ac(d),this.local=new Oc(d)}isReady(){return Me(this,void 0,void 0,function*(){const{ready:d}=yield this.messageBus.sendAsync("OBR_SCENE_IS_READY",{});return d})}onReadyChange(d){const t=n=>{d(n.ready)};return this.messageBus.send("OBR_SCENE_READY_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_EVENT_READY_CHANGE",t),()=>{this.messageBus.send("OBR_SCENE_READY_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_EVENT_READY_CHANGE",t)}}getMetadata(){return Me(this,void 0,void 0,function*(){const{metadata:d}=yield this.messageBus.sendAsync("OBR_SCENE_GET_METADATA",{});return d})}setMetadata(d){return Me(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_SET_METADATA",{update:d})})}onMetadataChange(d){const t=n=>{d(n.metadata)};return this.messageBus.send("OBR_SCENE_METADATA_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_METADATA_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_SCENE_METADATA_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_METADATA_EVENT_CHANGE",t)}}}function Pd(c){return c.map(d=>Object.assign(Object.assign({},d),{icon:d.icon.startsWith("http")?d.icon:`${window.location.origin}${d.icon}`}))}function nc(c){return Object.assign(Object.assign({},c),{url:c.url.startsWith("http")?c.url:`${window.location.origin}${c.url}`})}var Ht=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class qc{constructor(d){this.contextMenus={},this.handleClick=t=>{const n=this.contextMenus[t.id];n&&n.onClick(t.context,t.elementId)},this.messageBus=d,d.on("OBR_CONTEXT_MENU_EVENT_CLICK",this.handleClick)}create(d){return Ht(this,void 0,void 0,function*(){this.messageBus.sendAsync("OBR_CONTEXT_MENU_CREATE",{id:d.id,shortcut:d.shortcut,icons:Pd(d.icons)}),this.contextMenus[d.id]=d})}remove(d){return Ht(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_CONTEXT_MENU_REMOVE",{id:d}),delete this.contextMenus[d]})}}var Sl=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class $c{constructor(d){this.tools={},this.toolActions={},this.toolModes={},this.handleToolClick=t=>{const n=this.tools[t.id];if(n)if(n.onClick){const u=n.onClick(t.context,t.elementId);Promise.resolve(u).then(b=>{b&&this.messageBus.send("OBR_TOOL_ACTIVATE",{id:t.id})})}else this.messageBus.send("OBR_TOOL_ACTIVATE",{id:t.id})},this.handleToolActionClick=t=>{var n;const u=this.toolActions[t.id];u&&((n=u.onClick)===null||n===void 0||n.call(u,t.context,t.elementId))},this.handleToolModeClick=t=>{const n=this.toolModes[t.id];if(n)if(n.onClick){const u=n.onClick(t.context,t.elementId);Promise.resolve(u).then(b=>{b&&this.messageBus.send("OBR_TOOL_MODE_ACTIVATE",{toolId:t.context.activeTool,modeId:t.id})})}else this.messageBus.send("OBR_TOOL_MODE_ACTIVATE",{toolId:t.context.activeTool,modeId:t.id})},this.handleToolModeToolClick=t=>{const n=this.toolModes[t.id];if(n)if(n.onToolClick){const u=n.onToolClick(t.context,t.event);Promise.resolve(u).then(b=>{b&&t.event.target&&!t.event.target.locked&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[t.event.target.id]})})}else t.event.target&&!t.event.target.locked&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[t.event.target.id]})},this.handleToolModeToolDoubleClick=t=>{const n=this.toolModes[t.id];if(n)if(n.onToolDoubleClick){const u=n.onToolDoubleClick(t.context,t.event);Promise.resolve(u).then(b=>{b&&t.event.target&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[t.event.target.id]})})}else t.event.target&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[t.event.target.id]})},this.handleToolModeToolDown=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onToolDown)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeToolMove=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onToolMove)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeToolUp=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onToolUp)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeToolDragStart=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onToolDragStart)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeToolDragMove=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onToolDragMove)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeToolDragEnd=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onToolDragEnd)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeToolDragCancel=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onToolDragCancel)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeKeyDown=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onKeyDown)===null||n===void 0||n.call(u,t.context,t.event))},this.handleToolModeKeyUp=t=>{var n;const u=this.toolModes[t.id];u&&((n=u.onKeyUp)===null||n===void 0||n.call(u,t.context,t.event))},this.messageBus=d,d.on("OBR_TOOL_EVENT_CLICK",this.handleToolClick),d.on("OBR_TOOL_ACTION_EVENT_CLICK",this.handleToolActionClick),d.on("OBR_TOOL_MODE_EVENT_CLICK",this.handleToolModeClick),d.on("OBR_TOOL_MODE_EVENT_TOOL_CLICK",this.handleToolModeToolClick),d.on("OBR_TOOL_MODE_EVENT_TOOL_DOUBLE_CLICK",this.handleToolModeToolDoubleClick),d.on("OBR_TOOL_MODE_EVENT_TOOL_DOWN",this.handleToolModeToolDown),d.on("OBR_TOOL_MODE_EVENT_TOOL_MOVE",this.handleToolModeToolMove),d.on("OBR_TOOL_MODE_EVENT_TOOL_UP",this.handleToolModeToolUp),d.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_START",this.handleToolModeToolDragStart),d.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_MOVE",this.handleToolModeToolDragMove),d.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_END",this.handleToolModeToolDragEnd),d.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_CANCEL",this.handleToolModeToolDragCancel),d.on("OBR_TOOL_MODE_EVENT_KEY_DOWN",this.handleToolModeKeyDown),d.on("OBR_TOOL_MODE_EVENT_KEY_UP",this.handleToolModeKeyUp)}create(d){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_CREATE",{id:d.id,shortcut:d.shortcut,defaultMode:d.defaultMode,defaultMetadata:d.defaultMetadata,icons:Pd(d.icons),disabled:d.disabled}),this.tools[d.id]=d})}remove(d){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_REMOVE",{id:d}),delete this.tools[d]})}activateTool(d){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTIVATE",{id:d})})}getMetadata(d){return Sl(this,void 0,void 0,function*(){const{metadata:t}=yield this.messageBus.sendAsync("OBR_TOOL_GET_METADATA",{id:d});return t})}setMetadata(d,t){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_SET_METADATA",{toolId:d,update:t})})}createAction(d){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTION_CREATE",{id:d.id,shortcut:d.shortcut,icons:Pd(d.icons),disabled:d.disabled}),this.toolActions[d.id]=d})}removeAction(d){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTION_REMOVE",{id:d}),delete this.tools[d]})}createMode(d){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_CREATE",{id:d.id,shortcut:d.shortcut,icons:Pd(d.icons),preventDrag:d.preventDrag,disabled:d.disabled,cursors:d.cursors}),this.toolModes[d.id]=d})}removeMode(d){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_REMOVE",{id:d}),delete this.tools[d]})}activateMode(d,t){return Sl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_ACTIVATE",{toolId:d,modeId:t})})}}var xt=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class ln{constructor(d){this.messageBus=d}open(d){return xt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_OPEN",Object.assign({},nc(d)))})}close(d){return xt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_CLOSE",{id:d})})}}var Ct=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class dn{constructor(d){this.messageBus=d}open(d){return Ct(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_MODAL_OPEN",Object.assign({},nc(d)))})}close(d){return Ct(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_MODAL_CLOSE",{id:d})})}}var pl=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class en{constructor(d){this.messageBus=d}getWidth(){return pl(this,void 0,void 0,function*(){const{width:d}=yield this.messageBus.sendAsync("OBR_ACTION_GET_WIDTH",{});return d})}setWidth(d){return pl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_WIDTH",{width:d})})}getHeight(){return pl(this,void 0,void 0,function*(){const{height:d}=yield this.messageBus.sendAsync("OBR_ACTION_GET_HEIGHT",{});return d})}setHeight(d){return pl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_HEIGHT",{height:d})})}getBadgeText(){return pl(this,void 0,void 0,function*(){const{badgeText:d}=yield this.messageBus.sendAsync("OBR_ACTION_GET_BADGE_TEXT",{});return d})}setBadgeText(d){return pl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_BADGE_TEXT",{badgeText:d})})}getBadgeBackgroundColor(){return pl(this,void 0,void 0,function*(){const{badgeBackgroundColor:d}=yield this.messageBus.sendAsync("OBR_ACTION_GET_BADGE_BACKGROUND_COLOR",{});return d})}setBadgeBackgroundColor(d){return pl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_BADGE_BACKGROUND_COLOR",{badgeBackgroundColor:d})})}getIcon(){return pl(this,void 0,void 0,function*(){const{icon:d}=yield this.messageBus.sendAsync("OBR_ACTION_GET_ICON",{});return d})}setIcon(d){return pl(this,void 0,void 0,function*(){const t=Pd([{icon:d}]);yield this.messageBus.sendAsync("OBR_ACTION_SET_ICON",{icon:t[0].icon})})}getTitle(){return pl(this,void 0,void 0,function*(){const{title:d}=yield this.messageBus.sendAsync("OBR_ACTION_GET_TITLE",{});return d})}setTitle(d){return pl(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_TITLE",{title:d})})}isOpen(){return pl(this,void 0,void 0,function*(){const{isOpen:d}=yield this.messageBus.sendAsync("OBR_ACTION_GET_IS_OPEN",{});return d})}onOpenChange(d){const t=n=>{d(n.isOpen)};return this.messageBus.send("OBR_ACTION_IS_OPEN_SUBSCRIBE",{}),this.messageBus.on("OBR_ACTION_IS_OPEN_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_IS_OPEN_ACTION_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ACTION_IS_OPEN_EVENT_CHANGE",t)}}}var tn=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};ot();class cn{constructor(d){this.messageBus=d}startItemInteraction(d){return tn(this,void 0,void 0,function*(){const{id:t}=yield this.messageBus.sendAsync("OBR_INTERACTION_START_ITEM_INTERACTION",{baseState:d});let n=d;return[e=>{const[X,s]=Gt(n,e);return n=X,this.messageBus.send("OBR_INTERACTION_UPDATE_ITEM_INTERACTION",{id:t,patches:s}),X},()=>{this.messageBus.send("OBR_INTERACTION_STOP_ITEM_INTERACTION",{id:t})}]})}}var nn=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class bn{constructor(d){this.messageBus=d}getPlayers(){return nn(this,void 0,void 0,function*(){const{players:d}=yield this.messageBus.sendAsync("OBR_PARTY_GET_PLAYERS",{});return d})}onChange(d){const t=n=>{d(n.players)};return this.messageBus.send("OBR_PARTY_SUBSCRIBE",{}),this.messageBus.on("OBR_PARTY_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_PARTY_UNSUBSCRIBE",{}),this.messageBus.off("OBR_PARTY_EVENT_CHANGE",t)}}}var De=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class sn{constructor(d){this.messageBus=d}get id(){return this.messageBus.roomId}getPermissions(){return De(this,void 0,void 0,function*(){const{permissions:d}=yield this.messageBus.sendAsync("OBR_ROOM_GET_PERMISSIONS",{});return d})}getMetadata(){return De(this,void 0,void 0,function*(){const{metadata:d}=yield this.messageBus.sendAsync("OBR_ROOM_GET_METADATA",{});return d})}setMetadata(d){return De(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ROOM_SET_METADATA",{update:d})})}onMetadataChange(d){const t=n=>{d(n.metadata)};return this.messageBus.send("OBR_ROOM_METADATA_SUBSCRIBE",{}),this.messageBus.on("OBR_ROOM_METADATA_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_METADATA_ROOM_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ROOM_METADATA_EVENT_CHANGE",t)}}onPermissionsChange(d){const t=n=>{d(n.permissions)};return this.messageBus.send("OBR_ROOM_PERMISSIONS_SUBSCRIBE",{}),this.messageBus.on("OBR_ROOM_PERMISSIONS_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_PERMISSIONS_ROOM_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ROOM_PERMISSIONS_EVENT_CHANGE",t)}}}var un=globalThis&&globalThis.__awaiter||function(c,d,t,n){function u(b){return b instanceof t?b:new t(function(e){e(b)})}return new(t||(t=Promise))(function(b,e){function X(i){try{l(n.next(i))}catch(G){e(G)}}function s(i){try{l(n.throw(i))}catch(G){e(G)}}function l(i){i.done?b(i.value):u(i.value).then(X,s)}l((n=n.apply(c,d||[])).next())})};class Xn{constructor(d){this.messageBus=d}getTheme(){return un(this,void 0,void 0,function*(){const{theme:d}=yield this.messageBus.sendAsync("OBR_THEME_GET_THEME",{});return d})}onChange(d){const t=n=>{d(n.theme)};return this.messageBus.send("OBR_THEME_SUBSCRIBE",{}),this.messageBus.on("OBR_THEME_EVENT_CHANGE",t),()=>{this.messageBus.send("OBR_THEME_UNSUBSCRIBE",{}),this.messageBus.off("OBR_THEME_EVENT_CHANGE",t)}}}const on=typeof atob=="function",ht=typeof Buffer=="function",Bt=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const an="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",mn=Array.prototype.slice.call(an),me=(c=>{let d={};return c.forEach((t,n)=>d[t]=n),d})(mn),Zn=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ld=String.fromCharCode.bind(String),wt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):c=>new Uint8Array(Array.prototype.slice.call(c,0)),bc=c=>c.replace(/[^A-Za-z0-9\+\/]/g,""),Gn=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,hn=c=>{switch(c.length){case 4:var d=(7&c.charCodeAt(0))<<18|(63&c.charCodeAt(1))<<12|(63&c.charCodeAt(2))<<6|63&c.charCodeAt(3),t=d-65536;return ld((t>>>10)+55296)+ld((t&1023)+56320);case 3:return ld((15&c.charCodeAt(0))<<12|(63&c.charCodeAt(1))<<6|63&c.charCodeAt(2));default:return ld((31&c.charCodeAt(0))<<6|63&c.charCodeAt(1))}},rn=c=>c.replace(Gn,hn),Rn=c=>{if(c=c.replace(/\s+/g,""),!Zn.test(c))throw new TypeError("malformed base64.");c+="==".slice(2-(c.length&3));let d,t="",n,u;for(let b=0;b<c.length;)d=me[c.charAt(b++)]<<18|me[c.charAt(b++)]<<12|(n=me[c.charAt(b++)])<<6|(u=me[c.charAt(b++)]),t+=n===64?ld(d>>16&255):u===64?ld(d>>16&255,d>>8&255):ld(d>>16&255,d>>8&255,d&255);return t},sc=on?c=>atob(bc(c)):ht?c=>Buffer.from(c,"base64").toString("binary"):Rn,Wn=ht?c=>wt(Buffer.from(c,"base64")):c=>wt(sc(c).split("").map(d=>d.charCodeAt(0))),Vn=ht?c=>Buffer.from(c,"base64").toString("utf8"):Bt?c=>Bt.decode(Wn(c)):c=>rn(sc(c)),pn=c=>bc(c.replace(/[-_]/g,d=>d=="-"?"+":"/")),Yn=c=>Vn(pn(c));function fn(){const d=new URLSearchParams(window.location.search).get("obrref");let t="",n="";if(d){const b=Yn(d).split(" ");b.length===2&&(t=b[0],n=b[1])}return{origin:t,roomId:n}}var Kt;(function(c){c[c.MOVE=0]="MOVE",c[c.LINE=1]="LINE",c[c.QUAD=2]="QUAD",c[c.CONIC=3]="CONIC",c[c.CUBIC=4]="CUBIC",c[c.CLOSE=5]="CLOSE"})(Kt||(Kt={}));const dt=fn(),ml=new Bc(dt.origin,dt.roomId),yn=new Vc(ml),vn=new Wc(ml),Jn=new bn(ml),Ln=new wc(ml),Sn=new _c(ml),Nn=new qc(ml),Fn=new $c(ml),Hn=new ln(ml),xn=new dn(ml),Cn=new en(ml),Bn=new cn(ml),wn=new sn(ml),Kn=new Xn(ml),ll={onReady:c=>{ml.ready?c():ml.once("OBR_READY",()=>c())},get isReady(){return ml.ready},viewport:yn,player:vn,party:Jn,notification:Ln,scene:Sn,contextMenu:Nn,tool:Fn,popover:Hn,modal:xn,action:Cn,interaction:Bn,room:wn,theme:Kn,isAvailable:!!dt.origin},En="modulepreload",gn=function(c){return"/"+c},Et={},gt=function(d,t,n){if(!t||t.length===0)return d();const u=document.getElementsByTagName("link");return Promise.all(t.map(b=>{if(b=gn(b),b in Et)return;Et[b]=!0;const e=b.endsWith(".css"),X=e?'[rel="stylesheet"]':"";if(!!n)for(let i=u.length-1;i>=0;i--){const G=u[i];if(G.href===b&&(!e||G.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${X}`))return;const l=document.createElement("link");if(l.rel=e?"stylesheet":En,e||(l.as="script",l.crossOrigin=""),l.href=b,document.head.appendChild(l),e)return new Promise((i,G)=>{l.addEventListener("load",i),l.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${b}`)))})})).then(()=>d())};var zn=Object.defineProperty,Tn=(c,d,t)=>d in c?zn(c,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[d]=t,rd=(c,d,t)=>(Tn(c,typeof d!="symbol"?d+"":d,t),t),rt=(c,d,t)=>{if(!d.has(c))throw TypeError("Cannot "+t)},dl=(c,d,t)=>(rt(c,d,"read from private field"),t?t.call(c):d.get(c)),hl=(c,d,t)=>{if(d.has(c))throw TypeError("Cannot add the same private member more than once");d instanceof WeakSet?d.add(c):d.set(c,t)},vl=(c,d,t,n)=>(rt(c,d,"write to private field"),n?n.call(c,t):d.set(c,t),t),Yd=(c,d,t,n)=>({set _(u){vl(c,d,u,t)},get _(){return dl(c,d,n)}}),ql=(c,d,t)=>(rt(c,d,"access private method"),t);function Un(c){const{selector:d,id:t}=c;if(!d||typeof d!="string")throw new Error("You must provide a DOM selector as the first argument in order to render the Dice Box");let n;const u=document.querySelector(d);if(!(u!=null&&u.nodeName))throw new Error(`DiceBox target DOM node: '${d}' not found or not available yet. Try invoking inside a DOMContentLoaded event`);return u.nodeName.toLowerCase()!=="canvas"?(n=document.createElement("canvas"),n.id=t,u.appendChild(n)):n=u,n}const uc="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHN0KHAsdCxtKXtyZXR1cm4gcCooMS1tKSt0Km19dmFyIFp0PXR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmN1cnJlbnRTY3JpcHQ/ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM6dm9pZCAwO3R5cGVvZiBfX2ZpbGVuYW1lPCJ1IiYmKFp0PVp0fHxfX2ZpbGVuYW1lKTtmdW5jdGlvbiBnbChwKXtwPXB8fHt9O3ZhciB0O3R8fCh0PXR5cGVvZiBwPCJ1Ij9wOnt9KTt2YXIgbTt0LnJlYWR5PW5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe209ZX0pO3ZhciBkPXt9LHY7Zm9yKHYgaW4gdCl0Lmhhc093blByb3BlcnR5KHYpJiYoZFt2XT10W3ZdKTt2YXIgTD0hMSxIPSExLHE9ITEsWT0hMTtMPXR5cGVvZiB3aW5kb3c9PSJvYmplY3QiLEg9dHlwZW9mIGltcG9ydFNjcmlwdHM9PSJmdW5jdGlvbiIscT10eXBlb2YgcHJvY2Vzcz09Im9iamVjdCImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zPT0ib2JqZWN0IiYmdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZT09InN0cmluZyIsWT0hTCYmIXEmJiFIO3ZhciBqPSIiLFosaHQsd3QsRztxPyhqPUg/cmVxdWlyZSgicGF0aCIpLmRpcm5hbWUoaikrIi8iOl9fZGlybmFtZSsiLyIsWj1mdW5jdGlvbihlLG8pe3JldHVybiB3dHx8KHd0PXJlcXVpcmUoImZzIikpLEd8fChHPXJlcXVpcmUoInBhdGgiKSksZT1HLm5vcm1hbGl6ZShlKSx3dC5yZWFkRmlsZVN5bmMoZSxvP251bGw6InV0ZjgiKX0saHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9WihlLCEwKSxlLmJ1ZmZlcnx8KGU9bmV3IFVpbnQ4QXJyYXkoZSkpLEx0KGUuYnVmZmVyKSxlfSwxPHByb2Nlc3MuYXJndi5sZW5ndGgmJnByb2Nlc3MuYXJndlsxXS5yZXBsYWNlKC9cXC9nLCIvIikscHJvY2Vzcy5hcmd2LnNsaWNlKDIpLHByb2Nlc3Mub24oInVuY2F1Z2h0RXhjZXB0aW9uIixmdW5jdGlvbihlKXt0aHJvdyBlfSkscHJvY2Vzcy5vbigidW5oYW5kbGVkUmVqZWN0aW9uIixHdCksdC5pbnNwZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn0pOlk/KHR5cGVvZiByZWFkPCJ1IiYmKFo9ZnVuY3Rpb24oZSl7cmV0dXJuIHJlYWQoZSl9KSxodD1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHJlYWRidWZmZXI9PSJmdW5jdGlvbiI/bmV3IFVpbnQ4QXJyYXkocmVhZGJ1ZmZlcihlKSk6KGU9cmVhZChlLCJiaW5hcnkiKSxMdCh0eXBlb2YgZT09Im9iamVjdCIpLGUpfSx0eXBlb2YgcHJpbnQ8InUiJiYodHlwZW9mIGNvbnNvbGU+InUiJiYoY29uc29sZT17fSksY29uc29sZS5sb2c9cHJpbnQsY29uc29sZS53YXJuPWNvbnNvbGUuZXJyb3I9dHlwZW9mIHByaW50RXJyPCJ1Ij9wcmludEVycjpwcmludCkpOihMfHxIKSYmKEg/aj1zZWxmLmxvY2F0aW9uLmhyZWY6ZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKGo9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpLFp0JiYoaj1adCksaj1qLmluZGV4T2YoImJsb2I6IikhPT0wP2ouc3Vic3RyKDAsai5sYXN0SW5kZXhPZigiLyIpKzEpOiIiLFo9ZnVuY3Rpb24oZSl7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBvLm9wZW4oIkdFVCIsZSwhMSksby5zZW5kKG51bGwpLG8ucmVzcG9uc2VUZXh0fSxIJiYoaHQ9ZnVuY3Rpb24oZSl7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBvLm9wZW4oIkdFVCIsZSwhMSksby5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIixvLnNlbmQobnVsbCksbmV3IFVpbnQ4QXJyYXkoby5yZXNwb25zZSl9KSk7dmFyIE50PXQucHJpbnR8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksT3Q9dC5wcmludEVycnx8Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7Zm9yKHYgaW4gZClkLmhhc093blByb3BlcnR5KHYpJiYodFt2XT1kW3ZdKTtkPW51bGw7dmFyIGVlPVtdLEJ0LGZ0O3Qud2FzbUJpbmFyeSYmKGZ0PXQud2FzbUJpbmFyeSksdC5ub0V4aXRSdW50aW1lJiZ0Lm5vRXhpdFJ1bnRpbWUsdHlwZW9mIFdlYkFzc2VtYmx5IT0ib2JqZWN0IiYmT3QoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIga3QsV3Q9bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHtpbml0aWFsOjQ3NSxlbGVtZW50OiJhbnlmdW5jIn0pLG9lPSExO2Z1bmN0aW9uIEx0KGUsbyl7ZXx8R3QoIkFzc2VydGlvbiBmYWlsZWQ6ICIrbyl9dmFyIEN0LEh0LFl0LFh0LG5lLFB0PXQuSU5JVElBTF9NRU1PUll8fDY3MTA4ODY0OyhrdD10Lndhc21NZW1vcnk/dC53YXNtTWVtb3J5Om5ldyBXZWJBc3NlbWJseS5NZW1vcnkoe2luaXRpYWw6UHQvNjU1MzYsbWF4aW11bTpQdC82NTUzNn0pKSYmKEN0PWt0LmJ1ZmZlciksUHQ9Q3QuYnl0ZUxlbmd0aDt2YXIgdHQ9Q3Q7Q3Q9dHQsdC5IRUFQOD1uZXcgSW50OEFycmF5KHR0KSx0LkhFQVAxNj1uZXcgSW50MTZBcnJheSh0dCksdC5IRUFQMzI9WXQ9bmV3IEludDMyQXJyYXkodHQpLHQuSEVBUFU4PUh0PW5ldyBVaW50OEFycmF5KHR0KSx0LkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KHR0KSx0LkhFQVBVMzI9bmV3IFVpbnQzMkFycmF5KHR0KSx0LkhFQVBGMzI9WHQ9bmV3IEZsb2F0MzJBcnJheSh0dCksdC5IRUFQRjY0PW5lPW5ldyBGbG9hdDY0QXJyYXkodHQpLFl0WzQ0OTJdPTUyNjEwMDg7ZnVuY3Rpb24gVXQoZSl7Zm9yKDswPGUubGVuZ3RoOyl7dmFyIG89ZS5zaGlmdCgpO2lmKHR5cGVvZiBvPT0iZnVuY3Rpb24iKW8odCk7ZWxzZXt2YXIgbj1vLmhpO3R5cGVvZiBuPT0ibnVtYmVyIj9vLmNpPT09dm9pZCAwP3QuZHluQ2FsbF92KG4pOnQuZHluQ2FsbF92aShuLG8uY2kpOm4oby5jaT09PXZvaWQgMD9udWxsOm8uY2kpfX19dmFyIHJlPVtdLF9lPVtdLFZ0PVtdLEllPVtdLE9lPSExO2Z1bmN0aW9uIE9sKCl7dmFyIGU9dC5wcmVSdW4uc2hpZnQoKTtyZS51bnNoaWZ0KGUpfXZhciBRdD0wLHF0PW51bGw7dC5wcmVsb2FkZWRJbWFnZXM9e30sdC5wcmVsb2FkZWRBdWRpb3M9e307ZnVuY3Rpb24gR3QoZSl7dGhyb3cgdC5vbkFib3J0JiZ0Lm9uQWJvcnQoZSksZSs9IiIsTnQoZSksT3QoZSksb2U9ITAsbmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcigiYWJvcnQoIitlKyIpLiBCdWlsZCB3aXRoIC1zIEFTU0VSVElPTlM9MSBmb3IgbW9yZSBpbmZvLiIpfWZ1bmN0aW9uIGdlKGUpe3ZhciBvPXh0O3JldHVybiBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGg/by5zdGFydHNXaXRoKGUpOm8uaW5kZXhPZihlKT09PTB9ZnVuY3Rpb24gQmUoKXtyZXR1cm4gZ2UoImRhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwiKX12YXIgeHQ9ImFtbW8ud2FzbS53YXNtIjtpZighQmUoKSl7dmFyIFBlPXh0O3h0PXQubG9jYXRlRmlsZT90LmxvY2F0ZUZpbGUoUGUsaik6aitQZX1mdW5jdGlvbiB4ZSgpe3RyeXtpZihmdClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZnQpO2lmKGh0KXJldHVybiBodCh4dCk7dGhyb3ciYm90aCBhc3luYyBhbmQgc3luYyBmZXRjaGluZyBvZiB0aGUgd2FzbSBmYWlsZWQifWNhdGNoKGUpe0d0KGUpfX1mdW5jdGlvbiBCbCgpe3JldHVybiBmdHx8IUwmJiFIfHx0eXBlb2YgZmV0Y2ghPSJmdW5jdGlvbiJ8fGdlKCJmaWxlOi8vIik/bmV3IFByb21pc2UoZnVuY3Rpb24oZSl7ZSh4ZSgpKX0pOmZldGNoKHh0LHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihlKXtpZighZS5vayl0aHJvdyJmYWlsZWQgdG8gbG9hZCB3YXNtIGJpbmFyeSBmaWxlIGF0ICciK3h0KyInIjtyZXR1cm4gZS5hcnJheUJ1ZmZlcigpfSkuY2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4geGUoKX0pfXZhciBQbD17MTM3NjpmdW5jdGlvbihlLG8sbixyLGMsRCxVLGN0KXtpZihlPXQuZ2V0Q2FjaGUodC5Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFjaylbZV0sIWUuaGFzT3duUHJvcGVydHkoImFkZFNpbmdsZVJlc3VsdCIpKXRocm93ImEgSlNJbXBsZW1lbnRhdGlvbiBtdXN0IGltcGxlbWVudCBhbGwgZnVuY3Rpb25zLCB5b3UgZm9yZ290IENvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrOjphZGRTaW5nbGVSZXN1bHQuIjtyZXR1cm4gZS5hZGRTaW5nbGVSZXN1bHQobyxuLHIsYyxELFUsY3QpfX07X2UucHVzaCh7aGk6ZnVuY3Rpb24oKXtUZSgpfX0pO3ZhciBkZT1bXSx4bD17ZTpmdW5jdGlvbigpe0d0KCl9LGI6ZnVuY3Rpb24oZSxvLG4pe2RlLmxlbmd0aD0wO3ZhciByO2ZvcihuPj49MjtyPUh0W28rK107KWRlLnB1c2goMTA1PnI/bmVbKytuPj4xXTpZdFtuXSksKytuO3JldHVybiBQbFtlXS5hcHBseShudWxsLGRlKX0sYzpmdW5jdGlvbihlLG8sbil7SHQuY29weVdpdGhpbihlLG8sbytuKX0sZDpmdW5jdGlvbigpe0d0KCJPT00iKX0sYTpmdW5jdGlvbihlKXt2YXIgbz1EYXRlLm5vdygpO3JldHVybiBZdFtlPj4yXT1vLzFlM3wwLFl0W2UrND4+Ml09byUxZTMqMWUzfDAsMH0sbWVtb3J5Omt0LHRhYmxlOld0fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGMpe3QuYXNtPWMuZXhwb3J0cyxRdC0tLHQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmdC5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKFF0KSxRdD09MCYmcXQmJihjPXF0LHF0PW51bGwsYygpKX1mdW5jdGlvbiBvKGMpe2UoYy5pbnN0YW5jZSl9ZnVuY3Rpb24gbihjKXtyZXR1cm4gQmwoKS50aGVuKGZ1bmN0aW9uKEQpe3JldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShELHIpfSkudGhlbihjLGZ1bmN0aW9uKEQpe090KCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiAiK0QpLEd0KEQpfSkuY2F0Y2goRD0+e2NvbnNvbGUuZXJyb3IoImVycm9yIixEKSxjb25zb2xlLmVycm9yKGBBbW1vIGZpbGUgJyR7eHR9JyBub3QgZm91bmQuIFRoaXMgaXMgcmVxdWlyZWQgdG8gcnVuIHRoZSBwaHlzaWNzIHNpbXVsYXRpb24uIElzIHlvdXIgJ2Fzc2V0UGF0aCcgY29uZmlnIG9wdGlvbiBjb3JyZWN0IGFuZCBpcyB0aGVyZSBhbiAnYW1tbycgZm9sZGVyIHdpdGggdGhlICdhbW1vLndhc20ud2FzbScgZmlsZT8gRW5zdXJlIHlvdXIgc2VydmVyIGhhcyB0aGUgcHJvcGVyIG1pbWUgdHlwZSBmb3IgJy53YXNtJyBmaWxlcy5gKX0pfXZhciByPXthOnhsfTtpZihRdCsrLHQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmdC5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKFF0KSx0Lmluc3RhbnRpYXRlV2FzbSl0cnl7cmV0dXJuIHQuaW5zdGFudGlhdGVXYXNtKHIsZSl9Y2F0Y2goYyl7cmV0dXJuIE90KCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiAiK2MpLCExfXJldHVybiBmdW5jdGlvbigpe2lmKGZ0fHx0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmchPSJmdW5jdGlvbiJ8fEJlKCl8fGdlKCJmaWxlOi8vIil8fHR5cGVvZiBmZXRjaCE9ImZ1bmN0aW9uIilyZXR1cm4gbihvKTtmZXRjaCh4dCx7Y3JlZGVudGlhbHM6InNhbWUtb3JpZ2luIn0pLnRoZW4oZnVuY3Rpb24oYyl7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKGMscikudGhlbihvLGZ1bmN0aW9uKEQpe3JldHVybiBPdCgid2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICIrRCksT3QoImZhbGxpbmcgYmFjayB0byBBcnJheUJ1ZmZlciBpbnN0YW50aWF0aW9uIiksbihvKX0pfSl9KCkse319KSgpO3ZhciBUZT10Ll9fX3dhc21fY2FsbF9jdG9ycz1mdW5jdGlvbigpe3JldHVybihUZT10Ll9fX3dhc21fY2FsbF9jdG9ycz10LmFzbS5mKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3QuX19fZW1fanNfX2FycmF5X2JvdW5kc19jaGVja19lcnJvcj1mdW5jdGlvbigpe3JldHVybih0Ll9fX2VtX2pzX19hcnJheV9ib3VuZHNfY2hlY2tfZXJyb3I9dC5hc20uZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfTt2YXIgRmU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9nZXREaXNwYXRjaGVyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRmU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9nZXREaXNwYXRjaGVyXzA9dC5hc20uaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldFBhaXJDYWNoZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKE1lPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfZ2V0UGFpckNhY2hlXzA9dC5hc20uaSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldERpc3BhdGNoSW5mb18wPWZ1bmN0aW9uKCl7cmV0dXJuKEFlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9dC5hc20uaikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3ZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHdlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20uaykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8yPWZ1bmN0aW9uKCl7cmV0dXJuKGtlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzI9dC5hc20ubCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8zPWZ1bmN0aW9uKCl7cmV0dXJuKExlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9dC5hc20ubSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX3JlbW92ZUNvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEhlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20ubikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldEJyb2FkcGhhc2VfMD1mdW5jdGlvbigpe3JldHVybihZZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldEJyb2FkcGhhc2VfMD10LmFzbS5vKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfY29udmV4U3dlZXBUZXN0XzU9ZnVuY3Rpb24oKXtyZXR1cm4oVmU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9jb252ZXhTd2VlcFRlc3RfNT10LmFzbS5wKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfY29udGFjdFBhaXJUZXN0XzM9ZnVuY3Rpb24oKXtyZXR1cm4oUWU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9jb250YWN0UGFpclRlc3RfMz10LmFzbS5xKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfY29udGFjdFRlc3RfMj1mdW5jdGlvbigpe3JldHVybihFZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2NvbnRhY3RUZXN0XzI9dC5hc20ucikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX3VwZGF0ZVNpbmdsZUFhYmJfMT1mdW5jdGlvbigpe3JldHVybihYZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX3VwZGF0ZVNpbmdsZUFhYmJfMT10LmFzbS5zKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFVlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihVZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX19fZGVzdHJveV9fXzA9dC5hc20udCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHZT10Ll9lYl9idFF1YWRXb3JkX3hfMD1mdW5jdGlvbigpe3JldHVybihHZT10Ll9lYl9idFF1YWRXb3JkX3hfMD10LmFzbS51KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHplPXQuX2ViX2J0UXVhZFdvcmRfeV8wPWZ1bmN0aW9uKCl7cmV0dXJuKHplPXQuX2ViX2J0UXVhZFdvcmRfeV8wPXQuYXNtLnYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTmU9dC5fZWJfYnRRdWFkV29yZF96XzA9ZnVuY3Rpb24oKXtyZXR1cm4oTmU9dC5fZWJfYnRRdWFkV29yZF96XzA9dC5hc20udykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxZT10Ll9lYl9idFF1YWRXb3JkX3dfMD1mdW5jdGlvbigpe3JldHVybihxZT10Ll9lYl9idFF1YWRXb3JkX3dfMD10LmFzbS54KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFplPXQuX2ViX2J0UXVhZFdvcmRfc2V0WF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFplPXQuX2ViX2J0UXVhZFdvcmRfc2V0WF8xPXQuYXNtLnkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS2U9dC5fZWJfYnRRdWFkV29yZF9zZXRZXzE9ZnVuY3Rpb24oKXtyZXR1cm4oS2U9dC5fZWJfYnRRdWFkV29yZF9zZXRZXzE9dC5hc20ueikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkZT10Ll9lYl9idFF1YWRXb3JkX3NldFpfMT1mdW5jdGlvbigpe3JldHVybigkZT10Ll9lYl9idFF1YWRXb3JkX3NldFpfMT10LmFzbS5BKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEplPXQuX2ViX2J0UXVhZFdvcmRfc2V0V18xPWZ1bmN0aW9uKCl7cmV0dXJuKEplPXQuX2ViX2J0UXVhZFdvcmRfc2V0V18xPXQuYXNtLkIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdG89dC5fZWJfYnRRdWFkV29yZF9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHRvPXQuX2ViX2J0UXVhZFdvcmRfX19kZXN0cm95X19fMD10LmFzbS5DKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGVvPXQuX2ViX2J0TW90aW9uU3RhdGVfZ2V0V29ybGRUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihlbz10Ll9lYl9idE1vdGlvblN0YXRlX2dldFdvcmxkVHJhbnNmb3JtXzE9dC5hc20uRCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvbz10Ll9lYl9idE1vdGlvblN0YXRlX3NldFdvcmxkVHJhbnNmb3JtXzE9ZnVuY3Rpb24oKXtyZXR1cm4ob289dC5fZWJfYnRNb3Rpb25TdGF0ZV9zZXRXb3JsZFRyYW5zZm9ybV8xPXQuYXNtLkUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbm89dC5fZWJfYnRNb3Rpb25TdGF0ZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKG5vPXQuX2ViX2J0TW90aW9uU3RhdGVfX19kZXN0cm95X19fMD10LmFzbS5GKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldEFuaXNvdHJvcGljRnJpY3Rpb25fMj1mdW5jdGlvbigpe3JldHVybihybz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRBbmlzb3Ryb3BpY0ZyaWN0aW9uXzI9dC5hc20uRykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxfbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRDb2xsaXNpb25TaGFwZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKF9vPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldENvbGxpc2lvblNoYXBlXzA9dC5hc20uSCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxpbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDb250YWN0UHJvY2Vzc2luZ1RocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGlvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkXzE9dC5hc20uSSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRBY3RpdmF0aW9uU3RhdGVfMT1mdW5jdGlvbigpe3JldHVybihhbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRBY3RpdmF0aW9uU3RhdGVfMT10LmFzbS5KKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHNvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2ZvcmNlQWN0aXZhdGlvblN0YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oc289dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZm9yY2VBY3RpdmF0aW9uU3RhdGVfMT10LmFzbS5LKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHBvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2FjdGl2YXRlXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfYWN0aXZhdGVfMD10LmFzbS5MKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2FjdGl2YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4obG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfYWN0aXZhdGVfMT10LmFzbS5NKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHVvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzQWN0aXZlXzA9ZnVuY3Rpb24oKXtyZXR1cm4odW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfaXNBY3RpdmVfMD10LmFzbS5OKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzS2luZW1hdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oY289dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfaXNLaW5lbWF0aWNPYmplY3RfMD10LmFzbS5PKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzU3RhdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oeW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfaXNTdGF0aWNPYmplY3RfMD10LmFzbS5QKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGhvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzU3RhdGljT3JLaW5lbWF0aWNPYmplY3RfMD1mdW5jdGlvbigpe3JldHVybihobz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0XzA9dC5hc20uUSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxmbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRSZXN0aXR1dGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKGZvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFJlc3RpdHV0aW9uXzA9dC5hc20uUikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRGcmljdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKG1vPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldEZyaWN0aW9uXzA9dC5hc20uUykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxibz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRSb2xsaW5nRnJpY3Rpb25fMD1mdW5jdGlvbigpe3JldHVybihibz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRSb2xsaW5nRnJpY3Rpb25fMD10LmFzbS5UKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFJlc3RpdHV0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZ289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0UmVzdGl0dXRpb25fMT10LmFzbS5VKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldEZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oV289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0RnJpY3Rpb25fMT10LmFzbS5WKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LENvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFJvbGxpbmdGcmljdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKENvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFJvbGxpbmdGcmljdGlvbl8xPXQuYXNtLlcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sam89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0V29ybGRUcmFuc2Zvcm1fMD1mdW5jdGlvbigpe3JldHVybihqbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRXb3JsZFRyYW5zZm9ybV8wPXQuYXNtLlgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdm89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0Q29sbGlzaW9uRmxhZ3NfMD1mdW5jdGlvbigpe3JldHVybih2bz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRDb2xsaXNpb25GbGFnc18wPXQuYXNtLlkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q29sbGlzaW9uRmxhZ3NfMT1mdW5jdGlvbigpe3JldHVybihEbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDb2xsaXNpb25GbGFnc18xPXQuYXNtLlopLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUm89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0V29ybGRUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihSbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRXb3JsZFRyYW5zZm9ybV8xPXQuYXNtLl8pLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q29sbGlzaW9uU2hhcGVfMT1mdW5jdGlvbigpe3JldHVybihTbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDb2xsaXNpb25TaGFwZV8xPXQuYXNtLiQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q2NkTW90aW9uVGhyZXNob2xkXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q2NkTW90aW9uVGhyZXNob2xkXzE9dC5hc20uYWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXNfMT1mdW5jdGlvbigpe3JldHVybihPbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDY2RTd2VwdFNwaGVyZVJhZGl1c18xPXQuYXNtLmJhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFVzZXJJbmRleF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEJvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFVzZXJJbmRleF8wPXQuYXNtLmNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFBvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFVzZXJJbmRleF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFBvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFVzZXJJbmRleF8xPXQuYXNtLmRhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHhvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFVzZXJQb2ludGVyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oeG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0VXNlclBvaW50ZXJfMD10LmFzbS5lYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxUbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRVc2VyUG9pbnRlcl8xPWZ1bmN0aW9uKCl7cmV0dXJuKFRvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFVzZXJQb2ludGVyXzE9dC5hc20uZmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRm89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0QnJvYWRwaGFzZUhhbmRsZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKEZvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldEJyb2FkcGhhc2VIYW5kbGVfMD10LmFzbS5nYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKE1vPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X19fZGVzdHJveV9fXzA9dC5hc20uaGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQW89dC5fZWJfQ29udGFjdFJlc3VsdENhbGxiYWNrX2FkZFNpbmdsZVJlc3VsdF83PWZ1bmN0aW9uKCl7cmV0dXJuKEFvPXQuX2ViX0NvbnRhY3RSZXN1bHRDYWxsYmFja19hZGRTaW5nbGVSZXN1bHRfNz10LmFzbS5pYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3bz10Ll9lYl9Db250YWN0UmVzdWx0Q2FsbGJhY2tfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybih3bz10Ll9lYl9Db250YWN0UmVzdWx0Q2FsbGJhY2tfX19kZXN0cm95X19fMD10LmFzbS5qYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19oYXNIaXRfMD1mdW5jdGlvbigpe3JldHVybihrbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19oYXNIaXRfMD10LmFzbS5rYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPWZ1bmN0aW9uKCl7cmV0dXJuKExvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwXzA9dC5hc20ubGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSG89dC5fZWJfQ29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXBfMT1mdW5jdGlvbigpe3JldHVybihIbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPXQuYXNtLm1hKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFlvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMD1mdW5jdGlvbigpe3JldHVybihZbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzA9dC5hc20ubmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVm89dC5fZWJfQ29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29sbGlzaW9uRmlsdGVyTWFza18xPWZ1bmN0aW9uKCl7cmV0dXJuKFZvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMT10LmFzbS5vYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxRbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMD1mdW5jdGlvbigpe3JldHVybihRbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMD10LmFzbS5wYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxFbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihFbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMT10LmFzbS5xYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFhvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX19fZGVzdHJveV9fXzA9dC5hc20ucmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVW89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9zZXRMb2NhbFNjYWxpbmdfMT1mdW5jdGlvbigpe3JldHVybihVbz10Ll9lYl9idENvbGxpc2lvblNoYXBlX3NldExvY2FsU2NhbGluZ18xPXQuYXNtLnNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEdvPXQuX2ViX2J0Q29sbGlzaW9uU2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oR289dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9nZXRMb2NhbFNjYWxpbmdfMD10LmFzbS50YSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6bz10Ll9lYl9idENvbGxpc2lvblNoYXBlX2NhbGN1bGF0ZUxvY2FsSW5lcnRpYV8yPWZ1bmN0aW9uKCl7cmV0dXJuKHpvPXQuX2ViX2J0Q29sbGlzaW9uU2hhcGVfY2FsY3VsYXRlTG9jYWxJbmVydGlhXzI9dC5hc20udWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTm89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9zZXRNYXJnaW5fMT1mdW5jdGlvbigpe3JldHVybihObz10Ll9lYl9idENvbGxpc2lvblNoYXBlX3NldE1hcmdpbl8xPXQuYXNtLnZhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHFvPXQuX2ViX2J0Q29sbGlzaW9uU2hhcGVfZ2V0TWFyZ2luXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocW89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9nZXRNYXJnaW5fMD10LmFzbS53YSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxabz10Ll9lYl9idENvbGxpc2lvblNoYXBlX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oWm89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9fX2Rlc3Ryb3lfX18wPXQuYXNtLnhhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEtvPXQuX2ViX2J0RGlzcGF0Y2hlcl9nZXROdW1NYW5pZm9sZHNfMD1mdW5jdGlvbigpe3JldHVybihLbz10Ll9lYl9idERpc3BhdGNoZXJfZ2V0TnVtTWFuaWZvbGRzXzA9dC5hc20ueWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sJG89dC5fZWJfYnREaXNwYXRjaGVyX2dldE1hbmlmb2xkQnlJbmRleEludGVybmFsXzE9ZnVuY3Rpb24oKXtyZXR1cm4oJG89dC5fZWJfYnREaXNwYXRjaGVyX2dldE1hbmlmb2xkQnlJbmRleEludGVybmFsXzE9dC5hc20uemEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSm89dC5fZWJfYnREaXNwYXRjaGVyX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oSm89dC5fZWJfYnREaXNwYXRjaGVyX19fZGVzdHJveV9fXzA9dC5hc20uQWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdG49dC5fZWJfYnREeW5hbWljc1dvcmxkX2FkZEFjdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKHRuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9hZGRBY3Rpb25fMT10LmFzbS5CYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxlbj10Ll9lYl9idER5bmFtaWNzV29ybGRfcmVtb3ZlQWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZW49dC5fZWJfYnREeW5hbWljc1dvcmxkX3JlbW92ZUFjdGlvbl8xPXQuYXNtLkNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG9uPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9nZXRTb2x2ZXJJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4ob249dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldFNvbHZlckluZm9fMD10LmFzbS5EYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxubj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMT1mdW5jdGlvbigpe3JldHVybihubj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMT10LmFzbS5FYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxybj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMj1mdW5jdGlvbigpe3JldHVybihybj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMj10LmFzbS5GYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxfbj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMz1mdW5jdGlvbigpe3JldHVybihfbj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMz10LmFzbS5HYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhbj10Ll9lYl9idER5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hlcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKGFuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9nZXREaXNwYXRjaGVyXzA9dC5hc20uSGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc249dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldFBhaXJDYWNoZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKHNuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9nZXRQYWlyQ2FjaGVfMD10LmFzbS5JYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwbj10Ll9lYl9idER5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocG49dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldERpc3BhdGNoSW5mb18wPXQuYXNtLkphKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9hZGRDb2xsaXNpb25PYmplY3RfMT1mdW5jdGlvbigpe3JldHVybihsbj10Ll9lYl9idER5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20uS2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdW49dC5fZWJfYnREeW5hbWljc1dvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8yPWZ1bmN0aW9uKCl7cmV0dXJuKHVuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9hZGRDb2xsaXNpb25PYmplY3RfMj10LmFzbS5MYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxjbj10Ll9lYl9idER5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9ZnVuY3Rpb24oKXtyZXR1cm4oY249dC5fZWJfYnREeW5hbWljc1dvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8zPXQuYXNtLk1hKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHluPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9yZW1vdmVDb2xsaXNpb25PYmplY3RfMT1mdW5jdGlvbigpe3JldHVybih5bj10Ll9lYl9idER5bmFtaWNzV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20uTmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saG49dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldEJyb2FkcGhhc2VfMD1mdW5jdGlvbigpe3JldHVybihobj10Ll9lYl9idER5bmFtaWNzV29ybGRfZ2V0QnJvYWRwaGFzZV8wPXQuYXNtLk9hKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9jb252ZXhTd2VlcFRlc3RfNT1mdW5jdGlvbigpe3JldHVybihmbj10Ll9lYl9idER5bmFtaWNzV29ybGRfY29udmV4U3dlZXBUZXN0XzU9dC5hc20uUGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbW49dC5fZWJfYnREeW5hbWljc1dvcmxkX2NvbnRhY3RQYWlyVGVzdF8zPWZ1bmN0aW9uKCl7cmV0dXJuKG1uPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9jb250YWN0UGFpclRlc3RfMz10LmFzbS5RYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxibj10Ll9lYl9idER5bmFtaWNzV29ybGRfY29udGFjdFRlc3RfMj1mdW5jdGlvbigpe3JldHVybihibj10Ll9lYl9idER5bmFtaWNzV29ybGRfY29udGFjdFRlc3RfMj10LmFzbS5SYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxnbj10Ll9lYl9idER5bmFtaWNzV29ybGRfdXBkYXRlU2luZ2xlQWFiYl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGduPXQuX2ViX2J0RHluYW1pY3NXb3JsZF91cGRhdGVTaW5nbGVBYWJiXzE9dC5hc20uU2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZG49dC5fZWJfYnREeW5hbWljc1dvcmxkX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZG49dC5fZWJfYnREeW5hbWljc1dvcmxkX19fZGVzdHJveV9fXzA9dC5hc20uVGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sV249dC5fZWJfVm9pZFB0cl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFduPXQuX2ViX1ZvaWRQdHJfX19kZXN0cm95X19fMD10LmFzbS5VYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxDbj10Ll9lYl9idFZlY3RvcjNfYnRWZWN0b3IzXzA9ZnVuY3Rpb24oKXtyZXR1cm4oQ249dC5fZWJfYnRWZWN0b3IzX2J0VmVjdG9yM18wPXQuYXNtLlZhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGpuPXQuX2ViX2J0VmVjdG9yM19idFZlY3RvcjNfMz1mdW5jdGlvbigpe3JldHVybihqbj10Ll9lYl9idFZlY3RvcjNfYnRWZWN0b3IzXzM9dC5hc20uV2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdm49dC5fZWJfYnRWZWN0b3IzX2xlbmd0aF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHZuPXQuX2ViX2J0VmVjdG9yM19sZW5ndGhfMD10LmFzbS5YYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxEbj10Ll9lYl9idFZlY3RvcjNfeF8wPWZ1bmN0aW9uKCl7cmV0dXJuKERuPXQuX2ViX2J0VmVjdG9yM194XzA9dC5hc20uWWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUm49dC5fZWJfYnRWZWN0b3IzX3lfMD1mdW5jdGlvbigpe3JldHVybihSbj10Ll9lYl9idFZlY3RvcjNfeV8wPXQuYXNtLlphKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFNuPXQuX2ViX2J0VmVjdG9yM196XzA9ZnVuY3Rpb24oKXtyZXR1cm4oU249dC5fZWJfYnRWZWN0b3IzX3pfMD10LmFzbS5fYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxJbj10Ll9lYl9idFZlY3RvcjNfc2V0WF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEluPXQuX2ViX2J0VmVjdG9yM19zZXRYXzE9dC5hc20uJGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT249dC5fZWJfYnRWZWN0b3IzX3NldFlfMT1mdW5jdGlvbigpe3JldHVybihPbj10Ll9lYl9idFZlY3RvcjNfc2V0WV8xPXQuYXNtLmFiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJuPXQuX2ViX2J0VmVjdG9yM19zZXRaXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQm49dC5fZWJfYnRWZWN0b3IzX3NldFpfMT10LmFzbS5iYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQbj10Ll9lYl9idFZlY3RvcjNfc2V0VmFsdWVfMz1mdW5jdGlvbigpe3JldHVybihQbj10Ll9lYl9idFZlY3RvcjNfc2V0VmFsdWVfMz10LmFzbS5jYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx4bj10Ll9lYl9idFZlY3RvcjNfbm9ybWFsaXplXzA9ZnVuY3Rpb24oKXtyZXR1cm4oeG49dC5fZWJfYnRWZWN0b3IzX25vcm1hbGl6ZV8wPXQuYXNtLmRiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRuPXQuX2ViX2J0VmVjdG9yM19yb3RhdGVfMj1mdW5jdGlvbigpe3JldHVybihUbj10Ll9lYl9idFZlY3RvcjNfcm90YXRlXzI9dC5hc20uZWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRm49dC5fZWJfYnRWZWN0b3IzX2RvdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEZuPXQuX2ViX2J0VmVjdG9yM19kb3RfMT10LmFzbS5mYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNbj10Ll9lYl9idFZlY3RvcjNfb3BfbXVsXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTW49dC5fZWJfYnRWZWN0b3IzX29wX211bF8xPXQuYXNtLmdiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEFuPXQuX2ViX2J0VmVjdG9yM19vcF9hZGRfMT1mdW5jdGlvbigpe3JldHVybihBbj10Ll9lYl9idFZlY3RvcjNfb3BfYWRkXzE9dC5hc20uaGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sd249dC5fZWJfYnRWZWN0b3IzX29wX3N1Yl8xPWZ1bmN0aW9uKCl7cmV0dXJuKHduPXQuX2ViX2J0VmVjdG9yM19vcF9zdWJfMT10LmFzbS5pYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrbj10Ll9lYl9idFZlY3RvcjNfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihrbj10Ll9lYl9idFZlY3RvcjNfX19kZXN0cm95X19fMD10LmFzbS5qYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMbj10Ll9lYl9idFF1YXRlcm5pb25fYnRRdWF0ZXJuaW9uXzQ9ZnVuY3Rpb24oKXtyZXR1cm4oTG49dC5fZWJfYnRRdWF0ZXJuaW9uX2J0UXVhdGVybmlvbl80PXQuYXNtLmtiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEhuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRWYWx1ZV80PWZ1bmN0aW9uKCl7cmV0dXJuKEhuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRWYWx1ZV80PXQuYXNtLmxiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFluPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRFdWxlclpZWF8zPWZ1bmN0aW9uKCl7cmV0dXJuKFluPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRFdWxlclpZWF8zPXQuYXNtLm1iKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRSb3RhdGlvbl8yPWZ1bmN0aW9uKCl7cmV0dXJuKFZuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRSb3RhdGlvbl8yPXQuYXNtLm5iKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFuPXQuX2ViX2J0UXVhdGVybmlvbl9ub3JtYWxpemVfMD1mdW5jdGlvbigpe3JldHVybihRbj10Ll9lYl9idFF1YXRlcm5pb25fbm9ybWFsaXplXzA9dC5hc20ub2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRW49dC5fZWJfYnRRdWF0ZXJuaW9uX2xlbmd0aDJfMD1mdW5jdGlvbigpe3JldHVybihFbj10Ll9lYl9idFF1YXRlcm5pb25fbGVuZ3RoMl8wPXQuYXNtLnBiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFhuPXQuX2ViX2J0UXVhdGVybmlvbl9sZW5ndGhfMD1mdW5jdGlvbigpe3JldHVybihYbj10Ll9lYl9idFF1YXRlcm5pb25fbGVuZ3RoXzA9dC5hc20ucWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVW49dC5fZWJfYnRRdWF0ZXJuaW9uX2RvdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFVuPXQuX2ViX2J0UXVhdGVybmlvbl9kb3RfMT10LmFzbS5yYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHbj10Ll9lYl9idFF1YXRlcm5pb25fbm9ybWFsaXplZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEduPXQuX2ViX2J0UXVhdGVybmlvbl9ub3JtYWxpemVkXzA9dC5hc20uc2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sem49dC5fZWJfYnRRdWF0ZXJuaW9uX2dldEF4aXNfMD1mdW5jdGlvbigpe3JldHVybih6bj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QXhpc18wPXQuYXNtLnRiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5uPXQuX2ViX2J0UXVhdGVybmlvbl9pbnZlcnNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTm49dC5fZWJfYnRRdWF0ZXJuaW9uX2ludmVyc2VfMD10LmFzbS51YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxbj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVfMD1mdW5jdGlvbigpe3JldHVybihxbj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVfMD10LmFzbS52YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxabj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVTaG9ydGVzdFBhdGhfMD1mdW5jdGlvbigpe3JldHVybihabj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVTaG9ydGVzdFBhdGhfMD10LmFzbS53YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxLbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVfMT1mdW5jdGlvbigpe3JldHVybihLbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVfMT10LmFzbS54YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVTaG9ydGVzdFBhdGhfMT1mdW5jdGlvbigpe3JldHVybigkbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVTaG9ydGVzdFBhdGhfMT10LmFzbS55YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxKbj10Ll9lYl9idFF1YXRlcm5pb25fb3BfYWRkXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSm49dC5fZWJfYnRRdWF0ZXJuaW9uX29wX2FkZF8xPXQuYXNtLnpiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHRyPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9zdWJfMT1mdW5jdGlvbigpe3JldHVybih0cj10Ll9lYl9idFF1YXRlcm5pb25fb3Bfc3ViXzE9dC5hc20uQWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZXI9dC5fZWJfYnRRdWF0ZXJuaW9uX29wX211bF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGVyPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9tdWxfMT10LmFzbS5CYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvcj10Ll9lYl9idFF1YXRlcm5pb25fb3BfbXVscV8xPWZ1bmN0aW9uKCl7cmV0dXJuKG9yPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9tdWxxXzE9dC5hc20uQ2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbnI9dC5fZWJfYnRRdWF0ZXJuaW9uX29wX2Rpdl8xPWZ1bmN0aW9uKCl7cmV0dXJuKG5yPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9kaXZfMT10LmFzbS5EYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxycj10Ll9lYl9idFF1YXRlcm5pb25feF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHJyPXQuX2ViX2J0UXVhdGVybmlvbl94XzA9dC5hc20uRWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sX3I9dC5fZWJfYnRRdWF0ZXJuaW9uX3lfMD1mdW5jdGlvbigpe3JldHVybihfcj10Ll9lYl9idFF1YXRlcm5pb25feV8wPXQuYXNtLkZiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGlyPXQuX2ViX2J0UXVhdGVybmlvbl96XzA9ZnVuY3Rpb24oKXtyZXR1cm4oaXI9dC5fZWJfYnRRdWF0ZXJuaW9uX3pfMD10LmFzbS5HYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhcj10Ll9lYl9idFF1YXRlcm5pb25fd18wPWZ1bmN0aW9uKCl7cmV0dXJuKGFyPXQuX2ViX2J0UXVhdGVybmlvbl93XzA9dC5hc20uSGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc3I9dC5fZWJfYnRRdWF0ZXJuaW9uX3NldFhfMT1mdW5jdGlvbigpe3JldHVybihzcj10Ll9lYl9idFF1YXRlcm5pb25fc2V0WF8xPXQuYXNtLkliKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHByPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRZXzE9ZnVuY3Rpb24oKXtyZXR1cm4ocHI9dC5fZWJfYnRRdWF0ZXJuaW9uX3NldFlfMT10LmFzbS5KYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxscj10Ll9lYl9idFF1YXRlcm5pb25fc2V0Wl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGxyPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRaXzE9dC5hc20uS2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdXI9dC5fZWJfYnRRdWF0ZXJuaW9uX3NldFdfMT1mdW5jdGlvbigpe3JldHVybih1cj10Ll9lYl9idFF1YXRlcm5pb25fc2V0V18xPXQuYXNtLkxiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNyPXQuX2ViX2J0UXVhdGVybmlvbl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGNyPXQuX2ViX2J0UXVhdGVybmlvbl9fX2Rlc3Ryb3lfX18wPXQuYXNtLk1iKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlyPXQuX2ViX2J0TWF0cml4M3gzX3NldEV1bGVyWllYXzM9ZnVuY3Rpb24oKXtyZXR1cm4oeXI9dC5fZWJfYnRNYXRyaXgzeDNfc2V0RXVsZXJaWVhfMz10LmFzbS5OYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxocj10Ll9lYl9idE1hdHJpeDN4M19nZXRSb3RhdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGhyPXQuX2ViX2J0TWF0cml4M3gzX2dldFJvdGF0aW9uXzE9dC5hc20uT2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZnI9dC5fZWJfYnRNYXRyaXgzeDNfZ2V0Um93XzE9ZnVuY3Rpb24oKXtyZXR1cm4oZnI9dC5fZWJfYnRNYXRyaXgzeDNfZ2V0Um93XzE9dC5hc20uUGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbXI9dC5fZWJfYnRNYXRyaXgzeDNfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihtcj10Ll9lYl9idE1hdHJpeDN4M19fX2Rlc3Ryb3lfX18wPXQuYXNtLlFiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGJyPXQuX2ViX2J0VHJhbnNmb3JtX2J0VHJhbnNmb3JtXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYnI9dC5fZWJfYnRUcmFuc2Zvcm1fYnRUcmFuc2Zvcm1fMD10LmFzbS5SYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxncj10Ll9lYl9idFRyYW5zZm9ybV9idFRyYW5zZm9ybV8yPWZ1bmN0aW9uKCl7cmV0dXJuKGdyPXQuX2ViX2J0VHJhbnNmb3JtX2J0VHJhbnNmb3JtXzI9dC5hc20uU2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZHI9dC5fZWJfYnRUcmFuc2Zvcm1fc2V0SWRlbnRpdHlfMD1mdW5jdGlvbigpe3JldHVybihkcj10Ll9lYl9idFRyYW5zZm9ybV9zZXRJZGVudGl0eV8wPXQuYXNtLlRiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdyPXQuX2ViX2J0VHJhbnNmb3JtX3NldE9yaWdpbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKFdyPXQuX2ViX2J0VHJhbnNmb3JtX3NldE9yaWdpbl8xPXQuYXNtLlViKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LENyPXQuX2ViX2J0VHJhbnNmb3JtX3NldFJvdGF0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQ3I9dC5fZWJfYnRUcmFuc2Zvcm1fc2V0Um90YXRpb25fMT10LmFzbS5WYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxqcj10Ll9lYl9idFRyYW5zZm9ybV9nZXRPcmlnaW5fMD1mdW5jdGlvbigpe3JldHVybihqcj10Ll9lYl9idFRyYW5zZm9ybV9nZXRPcmlnaW5fMD10LmFzbS5XYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx2cj10Ll9lYl9idFRyYW5zZm9ybV9nZXRSb3RhdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHZyPXQuX2ViX2J0VHJhbnNmb3JtX2dldFJvdGF0aW9uXzA9dC5hc20uWGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRHI9dC5fZWJfYnRUcmFuc2Zvcm1fZ2V0QmFzaXNfMD1mdW5jdGlvbigpe3JldHVybihEcj10Ll9lYl9idFRyYW5zZm9ybV9nZXRCYXNpc18wPXQuYXNtLlliKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFJyPXQuX2ViX2J0VHJhbnNmb3JtX3NldEZyb21PcGVuR0xNYXRyaXhfMT1mdW5jdGlvbigpe3JldHVybihScj10Ll9lYl9idFRyYW5zZm9ybV9zZXRGcm9tT3BlbkdMTWF0cml4XzE9dC5hc20uWmIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU3I9dC5fZWJfYnRUcmFuc2Zvcm1faW52ZXJzZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFNyPXQuX2ViX2J0VHJhbnNmb3JtX2ludmVyc2VfMD10LmFzbS5fYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxJcj10Ll9lYl9idFRyYW5zZm9ybV9vcF9tdWxfMT1mdW5jdGlvbigpe3JldHVybihJcj10Ll9lYl9idFRyYW5zZm9ybV9vcF9tdWxfMT10LmFzbS4kYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxPcj10Ll9lYl9idFRyYW5zZm9ybV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKE9yPXQuX2ViX2J0VHJhbnNmb3JtX19fZGVzdHJveV9fXzA9dC5hc20uYWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQnI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfYnREZWZhdWx0TW90aW9uU3RhdGVfMD1mdW5jdGlvbigpe3JldHVybihCcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9idERlZmF1bHRNb3Rpb25TdGF0ZV8wPXQuYXNtLmJjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFByPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX2J0RGVmYXVsdE1vdGlvblN0YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUHI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfYnREZWZhdWx0TW90aW9uU3RhdGVfMT10LmFzbS5jYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx4cj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9idERlZmF1bHRNb3Rpb25TdGF0ZV8yPWZ1bmN0aW9uKCl7cmV0dXJuKHhyPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX2J0RGVmYXVsdE1vdGlvblN0YXRlXzI9dC5hc20uZGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVHI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfZ2V0V29ybGRUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihUcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9nZXRXb3JsZFRyYW5zZm9ybV8xPXQuYXNtLmVjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEZyPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX3NldFdvcmxkVHJhbnNmb3JtXzE9ZnVuY3Rpb24oKXtyZXR1cm4oRnI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfc2V0V29ybGRUcmFuc2Zvcm1fMT10LmFzbS5mYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9nZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMD1mdW5jdGlvbigpe3JldHVybihNcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9nZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMD10LmFzbS5nYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9zZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMT1mdW5jdGlvbigpe3JldHVybihBcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9zZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMT10LmFzbS5oYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3cj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHdyPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX19fZGVzdHJveV9fXzA9dC5hc20uaWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa3I9dC5fZWJfYnRDb2xsaXNpb25PYmplY3RXcmFwcGVyX2dldFdvcmxkVHJhbnNmb3JtXzA9ZnVuY3Rpb24oKXtyZXR1cm4oa3I9dC5fZWJfYnRDb2xsaXNpb25PYmplY3RXcmFwcGVyX2dldFdvcmxkVHJhbnNmb3JtXzA9dC5hc20uamMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTHI9dC5fZWJfYnRDb2xsaXNpb25PYmplY3RXcmFwcGVyX2dldENvbGxpc2lvbk9iamVjdF8wPWZ1bmN0aW9uKCl7cmV0dXJuKExyPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0V3JhcHBlcl9nZXRDb2xsaXNpb25PYmplY3RfMD10LmFzbS5rYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIcj10Ll9lYl9idENvbGxpc2lvbk9iamVjdFdyYXBwZXJfZ2V0Q29sbGlzaW9uU2hhcGVfMD1mdW5jdGlvbigpe3JldHVybihIcj10Ll9lYl9idENvbGxpc2lvbk9iamVjdFdyYXBwZXJfZ2V0Q29sbGlzaW9uU2hhcGVfMD10LmFzbS5sYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZcj10Ll9lYl9idENvbnN0Q29sbGlzaW9uT2JqZWN0QXJyYXlfc2l6ZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFlyPXQuX2ViX2J0Q29uc3RDb2xsaXNpb25PYmplY3RBcnJheV9zaXplXzA9dC5hc20ubWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVnI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X2F0XzE9ZnVuY3Rpb24oKXtyZXR1cm4oVnI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X2F0XzE9dC5hc20ubmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUXI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oUXI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X19fZGVzdHJveV9fXzA9dC5hc20ub2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRXI9dC5fZWJfYnRTY2FsYXJBcnJheV9zaXplXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRXI9dC5fZWJfYnRTY2FsYXJBcnJheV9zaXplXzA9dC5hc20ucGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWHI9dC5fZWJfYnRTY2FsYXJBcnJheV9hdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFhyPXQuX2ViX2J0U2NhbGFyQXJyYXlfYXRfMT10LmFzbS5xYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxVcj10Ll9lYl9idFNjYWxhckFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oVXI9dC5fZWJfYnRTY2FsYXJBcnJheV9fX2Rlc3Ryb3lfX18wPXQuYXNtLnJjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEdyPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRQb3NpdGlvbldvcmxkT25BXzA9ZnVuY3Rpb24oKXtyZXR1cm4oR3I9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldFBvc2l0aW9uV29ybGRPbkFfMD10LmFzbS5zYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6cj10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0UG9zaXRpb25Xb3JsZE9uQl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHpyPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRQb3NpdGlvbldvcmxkT25CXzA9dC5hc20udGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldEFwcGxpZWRJbXB1bHNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldEFwcGxpZWRJbXB1bHNlXzA9dC5hc20udWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scXI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldERpc3RhbmNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocXI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldERpc3RhbmNlXzA9dC5hc20udmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRBXzA9ZnVuY3Rpb24oKXtyZXR1cm4oWnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRBXzA9dC5hc20ud2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS3I9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRBXzE9ZnVuY3Rpb24oKXtyZXR1cm4oS3I9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRBXzE9dC5hc20ueGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sJHI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRCXzA9ZnVuY3Rpb24oKXtyZXR1cm4oJHI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRCXzA9dC5hc20ueWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRCXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRCXzE9dC5hc20uemMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdF89dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX3Bvc2l0aW9uV29ybGRPbkJfMD1mdW5jdGlvbigpe3JldHVybih0Xz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0X21fcG9zaXRpb25Xb3JsZE9uQl8wPXQuYXNtLkFjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGVfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV9wb3NpdGlvbldvcmxkT25CXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZV89dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX3Bvc2l0aW9uV29ybGRPbkJfMT10LmFzbS5CYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0X21fcG9zaXRpb25Xb3JsZE9uQV8wPWZ1bmN0aW9uKCl7cmV0dXJuKG9fPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV9wb3NpdGlvbldvcmxkT25BXzA9dC5hc20uQ2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbl89dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX3Bvc2l0aW9uV29ybGRPbkFfMT1mdW5jdGlvbigpe3JldHVybihuXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfc2V0X21fcG9zaXRpb25Xb3JsZE9uQV8xPXQuYXNtLkRjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV9ub3JtYWxXb3JsZE9uQl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHJfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV9ub3JtYWxXb3JsZE9uQl8wPXQuYXNtLkVjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LF9fPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV9ub3JtYWxXb3JsZE9uQl8xPWZ1bmN0aW9uKCl7cmV0dXJuKF9fPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV9ub3JtYWxXb3JsZE9uQl8xPXQuYXNtLkZjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGlfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV91c2VyUGVyc2lzdGVudERhdGFfMD1mdW5jdGlvbigpe3JldHVybihpXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0X21fdXNlclBlcnNpc3RlbnREYXRhXzA9dC5hc20uR2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYV89dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX3VzZXJQZXJzaXN0ZW50RGF0YV8xPWZ1bmN0aW9uKCl7cmV0dXJuKGFfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV91c2VyUGVyc2lzdGVudERhdGFfMT10LmFzbS5IYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihzXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfX19kZXN0cm95X19fMD10LmFzbS5JYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwXz10Ll9lYl9Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFja19Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFja18wPWZ1bmN0aW9uKCl7cmV0dXJuKHBfPXQuX2ViX0NvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrX0NvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrXzA9dC5hc20uSmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbF89dC5fZWJfQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2tfYWRkU2luZ2xlUmVzdWx0Xzc9ZnVuY3Rpb24oKXtyZXR1cm4obF89dC5fZWJfQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2tfYWRkU2luZ2xlUmVzdWx0Xzc9dC5hc20uS2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdV89dC5fZWJfQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2tfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybih1Xz10Ll9lYl9Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPXQuYXNtLkxjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX2dldF9tX3NoYXBlUGFydF8wPWZ1bmN0aW9uKCl7cmV0dXJuKGNfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX2dldF9tX3NoYXBlUGFydF8wPXQuYXNtLk1jKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX3NldF9tX3NoYXBlUGFydF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHlfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX3NldF9tX3NoYXBlUGFydF8xPXQuYXNtLk5jKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGhfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX2dldF9tX3RyaWFuZ2xlSW5kZXhfMD1mdW5jdGlvbigpe3JldHVybihoXz10Ll9lYl9Mb2NhbFNoYXBlSW5mb19nZXRfbV90cmlhbmdsZUluZGV4XzA9dC5hc20uT2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZl89dC5fZWJfTG9jYWxTaGFwZUluZm9fc2V0X21fdHJpYW5nbGVJbmRleF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGZfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX3NldF9tX3RyaWFuZ2xlSW5kZXhfMT10LmFzbS5QYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtXz10Ll9lYl9Mb2NhbFNoYXBlSW5mb19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKG1fPXQuX2ViX0xvY2FsU2hhcGVJbmZvX19fZGVzdHJveV9fXzA9dC5hc20uUWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYl89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfTG9jYWxDb252ZXhSZXN1bHRfNT1mdW5jdGlvbigpe3JldHVybihiXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9Mb2NhbENvbnZleFJlc3VsdF81PXQuYXNtLlJjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X2dldF9tX2hpdENvbGxpc2lvbk9iamVjdF8wPWZ1bmN0aW9uKCl7cmV0dXJuKGdfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X2dldF9tX2hpdENvbGxpc2lvbk9iamVjdF8wPXQuYXNtLlNjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGRfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdENvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGRfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdENvbGxpc2lvbk9iamVjdF8xPXQuYXNtLlRjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X2dldF9tX2xvY2FsU2hhcGVJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4oV189dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21fbG9jYWxTaGFwZUluZm9fMD10LmFzbS5VYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxDXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9zZXRfbV9sb2NhbFNoYXBlSW5mb18xPWZ1bmN0aW9uKCl7cmV0dXJuKENfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2xvY2FsU2hhcGVJbmZvXzE9dC5hc20uVmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sal89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21faGl0Tm9ybWFsTG9jYWxfMD1mdW5jdGlvbigpe3JldHVybihqXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9nZXRfbV9oaXROb3JtYWxMb2NhbF8wPXQuYXNtLldjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHZfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdE5vcm1hbExvY2FsXzE9ZnVuY3Rpb24oKXtyZXR1cm4odl89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfc2V0X21faGl0Tm9ybWFsTG9jYWxfMT10LmFzbS5YYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxEXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9nZXRfbV9oaXRQb2ludExvY2FsXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRF89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21faGl0UG9pbnRMb2NhbF8wPXQuYXNtLlljKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFJfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdFBvaW50TG9jYWxfMT1mdW5jdGlvbigpe3JldHVybihSXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9zZXRfbV9oaXRQb2ludExvY2FsXzE9dC5hc20uWmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU189dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21faGl0RnJhY3Rpb25fMD1mdW5jdGlvbigpe3JldHVybihTXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9nZXRfbV9oaXRGcmFjdGlvbl8wPXQuYXNtLl9jKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LElfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdEZyYWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSV89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfc2V0X21faGl0RnJhY3Rpb25fMT10LmFzbS4kYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxPXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKE9fPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X19fZGVzdHJveV9fXzA9dC5hc20uYWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQl89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja18yPWZ1bmN0aW9uKCl7cmV0dXJuKEJfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfMj10LmFzbS5iZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfaGFzSGl0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oUF89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2hhc0hpdF8wPXQuYXNtLmNkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHhfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9oaXRDb2xsaXNpb25PYmplY3RfMD1mdW5jdGlvbigpe3JldHVybih4Xz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0Q29sbGlzaW9uT2JqZWN0XzA9dC5hc20uZGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVF89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2hpdENvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFRfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9oaXRDb2xsaXNpb25PYmplY3RfMT10LmFzbS5lZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21fY29udmV4RnJvbVdvcmxkXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRl89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbnZleEZyb21Xb3JsZF8wPXQuYXNtLmZkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE1fPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb252ZXhGcm9tV29ybGRfMT1mdW5jdGlvbigpe3JldHVybihNXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29udmV4RnJvbVdvcmxkXzE9dC5hc20uZ2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbnZleFRvV29ybGRfMD1mdW5jdGlvbigpe3JldHVybihBXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21fY29udmV4VG9Xb3JsZF8wPXQuYXNtLmhkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHdfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb252ZXhUb1dvcmxkXzE9ZnVuY3Rpb24oKXtyZXR1cm4od189dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2NvbnZleFRvV29ybGRfMT10LmFzbS5pZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0Tm9ybWFsV29ybGRfMD1mdW5jdGlvbigpe3JldHVybihrXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0Tm9ybWFsV29ybGRfMD10LmFzbS5qZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21faGl0Tm9ybWFsV29ybGRfMT1mdW5jdGlvbigpe3JldHVybihMXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21faGl0Tm9ybWFsV29ybGRfMT10LmFzbS5rZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0UG9pbnRXb3JsZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEhfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9oaXRQb2ludFdvcmxkXzA9dC5hc20ubGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2hpdFBvaW50V29ybGRfMT1mdW5jdGlvbigpe3JldHVybihZXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21faGl0UG9pbnRXb3JsZF8xPXQuYXNtLm1kKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPWZ1bmN0aW9uKCl7cmV0dXJuKFZfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPXQuYXNtLm5kKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFFfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPXQuYXNtLm9kKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMD10LmFzbS5wZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29sbGlzaW9uRmlsdGVyTWFza18xPWZ1bmN0aW9uKCl7cmV0dXJuKFhfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzE9dC5hc20ucWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFVfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMD10LmFzbS5yZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oR189dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbl8xPXQuYXNtLnNkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHpfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHpfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPXQuYXNtLnRkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5fPXQuX2ViX2J0Q29udmV4U2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTl89dC5fZWJfYnRDb252ZXhTaGFwZV9zZXRMb2NhbFNjYWxpbmdfMT10LmFzbS51ZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxXz10Ll9lYl9idENvbnZleFNoYXBlX2dldExvY2FsU2NhbGluZ18wPWZ1bmN0aW9uKCl7cmV0dXJuKHFfPXQuX2ViX2J0Q29udmV4U2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9dC5hc20udmQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWl89dC5fZWJfYnRDb252ZXhTaGFwZV9jYWxjdWxhdGVMb2NhbEluZXJ0aWFfMj1mdW5jdGlvbigpe3JldHVybihaXz10Ll9lYl9idENvbnZleFNoYXBlX2NhbGN1bGF0ZUxvY2FsSW5lcnRpYV8yPXQuYXNtLndkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEtfPXQuX2ViX2J0Q29udmV4U2hhcGVfc2V0TWFyZ2luXzE9ZnVuY3Rpb24oKXtyZXR1cm4oS189dC5fZWJfYnRDb252ZXhTaGFwZV9zZXRNYXJnaW5fMT10LmFzbS54ZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkXz10Ll9lYl9idENvbnZleFNoYXBlX2dldE1hcmdpbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKCRfPXQuX2ViX2J0Q29udmV4U2hhcGVfZ2V0TWFyZ2luXzA9dC5hc20ueWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSl89dC5fZWJfYnRDb252ZXhTaGFwZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKEpfPXQuX2ViX2J0Q29udmV4U2hhcGVfX19kZXN0cm95X19fMD10LmFzbS56ZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0aT10Ll9lYl9idEJveFNoYXBlX2J0Qm94U2hhcGVfMT1mdW5jdGlvbigpe3JldHVybih0aT10Ll9lYl9idEJveFNoYXBlX2J0Qm94U2hhcGVfMT10LmFzbS5BZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxlaT10Ll9lYl9idEJveFNoYXBlX3NldE1hcmdpbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGVpPXQuX2ViX2J0Qm94U2hhcGVfc2V0TWFyZ2luXzE9dC5hc20uQmQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sb2k9dC5fZWJfYnRCb3hTaGFwZV9nZXRNYXJnaW5fMD1mdW5jdGlvbigpe3JldHVybihvaT10Ll9lYl9idEJveFNoYXBlX2dldE1hcmdpbl8wPXQuYXNtLkNkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG5pPXQuX2ViX2J0Qm94U2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4obmk9dC5fZWJfYnRCb3hTaGFwZV9zZXRMb2NhbFNjYWxpbmdfMT10LmFzbS5EZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxyaT10Ll9lYl9idEJveFNoYXBlX2dldExvY2FsU2NhbGluZ18wPWZ1bmN0aW9uKCl7cmV0dXJuKHJpPXQuX2ViX2J0Qm94U2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9dC5hc20uRWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sX2k9dC5fZWJfYnRCb3hTaGFwZV9jYWxjdWxhdGVMb2NhbEluZXJ0aWFfMj1mdW5jdGlvbigpe3JldHVybihfaT10Ll9lYl9idEJveFNoYXBlX2NhbGN1bGF0ZUxvY2FsSW5lcnRpYV8yPXQuYXNtLkZkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGlpPXQuX2ViX2J0Qm94U2hhcGVfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihpaT10Ll9lYl9idEJveFNoYXBlX19fZGVzdHJveV9fXzA9dC5hc20uR2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYWk9dC5fZWJfYnRJbnRBcnJheV9zaXplXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYWk9dC5fZWJfYnRJbnRBcnJheV9zaXplXzA9dC5hc20uSGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc2k9dC5fZWJfYnRJbnRBcnJheV9hdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHNpPXQuX2ViX2J0SW50QXJyYXlfYXRfMT10LmFzbS5JZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwaT10Ll9lYl9idEludEFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocGk9dC5fZWJfYnRJbnRBcnJheV9fX2Rlc3Ryb3lfX18wPXQuYXNtLkpkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxpPXQuX2ViX2J0RmFjZV9nZXRfbV9pbmRpY2VzXzA9ZnVuY3Rpb24oKXtyZXR1cm4obGk9dC5fZWJfYnRGYWNlX2dldF9tX2luZGljZXNfMD10LmFzbS5LZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx1aT10Ll9lYl9idEZhY2Vfc2V0X21faW5kaWNlc18xPWZ1bmN0aW9uKCl7cmV0dXJuKHVpPXQuX2ViX2J0RmFjZV9zZXRfbV9pbmRpY2VzXzE9dC5hc20uTGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sY2k9dC5fZWJfYnRGYWNlX2dldF9tX3BsYW5lXzE9ZnVuY3Rpb24oKXtyZXR1cm4oY2k9dC5fZWJfYnRGYWNlX2dldF9tX3BsYW5lXzE9dC5hc20uTWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0seWk9dC5fZWJfYnRGYWNlX3NldF9tX3BsYW5lXzI9ZnVuY3Rpb24oKXtyZXR1cm4oeWk9dC5fZWJfYnRGYWNlX3NldF9tX3BsYW5lXzI9dC5hc20uTmQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saGk9dC5fZWJfYnRGYWNlX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oaGk9dC5fZWJfYnRGYWNlX19fZGVzdHJveV9fXzA9dC5hc20uT2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZmk9dC5fZWJfYnRWZWN0b3IzQXJyYXlfc2l6ZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKGZpPXQuX2ViX2J0VmVjdG9yM0FycmF5X3NpemVfMD10LmFzbS5QZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtaT10Ll9lYl9idFZlY3RvcjNBcnJheV9hdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKG1pPXQuX2ViX2J0VmVjdG9yM0FycmF5X2F0XzE9dC5hc20uUWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYmk9dC5fZWJfYnRWZWN0b3IzQXJyYXlfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihiaT10Ll9lYl9idFZlY3RvcjNBcnJheV9fX2Rlc3Ryb3lfX18wPXQuYXNtLlJkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdpPXQuX2ViX2J0RmFjZUFycmF5X3NpemVfMD1mdW5jdGlvbigpe3JldHVybihnaT10Ll9lYl9idEZhY2VBcnJheV9zaXplXzA9dC5hc20uU2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZGk9dC5fZWJfYnRGYWNlQXJyYXlfYXRfMT1mdW5jdGlvbigpe3JldHVybihkaT10Ll9lYl9idEZhY2VBcnJheV9hdF8xPXQuYXNtLlRkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdpPXQuX2ViX2J0RmFjZUFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oV2k9dC5fZWJfYnRGYWNlQXJyYXlfX19kZXN0cm95X19fMD10LmFzbS5VZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxDaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fdmVydGljZXNfMD1mdW5jdGlvbigpe3JldHVybihDaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fdmVydGljZXNfMD10LmFzbS5WZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxqaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fdmVydGljZXNfMT1mdW5jdGlvbigpe3JldHVybihqaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fdmVydGljZXNfMT10LmFzbS5XZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx2aT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fZmFjZXNfMD1mdW5jdGlvbigpe3JldHVybih2aT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fZmFjZXNfMD10LmFzbS5YZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxEaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fZmFjZXNfMT1mdW5jdGlvbigpe3JldHVybihEaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fZmFjZXNfMT10LmFzbS5ZZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxSaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihSaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fX19kZXN0cm95X19fMD10LmFzbS5aZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxTaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9idENvbnZleEh1bGxTaGFwZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFNpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2J0Q29udmV4SHVsbFNoYXBlXzA9dC5hc20uX2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSWk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfYnRDb252ZXhIdWxsU2hhcGVfMT1mdW5jdGlvbigpe3JldHVybihJaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9idENvbnZleEh1bGxTaGFwZV8xPXQuYXNtLiRkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE9pPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2J0Q29udmV4SHVsbFNoYXBlXzI9ZnVuY3Rpb24oKXtyZXR1cm4oT2k9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfYnRDb252ZXhIdWxsU2hhcGVfMj10LmFzbS5hZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxCaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9hZGRQb2ludF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEJpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2FkZFBvaW50XzE9dC5hc20uYmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfYWRkUG9pbnRfMj1mdW5jdGlvbigpe3JldHVybihQaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9hZGRQb2ludF8yPXQuYXNtLmNlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHhpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3NldE1hcmdpbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKHhpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3NldE1hcmdpbl8xPXQuYXNtLmRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldE1hcmdpbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFRpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldE1hcmdpbl8wPXQuYXNtLmVlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEZpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldE51bVZlcnRpY2VzXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRmk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfZ2V0TnVtVmVydGljZXNfMD10LmFzbS5mZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9pbml0aWFsaXplUG9seWhlZHJhbEZlYXR1cmVzXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTWk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfaW5pdGlhbGl6ZVBvbHloZWRyYWxGZWF0dXJlc18xPXQuYXNtLmdlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEFpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3JlY2FsY0xvY2FsQWFiYl8wPWZ1bmN0aW9uKCl7cmV0dXJuKEFpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3JlY2FsY0xvY2FsQWFiYl8wPXQuYXNtLmhlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHdpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldENvbnZleFBvbHloZWRyb25fMD1mdW5jdGlvbigpe3JldHVybih3aT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9nZXRDb252ZXhQb2x5aGVkcm9uXzA9dC5hc20uaWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa2k9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4oa2k9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9dC5hc20uamUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9dC5hc20ua2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfY2FsY3VsYXRlTG9jYWxJbmVydGlhXzI9ZnVuY3Rpb24oKXtyZXR1cm4oSGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfY2FsY3VsYXRlTG9jYWxJbmVydGlhXzI9dC5hc20ubGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWWk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihZaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9fX2Rlc3Ryb3lfX18wPXQuYXNtLm1lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm9fYnREZWZhdWx0Q29sbGlzaW9uQ29uc3RydWN0aW9uSW5mb18wPWZ1bmN0aW9uKCl7cmV0dXJuKFZpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm9fYnREZWZhdWx0Q29sbGlzaW9uQ29uc3RydWN0aW9uSW5mb18wPXQuYXNtLm5lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm9fX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihRaT10Ll9lYl9idERlZmF1bHRDb2xsaXNpb25Db25zdHJ1Y3Rpb25JbmZvX19fZGVzdHJveV9fXzA9dC5hc20ub2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRWk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRWk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzA9dC5hc20ucGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWGk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oWGk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzE9dC5hc20ucWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVWk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFVpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb25fX19kZXN0cm95X19fMD10LmFzbS5yZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHaT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9idFBlcnNpc3RlbnRNYW5pZm9sZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEdpPXQuX2ViX2J0UGVyc2lzdGVudE1hbmlmb2xkX2J0UGVyc2lzdGVudE1hbmlmb2xkXzA9dC5hc20uc2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0semk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Qm9keTBfMD1mdW5jdGlvbigpe3JldHVybih6aT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9nZXRCb2R5MF8wPXQuYXNtLnRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5pPXQuX2ViX2J0UGVyc2lzdGVudE1hbmlmb2xkX2dldEJvZHkxXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTmk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Qm9keTFfMD10LmFzbS51ZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxaT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9nZXROdW1Db250YWN0c18wPWZ1bmN0aW9uKCl7cmV0dXJuKHFpPXQuX2ViX2J0UGVyc2lzdGVudE1hbmlmb2xkX2dldE51bUNvbnRhY3RzXzA9dC5hc20udmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWmk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Q29udGFjdFBvaW50XzE9ZnVuY3Rpb24oKXtyZXR1cm4oWmk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Q29udGFjdFBvaW50XzE9dC5hc20ud2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS2k9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihLaT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9fX2Rlc3Ryb3lfX18wPXQuYXNtLnhlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LCRpPXQuX2ViX2J0Q29sbGlzaW9uRGlzcGF0Y2hlcl9idENvbGxpc2lvbkRpc3BhdGNoZXJfMT1mdW5jdGlvbigpe3JldHVybigkaT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfYnRDb2xsaXNpb25EaXNwYXRjaGVyXzE9dC5hc20ueWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSmk9dC5fZWJfYnRDb2xsaXNpb25EaXNwYXRjaGVyX2dldE51bU1hbmlmb2xkc18wPWZ1bmN0aW9uKCl7cmV0dXJuKEppPXQuX2ViX2J0Q29sbGlzaW9uRGlzcGF0Y2hlcl9nZXROdW1NYW5pZm9sZHNfMD10LmFzbS56ZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0YT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWxfMT1mdW5jdGlvbigpe3JldHVybih0YT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWxfMT10LmFzbS5BZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxlYT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihlYT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfX19kZXN0cm95X19fMD10LmFzbS5CZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvYT10Ll9lYl9idE92ZXJsYXBwaW5nUGFpckNhbGxiYWNrX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4ob2E9dC5fZWJfYnRPdmVybGFwcGluZ1BhaXJDYWxsYmFja19fX2Rlc3Ryb3lfX18wPXQuYXNtLkNlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG5hPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfc2V0SW50ZXJuYWxHaG9zdFBhaXJDYWxsYmFja18xPWZ1bmN0aW9uKCl7cmV0dXJuKG5hPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfc2V0SW50ZXJuYWxHaG9zdFBhaXJDYWxsYmFja18xPXQuYXNtLkRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJhPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfZ2V0TnVtT3ZlcmxhcHBpbmdQYWlyc18wPWZ1bmN0aW9uKCl7cmV0dXJuKHJhPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfZ2V0TnVtT3ZlcmxhcHBpbmdQYWlyc18wPXQuYXNtLkVlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LF9hPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihfYT10Ll9lYl9idE92ZXJsYXBwaW5nUGFpckNhY2hlX19fZGVzdHJveV9fXzA9dC5hc20uRmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX2dldE92ZXJsYXBwaW5nUGFpckNhY2hlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oaWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX2dldE92ZXJsYXBwaW5nUGFpckNhY2hlXzA9dC5hc20uR2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX19fZGVzdHJveV9fXzA9dC5hc20uSGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc2E9dC5fZWJfYnRDb2xsaXNpb25Db25maWd1cmF0aW9uX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oc2E9dC5fZWJfYnRDb2xsaXNpb25Db25maWd1cmF0aW9uX19fZGVzdHJveV9fXzA9dC5hc20uSWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scGE9dC5fZWJfYnREYnZ0QnJvYWRwaGFzZV9idERidnRCcm9hZHBoYXNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocGE9dC5fZWJfYnREYnZ0QnJvYWRwaGFzZV9idERidnRCcm9hZHBoYXNlXzA9dC5hc20uSmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbGE9dC5fZWJfYnREYnZ0QnJvYWRwaGFzZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGxhPXQuX2ViX2J0RGJ2dEJyb2FkcGhhc2VfX19kZXN0cm95X19fMD10LmFzbS5LZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx1YT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHVhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X2dldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwXzA9dC5hc20uTGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sY2E9dC5fZWJfYnRCcm9hZHBoYXNlUHJveHlfc2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXBfMT1mdW5jdGlvbigpe3JldHVybihjYT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPXQuYXNtLk1lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X2dldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMD1mdW5jdGlvbigpe3JldHVybih5YT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9nZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzA9dC5hc20uTmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saGE9dC5fZWJfYnRCcm9hZHBoYXNlUHJveHlfc2V0X21fY29sbGlzaW9uRmlsdGVyTWFza18xPWZ1bmN0aW9uKCl7cmV0dXJuKGhhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X3NldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMT10LmFzbS5PZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxmYT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGZhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X19fZGVzdHJveV9fXzA9dC5hc20uUGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbWE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb18zPWZ1bmN0aW9uKCl7cmV0dXJuKG1hPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fMz10LmFzbS5RZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxiYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvXzQ9ZnVuY3Rpb24oKXtyZXR1cm4oYmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb180PXQuYXNtLlJlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9saW5lYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZ2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2xpbmVhckRhbXBpbmdfMD10LmFzbS5TZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxkYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fbGluZWFyRGFtcGluZ18xPWZ1bmN0aW9uKCl7cmV0dXJuKGRhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9saW5lYXJEYW1waW5nXzE9dC5hc20uVGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sV2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FuZ3VsYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oV2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FuZ3VsYXJEYW1waW5nXzA9dC5hc20uVWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQ2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FuZ3VsYXJEYW1waW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQ2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FuZ3VsYXJEYW1waW5nXzE9dC5hc20uVmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0samE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2ZyaWN0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oamE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2ZyaWN0aW9uXzA9dC5hc20uV2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2ZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4odmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2ZyaWN0aW9uXzE9dC5hc20uWGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRGE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX3JvbGxpbmdGcmljdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKERhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9yb2xsaW5nRnJpY3Rpb25fMD10LmFzbS5ZZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxSYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fcm9sbGluZ0ZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX3JvbGxpbmdGcmljdGlvbl8xPXQuYXNtLlplKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFNhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9yZXN0aXR1dGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFNhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9yZXN0aXR1dGlvbl8wPXQuYXNtLl9lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LElhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9yZXN0aXR1dGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKElhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9yZXN0aXR1dGlvbl8xPXQuYXNtLiRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE9hPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKE9hPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8wPXQuYXNtLmFmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEJhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8xPXQuYXNtLmJmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFBhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9hbmd1bGFyU2xlZXBpbmdUaHJlc2hvbGRfMD1mdW5jdGlvbigpe3JldHVybihQYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYW5ndWxhclNsZWVwaW5nVGhyZXNob2xkXzA9dC5hc20uY2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0seGE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FuZ3VsYXJTbGVlcGluZ1RocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHhhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9hbmd1bGFyU2xlZXBpbmdUaHJlc2hvbGRfMT10LmFzbS5kZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxUYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdfMD1mdW5jdGlvbigpe3JldHVybihUYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdfMD10LmFzbS5lZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdfMT1mdW5jdGlvbigpe3JldHVybihGYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdfMT10LmFzbS5mZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMD1mdW5jdGlvbigpe3JldHVybihNYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMD10LmFzbS5nZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMT1mdW5jdGlvbigpe3JldHVybihBYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMT10LmFzbS5oZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3YT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMD1mdW5jdGlvbigpe3JldHVybih3YT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMD10LmFzbS5qZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMT1mdW5jdGlvbigpe3JldHVybihrYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMT10LmFzbS5rZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbEFuZ3VsYXJEYW1waW5nVGhyZXNob2xkU3FyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTGE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ1RocmVzaG9sZFNxcl8wPXQuYXNtLmxmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEhhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdUaHJlc2hvbGRTcXJfMT1mdW5jdGlvbigpe3JldHVybihIYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbEFuZ3VsYXJEYW1waW5nVGhyZXNob2xkU3FyXzE9dC5hc20ubWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWWE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3Rvcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFlhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdGYWN0b3JfMD10LmFzbS5uZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxWYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbEFuZ3VsYXJEYW1waW5nRmFjdG9yXzE9ZnVuY3Rpb24oKXtyZXR1cm4oVmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3Rvcl8xPXQuYXNtLm9mKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFFhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19fX2Rlc3Ryb3lfX18wPXQuYXNtLnBmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVhPXQuX2ViX2J0UmlnaWRCb2R5X2J0UmlnaWRCb2R5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oRWE9dC5fZWJfYnRSaWdpZEJvZHlfYnRSaWdpZEJvZHlfMT10LmFzbS5xZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYYT10Ll9lYl9idFJpZ2lkQm9keV9nZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMD1mdW5jdGlvbigpe3JldHVybihYYT10Ll9lYl9idFJpZ2lkQm9keV9nZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMD10LmFzbS5yZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxVYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihVYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMT10LmFzbS5zZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRTbGVlcGluZ1RocmVzaG9sZHNfMj1mdW5jdGlvbigpe3JldHVybihHYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRTbGVlcGluZ1RocmVzaG9sZHNfMj10LmFzbS50ZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6YT10Ll9lYl9idFJpZ2lkQm9keV9nZXRMaW5lYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oemE9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0TGluZWFyRGFtcGluZ18wPXQuYXNtLnVmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5hPXQuX2ViX2J0UmlnaWRCb2R5X2dldEFuZ3VsYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTmE9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QW5ndWxhckRhbXBpbmdfMD10LmFzbS52ZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxYT10Ll9lYl9idFJpZ2lkQm9keV9zZXREYW1waW5nXzI9ZnVuY3Rpb24oKXtyZXR1cm4ocWE9dC5fZWJfYnRSaWdpZEJvZHlfc2V0RGFtcGluZ18yPXQuYXNtLndmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFphPXQuX2ViX2J0UmlnaWRCb2R5X3NldE1hc3NQcm9wc18yPWZ1bmN0aW9uKCl7cmV0dXJuKFphPXQuX2ViX2J0UmlnaWRCb2R5X3NldE1hc3NQcm9wc18yPXQuYXNtLnhmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEthPXQuX2ViX2J0UmlnaWRCb2R5X2dldExpbmVhckZhY3Rvcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKEthPXQuX2ViX2J0UmlnaWRCb2R5X2dldExpbmVhckZhY3Rvcl8wPXQuYXNtLnlmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LCRhPXQuX2ViX2J0UmlnaWRCb2R5X3NldExpbmVhckZhY3Rvcl8xPWZ1bmN0aW9uKCl7cmV0dXJuKCRhPXQuX2ViX2J0UmlnaWRCb2R5X3NldExpbmVhckZhY3Rvcl8xPXQuYXNtLnpmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEphPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5VG9ycXVlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSmE9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlUb3JxdWVfMT10LmFzbS5BZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0cz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUxvY2FsVG9ycXVlXzE9ZnVuY3Rpb24oKXtyZXR1cm4odHM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlMb2NhbFRvcnF1ZV8xPXQuYXNtLkJmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGVzPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5Rm9yY2VfMj1mdW5jdGlvbigpe3JldHVybihlcz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUZvcmNlXzI9dC5hc20uQ2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sb3M9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlDZW50cmFsRm9yY2VfMT1mdW5jdGlvbigpe3JldHVybihvcz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUNlbnRyYWxGb3JjZV8xPXQuYXNtLkRmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG5zPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5Q2VudHJhbExvY2FsRm9yY2VfMT1mdW5jdGlvbigpe3JldHVybihucz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUNlbnRyYWxMb2NhbEZvcmNlXzE9dC5hc20uRWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scnM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlUb3JxdWVJbXB1bHNlXzE9ZnVuY3Rpb24oKXtyZXR1cm4ocnM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlUb3JxdWVJbXB1bHNlXzE9dC5hc20uRmYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sX3M9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlJbXB1bHNlXzI9ZnVuY3Rpb24oKXtyZXR1cm4oX3M9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlJbXB1bHNlXzI9dC5hc20uR2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saXM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlDZW50cmFsSW1wdWxzZV8xPWZ1bmN0aW9uKCl7cmV0dXJuKGlzPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5Q2VudHJhbEltcHVsc2VfMT10LmFzbS5IZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhcz10Ll9lYl9idFJpZ2lkQm9keV91cGRhdGVJbmVydGlhVGVuc29yXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYXM9dC5fZWJfYnRSaWdpZEJvZHlfdXBkYXRlSW5lcnRpYVRlbnNvcl8wPXQuYXNtLklmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHNzPXQuX2ViX2J0UmlnaWRCb2R5X2dldExpbmVhclZlbG9jaXR5XzA9ZnVuY3Rpb24oKXtyZXR1cm4oc3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0TGluZWFyVmVsb2NpdHlfMD10LmFzbS5KZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRBbmd1bGFyVmVsb2NpdHlfMD1mdW5jdGlvbigpe3JldHVybihwcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRBbmd1bGFyVmVsb2NpdHlfMD10LmFzbS5LZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxscz10Ll9lYl9idFJpZ2lkQm9keV9zZXRMaW5lYXJWZWxvY2l0eV8xPWZ1bmN0aW9uKCl7cmV0dXJuKGxzPXQuX2ViX2J0UmlnaWRCb2R5X3NldExpbmVhclZlbG9jaXR5XzE9dC5hc20uTGYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0QW5ndWxhclZlbG9jaXR5XzE9ZnVuY3Rpb24oKXtyZXR1cm4odXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0QW5ndWxhclZlbG9jaXR5XzE9dC5hc20uTWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sY3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0TW90aW9uU3RhdGVfMD1mdW5jdGlvbigpe3JldHVybihjcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRNb3Rpb25TdGF0ZV8wPXQuYXNtLk5mKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlzPXQuX2ViX2J0UmlnaWRCb2R5X3NldE1vdGlvblN0YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oeXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0TW90aW9uU3RhdGVfMT10LmFzbS5PZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxocz10Ll9lYl9idFJpZ2lkQm9keV9nZXRBbmd1bGFyRmFjdG9yXzA9ZnVuY3Rpb24oKXtyZXR1cm4oaHM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QW5ndWxhckZhY3Rvcl8wPXQuYXNtLlBmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEFuZ3VsYXJGYWN0b3JfMT1mdW5jdGlvbigpe3JldHVybihmcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBbmd1bGFyRmFjdG9yXzE9dC5hc20uUWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbXM9dC5fZWJfYnRSaWdpZEJvZHlfdXBjYXN0XzE9ZnVuY3Rpb24oKXtyZXR1cm4obXM9dC5fZWJfYnRSaWdpZEJvZHlfdXBjYXN0XzE9dC5hc20uUmYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYnM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QWFiYl8yPWZ1bmN0aW9uKCl7cmV0dXJuKGJzPXQuX2ViX2J0UmlnaWRCb2R5X2dldEFhYmJfMj10LmFzbS5TZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxncz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUdyYXZpdHlfMD1mdW5jdGlvbigpe3JldHVybihncz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUdyYXZpdHlfMD10LmFzbS5UZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxkcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRHcmF2aXR5XzA9ZnVuY3Rpb24oKXtyZXR1cm4oZHM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0R3Jhdml0eV8wPXQuYXNtLlVmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEdyYXZpdHlfMT1mdW5jdGlvbigpe3JldHVybihXcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRHcmF2aXR5XzE9dC5hc20uVmYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQ3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QnJvYWRwaGFzZVByb3h5XzA9ZnVuY3Rpb24oKXtyZXR1cm4oQ3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QnJvYWRwaGFzZVByb3h5XzA9dC5hc20uV2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sanM9dC5fZWJfYnRSaWdpZEJvZHlfY2xlYXJGb3JjZXNfMD1mdW5jdGlvbigpe3JldHVybihqcz10Ll9lYl9idFJpZ2lkQm9keV9jbGVhckZvcmNlc18wPXQuYXNtLlhmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHZzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEFuaXNvdHJvcGljRnJpY3Rpb25fMj1mdW5jdGlvbigpe3JldHVybih2cz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBbmlzb3Ryb3BpY0ZyaWN0aW9uXzI9dC5hc20uWWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRHM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Q29sbGlzaW9uU2hhcGVfMD1mdW5jdGlvbigpe3JldHVybihEcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRDb2xsaXNpb25TaGFwZV8wPXQuYXNtLlpmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFJzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUnM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q29udGFjdFByb2Nlc3NpbmdUaHJlc2hvbGRfMT10LmFzbS5fZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxTcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBY3RpdmF0aW9uU3RhdGVfMT1mdW5jdGlvbigpe3JldHVybihTcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBY3RpdmF0aW9uU3RhdGVfMT10LmFzbS4kZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxJcz10Ll9lYl9idFJpZ2lkQm9keV9mb3JjZUFjdGl2YXRpb25TdGF0ZV8xPWZ1bmN0aW9uKCl7cmV0dXJuKElzPXQuX2ViX2J0UmlnaWRCb2R5X2ZvcmNlQWN0aXZhdGlvblN0YXRlXzE9dC5hc20uYWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT3M9dC5fZWJfYnRSaWdpZEJvZHlfYWN0aXZhdGVfMD1mdW5jdGlvbigpe3JldHVybihPcz10Ll9lYl9idFJpZ2lkQm9keV9hY3RpdmF0ZV8wPXQuYXNtLmJnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJzPXQuX2ViX2J0UmlnaWRCb2R5X2FjdGl2YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQnM9dC5fZWJfYnRSaWdpZEJvZHlfYWN0aXZhdGVfMT10LmFzbS5jZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQcz10Ll9lYl9idFJpZ2lkQm9keV9pc0FjdGl2ZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFBzPXQuX2ViX2J0UmlnaWRCb2R5X2lzQWN0aXZlXzA9dC5hc20uZGcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0seHM9dC5fZWJfYnRSaWdpZEJvZHlfaXNLaW5lbWF0aWNPYmplY3RfMD1mdW5jdGlvbigpe3JldHVybih4cz10Ll9lYl9idFJpZ2lkQm9keV9pc0tpbmVtYXRpY09iamVjdF8wPXQuYXNtLmVnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRzPXQuX2ViX2J0UmlnaWRCb2R5X2lzU3RhdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oVHM9dC5fZWJfYnRSaWdpZEJvZHlfaXNTdGF0aWNPYmplY3RfMD10LmFzbS5mZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGcz10Ll9lYl9idFJpZ2lkQm9keV9pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oRnM9dC5fZWJfYnRSaWdpZEJvZHlfaXNTdGF0aWNPcktpbmVtYXRpY09iamVjdF8wPXQuYXNtLmdnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE1zPXQuX2ViX2J0UmlnaWRCb2R5X2dldFJlc3RpdHV0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTXM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0UmVzdGl0dXRpb25fMD10LmFzbS5oZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRGcmljdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKEFzPXQuX2ViX2J0UmlnaWRCb2R5X2dldEZyaWN0aW9uXzA9dC5hc20uaWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sd3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Um9sbGluZ0ZyaWN0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4od3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Um9sbGluZ0ZyaWN0aW9uXzA9dC5hc20uamcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa3M9dC5fZWJfYnRSaWdpZEJvZHlfc2V0UmVzdGl0dXRpb25fMT1mdW5jdGlvbigpe3JldHVybihrcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRSZXN0aXR1dGlvbl8xPXQuYXNtLmtnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LExzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTHM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0RnJpY3Rpb25fMT10LmFzbS5sZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRSb2xsaW5nRnJpY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihIcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRSb2xsaW5nRnJpY3Rpb25fMT10LmFzbS5tZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRXb3JsZFRyYW5zZm9ybV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFlzPXQuX2ViX2J0UmlnaWRCb2R5X2dldFdvcmxkVHJhbnNmb3JtXzA9dC5hc20ubmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVnM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Q29sbGlzaW9uRmxhZ3NfMD1mdW5jdGlvbigpe3JldHVybihWcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRDb2xsaXNpb25GbGFnc18wPXQuYXNtLm9nKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENvbGxpc2lvbkZsYWdzXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q29sbGlzaW9uRmxhZ3NfMT10LmFzbS5wZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxFcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRXb3JsZFRyYW5zZm9ybV8xPWZ1bmN0aW9uKCl7cmV0dXJuKEVzPXQuX2ViX2J0UmlnaWRCb2R5X3NldFdvcmxkVHJhbnNmb3JtXzE9dC5hc20ucWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWHM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q29sbGlzaW9uU2hhcGVfMT1mdW5jdGlvbigpe3JldHVybihYcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRDb2xsaXNpb25TaGFwZV8xPXQuYXNtLnJnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFVzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENjZE1vdGlvblRocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFVzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENjZE1vdGlvblRocmVzaG9sZF8xPXQuYXNtLnNnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEdzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENjZFN3ZXB0U3BoZXJlUmFkaXVzXzE9ZnVuY3Rpb24oKXtyZXR1cm4oR3M9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXNfMT10LmFzbS50ZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6cz10Ll9lYl9idFJpZ2lkQm9keV9nZXRVc2VySW5kZXhfMD1mdW5jdGlvbigpe3JldHVybih6cz10Ll9lYl9idFJpZ2lkQm9keV9nZXRVc2VySW5kZXhfMD10LmFzbS51ZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxOcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRVc2VySW5kZXhfMT1mdW5jdGlvbigpe3JldHVybihOcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRVc2VySW5kZXhfMT10LmFzbS52ZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRVc2VyUG9pbnRlcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHFzPXQuX2ViX2J0UmlnaWRCb2R5X2dldFVzZXJQb2ludGVyXzA9dC5hc20ud2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWnM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0VXNlclBvaW50ZXJfMT1mdW5jdGlvbigpe3JldHVybihacz10Ll9lYl9idFJpZ2lkQm9keV9zZXRVc2VyUG9pbnRlcl8xPXQuYXNtLnhnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEtzPXQuX2ViX2J0UmlnaWRCb2R5X2dldEJyb2FkcGhhc2VIYW5kbGVfMD1mdW5jdGlvbigpe3JldHVybihLcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRCcm9hZHBoYXNlSGFuZGxlXzA9dC5hc20ueWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sJHM9dC5fZWJfYnRSaWdpZEJvZHlfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybigkcz10Ll9lYl9idFJpZ2lkQm9keV9fX2Rlc3Ryb3lfX18wPXQuYXNtLnpnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEpzPXQuX2ViX2J0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyX2J0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oSnM9dC5fZWJfYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXJfYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXJfMD10LmFzbS5BZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0cD10Ll9lYl9idFNlcXVlbnRpYWxJbXB1bHNlQ29uc3RyYWludFNvbHZlcl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHRwPXQuX2ViX2J0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyX19fZGVzdHJveV9fXzA9dC5hc20uQmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZXA9dC5fZWJfYnRDb25zdHJhaW50U29sdmVyX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZXA9dC5fZWJfYnRDb25zdHJhaW50U29sdmVyX19fZGVzdHJveV9fXzA9dC5hc20uQ2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sb3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV90aW1lU3RlcF8wPWZ1bmN0aW9uKCl7cmV0dXJuKG9wPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdGltZVN0ZXBfMD10LmFzbS5EZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxucD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3RpbWVTdGVwXzE9ZnVuY3Rpb24oKXtyZXR1cm4obnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV90aW1lU3RlcF8xPXQuYXNtLkVnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fc3RlcENvdW50XzA9ZnVuY3Rpb24oKXtyZXR1cm4ocnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9zdGVwQ291bnRfMD10LmFzbS5GZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxfcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3N0ZXBDb3VudF8xPWZ1bmN0aW9uKCl7cmV0dXJuKF9wPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fc3RlcENvdW50XzE9dC5hc20uR2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saXA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9kaXNwYXRjaEZ1bmNfMD1mdW5jdGlvbigpe3JldHVybihpcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX2Rpc3BhdGNoRnVuY18wPXQuYXNtLkhnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGFwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fZGlzcGF0Y2hGdW5jXzE9ZnVuY3Rpb24oKXtyZXR1cm4oYXA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV9kaXNwYXRjaEZ1bmNfMT10LmFzbS5JZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX3RpbWVPZkltcGFjdF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHNwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdGltZU9mSW1wYWN0XzA9dC5hc20uSmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scHA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV90aW1lT2ZJbXBhY3RfMT1mdW5jdGlvbigpe3JldHVybihwcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3RpbWVPZkltcGFjdF8xPXQuYXNtLktnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdXNlQ29udGludW91c18wPWZ1bmN0aW9uKCl7cmV0dXJuKGxwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdXNlQ29udGludW91c18wPXQuYXNtLkxnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHVwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fdXNlQ29udGludW91c18xPWZ1bmN0aW9uKCl7cmV0dXJuKHVwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fdXNlQ29udGludW91c18xPXQuYXNtLk1nKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fZW5hYmxlU2F0Q29udmV4XzA9ZnVuY3Rpb24oKXtyZXR1cm4oY3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9lbmFibGVTYXRDb252ZXhfMD10LmFzbS5OZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx5cD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX2VuYWJsZVNhdENvbnZleF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHlwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fZW5hYmxlU2F0Q29udmV4XzE9dC5hc20uT2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saHA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9lbmFibGVTUFVfMD1mdW5jdGlvbigpe3JldHVybihocD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX2VuYWJsZVNQVV8wPXQuYXNtLlBnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fZW5hYmxlU1BVXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV9lbmFibGVTUFVfMT10LmFzbS5RZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX3VzZUVwYV8wPWZ1bmN0aW9uKCl7cmV0dXJuKG1wPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdXNlRXBhXzA9dC5hc20uUmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV91c2VFcGFfMT1mdW5jdGlvbigpe3JldHVybihicD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3VzZUVwYV8xPXQuYXNtLlNnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fYWxsb3dlZENjZFBlbmV0cmF0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZ3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9hbGxvd2VkQ2NkUGVuZXRyYXRpb25fMD10LmFzbS5UZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxkcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX2FsbG93ZWRDY2RQZW5ldHJhdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGRwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fYWxsb3dlZENjZFBlbmV0cmF0aW9uXzE9dC5hc20uVWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sV3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWxfMD1mdW5jdGlvbigpe3JldHVybihXcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX3VzZUNvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVXRpbF8wPXQuYXNtLlZnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LENwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fdXNlQ29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VVdGlsXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQ3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWxfMT10LmFzbS5XZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxqcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX2NvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVGhyZXNob2xkXzA9ZnVuY3Rpb24oKXtyZXR1cm4oanA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9jb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVRocmVzaG9sZF8wPXQuYXNtLlhnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHZwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fY29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VUaHJlc2hvbGRfMT1mdW5jdGlvbigpe3JldHVybih2cD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX2NvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVGhyZXNob2xkXzE9dC5hc20uWWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRHA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKERwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fX19kZXN0cm95X19fMD10LmFzbS5aZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxScD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX3NwbGl0SW1wdWxzZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFJwPXQuX2ViX2J0Q29udGFjdFNvbHZlckluZm9fZ2V0X21fc3BsaXRJbXB1bHNlXzA9dC5hc20uX2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU3A9dC5fZWJfYnRDb250YWN0U29sdmVySW5mb19zZXRfbV9zcGxpdEltcHVsc2VfMT1mdW5jdGlvbigpe3JldHVybihTcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX3NldF9tX3NwbGl0SW1wdWxzZV8xPXQuYXNtLiRnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LElwPXQuX2ViX2J0Q29udGFjdFNvbHZlckluZm9fZ2V0X21fc3BsaXRJbXB1bHNlUGVuZXRyYXRpb25UaHJlc2hvbGRfMD1mdW5jdGlvbigpe3JldHVybihJcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX3NwbGl0SW1wdWxzZVBlbmV0cmF0aW9uVGhyZXNob2xkXzA9dC5hc20uYWgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT3A9dC5fZWJfYnRDb250YWN0U29sdmVySW5mb19zZXRfbV9zcGxpdEltcHVsc2VQZW5ldHJhdGlvblRocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKE9wPXQuX2ViX2J0Q29udGFjdFNvbHZlckluZm9fc2V0X21fc3BsaXRJbXB1bHNlUGVuZXRyYXRpb25UaHJlc2hvbGRfMT10LmFzbS5iaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxCcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX251bUl0ZXJhdGlvbnNfMD1mdW5jdGlvbigpe3JldHVybihCcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX251bUl0ZXJhdGlvbnNfMD10LmFzbS5jaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX3NldF9tX251bUl0ZXJhdGlvbnNfMT1mdW5jdGlvbigpe3JldHVybihQcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX3NldF9tX251bUl0ZXJhdGlvbnNfMT10LmFzbS5kaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx4cD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oeHA9dC5fZWJfYnRDb250YWN0U29sdmVySW5mb19fX2Rlc3Ryb3lfX18wPXQuYXNtLmVoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkXzQ9ZnVuY3Rpb24oKXtyZXR1cm4oVHA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfND10LmFzbS5maCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRHcmF2aXR5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oRnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0R3Jhdml0eV8xPXQuYXNtLmdoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE1wPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2dldEdyYXZpdHlfMD1mdW5jdGlvbigpe3JldHVybihNcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9nZXRHcmF2aXR5XzA9dC5hc20uaGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oQXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzE9dC5hc20uaWgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sd3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzM9ZnVuY3Rpb24oKXtyZXR1cm4od3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzM9dC5hc20uamgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlUmlnaWRCb2R5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oa3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlUmlnaWRCb2R5XzE9dC5hc20ua2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTHA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc3RlcFNpbXVsYXRpb25fMT1mdW5jdGlvbigpe3JldHVybihMcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zdGVwU2ltdWxhdGlvbl8xPXQuYXNtLmxoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEhwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3N0ZXBTaW11bGF0aW9uXzI9ZnVuY3Rpb24oKXtyZXR1cm4oSHA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc3RlcFNpbXVsYXRpb25fMj10LmFzbS5taCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zdGVwU2ltdWxhdGlvbl8zPWZ1bmN0aW9uKCl7cmV0dXJuKFlwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3N0ZXBTaW11bGF0aW9uXzM9dC5hc20ubmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0Q29udGFjdEFkZGVkQ2FsbGJhY2tfMT1mdW5jdGlvbigpe3JldHVybihWcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRDb250YWN0QWRkZWRDYWxsYmFja18xPXQuYXNtLm9oKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3RQcm9jZXNzZWRDYWxsYmFja18xPWZ1bmN0aW9uKCl7cmV0dXJuKFFwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3RQcm9jZXNzZWRDYWxsYmFja18xPXQuYXNtLnBoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3REZXN0cm95ZWRDYWxsYmFja18xPWZ1bmN0aW9uKCl7cmV0dXJuKEVwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3REZXN0cm95ZWRDYWxsYmFja18xPXQuYXNtLnFoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFhwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2dldERpc3BhdGNoZXJfMD1mdW5jdGlvbigpe3JldHVybihYcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9nZXREaXNwYXRjaGVyXzA9dC5hc20ucmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0UGFpckNhY2hlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oVXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0UGFpckNhY2hlXzA9dC5hc20uc2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sR3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4oR3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9dC5hc20udGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0senA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9ZnVuY3Rpb24oKXtyZXR1cm4oenA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20udWgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzI9ZnVuY3Rpb24oKXtyZXR1cm4oTnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzI9dC5hc20udmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9ZnVuY3Rpb24oKXtyZXR1cm4ocXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9dC5hc20ud2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9ZnVuY3Rpb24oKXtyZXR1cm4oWnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20ueGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0QnJvYWRwaGFzZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKEtwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2dldEJyb2FkcGhhc2VfMD10LmFzbS55aCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb252ZXhTd2VlcFRlc3RfNT1mdW5jdGlvbigpe3JldHVybigkcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb252ZXhTd2VlcFRlc3RfNT10LmFzbS56aCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxKcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb250YWN0UGFpclRlc3RfMz1mdW5jdGlvbigpe3JldHVybihKcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb250YWN0UGFpclRlc3RfMz10LmFzbS5BaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0bD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb250YWN0VGVzdF8yPWZ1bmN0aW9uKCl7cmV0dXJuKHRsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2NvbnRhY3RUZXN0XzI9dC5hc20uQmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZWw9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfdXBkYXRlU2luZ2xlQWFiYl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGVsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3VwZGF0ZVNpbmdsZUFhYmJfMT10LmFzbS5DaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9hZGRBY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihvbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9hZGRBY3Rpb25fMT10LmFzbS5EaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxubD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9yZW1vdmVBY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihubD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9yZW1vdmVBY3Rpb25fMT10LmFzbS5FaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxybD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9nZXRTb2x2ZXJJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocmw9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0U29sdmVySW5mb18wPXQuYXNtLkZoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LF9sPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldEludGVybmFsVGlja0NhbGxiYWNrXzE9ZnVuY3Rpb24oKXtyZXR1cm4oX2w9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMT10LmFzbS5HaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxpbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRJbnRlcm5hbFRpY2tDYWxsYmFja18yPWZ1bmN0aW9uKCl7cmV0dXJuKGlsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldEludGVybmFsVGlja0NhbGxiYWNrXzI9dC5hc20uSGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYWw9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMz1mdW5jdGlvbigpe3JldHVybihhbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRJbnRlcm5hbFRpY2tDYWxsYmFja18zPXQuYXNtLkloKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHNsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oc2w9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfX19kZXN0cm95X19fMD10LmFzbS5KaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwbD10Ll9lYl9idEFjdGlvbkludGVyZmFjZV91cGRhdGVBY3Rpb25fMj1mdW5jdGlvbigpe3JldHVybihwbD10Ll9lYl9idEFjdGlvbkludGVyZmFjZV91cGRhdGVBY3Rpb25fMj10LmFzbS5LaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxsbD10Ll9lYl9idEFjdGlvbkludGVyZmFjZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGxsPXQuX2ViX2J0QWN0aW9uSW50ZXJmYWNlX19fZGVzdHJveV9fXzA9dC5hc20uTGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdWw9dC5fZW1zY3JpcHRlbl9lbnVtX1BIWV9TY2FsYXJUeXBlX1BIWV9GTE9BVD1mdW5jdGlvbigpe3JldHVybih1bD10Ll9lbXNjcmlwdGVuX2VudW1fUEhZX1NjYWxhclR5cGVfUEhZX0ZMT0FUPXQuYXNtLk1oKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRE9VQkxFPWZ1bmN0aW9uKCl7cmV0dXJuKGNsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRE9VQkxFPXQuYXNtLk5oKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfSU5URUdFUj1mdW5jdGlvbigpe3JldHVybih5bD10Ll9lbXNjcmlwdGVuX2VudW1fUEhZX1NjYWxhclR5cGVfUEhZX0lOVEVHRVI9dC5hc20uT2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saGw9dC5fZW1zY3JpcHRlbl9lbnVtX1BIWV9TY2FsYXJUeXBlX1BIWV9TSE9SVD1mdW5jdGlvbigpe3JldHVybihobD10Ll9lbXNjcmlwdGVuX2VudW1fUEhZX1NjYWxhclR5cGVfUEhZX1NIT1JUPXQuYXNtLlBoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRklYRURQT0lOVDg4PWZ1bmN0aW9uKCl7cmV0dXJuKGZsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRklYRURQT0lOVDg4PXQuYXNtLlFoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG1sPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfVUNIQVI9ZnVuY3Rpb24oKXtyZXR1cm4obWw9dC5fZW1zY3JpcHRlbl9lbnVtX1BIWV9TY2FsYXJUeXBlX1BIWV9VQ0hBUj10LmFzbS5SaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTt0Ll9tYWxsb2M9ZnVuY3Rpb24oKXtyZXR1cm4odC5fbWFsbG9jPXQuYXNtLlNoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2ZyZWU9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZnJlZT10LmFzbS5UaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0LmR5bkNhbGxfdmk9ZnVuY3Rpb24oKXtyZXR1cm4odC5keW5DYWxsX3ZpPXQuYXNtLlVoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuZHluQ2FsbF92PWZ1bmN0aW9uKCl7cmV0dXJuKHQuZHluQ2FsbF92PXQuYXNtLlZoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuYWRkRnVuY3Rpb249ZnVuY3Rpb24oZSxvKXtpZighQnQpe0J0PW5ldyBXZWFrTWFwO2Zvcih2YXIgbj0wO248V3QubGVuZ3RoO24rKyl7dmFyIHI9V3QuZ2V0KG4pO3ImJkJ0LnNldChyLG4pfX1pZihCdC5oYXMoZSkpZT1CdC5nZXQoZSk7ZWxzZXtpZihlZS5sZW5ndGgpbj1lZS5wb3AoKTtlbHNle249V3QubGVuZ3RoO3RyeXtXdC5ncm93KDEpfWNhdGNoKGN0KXt0aHJvdyBjdCBpbnN0YW5jZW9mIFJhbmdlRXJyb3I/IlVuYWJsZSB0byBncm93IHdhc20gdGFibGUuIFNldCBBTExPV19UQUJMRV9HUk9XVEguIjpjdH19dHJ5e1d0LnNldChuLGUpfWNhdGNoKGN0KXtpZighKGN0IGluc3RhbmNlb2YgVHlwZUVycm9yKSl0aHJvdyBjdDtpZih0eXBlb2YgV2ViQXNzZW1ibHkuRnVuY3Rpb249PSJmdW5jdGlvbiIpe3ZhciBjPXtpOiJpMzIiLGo6Imk2NCIsZjoiZjMyIixkOiJmNjQifSxEPXtwYXJhbWV0ZXJzOltdLHJlc3VsdHM6b1swXT09InYiP1tdOltjW29bMF1dXX07Zm9yKHI9MTtyPG8ubGVuZ3RoOysrcilELnBhcmFtZXRlcnMucHVzaChjW29bcl1dKTtvPW5ldyBXZWJBc3NlbWJseS5GdW5jdGlvbihELGUpfWVsc2V7Yz1bMSwwLDEsOTZdLEQ9by5zbGljZSgwLDEpLG89by5zbGljZSgxKTt2YXIgVT17aToxMjcsajoxMjYsZjoxMjUsZDoxMjR9O2ZvcihjLnB1c2goby5sZW5ndGgpLHI9MDtyPG8ubGVuZ3RoOysrciljLnB1c2goVVtvW3JdXSk7RD09InYiP2MucHVzaCgwKTpjPWMuY29uY2F0KFsxLFVbRF1dKSxjWzFdPWMubGVuZ3RoLTIsbz1uZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDBdLmNvbmNhdChjLFsyLDcsMSwxLDEwMSwxLDEwMiwwLDAsNyw1LDEsMSwxMDIsMCwwXSkpLG89bmV3IFdlYkFzc2VtYmx5Lk1vZHVsZShvKSxvPW5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShvLHtlOntmOmV9fSkuZXhwb3J0cy5mfVd0LnNldChuLG8pfUJ0LnNldChlLG4pLGU9bn1yZXR1cm4gZX07dmFyIGllO3F0PWZ1bmN0aW9uIGUoKXtpZXx8V2UoKSxpZXx8KHF0PWUpfTtmdW5jdGlvbiBXZSgpe2Z1bmN0aW9uIGUoKXtpZighaWUmJihpZT0hMCx0LmNhbGxlZFJ1bj0hMCwhb2UpKXtpZihPZT0hMCxVdChfZSksVXQoVnQpLG0odCksdC5vblJ1bnRpbWVJbml0aWFsaXplZCYmdC5vblJ1bnRpbWVJbml0aWFsaXplZCgpLHQucG9zdFJ1bilmb3IodHlwZW9mIHQucG9zdFJ1bj09ImZ1bmN0aW9uIiYmKHQucG9zdFJ1bj1bdC5wb3N0UnVuXSk7dC5wb3N0UnVuLmxlbmd0aDspe3ZhciBvPXQucG9zdFJ1bi5zaGlmdCgpO0llLnVuc2hpZnQobyl9VXQoSWUpfX1pZighKDA8UXQpKXtpZih0LnByZVJ1bilmb3IodHlwZW9mIHQucHJlUnVuPT0iZnVuY3Rpb24iJiYodC5wcmVSdW49W3QucHJlUnVuXSk7dC5wcmVSdW4ubGVuZ3RoOylPbCgpO1V0KHJlKSwwPFF0fHwodC5zZXRTdGF0dXM/KHQuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksc2V0VGltZW91dChmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldFN0YXR1cygiIil9LDEpLGUoKX0sMSkpOmUoKSl9fWlmKHQucnVuPVdlLHQucHJlSW5pdClmb3IodHlwZW9mIHQucHJlSW5pdD09ImZ1bmN0aW9uIiYmKHQucHJlSW5pdD1bdC5wcmVJbml0XSk7MDx0LnByZUluaXQubGVuZ3RoOyl0LnByZUluaXQucG9wKCkoKTtXZSgpO2Z1bmN0aW9uIGIoKXt9Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYi5wcm90b3R5cGUuY29uc3RydWN0b3I9YixiLnByb3RvdHlwZS5YaD1iLGIuWWg9e30sdC5XcmFwcGVyT2JqZWN0PWI7ZnVuY3Rpb24gQShlKXtyZXR1cm4oZXx8YikuWWh9dC5nZXRDYWNoZT1BO2Z1bmN0aW9uIGEoZSxvKXt2YXIgbj1BKG8pLHI9bltlXTtyZXR1cm4gcnx8KHI9T2JqZWN0LmNyZWF0ZSgob3x8YikucHJvdG90eXBlKSxyLldoPWUsbltlXT1yKX10LndyYXBQb2ludGVyPWEsdC5jYXN0T2JqZWN0PWZ1bmN0aW9uKGUsbyl7cmV0dXJuIGEoZS5XaCxvKX0sdC5OVUxMPWEoMCksdC5kZXN0cm95PWZ1bmN0aW9uKGUpe2lmKCFlLl9fZGVzdHJveV9fKXRocm93IkVycm9yOiBDYW5ub3QgZGVzdHJveSBvYmplY3QuIChEaWQgeW91IGNyZWF0ZSBpdCB5b3Vyc2VsZj8pIjtlLl9fZGVzdHJveV9fKCksZGVsZXRlIEEoZS5YaClbZS5XaF19LHQuY29tcGFyZT1mdW5jdGlvbihlLG8pe3JldHVybiBlLldoPT09by5XaH0sdC5nZXRQb2ludGVyPWZ1bmN0aW9uKGUpe3JldHVybiBlLldofSx0LmdldENsYXNzPWZ1bmN0aW9uKGUpe3JldHVybiBlLlhofTt2YXIgRXQ9MCxhZT0wLHNlPTAscGU9W10sbGU9MDtmdW5jdGlvbiBDZSgpe2lmKGxlKXtmb3IodmFyIGU9MDtlPHBlLmxlbmd0aDtlKyspdC5fZnJlZShwZVtlXSk7cGUubGVuZ3RoPTAsdC5fZnJlZShFdCksRXQ9MCxhZSs9bGUsbGU9MH1FdHx8KGFlKz0xMjgsRXQ9dC5fbWFsbG9jKGFlKSxMdChFdCkpLHNlPTB9ZnVuY3Rpb24gYmwoZSl7aWYodHlwZW9mIGU9PSJvYmplY3QiKXtMdChFdCk7dmFyIG89ZS5sZW5ndGgqWHQuQllURVNfUEVSX0VMRU1FTlQ7aWYobz1vKzcmLTgsc2Urbz49YWUpe0x0KDA8byksbGUrPW87dmFyIG49dC5fbWFsbG9jKG8pO3BlLnB1c2gobil9ZWxzZSBuPUV0K3NlLHNlKz1vO3N3aXRjaChvPW4sbj1vPj4+MCxYdC5CWVRFU19QRVJfRUxFTUVOVCl7Y2FzZSAyOm4+Pj49MTticmVhaztjYXNlIDQ6bj4+Pj0yO2JyZWFrO2Nhc2UgODpuPj4+PTN9Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspWHRbbityXT1lW3JdO3JldHVybiBvfXJldHVybiBlfWZ1bmN0aW9uIFYoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb2xsaXNpb25Xb3JsZCwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1WLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxWLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1WLFYucHJvdG90eXBlLlhoPVYsVi5ZaD17fSx0LmJ0Q29sbGlzaW9uV29ybGQ9VixWLnByb3RvdHlwZS5nZXREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoRmUodGhpcy5XaCksSyl9LFYucHJvdG90eXBlLmdldFBhaXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiBhKE1lKHRoaXMuV2gpLEopfSxWLnByb3RvdHlwZS5nZXREaXNwYXRjaEluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShBZSh0aGlzLldoKSxzKX0sVi5wcm90b3R5cGUuYWRkQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/d2UocixlKTpuPT09dm9pZCAwP2tlKHIsZSxvKTpMZShyLGUsbyxuKX0sVi5wcm90b3R5cGUucmVtb3ZlQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxIZShvLGUpfSxWLnByb3RvdHlwZS5nZXRCcm9hZHBoYXNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoWWUodGhpcy5XaCksYXQpfSxWLnByb3RvdHlwZS5jb252ZXhTd2VlcFRlc3Q9ZnVuY3Rpb24oZSxvLG4scixjKXt2YXIgRD10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksYyYmdHlwZW9mIGM9PSJvYmplY3QiJiYoYz1jLldoKSxWZShELGUsbyxuLHIsYyl9LFYucHJvdG90eXBlLmNvbnRhY3RQYWlyVGVzdD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxRZShyLGUsbyxuKX0sVi5wcm90b3R5cGUuY29udGFjdFRlc3Q9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxFZShuLGUsbyl9LFYucHJvdG90eXBlLnVwZGF0ZVNpbmdsZUFhYmI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFhlKG8sZSl9LFYucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7VWUodGhpcy5XaCl9O2Z1bmN0aW9uIHcoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRRdWFkV29yZCwgbm8gY29uc3RydWN0b3IgaW4gSURMIn13LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSx3LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj13LHcucHJvdG90eXBlLlhoPXcsdy5ZaD17fSx0LmJ0UXVhZFdvcmQ9dyx3LnByb3RvdHlwZS54PXcucHJvdG90eXBlLng9ZnVuY3Rpb24oKXtyZXR1cm4gR2UodGhpcy5XaCl9LHcucHJvdG90eXBlLnk9dy5wcm90b3R5cGUueT1mdW5jdGlvbigpe3JldHVybiB6ZSh0aGlzLldoKX0sdy5wcm90b3R5cGUuej13LnByb3RvdHlwZS56PWZ1bmN0aW9uKCl7cmV0dXJuIE5lKHRoaXMuV2gpfSx3LnByb3RvdHlwZS53PWZ1bmN0aW9uKCl7cmV0dXJuIHFlKHRoaXMuV2gpfSx3LnByb3RvdHlwZS5zZXRYPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxaZShvLGUpfSx3LnByb3RvdHlwZS5zZXRZPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxLZShvLGUpfSx3LnByb3RvdHlwZS5zZXRaPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSwkZShvLGUpfSx3LnByb3RvdHlwZS5zZXRXPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxKZShvLGUpfSx3LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe3RvKHRoaXMuV2gpfTtmdW5jdGlvbiBvdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidE1vdGlvblN0YXRlLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifW90LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxvdC5wcm90b3R5cGUuY29uc3RydWN0b3I9b3Qsb3QucHJvdG90eXBlLlhoPW90LG90LlloPXt9LHQuYnRNb3Rpb25TdGF0ZT1vdCxvdC5wcm90b3R5cGUuZ2V0V29ybGRUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGVvKG8sZSl9LG90LnByb3RvdHlwZS5zZXRXb3JsZFRyYW5zZm9ybT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksb28obyxlKX0sb3QucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bm8odGhpcy5XaCl9O2Z1bmN0aW9uIEMoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb2xsaXNpb25PYmplY3QsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Qy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksQy5wcm90b3R5cGUuY29uc3RydWN0b3I9QyxDLnByb3RvdHlwZS5YaD1DLEMuWWg9e30sdC5idENvbGxpc2lvbk9iamVjdD1DLEMucHJvdG90eXBlLnNldEFuaXNvdHJvcGljRnJpY3Rpb249ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxybyhuLGUsbyl9LEMucHJvdG90eXBlLmdldENvbGxpc2lvblNoYXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoX28odGhpcy5XaCksUSl9LEMucHJvdG90eXBlLnNldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxpbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRBY3RpdmF0aW9uU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGFvKG8sZSl9LEMucHJvdG90eXBlLmZvcmNlQWN0aXZhdGlvblN0YXRlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxzbyhvLGUpfSxDLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZT09PXZvaWQgMD9wbyhvKTpsbyhvLGUpfSxDLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiEhdW8odGhpcy5XaCl9LEMucHJvdG90eXBlLmlzS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISFjbyh0aGlzLldoKX0sQy5wcm90b3R5cGUuaXNTdGF0aWNPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4hIXlvKHRoaXMuV2gpfSxDLnByb3RvdHlwZS5pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISFobyh0aGlzLldoKX0sQy5wcm90b3R5cGUuZ2V0UmVzdGl0dXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gZm8odGhpcy5XaCl9LEMucHJvdG90eXBlLmdldEZyaWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG1vKHRoaXMuV2gpfSxDLnByb3RvdHlwZS5nZXRSb2xsaW5nRnJpY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gYm8odGhpcy5XaCl9LEMucHJvdG90eXBlLnNldFJlc3RpdHV0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxnbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRGcmljdGlvbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksV28obyxlKX0sQy5wcm90b3R5cGUuc2V0Um9sbGluZ0ZyaWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxDbyhvLGUpfSxDLnByb3RvdHlwZS5nZXRXb3JsZFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBhKGpvKHRoaXMuV2gpLE8pfSxDLnByb3RvdHlwZS5nZXRDb2xsaXNpb25GbGFncz1mdW5jdGlvbigpe3JldHVybiB2byh0aGlzLldoKX0sQy5wcm90b3R5cGUuc2V0Q29sbGlzaW9uRmxhZ3M9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLERvKG8sZSl9LEMucHJvdG90eXBlLnNldFdvcmxkVHJhbnNmb3JtPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxSbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRDb2xsaXNpb25TaGFwZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksU28obyxlKX0sQy5wcm90b3R5cGUuc2V0Q2NkTW90aW9uVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxJbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRDY2RTd2VwdFNwaGVyZVJhZGl1cz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksT28obyxlKX0sQy5wcm90b3R5cGUuZ2V0VXNlckluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIEJvKHRoaXMuV2gpfSxDLnByb3RvdHlwZS5zZXRVc2VySW5kZXg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFBvKG8sZSl9LEMucHJvdG90eXBlLmdldFVzZXJQb2ludGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoeG8odGhpcy5XaCksYnQpfSxDLnByb3RvdHlwZS5zZXRVc2VyUG9pbnRlcj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksVG8obyxlKX0sQy5wcm90b3R5cGUuZ2V0QnJvYWRwaGFzZUhhbmRsZT1mdW5jdGlvbigpe3JldHVybiBhKEZvKHRoaXMuV2gpLEIpfSxDLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe01vKHRoaXMuV2gpfTtmdW5jdGlvbiBtdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBDb250YWN0UmVzdWx0Q2FsbGJhY2ssIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9bXQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLG10LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1tdCxtdC5wcm90b3R5cGUuWGg9bXQsbXQuWWg9e30sdC5Db250YWN0UmVzdWx0Q2FsbGJhY2s9bXQsbXQucHJvdG90eXBlLmFkZFNpbmdsZVJlc3VsdD1mdW5jdGlvbihlLG8sbixyLGMsRCxVKXt2YXIgY3Q9dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSxjJiZ0eXBlb2YgYz09Im9iamVjdCImJihjPWMuV2gpLEQmJnR5cGVvZiBEPT0ib2JqZWN0IiYmKEQ9RC5XaCksVSYmdHlwZW9mIFU9PSJvYmplY3QiJiYoVT1VLldoKSxBbyhjdCxlLG8sbixyLGMsRCxVKX0sbXQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7d28odGhpcy5XaCl9O2Z1bmN0aW9uIFIoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgQ29udmV4UmVzdWx0Q2FsbGJhY2ssIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Ui5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksUi5wcm90b3R5cGUuY29uc3RydWN0b3I9UixSLnByb3RvdHlwZS5YaD1SLFIuWWg9e30sdC5Db252ZXhSZXN1bHRDYWxsYmFjaz1SLFIucHJvdG90eXBlLmhhc0hpdD1mdW5jdGlvbigpe3JldHVybiEha28odGhpcy5XaCl9LFIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwPVIucHJvdG90eXBlLlpoPWZ1bmN0aW9uKCl7cmV0dXJuIExvKHRoaXMuV2gpfSxSLnByb3RvdHlwZS5zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cD1SLnByb3RvdHlwZS5haT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSG8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFIucHJvdG90eXBlLCJtX2NvbGxpc2lvbkZpbHRlckdyb3VwIix7Z2V0OlIucHJvdG90eXBlLlpoLHNldDpSLnByb3RvdHlwZS5haX0pLFIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Ui5wcm90b3R5cGUuJGg9ZnVuY3Rpb24oKXtyZXR1cm4gWW8odGhpcy5XaCl9LFIucHJvdG90eXBlLnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Ui5wcm90b3R5cGUuYmk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFZvKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSLnByb3RvdHlwZSwibV9jb2xsaXNpb25GaWx0ZXJNYXNrIix7Z2V0OlIucHJvdG90eXBlLiRoLHNldDpSLnByb3RvdHlwZS5iaX0pLFIucHJvdG90eXBlLmdldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbj1SLnByb3RvdHlwZS5kaT1mdW5jdGlvbigpe3JldHVybiBRbyh0aGlzLldoKX0sUi5wcm90b3R5cGUuc2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uPVIucHJvdG90eXBlLmZpPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxFbyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUi5wcm90b3R5cGUsIm1fY2xvc2VzdEhpdEZyYWN0aW9uIix7Z2V0OlIucHJvdG90eXBlLmRpLHNldDpSLnByb3RvdHlwZS5maX0pLFIucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7WG8odGhpcy5XaCl9O2Z1bmN0aW9uIFEoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb2xsaXNpb25TaGFwZSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1RLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxRLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1RLFEucHJvdG90eXBlLlhoPVEsUS5ZaD17fSx0LmJ0Q29sbGlzaW9uU2hhcGU9USxRLnByb3RvdHlwZS5zZXRMb2NhbFNjYWxpbmc9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFVvKG8sZSl9LFEucHJvdG90eXBlLmdldExvY2FsU2NhbGluZz1mdW5jdGlvbigpe3JldHVybiBhKEdvKHRoaXMuV2gpLHkpfSxRLnByb3RvdHlwZS5jYWxjdWxhdGVMb2NhbEluZXJ0aWE9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx6byhuLGUsbyl9LFEucHJvdG90eXBlLnNldE1hcmdpbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTm8obyxlKX0sUS5wcm90b3R5cGUuZ2V0TWFyZ2luPWZ1bmN0aW9uKCl7cmV0dXJuIHFvKHRoaXMuV2gpfSxRLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1pvKHRoaXMuV2gpfTtmdW5jdGlvbiBLKCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0RGlzcGF0Y2hlciwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1LLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxLLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1LLEsucHJvdG90eXBlLlhoPUssSy5ZaD17fSx0LmJ0RGlzcGF0Y2hlcj1LLEsucHJvdG90eXBlLmdldE51bU1hbmlmb2xkcz1mdW5jdGlvbigpe3JldHVybiBLbyh0aGlzLldoKX0sSy5wcm90b3R5cGUuZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWw9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKCRvKG8sZSkseil9LEsucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7Sm8odGhpcy5XaCl9O2Z1bmN0aW9uIHgoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnREeW5hbWljc1dvcmxkLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifXgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVi5wcm90b3R5cGUpLHgucHJvdG90eXBlLmNvbnN0cnVjdG9yPXgseC5wcm90b3R5cGUuWGg9eCx4LlloPXt9LHQuYnREeW5hbWljc1dvcmxkPXgseC5wcm90b3R5cGUuYWRkQWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx0bihvLGUpfSx4LnByb3RvdHlwZS5yZW1vdmVBY3Rpb249ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGVuKG8sZSl9LHgucHJvdG90eXBlLmdldFNvbHZlckluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShvbih0aGlzLldoKSxTKX0seC5wcm90b3R5cGUuc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2s9ZnVuY3Rpb24oZSxvLG4pe3ZhciByPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksbz09PXZvaWQgMD9ubihyLGUpOm49PT12b2lkIDA/cm4ocixlLG8pOl9uKHIsZSxvLG4pfSx4LnByb3RvdHlwZS5nZXREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoYW4odGhpcy5XaCksSyl9LHgucHJvdG90eXBlLmdldFBhaXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiBhKHNuKHRoaXMuV2gpLEopfSx4LnByb3RvdHlwZS5nZXREaXNwYXRjaEluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShwbih0aGlzLldoKSxzKX0seC5wcm90b3R5cGUuYWRkQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/bG4ocixlKTpuPT09dm9pZCAwP3VuKHIsZSxvKTpjbihyLGUsbyxuKX0seC5wcm90b3R5cGUucmVtb3ZlQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx5bihvLGUpfSx4LnByb3RvdHlwZS5nZXRCcm9hZHBoYXNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoaG4odGhpcy5XaCksYXQpfSx4LnByb3RvdHlwZS5jb252ZXhTd2VlcFRlc3Q9ZnVuY3Rpb24oZSxvLG4scixjKXt2YXIgRD10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksYyYmdHlwZW9mIGM9PSJvYmplY3QiJiYoYz1jLldoKSxmbihELGUsbyxuLHIsYyl9LHgucHJvdG90eXBlLmNvbnRhY3RQYWlyVGVzdD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxtbihyLGUsbyxuKX0seC5wcm90b3R5cGUuY29udGFjdFRlc3Q9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxibihuLGUsbyl9LHgucHJvdG90eXBlLnVwZGF0ZVNpbmdsZUFhYmI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGduKG8sZSl9LHgucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7ZG4odGhpcy5XaCl9O2Z1bmN0aW9uIGJ0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIFZvaWRQdHIsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9YnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGJ0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1idCxidC5wcm90b3R5cGUuWGg9YnQsYnQuWWg9e30sdC5Wb2lkUHRyPWJ0LGJ0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1duKHRoaXMuV2gpfTtmdW5jdGlvbiB5KGUsbyxuKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSx0aGlzLldoPWU9PT12b2lkIDA/Q24oKTpvPT09dm9pZCAwP19lYl9idFZlY3RvcjNfYnRWZWN0b3IzXzEoZSk6bj09PXZvaWQgMD9fZWJfYnRWZWN0b3IzX2J0VmVjdG9yM18yKGUsbyk6am4oZSxvLG4pLEEoeSlbdGhpcy5XaF09dGhpc315LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSx5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15LHkucHJvdG90eXBlLlhoPXkseS5ZaD17fSx0LmJ0VmVjdG9yMz15LHkucHJvdG90eXBlLmxlbmd0aD15LnByb3RvdHlwZS5sZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdm4odGhpcy5XaCl9LHkucHJvdG90eXBlLng9eS5wcm90b3R5cGUueD1mdW5jdGlvbigpe3JldHVybiBEbih0aGlzLldoKX0seS5wcm90b3R5cGUueT15LnByb3RvdHlwZS55PWZ1bmN0aW9uKCl7cmV0dXJuIFJuKHRoaXMuV2gpfSx5LnByb3RvdHlwZS56PXkucHJvdG90eXBlLno9ZnVuY3Rpb24oKXtyZXR1cm4gU24odGhpcy5XaCl9LHkucHJvdG90eXBlLnNldFg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEluKG8sZSl9LHkucHJvdG90eXBlLnNldFk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE9uKG8sZSl9LHkucHJvdG90eXBlLnNldFo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEJuKG8sZSl9LHkucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLFBuKHIsZSxvLG4pfSx5LnByb3RvdHlwZS5ub3JtYWxpemU9eS5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKCl7eG4odGhpcy5XaCl9LHkucHJvdG90eXBlLnJvdGF0ZT15LnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksYShUbihuLGUsbykseSl9LHkucHJvdG90eXBlLmRvdD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEZuKG8sZSl9LHkucHJvdG90eXBlLm9wX211bD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEoTW4obyxlKSx5KX0seS5wcm90b3R5cGUub3BfYWRkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShBbihvLGUpLHkpfSx5LnByb3RvdHlwZS5vcF9zdWI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKHduKG8sZSkseSl9LHkucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7a24odGhpcy5XaCl9O2Z1bmN0aW9uIGYoZSxvLG4scil7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSx0aGlzLldoPUxuKGUsbyxuLHIpLEEoZilbdGhpcy5XaF09dGhpc31mLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHcucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLlhoPWYsZi5ZaD17fSx0LmJ0UXVhdGVybmlvbj1mLGYucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbyxuLHIpe3ZhciBjPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSxIbihjLGUsbyxuLHIpfSxmLnByb3RvdHlwZS5zZXRFdWxlclpZWD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxZbihyLGUsbyxuKX0sZi5wcm90b3R5cGUuc2V0Um90YXRpb249ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxWbihuLGUsbyl9LGYucHJvdG90eXBlLm5vcm1hbGl6ZT1mLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtRbih0aGlzLldoKX0sZi5wcm90b3R5cGUubGVuZ3RoMj1mdW5jdGlvbigpe3JldHVybiBFbih0aGlzLldoKX0sZi5wcm90b3R5cGUubGVuZ3RoPWYucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiBYbih0aGlzLldoKX0sZi5wcm90b3R5cGUuZG90PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksVW4obyxlKX0sZi5wcm90b3R5cGUubm9ybWFsaXplZD1mdW5jdGlvbigpe3JldHVybiBhKEduKHRoaXMuV2gpLGYpfSxmLnByb3RvdHlwZS5nZXRBeGlzPWZ1bmN0aW9uKCl7cmV0dXJuIGEoem4odGhpcy5XaCkseSl9LGYucHJvdG90eXBlLmludmVyc2U9Zi5wcm90b3R5cGUuaW52ZXJzZT1mdW5jdGlvbigpe3JldHVybiBhKE5uKHRoaXMuV2gpLGYpfSxmLnByb3RvdHlwZS5nZXRBbmdsZT1mdW5jdGlvbigpe3JldHVybiBxbih0aGlzLldoKX0sZi5wcm90b3R5cGUuZ2V0QW5nbGVTaG9ydGVzdFBhdGg9ZnVuY3Rpb24oKXtyZXR1cm4gWm4odGhpcy5XaCl9LGYucHJvdG90eXBlLmFuZ2xlPWYucHJvdG90eXBlLmFuZ2xlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksS24obyxlKX0sZi5wcm90b3R5cGUuYW5nbGVTaG9ydGVzdFBhdGg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSwkbihvLGUpfSxmLnByb3RvdHlwZS5vcF9hZGQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKEpuKG8sZSksZil9LGYucHJvdG90eXBlLm9wX3N1Yj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEodHIobyxlKSxmKX0sZi5wcm90b3R5cGUub3BfbXVsPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShlcihvLGUpLGYpfSxmLnByb3RvdHlwZS5vcF9tdWxxPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShvcihvLGUpLGYpfSxmLnByb3RvdHlwZS5vcF9kaXY9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKG5yKG8sZSksZil9LGYucHJvdG90eXBlLng9Zi5wcm90b3R5cGUueD1mdW5jdGlvbigpe3JldHVybiBycih0aGlzLldoKX0sZi5wcm90b3R5cGUueT1mLnByb3RvdHlwZS55PWZ1bmN0aW9uKCl7cmV0dXJuIF9yKHRoaXMuV2gpfSxmLnByb3RvdHlwZS56PWYucHJvdG90eXBlLno9ZnVuY3Rpb24oKXtyZXR1cm4gaXIodGhpcy5XaCl9LGYucHJvdG90eXBlLnc9ZnVuY3Rpb24oKXtyZXR1cm4gYXIodGhpcy5XaCl9LGYucHJvdG90eXBlLnNldFg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHNyKG8sZSl9LGYucHJvdG90eXBlLnNldFk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHByKG8sZSl9LGYucHJvdG90eXBlLnNldFo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGxyKG8sZSl9LGYucHJvdG90eXBlLnNldFc9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHVyKG8sZSl9LGYucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7Y3IodGhpcy5XaCl9O2Z1bmN0aW9uIG50KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0TWF0cml4M3gzLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxudC5wcm90b3R5cGUuY29uc3RydWN0b3I9bnQsbnQucHJvdG90eXBlLlhoPW50LG50LlloPXt9LHQuYnRNYXRyaXgzeDM9bnQsbnQucHJvdG90eXBlLnNldEV1bGVyWllYPWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHlyKHIsZSxvLG4pfSxudC5wcm90b3R5cGUuZ2V0Um90YXRpb249ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGhyKG8sZSl9LG50LnByb3RvdHlwZS5nZXRSb3c9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKGZyKG8sZSkseSl9LG50LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe21yKHRoaXMuV2gpfTtmdW5jdGlvbiBPKGUsbyl7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLHRoaXMuV2g9ZT09PXZvaWQgMD9icigpOm89PT12b2lkIDA/X2ViX2J0VHJhbnNmb3JtX2J0VHJhbnNmb3JtXzEoZSk6Z3IoZSxvKSxBKE8pW3RoaXMuV2hdPXRoaXN9Ty5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksTy5wcm90b3R5cGUuY29uc3RydWN0b3I9TyxPLnByb3RvdHlwZS5YaD1PLE8uWWg9e30sdC5idFRyYW5zZm9ybT1PLE8ucHJvdG90eXBlLnNldElkZW50aXR5PWZ1bmN0aW9uKCl7ZHIodGhpcy5XaCl9LE8ucHJvdG90eXBlLnNldE9yaWdpbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksV3IobyxlKX0sTy5wcm90b3R5cGUuc2V0Um90YXRpb249ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLENyKG8sZSl9LE8ucHJvdG90eXBlLmdldE9yaWdpbj1mdW5jdGlvbigpe3JldHVybiBhKGpyKHRoaXMuV2gpLHkpfSxPLnByb3RvdHlwZS5nZXRSb3RhdGlvbj1mdW5jdGlvbigpe3JldHVybiBhKHZyKHRoaXMuV2gpLGYpfSxPLnByb3RvdHlwZS5nZXRCYXNpcz1mdW5jdGlvbigpe3JldHVybiBhKERyKHRoaXMuV2gpLG50KX0sTy5wcm90b3R5cGUuc2V0RnJvbU9wZW5HTE1hdHJpeD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO0NlKCksdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1ibChlKSksUnIobyxlKX0sTy5wcm90b3R5cGUuaW52ZXJzZT1PLnByb3RvdHlwZS5pbnZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoU3IodGhpcy5XaCksTyl9LE8ucHJvdG90eXBlLm9wX211bD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEoSXIobyxlKSxPKX0sTy5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtPcih0aGlzLldoKX07ZnVuY3Rpb24gWChlLG8pe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx0aGlzLldoPWU9PT12b2lkIDA/QnIoKTpvPT09dm9pZCAwP1ByKGUpOnhyKGUsbyksQShYKVt0aGlzLldoXT10aGlzfVgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUob3QucHJvdG90eXBlKSxYLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1YLFgucHJvdG90eXBlLlhoPVgsWC5ZaD17fSx0LmJ0RGVmYXVsdE1vdGlvblN0YXRlPVgsWC5wcm90b3R5cGUuZ2V0V29ybGRUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFRyKG8sZSl9LFgucHJvdG90eXBlLnNldFdvcmxkVHJhbnNmb3JtPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxGcihvLGUpfSxYLnByb3RvdHlwZS5nZXRfbV9ncmFwaGljc1dvcmxkVHJhbnM9WC5wcm90b3R5cGUuemk9ZnVuY3Rpb24oKXtyZXR1cm4gYShNcih0aGlzLldoKSxPKX0sWC5wcm90b3R5cGUuc2V0X21fZ3JhcGhpY3NXb3JsZFRyYW5zPVgucHJvdG90eXBlLnRqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxBcihvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoWC5wcm90b3R5cGUsIm1fZ3JhcGhpY3NXb3JsZFRyYW5zIix7Z2V0OlgucHJvdG90eXBlLnppLHNldDpYLnByb3RvdHlwZS50an0pLFgucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7d3IodGhpcy5XaCl9O2Z1bmN0aW9uIGd0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlciwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1ndC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksZ3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPWd0LGd0LnByb3RvdHlwZS5YaD1ndCxndC5ZaD17fSx0LmJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlcj1ndCxndC5wcm90b3R5cGUuZ2V0V29ybGRUcmFuc2Zvcm09ZnVuY3Rpb24oKXtyZXR1cm4gYShrcih0aGlzLldoKSxPKX0sZ3QucHJvdG90eXBlLmdldENvbGxpc2lvbk9iamVjdD1mdW5jdGlvbigpe3JldHVybiBhKExyKHRoaXMuV2gpLEMpfSxndC5wcm90b3R5cGUuZ2V0Q29sbGlzaW9uU2hhcGU9ZnVuY3Rpb24oKXtyZXR1cm4gYShIcih0aGlzLldoKSxRKX07ZnVuY3Rpb24gcHQoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5LCBubyBjb25zdHJ1Y3RvciBpbiBJREwifXB0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxwdC5wcm90b3R5cGUuY29uc3RydWN0b3I9cHQscHQucHJvdG90eXBlLlhoPXB0LHB0LlloPXt9LHQuYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5PXB0LHB0LnByb3RvdHlwZS5zaXplPXB0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIFlyKHRoaXMuV2gpfSxwdC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKFZyKG8sZSksQyl9LHB0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1FyKHRoaXMuV2gpfTtmdW5jdGlvbiBsdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidFNjYWxhckFycmF5LCBubyBjb25zdHJ1Y3RvciBpbiBJREwifWx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxsdC5wcm90b3R5cGUuY29uc3RydWN0b3I9bHQsbHQucHJvdG90eXBlLlhoPWx0LGx0LlloPXt9LHQuYnRTY2FsYXJBcnJheT1sdCxsdC5wcm90b3R5cGUuc2l6ZT1sdC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiBFcih0aGlzLldoKX0sbHQucHJvdG90eXBlLmF0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWHIobyxlKX0sbHQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7VXIodGhpcy5XaCl9O2Z1bmN0aW9uIGgoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRNYW5pZm9sZFBvaW50LCBubyBjb25zdHJ1Y3RvciBpbiBJREwifWgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGgucHJvdG90eXBlLmNvbnN0cnVjdG9yPWgsaC5wcm90b3R5cGUuWGg9aCxoLlloPXt9LHQuYnRNYW5pZm9sZFBvaW50PWgsaC5wcm90b3R5cGUuZ2V0UG9zaXRpb25Xb3JsZE9uQT1mdW5jdGlvbigpe3JldHVybiBhKEdyKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5nZXRQb3NpdGlvbldvcmxkT25CPWZ1bmN0aW9uKCl7cmV0dXJuIGEoenIodGhpcy5XaCkseSl9LGgucHJvdG90eXBlLmdldEFwcGxpZWRJbXB1bHNlPWZ1bmN0aW9uKCl7cmV0dXJuIE5yKHRoaXMuV2gpfSxoLnByb3RvdHlwZS5nZXREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBxcih0aGlzLldoKX0saC5wcm90b3R5cGUuZ2V0X21fbG9jYWxQb2ludEE9aC5wcm90b3R5cGUuSWk9ZnVuY3Rpb24oKXtyZXR1cm4gYShacih0aGlzLldoKSx5KX0saC5wcm90b3R5cGUuc2V0X21fbG9jYWxQb2ludEE9aC5wcm90b3R5cGUuQ2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEtyKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLnByb3RvdHlwZSwibV9sb2NhbFBvaW50QSIse2dldDpoLnByb3RvdHlwZS5JaSxzZXQ6aC5wcm90b3R5cGUuQ2p9KSxoLnByb3RvdHlwZS5nZXRfbV9sb2NhbFBvaW50Qj1oLnByb3RvdHlwZS5KaT1mdW5jdGlvbigpe3JldHVybiBhKCRyKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5zZXRfbV9sb2NhbFBvaW50Qj1oLnByb3RvdHlwZS5Eaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSnIobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGgucHJvdG90eXBlLCJtX2xvY2FsUG9pbnRCIix7Z2V0OmgucHJvdG90eXBlLkppLHNldDpoLnByb3RvdHlwZS5Ean0pLGgucHJvdG90eXBlLmdldF9tX3Bvc2l0aW9uV29ybGRPbkI9aC5wcm90b3R5cGUuUGk9ZnVuY3Rpb24oKXtyZXR1cm4gYSh0Xyh0aGlzLldoKSx5KX0saC5wcm90b3R5cGUuc2V0X21fcG9zaXRpb25Xb3JsZE9uQj1oLnByb3RvdHlwZS5Kaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZV8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGgucHJvdG90eXBlLCJtX3Bvc2l0aW9uV29ybGRPbkIiLHtnZXQ6aC5wcm90b3R5cGUuUGksc2V0OmgucHJvdG90eXBlLkpqfSksaC5wcm90b3R5cGUuZ2V0X21fcG9zaXRpb25Xb3JsZE9uQT1oLnByb3RvdHlwZS5PaT1mdW5jdGlvbigpe3JldHVybiBhKG9fKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5zZXRfbV9wb3NpdGlvbldvcmxkT25BPWgucHJvdG90eXBlLklqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxuXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaC5wcm90b3R5cGUsIm1fcG9zaXRpb25Xb3JsZE9uQSIse2dldDpoLnByb3RvdHlwZS5PaSxzZXQ6aC5wcm90b3R5cGUuSWp9KSxoLnByb3RvdHlwZS5nZXRfbV9ub3JtYWxXb3JsZE9uQj1oLnByb3RvdHlwZS5MaT1mdW5jdGlvbigpe3JldHVybiBhKHJfKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5zZXRfbV9ub3JtYWxXb3JsZE9uQj1oLnByb3RvdHlwZS5Gaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksX18obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGgucHJvdG90eXBlLCJtX25vcm1hbFdvcmxkT25CIix7Z2V0OmgucHJvdG90eXBlLkxpLHNldDpoLnByb3RvdHlwZS5Gan0pLGgucHJvdG90eXBlLmdldF9tX3VzZXJQZXJzaXN0ZW50RGF0YT1oLnByb3RvdHlwZS5iaj1mdW5jdGlvbigpe3JldHVybiBpXyh0aGlzLldoKX0saC5wcm90b3R5cGUuc2V0X21fdXNlclBlcnNpc3RlbnREYXRhPWgucHJvdG90eXBlLldqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaC5wcm90b3R5cGUsIm1fdXNlclBlcnNpc3RlbnREYXRhIix7Z2V0OmgucHJvdG90eXBlLmJqLHNldDpoLnByb3RvdHlwZS5Xan0pLGgucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7c18odGhpcy5XaCl9O2Z1bmN0aW9uIGR0KCl7dGhpcy5XaD1wXygpLEEoZHQpW3RoaXMuV2hdPXRoaXN9ZHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobXQucHJvdG90eXBlKSxkdC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZHQsZHQucHJvdG90eXBlLlhoPWR0LGR0LlloPXt9LHQuQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2s9ZHQsZHQucHJvdG90eXBlLmFkZFNpbmdsZVJlc3VsdD1mdW5jdGlvbihlLG8sbixyLGMsRCxVKXt2YXIgY3Q9dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSxjJiZ0eXBlb2YgYz09Im9iamVjdCImJihjPWMuV2gpLEQmJnR5cGVvZiBEPT0ib2JqZWN0IiYmKEQ9RC5XaCksVSYmdHlwZW9mIFU9PSJvYmplY3QiJiYoVT1VLldoKSxsXyhjdCxlLG8sbixyLGMsRCxVKX0sZHQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7dV8odGhpcy5XaCl9O2Z1bmN0aW9uIFQoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgTG9jYWxTaGFwZUluZm8sIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9VC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksVC5wcm90b3R5cGUuY29uc3RydWN0b3I9VCxULnByb3RvdHlwZS5YaD1ULFQuWWg9e30sdC5Mb2NhbFNoYXBlSW5mbz1ULFQucHJvdG90eXBlLmdldF9tX3NoYXBlUGFydD1ULnByb3RvdHlwZS5TaT1mdW5jdGlvbigpe3JldHVybiBjXyh0aGlzLldoKX0sVC5wcm90b3R5cGUuc2V0X21fc2hhcGVQYXJ0PVQucHJvdG90eXBlLk1qPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx5XyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVC5wcm90b3R5cGUsIm1fc2hhcGVQYXJ0Iix7Z2V0OlQucHJvdG90eXBlLlNpLHNldDpULnByb3RvdHlwZS5Nan0pLFQucHJvdG90eXBlLmdldF9tX3RyaWFuZ2xlSW5kZXg9VC5wcm90b3R5cGUuWWk9ZnVuY3Rpb24oKXtyZXR1cm4gaF8odGhpcy5XaCl9LFQucHJvdG90eXBlLnNldF9tX3RyaWFuZ2xlSW5kZXg9VC5wcm90b3R5cGUuU2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGZfKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShULnByb3RvdHlwZSwibV90cmlhbmdsZUluZGV4Iix7Z2V0OlQucHJvdG90eXBlLllpLHNldDpULnByb3RvdHlwZS5Tan0pLFQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bV8odGhpcy5XaCl9O2Z1bmN0aW9uIFcoZSxvLG4scixjKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxyJiZ0eXBlb2Ygcj09Im9iamVjdCImJihyPXIuV2gpLGMmJnR5cGVvZiBjPT0ib2JqZWN0IiYmKGM9Yy5XaCksdGhpcy5XaD1iXyhlLG8sbixyLGMpLEEoVylbdGhpcy5XaF09dGhpc31XLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxXLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1XLFcucHJvdG90eXBlLlhoPVcsVy5ZaD17fSx0LkxvY2FsQ29udmV4UmVzdWx0PVcsVy5wcm90b3R5cGUuZ2V0X21faGl0Q29sbGlzaW9uT2JqZWN0PVcucHJvdG90eXBlLmVpPWZ1bmN0aW9uKCl7cmV0dXJuIGEoZ18odGhpcy5XaCksQyl9LFcucHJvdG90eXBlLnNldF9tX2hpdENvbGxpc2lvbk9iamVjdD1XLnByb3RvdHlwZS5naT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZF8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFcucHJvdG90eXBlLCJtX2hpdENvbGxpc2lvbk9iamVjdCIse2dldDpXLnByb3RvdHlwZS5laSxzZXQ6Vy5wcm90b3R5cGUuZ2l9KSxXLnByb3RvdHlwZS5nZXRfbV9sb2NhbFNoYXBlSW5mbz1XLnByb3RvdHlwZS5LaT1mdW5jdGlvbigpe3JldHVybiBhKFdfKHRoaXMuV2gpLFQpfSxXLnByb3RvdHlwZS5zZXRfbV9sb2NhbFNoYXBlSW5mbz1XLnByb3RvdHlwZS5Faj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksQ18obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFcucHJvdG90eXBlLCJtX2xvY2FsU2hhcGVJbmZvIix7Z2V0OlcucHJvdG90eXBlLktpLHNldDpXLnByb3RvdHlwZS5Fan0pLFcucHJvdG90eXBlLmdldF9tX2hpdE5vcm1hbExvY2FsPVcucHJvdG90eXBlLkJpPWZ1bmN0aW9uKCl7cmV0dXJuIGEoal8odGhpcy5XaCkseSl9LFcucHJvdG90eXBlLnNldF9tX2hpdE5vcm1hbExvY2FsPVcucHJvdG90eXBlLnZqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx2XyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVy5wcm90b3R5cGUsIm1faGl0Tm9ybWFsTG9jYWwiLHtnZXQ6Vy5wcm90b3R5cGUuQmksc2V0OlcucHJvdG90eXBlLnZqfSksVy5wcm90b3R5cGUuZ2V0X21faGl0UG9pbnRMb2NhbD1XLnByb3RvdHlwZS5EaT1mdW5jdGlvbigpe3JldHVybiBhKERfKHRoaXMuV2gpLHkpfSxXLnByb3RvdHlwZS5zZXRfbV9oaXRQb2ludExvY2FsPVcucHJvdG90eXBlLnhqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxSXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVy5wcm90b3R5cGUsIm1faGl0UG9pbnRMb2NhbCIse2dldDpXLnByb3RvdHlwZS5EaSxzZXQ6Vy5wcm90b3R5cGUueGp9KSxXLnByb3RvdHlwZS5nZXRfbV9oaXRGcmFjdGlvbj1XLnByb3RvdHlwZS5BaT1mdW5jdGlvbigpe3JldHVybiBTXyh0aGlzLldoKX0sVy5wcm90b3R5cGUuc2V0X21faGl0RnJhY3Rpb249Vy5wcm90b3R5cGUudWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLElfKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXLnByb3RvdHlwZSwibV9oaXRGcmFjdGlvbiIse2dldDpXLnByb3RvdHlwZS5BaSxzZXQ6Vy5wcm90b3R5cGUudWp9KSxXLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe09fKHRoaXMuV2gpfTtmdW5jdGlvbiB1KGUsbyl7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLHRoaXMuV2g9Ql8oZSxvKSxBKHUpW3RoaXMuV2hdPXRoaXN9dS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShSLnByb3RvdHlwZSksdS5wcm90b3R5cGUuY29uc3RydWN0b3I9dSx1LnByb3RvdHlwZS5YaD11LHUuWWg9e30sdC5DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2s9dSx1LnByb3RvdHlwZS5oYXNIaXQ9ZnVuY3Rpb24oKXtyZXR1cm4hIVBfKHRoaXMuV2gpfSx1LnByb3RvdHlwZS5nZXRfbV9oaXRDb2xsaXNpb25PYmplY3Q9dS5wcm90b3R5cGUuZWk9ZnVuY3Rpb24oKXtyZXR1cm4gYSh4Xyh0aGlzLldoKSxDKX0sdS5wcm90b3R5cGUuc2V0X21faGl0Q29sbGlzaW9uT2JqZWN0PXUucHJvdG90eXBlLmdpPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxUXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsIm1faGl0Q29sbGlzaW9uT2JqZWN0Iix7Z2V0OnUucHJvdG90eXBlLmVpLHNldDp1LnByb3RvdHlwZS5naX0pLHUucHJvdG90eXBlLmdldF9tX2NvbnZleEZyb21Xb3JsZD11LnByb3RvdHlwZS5zaT1mdW5jdGlvbigpe3JldHVybiBhKEZfKHRoaXMuV2gpLHkpfSx1LnByb3RvdHlwZS5zZXRfbV9jb252ZXhGcm9tV29ybGQ9dS5wcm90b3R5cGUubWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE1fKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LnByb3RvdHlwZSwibV9jb252ZXhGcm9tV29ybGQiLHtnZXQ6dS5wcm90b3R5cGUuc2ksc2V0OnUucHJvdG90eXBlLm1qfSksdS5wcm90b3R5cGUuZ2V0X21fY29udmV4VG9Xb3JsZD11LnByb3RvdHlwZS50aT1mdW5jdGlvbigpe3JldHVybiBhKEFfKHRoaXMuV2gpLHkpfSx1LnByb3RvdHlwZS5zZXRfbV9jb252ZXhUb1dvcmxkPXUucHJvdG90eXBlLm5qPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx3XyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsIm1fY29udmV4VG9Xb3JsZCIse2dldDp1LnByb3RvdHlwZS50aSxzZXQ6dS5wcm90b3R5cGUubmp9KSx1LnByb3RvdHlwZS5nZXRfbV9oaXROb3JtYWxXb3JsZD11LnByb3RvdHlwZS5DaT1mdW5jdGlvbigpe3JldHVybiBhKGtfKHRoaXMuV2gpLHkpfSx1LnByb3RvdHlwZS5zZXRfbV9oaXROb3JtYWxXb3JsZD11LnByb3RvdHlwZS53aj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTF8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHUucHJvdG90eXBlLCJtX2hpdE5vcm1hbFdvcmxkIix7Z2V0OnUucHJvdG90eXBlLkNpLHNldDp1LnByb3RvdHlwZS53an0pLHUucHJvdG90eXBlLmdldF9tX2hpdFBvaW50V29ybGQ9dS5wcm90b3R5cGUuRWk9ZnVuY3Rpb24oKXtyZXR1cm4gYShIXyh0aGlzLldoKSx5KX0sdS5wcm90b3R5cGUuc2V0X21faGl0UG9pbnRXb3JsZD11LnByb3RvdHlwZS55aj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWV8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHUucHJvdG90eXBlLCJtX2hpdFBvaW50V29ybGQiLHtnZXQ6dS5wcm90b3R5cGUuRWksc2V0OnUucHJvdG90eXBlLnlqfSksdS5wcm90b3R5cGUuZ2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXA9dS5wcm90b3R5cGUuWmg9ZnVuY3Rpb24oKXtyZXR1cm4gVl8odGhpcy5XaCl9LHUucHJvdG90eXBlLnNldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwPXUucHJvdG90eXBlLmFpPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxRXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsIm1fY29sbGlzaW9uRmlsdGVyR3JvdXAiLHtnZXQ6dS5wcm90b3R5cGUuWmgsc2V0OnUucHJvdG90eXBlLmFpfSksdS5wcm90b3R5cGUuZ2V0X21fY29sbGlzaW9uRmlsdGVyTWFzaz11LnByb3RvdHlwZS4kaD1mdW5jdGlvbigpe3JldHVybiBFXyh0aGlzLldoKX0sdS5wcm90b3R5cGUuc2V0X21fY29sbGlzaW9uRmlsdGVyTWFzaz11LnByb3RvdHlwZS5iaT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWF8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHUucHJvdG90eXBlLCJtX2NvbGxpc2lvbkZpbHRlck1hc2siLHtnZXQ6dS5wcm90b3R5cGUuJGgsc2V0OnUucHJvdG90eXBlLmJpfSksdS5wcm90b3R5cGUuZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uPXUucHJvdG90eXBlLmRpPWZ1bmN0aW9uKCl7cmV0dXJuIFVfKHRoaXMuV2gpfSx1LnByb3RvdHlwZS5zZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb249dS5wcm90b3R5cGUuZmk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEdfKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LnByb3RvdHlwZSwibV9jbG9zZXN0SGl0RnJhY3Rpb24iLHtnZXQ6dS5wcm90b3R5cGUuZGksc2V0OnUucHJvdG90eXBlLmZpfSksdS5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXt6Xyh0aGlzLldoKX07ZnVuY3Rpb24gZXQoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb252ZXhTaGFwZSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1ldC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksZXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWV0LGV0LnByb3RvdHlwZS5YaD1ldCxldC5ZaD17fSx0LmJ0Q29udmV4U2hhcGU9ZXQsZXQucHJvdG90eXBlLnNldExvY2FsU2NhbGluZz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTl8obyxlKX0sZXQucHJvdG90eXBlLmdldExvY2FsU2NhbGluZz1mdW5jdGlvbigpe3JldHVybiBhKHFfKHRoaXMuV2gpLHkpfSxldC5wcm90b3R5cGUuY2FsY3VsYXRlTG9jYWxJbmVydGlhPWZ1bmN0aW9uKGUsbyl7dmFyIG49dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksWl8obixlLG8pfSxldC5wcm90b3R5cGUuc2V0TWFyZ2luPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxLXyhvLGUpfSxldC5wcm90b3R5cGUuZ2V0TWFyZ2luPWZ1bmN0aW9uKCl7cmV0dXJuICRfKHRoaXMuV2gpfSxldC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtKXyh0aGlzLldoKX07ZnVuY3Rpb24gJChlKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHRoaXMuV2g9dGkoZSksQSgkKVt0aGlzLldoXT10aGlzfSQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUS5wcm90b3R5cGUpLCQucHJvdG90eXBlLmNvbnN0cnVjdG9yPSQsJC5wcm90b3R5cGUuWGg9JCwkLlloPXt9LHQuYnRCb3hTaGFwZT0kLCQucHJvdG90eXBlLnNldE1hcmdpbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZWkobyxlKX0sJC5wcm90b3R5cGUuZ2V0TWFyZ2luPWZ1bmN0aW9uKCl7cmV0dXJuIG9pKHRoaXMuV2gpfSwkLnByb3RvdHlwZS5zZXRMb2NhbFNjYWxpbmc9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG5pKG8sZSl9LCQucHJvdG90eXBlLmdldExvY2FsU2NhbGluZz1mdW5jdGlvbigpe3JldHVybiBhKHJpKHRoaXMuV2gpLHkpfSwkLnByb3RvdHlwZS5jYWxjdWxhdGVMb2NhbEluZXJ0aWE9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxfaShuLGUsbyl9LCQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7aWkodGhpcy5XaCl9O2Z1bmN0aW9uIHJ0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0SW50QXJyYXksIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9cnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLHJ0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ydCxydC5wcm90b3R5cGUuWGg9cnQscnQuWWg9e30sdC5idEludEFycmF5PXJ0LHJ0LnByb3RvdHlwZS5zaXplPXJ0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGFpKHRoaXMuV2gpfSxydC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxzaShvLGUpfSxydC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtwaSh0aGlzLldoKX07ZnVuY3Rpb24gRigpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidEZhY2UsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Ri5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksRi5wcm90b3R5cGUuY29uc3RydWN0b3I9RixGLnByb3RvdHlwZS5YaD1GLEYuWWg9e30sdC5idEZhY2U9RixGLnByb3RvdHlwZS5nZXRfbV9pbmRpY2VzPUYucHJvdG90eXBlLkZpPWZ1bmN0aW9uKCl7cmV0dXJuIGEobGkodGhpcy5XaCkscnQpfSxGLnByb3RvdHlwZS5zZXRfbV9pbmRpY2VzPUYucHJvdG90eXBlLnpqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx1aShvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRi5wcm90b3R5cGUsIm1faW5kaWNlcyIse2dldDpGLnByb3RvdHlwZS5GaSxzZXQ6Ri5wcm90b3R5cGUuemp9KSxGLnByb3RvdHlwZS5nZXRfbV9wbGFuZT1GLnByb3RvdHlwZS5OaT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGNpKG8sZSl9LEYucHJvdG90eXBlLnNldF9tX3BsYW5lPUYucHJvdG90eXBlLkhqPWZ1bmN0aW9uKGUsbyl7dmFyIG49dGhpcy5XaDtDZSgpLGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx5aShuLGUsbyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGLnByb3RvdHlwZSwibV9wbGFuZSIse2dldDpGLnByb3RvdHlwZS5OaSxzZXQ6Ri5wcm90b3R5cGUuSGp9KSxGLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe2hpKHRoaXMuV2gpfTtmdW5jdGlvbiBfdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidFZlY3RvcjNBcnJheSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1fdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksX3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPV90LF90LnByb3RvdHlwZS5YaD1fdCxfdC5ZaD17fSx0LmJ0VmVjdG9yM0FycmF5PV90LF90LnByb3RvdHlwZS5zaXplPV90LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGZpKHRoaXMuV2gpfSxfdC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKG1pKG8sZSkseSl9LF90LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe2JpKHRoaXMuV2gpfTtmdW5jdGlvbiBpdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidEZhY2VBcnJheSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1pdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksaXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWl0LGl0LnByb3RvdHlwZS5YaD1pdCxpdC5ZaD17fSx0LmJ0RmFjZUFycmF5PWl0LGl0LnByb3RvdHlwZS5zaXplPWl0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGdpKHRoaXMuV2gpfSxpdC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKGRpKG8sZSksRil9LGl0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1dpKHRoaXMuV2gpfTtmdW5jdGlvbiBNKCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29udmV4UG9seWhlZHJvbiwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1NLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxNLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NLE0ucHJvdG90eXBlLlhoPU0sTS5ZaD17fSx0LmJ0Q29udmV4UG9seWhlZHJvbj1NLE0ucHJvdG90eXBlLmdldF9tX3ZlcnRpY2VzPU0ucHJvdG90eXBlLmNqPWZ1bmN0aW9uKCl7cmV0dXJuIGEoQ2kodGhpcy5XaCksX3QpfSxNLnByb3RvdHlwZS5zZXRfbV92ZXJ0aWNlcz1NLnByb3RvdHlwZS5Yaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksamkobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KE0ucHJvdG90eXBlLCJtX3ZlcnRpY2VzIix7Z2V0Ok0ucHJvdG90eXBlLmNqLHNldDpNLnByb3RvdHlwZS5Yan0pLE0ucHJvdG90eXBlLmdldF9tX2ZhY2VzPU0ucHJvdG90eXBlLnhpPWZ1bmN0aW9uKCl7cmV0dXJuIGEodmkodGhpcy5XaCksaXQpfSxNLnByb3RvdHlwZS5zZXRfbV9mYWNlcz1NLnByb3RvdHlwZS5yaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksRGkobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KE0ucHJvdG90eXBlLCJtX2ZhY2VzIix7Z2V0Ok0ucHJvdG90eXBlLnhpLHNldDpNLnByb3RvdHlwZS5yan0pLE0ucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7UmkodGhpcy5XaCl9O2Z1bmN0aW9uIEUoZSxvKXtDZSgpLHR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9YmwoZSkpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksdGhpcy5XaD1lPT09dm9pZCAwP1NpKCk6bz09PXZvaWQgMD9JaShlKTpPaShlLG8pLEEoRSlbdGhpcy5XaF09dGhpc31FLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFEucHJvdG90eXBlKSxFLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FLEUucHJvdG90eXBlLlhoPUUsRS5ZaD17fSx0LmJ0Q29udmV4SHVsbFNoYXBlPUUsRS5wcm90b3R5cGUuYWRkUG9pbnQ9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxvPT09dm9pZCAwP0JpKG4sZSk6UGkobixlLG8pfSxFLnByb3RvdHlwZS5zZXRNYXJnaW49ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHhpKG8sZSl9LEUucHJvdG90eXBlLmdldE1hcmdpbj1mdW5jdGlvbigpe3JldHVybiBUaSh0aGlzLldoKX0sRS5wcm90b3R5cGUuZ2V0TnVtVmVydGljZXM9ZnVuY3Rpb24oKXtyZXR1cm4gRmkodGhpcy5XaCl9LEUucHJvdG90eXBlLmluaXRpYWxpemVQb2x5aGVkcmFsRmVhdHVyZXM9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSwhIU1pKG8sZSl9LEUucHJvdG90eXBlLnJlY2FsY0xvY2FsQWFiYj1mdW5jdGlvbigpe0FpKHRoaXMuV2gpfSxFLnByb3RvdHlwZS5nZXRDb252ZXhQb2x5aGVkcm9uPWZ1bmN0aW9uKCl7cmV0dXJuIGEod2kodGhpcy5XaCksTSl9LEUucHJvdG90eXBlLnNldExvY2FsU2NhbGluZz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksa2kobyxlKX0sRS5wcm90b3R5cGUuZ2V0TG9jYWxTY2FsaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGEoTGkodGhpcy5XaCkseSl9LEUucHJvdG90eXBlLmNhbGN1bGF0ZUxvY2FsSW5lcnRpYT1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLEhpKG4sZSxvKX0sRS5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtZaSh0aGlzLldoKX07ZnVuY3Rpb24ganQoKXt0aGlzLldoPVZpKCksQShqdClbdGhpcy5XaF09dGhpc31qdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksanQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWp0LGp0LnByb3RvdHlwZS5YaD1qdCxqdC5ZaD17fSx0LmJ0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm89anQsanQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7UWkodGhpcy5XaCl9O2Z1bmN0aW9uIHZ0KGUpe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdGhpcy5XaD1lPT09dm9pZCAwP0VpKCk6WGkoZSksQSh2dClbdGhpcy5XaF09dGhpc312dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksdnQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXZ0LHZ0LnByb3RvdHlwZS5YaD12dCx2dC5ZaD17fSx0LmJ0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb249dnQsdnQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7VWkodGhpcy5XaCl9O2Z1bmN0aW9uIHooKXt0aGlzLldoPUdpKCksQSh6KVt0aGlzLldoXT10aGlzfXoucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLHoucHJvdG90eXBlLmNvbnN0cnVjdG9yPXosei5wcm90b3R5cGUuWGg9eix6LlloPXt9LHQuYnRQZXJzaXN0ZW50TWFuaWZvbGQ9eix6LnByb3RvdHlwZS5nZXRCb2R5MD1mdW5jdGlvbigpe3JldHVybiBhKHppKHRoaXMuV2gpLEMpfSx6LnByb3RvdHlwZS5nZXRCb2R5MT1mdW5jdGlvbigpe3JldHVybiBhKE5pKHRoaXMuV2gpLEMpfSx6LnByb3RvdHlwZS5nZXROdW1Db250YWN0cz1mdW5jdGlvbigpe3JldHVybiBxaSh0aGlzLldoKX0sei5wcm90b3R5cGUuZ2V0Q29udGFjdFBvaW50PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShaaShvLGUpLGgpfSx6LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe0tpKHRoaXMuV2gpfTtmdW5jdGlvbiB1dChlKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHRoaXMuV2g9JGkoZSksQSh1dClbdGhpcy5XaF09dGhpc311dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShLLnByb3RvdHlwZSksdXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXV0LHV0LnByb3RvdHlwZS5YaD11dCx1dC5ZaD17fSx0LmJ0Q29sbGlzaW9uRGlzcGF0Y2hlcj11dCx1dC5wcm90b3R5cGUuZ2V0TnVtTWFuaWZvbGRzPWZ1bmN0aW9uKCl7cmV0dXJuIEppKHRoaXMuV2gpfSx1dC5wcm90b3R5cGUuZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWw9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKHRhKG8sZSkseil9LHV0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe2VhKHRoaXMuV2gpfTtmdW5jdGlvbiBUdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidE92ZXJsYXBwaW5nUGFpckNhbGxiYWNrLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifVR0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxUdC5wcm90b3R5cGUuY29uc3RydWN0b3I9VHQsVHQucHJvdG90eXBlLlhoPVR0LFR0LlloPXt9LHQuYnRPdmVybGFwcGluZ1BhaXJDYWxsYmFjaz1UdCxUdC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtvYSh0aGlzLldoKX07ZnVuY3Rpb24gSigpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidE92ZXJsYXBwaW5nUGFpckNhY2hlLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifUoucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLEoucHJvdG90eXBlLmNvbnN0cnVjdG9yPUosSi5wcm90b3R5cGUuWGg9SixKLlloPXt9LHQuYnRPdmVybGFwcGluZ1BhaXJDYWNoZT1KLEoucHJvdG90eXBlLnNldEludGVybmFsR2hvc3RQYWlyQ2FsbGJhY2s9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG5hKG8sZSl9LEoucHJvdG90eXBlLmdldE51bU92ZXJsYXBwaW5nUGFpcnM9ZnVuY3Rpb24oKXtyZXR1cm4gcmEodGhpcy5XaCl9LEoucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7X2EodGhpcy5XaCl9O2Z1bmN0aW9uIGF0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0QnJvYWRwaGFzZUludGVyZmFjZSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1hdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWF0LGF0LnByb3RvdHlwZS5YaD1hdCxhdC5ZaD17fSx0LmJ0QnJvYWRwaGFzZUludGVyZmFjZT1hdCxhdC5wcm90b3R5cGUuZ2V0T3ZlcmxhcHBpbmdQYWlyQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gYShpYSh0aGlzLldoKSxKKX0sYXQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7YWEodGhpcy5XaCl9O2Z1bmN0aW9uIEZ0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29sbGlzaW9uQ29uZmlndXJhdGlvbiwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1GdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksRnQucHJvdG90eXBlLmNvbnN0cnVjdG9yPUZ0LEZ0LnByb3RvdHlwZS5YaD1GdCxGdC5ZaD17fSx0LmJ0Q29sbGlzaW9uQ29uZmlndXJhdGlvbj1GdCxGdC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtzYSh0aGlzLldoKX07ZnVuY3Rpb24gRHQoKXt0aGlzLldoPXBhKCksQShEdClbdGhpcy5XaF09dGhpc31EdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksRHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPUR0LER0LnByb3RvdHlwZS5YaD1EdCxEdC5ZaD17fSx0LmJ0RGJ2dEJyb2FkcGhhc2U9RHQsRHQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bGEodGhpcy5XaCl9O2Z1bmN0aW9uIEIoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRCcm9hZHBoYXNlUHJveHksIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Qi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksQi5wcm90b3R5cGUuY29uc3RydWN0b3I9QixCLnByb3RvdHlwZS5YaD1CLEIuWWg9e30sdC5idEJyb2FkcGhhc2VQcm94eT1CLEIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwPUIucHJvdG90eXBlLlpoPWZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMuV2gpfSxCLnByb3RvdHlwZS5zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cD1CLnByb3RvdHlwZS5haT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksY2EobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KEIucHJvdG90eXBlLCJtX2NvbGxpc2lvbkZpbHRlckdyb3VwIix7Z2V0OkIucHJvdG90eXBlLlpoLHNldDpCLnByb3RvdHlwZS5haX0pLEIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Qi5wcm90b3R5cGUuJGg9ZnVuY3Rpb24oKXtyZXR1cm4geWEodGhpcy5XaCl9LEIucHJvdG90eXBlLnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Qi5wcm90b3R5cGUuYmk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGhhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCLnByb3RvdHlwZSwibV9jb2xsaXNpb25GaWx0ZXJNYXNrIix7Z2V0OkIucHJvdG90eXBlLiRoLHNldDpCLnByb3RvdHlwZS5iaX0pLEIucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7ZmEodGhpcy5XaCl9O2Z1bmN0aW9uIF8oZSxvLG4scil7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSx0aGlzLldoPXI9PT12b2lkIDA/bWEoZSxvLG4pOmJhKGUsbyxuLHIpLEEoXylbdGhpcy5XaF09dGhpc31fLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxfLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1fLF8ucHJvdG90eXBlLlhoPV8sXy5ZaD17fSx0LmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbz1fLF8ucHJvdG90eXBlLmdldF9tX2xpbmVhckRhbXBpbmc9Xy5wcm90b3R5cGUuR2k9ZnVuY3Rpb24oKXtyZXR1cm4gZ2EodGhpcy5XaCl9LF8ucHJvdG90eXBlLnNldF9tX2xpbmVhckRhbXBpbmc9Xy5wcm90b3R5cGUuQWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGRhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9saW5lYXJEYW1waW5nIix7Z2V0Ol8ucHJvdG90eXBlLkdpLHNldDpfLnByb3RvdHlwZS5Ban0pLF8ucHJvdG90eXBlLmdldF9tX2FuZ3VsYXJEYW1waW5nPV8ucHJvdG90eXBlLm9pPWZ1bmN0aW9uKCl7cmV0dXJuIFdhKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9hbmd1bGFyRGFtcGluZz1fLnByb3RvdHlwZS5qaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksQ2EobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2FuZ3VsYXJEYW1waW5nIix7Z2V0Ol8ucHJvdG90eXBlLm9pLHNldDpfLnByb3RvdHlwZS5qan0pLF8ucHJvdG90eXBlLmdldF9tX2ZyaWN0aW9uPV8ucHJvdG90eXBlLnlpPWZ1bmN0aW9uKCl7cmV0dXJuIGphKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9mcmljdGlvbj1fLnByb3RvdHlwZS5zaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdmEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2ZyaWN0aW9uIix7Z2V0Ol8ucHJvdG90eXBlLnlpLHNldDpfLnByb3RvdHlwZS5zan0pLF8ucHJvdG90eXBlLmdldF9tX3JvbGxpbmdGcmljdGlvbj1fLnByb3RvdHlwZS5SaT1mdW5jdGlvbigpe3JldHVybiBEYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fcm9sbGluZ0ZyaWN0aW9uPV8ucHJvdG90eXBlLkxqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxSYShvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoXy5wcm90b3R5cGUsIm1fcm9sbGluZ0ZyaWN0aW9uIix7Z2V0Ol8ucHJvdG90eXBlLlJpLHNldDpfLnByb3RvdHlwZS5Man0pLF8ucHJvdG90eXBlLmdldF9tX3Jlc3RpdHV0aW9uPV8ucHJvdG90eXBlLlFpPWZ1bmN0aW9uKCl7cmV0dXJuIFNhKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9yZXN0aXR1dGlvbj1fLnByb3RvdHlwZS5Laj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSWEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX3Jlc3RpdHV0aW9uIix7Z2V0Ol8ucHJvdG90eXBlLlFpLHNldDpfLnByb3RvdHlwZS5Lan0pLF8ucHJvdG90eXBlLmdldF9tX2xpbmVhclNsZWVwaW5nVGhyZXNob2xkPV8ucHJvdG90eXBlLkhpPWZ1bmN0aW9uKCl7cmV0dXJuIE9hKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZD1fLnByb3RvdHlwZS5Caj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksQmEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2xpbmVhclNsZWVwaW5nVGhyZXNob2xkIix7Z2V0Ol8ucHJvdG90eXBlLkhpLHNldDpfLnByb3RvdHlwZS5Can0pLF8ucHJvdG90eXBlLmdldF9tX2FuZ3VsYXJTbGVlcGluZ1RocmVzaG9sZD1fLnByb3RvdHlwZS5waT1mdW5jdGlvbigpe3JldHVybiBQYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYW5ndWxhclNsZWVwaW5nVGhyZXNob2xkPV8ucHJvdG90eXBlLmtqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx4YShvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoXy5wcm90b3R5cGUsIm1fYW5ndWxhclNsZWVwaW5nVGhyZXNob2xkIix7Z2V0Ol8ucHJvdG90eXBlLnBpLHNldDpfLnByb3RvdHlwZS5ran0pLF8ucHJvdG90eXBlLmdldF9tX2FkZGl0aW9uYWxEYW1waW5nPV8ucHJvdG90eXBlLmtpPWZ1bmN0aW9uKCl7cmV0dXJuISFUYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYWRkaXRpb25hbERhbXBpbmc9Xy5wcm90b3R5cGUuZmo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEZhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9hZGRpdGlvbmFsRGFtcGluZyIse2dldDpfLnByb3RvdHlwZS5raSxzZXQ6Xy5wcm90b3R5cGUuZmp9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsRGFtcGluZ0ZhY3Rvcj1fLnByb3RvdHlwZS5saT1mdW5jdGlvbigpe3JldHVybiBNYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3I9Xy5wcm90b3R5cGUuZ2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEFhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9hZGRpdGlvbmFsRGFtcGluZ0ZhY3RvciIse2dldDpfLnByb3RvdHlwZS5saSxzZXQ6Xy5wcm90b3R5cGUuZ2p9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsTGluZWFyRGFtcGluZ1RocmVzaG9sZFNxcj1fLnByb3RvdHlwZS5taT1mdW5jdGlvbigpe3JldHVybiB3YSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXI9Xy5wcm90b3R5cGUuaGo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGthKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9hZGRpdGlvbmFsTGluZWFyRGFtcGluZ1RocmVzaG9sZFNxciIse2dldDpfLnByb3RvdHlwZS5taSxzZXQ6Xy5wcm90b3R5cGUuaGp9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdUaHJlc2hvbGRTcXI9Xy5wcm90b3R5cGUuamk9ZnVuY3Rpb24oKXtyZXR1cm4gTGEodGhpcy5XaCl9LF8ucHJvdG90eXBlLnNldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ1RocmVzaG9sZFNxcj1fLnByb3RvdHlwZS5laj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSGEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ1RocmVzaG9sZFNxciIse2dldDpfLnByb3RvdHlwZS5qaSxzZXQ6Xy5wcm90b3R5cGUuZWp9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdGYWN0b3I9Xy5wcm90b3R5cGUuaWk9ZnVuY3Rpb24oKXtyZXR1cm4gWWEodGhpcy5XaCl9LF8ucHJvdG90eXBlLnNldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3Rvcj1fLnByb3RvdHlwZS5kaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksVmEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3RvciIse2dldDpfLnByb3RvdHlwZS5paSxzZXQ6Xy5wcm90b3R5cGUuZGp9KSxfLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1FhKHRoaXMuV2gpfTtmdW5jdGlvbiBsKGUpe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdGhpcy5XaD1FYShlKSxBKGwpW3RoaXMuV2hdPXRoaXN9bC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSksbC5wcm90b3R5cGUuY29uc3RydWN0b3I9bCxsLnByb3RvdHlwZS5YaD1sLGwuWWg9e30sdC5idFJpZ2lkQm9keT1sLGwucHJvdG90eXBlLmdldENlbnRlck9mTWFzc1RyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBhKFhhKHRoaXMuV2gpLE8pfSxsLnByb3RvdHlwZS5zZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFVhKG8sZSl9LGwucHJvdG90eXBlLnNldFNsZWVwaW5nVGhyZXNob2xkcz1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLEdhKG4sZSxvKX0sbC5wcm90b3R5cGUuZ2V0TGluZWFyRGFtcGluZz1mdW5jdGlvbigpe3JldHVybiB6YSh0aGlzLldoKX0sbC5wcm90b3R5cGUuZ2V0QW5ndWxhckRhbXBpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gTmEodGhpcy5XaCl9LGwucHJvdG90eXBlLnNldERhbXBpbmc9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxxYShuLGUsbyl9LGwucHJvdG90eXBlLnNldE1hc3NQcm9wcz1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLFphKG4sZSxvKX0sbC5wcm90b3R5cGUuZ2V0TGluZWFyRmFjdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGEoS2EodGhpcy5XaCkseSl9LGwucHJvdG90eXBlLnNldExpbmVhckZhY3Rvcj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksJGEobyxlKX0sbC5wcm90b3R5cGUuYXBwbHlUb3JxdWU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEphKG8sZSl9LGwucHJvdG90eXBlLmFwcGx5TG9jYWxUb3JxdWU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHRzKG8sZSl9LGwucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxlcyhuLGUsbyl9LGwucHJvdG90eXBlLmFwcGx5Q2VudHJhbEZvcmNlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvcyhvLGUpfSxsLnByb3RvdHlwZS5hcHBseUNlbnRyYWxMb2NhbEZvcmNlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxucyhvLGUpfSxsLnByb3RvdHlwZS5hcHBseVRvcnF1ZUltcHVsc2U9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHJzKG8sZSl9LGwucHJvdG90eXBlLmFwcGx5SW1wdWxzZT1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLF9zKG4sZSxvKX0sbC5wcm90b3R5cGUuYXBwbHlDZW50cmFsSW1wdWxzZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksaXMobyxlKX0sbC5wcm90b3R5cGUudXBkYXRlSW5lcnRpYVRlbnNvcj1mdW5jdGlvbigpe2FzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5nZXRMaW5lYXJWZWxvY2l0eT1mdW5jdGlvbigpe3JldHVybiBhKHNzKHRoaXMuV2gpLHkpfSxsLnByb3RvdHlwZS5nZXRBbmd1bGFyVmVsb2NpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gYShwcyh0aGlzLldoKSx5KX0sbC5wcm90b3R5cGUuc2V0TGluZWFyVmVsb2NpdHk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGxzKG8sZSl9LGwucHJvdG90eXBlLnNldEFuZ3VsYXJWZWxvY2l0eT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdXMobyxlKX0sbC5wcm90b3R5cGUuZ2V0TW90aW9uU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gYShjcyh0aGlzLldoKSxvdCl9LGwucHJvdG90eXBlLnNldE1vdGlvblN0YXRlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx5cyhvLGUpfSxsLnByb3RvdHlwZS5nZXRBbmd1bGFyRmFjdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGEoaHModGhpcy5XaCkseSl9LGwucHJvdG90eXBlLnNldEFuZ3VsYXJGYWN0b3I9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGZzKG8sZSl9LGwucHJvdG90eXBlLnVwY2FzdD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEobXMobyxlKSxsKX0sbC5wcm90b3R5cGUuZ2V0QWFiYj1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLGJzKG4sZSxvKX0sbC5wcm90b3R5cGUuYXBwbHlHcmF2aXR5PWZ1bmN0aW9uKCl7Z3ModGhpcy5XaCl9LGwucHJvdG90eXBlLmdldEdyYXZpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gYShkcyh0aGlzLldoKSx5KX0sbC5wcm90b3R5cGUuc2V0R3Jhdml0eT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksV3MobyxlKX0sbC5wcm90b3R5cGUuZ2V0QnJvYWRwaGFzZVByb3h5PWZ1bmN0aW9uKCl7cmV0dXJuIGEoQ3ModGhpcy5XaCksQil9LGwucHJvdG90eXBlLmNsZWFyRm9yY2VzPWZ1bmN0aW9uKCl7anModGhpcy5XaCl9LGwucHJvdG90eXBlLnNldEFuaXNvdHJvcGljRnJpY3Rpb249ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx2cyhuLGUsbyl9LGwucHJvdG90eXBlLmdldENvbGxpc2lvblNoYXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoRHModGhpcy5XaCksUSl9LGwucHJvdG90eXBlLnNldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxScyhvLGUpfSxsLnByb3RvdHlwZS5zZXRBY3RpdmF0aW9uU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFNzKG8sZSl9LGwucHJvdG90eXBlLmZvcmNlQWN0aXZhdGlvblN0YXRlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxJcyhvLGUpfSxsLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZT09PXZvaWQgMD9PcyhvKTpCcyhvLGUpfSxsLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiEhUHModGhpcy5XaCl9LGwucHJvdG90eXBlLmlzS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISF4cyh0aGlzLldoKX0sbC5wcm90b3R5cGUuaXNTdGF0aWNPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4hIVRzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISFGcyh0aGlzLldoKX0sbC5wcm90b3R5cGUuZ2V0UmVzdGl0dXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gTXModGhpcy5XaCl9LGwucHJvdG90eXBlLmdldEZyaWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIEFzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5nZXRSb2xsaW5nRnJpY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gd3ModGhpcy5XaCl9LGwucHJvdG90eXBlLnNldFJlc3RpdHV0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxrcyhvLGUpfSxsLnByb3RvdHlwZS5zZXRGcmljdGlvbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTHMobyxlKX0sbC5wcm90b3R5cGUuc2V0Um9sbGluZ0ZyaWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxIcyhvLGUpfSxsLnByb3RvdHlwZS5nZXRXb3JsZFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBhKFlzKHRoaXMuV2gpLE8pfSxsLnByb3RvdHlwZS5nZXRDb2xsaXNpb25GbGFncz1mdW5jdGlvbigpe3JldHVybiBWcyh0aGlzLldoKX0sbC5wcm90b3R5cGUuc2V0Q29sbGlzaW9uRmxhZ3M9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFFzKG8sZSl9LGwucHJvdG90eXBlLnNldFdvcmxkVHJhbnNmb3JtPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxFcyhvLGUpfSxsLnByb3RvdHlwZS5zZXRDb2xsaXNpb25TaGFwZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWHMobyxlKX0sbC5wcm90b3R5cGUuc2V0Q2NkTW90aW9uVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxVcyhvLGUpfSxsLnByb3RvdHlwZS5zZXRDY2RTd2VwdFNwaGVyZVJhZGl1cz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksR3MobyxlKX0sbC5wcm90b3R5cGUuZ2V0VXNlckluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHpzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5zZXRVc2VySW5kZXg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE5zKG8sZSl9LGwucHJvdG90eXBlLmdldFVzZXJQb2ludGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEocXModGhpcy5XaCksYnQpfSxsLnByb3RvdHlwZS5zZXRVc2VyUG9pbnRlcj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWnMobyxlKX0sbC5wcm90b3R5cGUuZ2V0QnJvYWRwaGFzZUhhbmRsZT1mdW5jdGlvbigpe3JldHVybiBhKEtzKHRoaXMuV2gpLEIpfSxsLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpeyRzKHRoaXMuV2gpfTtmdW5jdGlvbiBSdCgpe3RoaXMuV2g9SnMoKSxBKFJ0KVt0aGlzLldoXT10aGlzfVJ0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxSdC5wcm90b3R5cGUuY29uc3RydWN0b3I9UnQsUnQucHJvdG90eXBlLlhoPVJ0LFJ0LlloPXt9LHQuYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXI9UnQsUnQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7dHAodGhpcy5XaCl9O2Z1bmN0aW9uIE10KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29uc3RyYWludFNvbHZlciwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1NdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksTXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPU10LE10LnByb3RvdHlwZS5YaD1NdCxNdC5ZaD17fSx0LmJ0Q29uc3RyYWludFNvbHZlcj1NdCxNdC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtlcCh0aGlzLldoKX07ZnVuY3Rpb24gcygpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidERpc3BhdGNoZXJJbmZvLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifXMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLHMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXMscy5wcm90b3R5cGUuWGg9cyxzLlloPXt9LHQuYnREaXNwYXRjaGVySW5mbz1zLHMucHJvdG90eXBlLmdldF9tX3RpbWVTdGVwPXMucHJvdG90eXBlLlhpPWZ1bmN0aW9uKCl7cmV0dXJuIG9wKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV90aW1lU3RlcD1zLnByb3RvdHlwZS5Saj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbnAobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLCJtX3RpbWVTdGVwIix7Z2V0OnMucHJvdG90eXBlLlhpLHNldDpzLnByb3RvdHlwZS5San0pLHMucHJvdG90eXBlLmdldF9tX3N0ZXBDb3VudD1zLnByb3RvdHlwZS5WaT1mdW5jdGlvbigpe3JldHVybiBycCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fc3RlcENvdW50PXMucHJvdG90eXBlLlBqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxfcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fc3RlcENvdW50Iix7Z2V0OnMucHJvdG90eXBlLlZpLHNldDpzLnByb3RvdHlwZS5Qan0pLHMucHJvdG90eXBlLmdldF9tX2Rpc3BhdGNoRnVuYz1zLnByb3RvdHlwZS51aT1mdW5jdGlvbigpe3JldHVybiBpcCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fZGlzcGF0Y2hGdW5jPXMucHJvdG90eXBlLm9qPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fZGlzcGF0Y2hGdW5jIix7Z2V0OnMucHJvdG90eXBlLnVpLHNldDpzLnByb3RvdHlwZS5van0pLHMucHJvdG90eXBlLmdldF9tX3RpbWVPZkltcGFjdD1zLnByb3RvdHlwZS5XaT1mdW5jdGlvbigpe3JldHVybiBzcCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fdGltZU9mSW1wYWN0PXMucHJvdG90eXBlLlFqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxwcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fdGltZU9mSW1wYWN0Iix7Z2V0OnMucHJvdG90eXBlLldpLHNldDpzLnByb3RvdHlwZS5Ran0pLHMucHJvdG90eXBlLmdldF9tX3VzZUNvbnRpbnVvdXM9cy5wcm90b3R5cGUuWmk9ZnVuY3Rpb24oKXtyZXR1cm4hIWxwKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV91c2VDb250aW51b3VzPXMucHJvdG90eXBlLlRqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx1cChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fdXNlQ29udGludW91cyIse2dldDpzLnByb3RvdHlwZS5aaSxzZXQ6cy5wcm90b3R5cGUuVGp9KSxzLnByb3RvdHlwZS5nZXRfbV9lbmFibGVTYXRDb252ZXg9cy5wcm90b3R5cGUud2k9ZnVuY3Rpb24oKXtyZXR1cm4hIWNwKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV9lbmFibGVTYXRDb252ZXg9cy5wcm90b3R5cGUucWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHlwKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSwibV9lbmFibGVTYXRDb252ZXgiLHtnZXQ6cy5wcm90b3R5cGUud2ksc2V0OnMucHJvdG90eXBlLnFqfSkscy5wcm90b3R5cGUuZ2V0X21fZW5hYmxlU1BVPXMucHJvdG90eXBlLnZpPWZ1bmN0aW9uKCl7cmV0dXJuISFocCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fZW5hYmxlU1BVPXMucHJvdG90eXBlLnBqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxmcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fZW5hYmxlU1BVIix7Z2V0OnMucHJvdG90eXBlLnZpLHNldDpzLnByb3RvdHlwZS5wan0pLHMucHJvdG90eXBlLmdldF9tX3VzZUVwYT1zLnByb3RvdHlwZS5haj1mdW5jdGlvbigpe3JldHVybiEhbXAodGhpcy5XaCl9LHMucHJvdG90eXBlLnNldF9tX3VzZUVwYT1zLnByb3RvdHlwZS5Waj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYnAobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLCJtX3VzZUVwYSIse2dldDpzLnByb3RvdHlwZS5haixzZXQ6cy5wcm90b3R5cGUuVmp9KSxzLnByb3RvdHlwZS5nZXRfbV9hbGxvd2VkQ2NkUGVuZXRyYXRpb249cy5wcm90b3R5cGUubmk9ZnVuY3Rpb24oKXtyZXR1cm4gZ3AodGhpcy5XaCl9LHMucHJvdG90eXBlLnNldF9tX2FsbG93ZWRDY2RQZW5ldHJhdGlvbj1zLnByb3RvdHlwZS5paj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZHAobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLCJtX2FsbG93ZWRDY2RQZW5ldHJhdGlvbiIse2dldDpzLnByb3RvdHlwZS5uaSxzZXQ6cy5wcm90b3R5cGUuaWp9KSxzLnByb3RvdHlwZS5nZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWw9cy5wcm90b3R5cGUuJGk9ZnVuY3Rpb24oKXtyZXR1cm4hIVdwKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWw9cy5wcm90b3R5cGUuVWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLENwKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSwibV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWwiLHtnZXQ6cy5wcm90b3R5cGUuJGksc2V0OnMucHJvdG90eXBlLlVqfSkscy5wcm90b3R5cGUuZ2V0X21fY29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VUaHJlc2hvbGQ9cy5wcm90b3R5cGUucmk9ZnVuY3Rpb24oKXtyZXR1cm4ganAodGhpcy5XaCl9LHMucHJvdG90eXBlLnNldF9tX2NvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVGhyZXNob2xkPXMucHJvdG90eXBlLmxqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx2cChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fY29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VUaHJlc2hvbGQiLHtnZXQ6cy5wcm90b3R5cGUucmksc2V0OnMucHJvdG90eXBlLmxqfSkscy5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtEcCh0aGlzLldoKX07ZnVuY3Rpb24gUygpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidENvbnRhY3RTb2x2ZXJJbmZvLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifVMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLFMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVMsUy5wcm90b3R5cGUuWGg9UyxTLlloPXt9LHQuYnRDb250YWN0U29sdmVySW5mbz1TLFMucHJvdG90eXBlLmdldF9tX3NwbGl0SW1wdWxzZT1TLnByb3RvdHlwZS5UaT1mdW5jdGlvbigpe3JldHVybiEhUnAodGhpcy5XaCl9LFMucHJvdG90eXBlLnNldF9tX3NwbGl0SW1wdWxzZT1TLnByb3RvdHlwZS5Oaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksU3AobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFMucHJvdG90eXBlLCJtX3NwbGl0SW1wdWxzZSIse2dldDpTLnByb3RvdHlwZS5UaSxzZXQ6Uy5wcm90b3R5cGUuTmp9KSxTLnByb3RvdHlwZS5nZXRfbV9zcGxpdEltcHVsc2VQZW5ldHJhdGlvblRocmVzaG9sZD1TLnByb3RvdHlwZS5VaT1mdW5jdGlvbigpe3JldHVybiBJcCh0aGlzLldoKX0sUy5wcm90b3R5cGUuc2V0X21fc3BsaXRJbXB1bHNlUGVuZXRyYXRpb25UaHJlc2hvbGQ9Uy5wcm90b3R5cGUuT2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE9wKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTLnByb3RvdHlwZSwibV9zcGxpdEltcHVsc2VQZW5ldHJhdGlvblRocmVzaG9sZCIse2dldDpTLnByb3RvdHlwZS5VaSxzZXQ6Uy5wcm90b3R5cGUuT2p9KSxTLnByb3RvdHlwZS5nZXRfbV9udW1JdGVyYXRpb25zPVMucHJvdG90eXBlLk1pPWZ1bmN0aW9uKCl7cmV0dXJuIEJwKHRoaXMuV2gpfSxTLnByb3RvdHlwZS5zZXRfbV9udW1JdGVyYXRpb25zPVMucHJvdG90eXBlLkdqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxQcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUy5wcm90b3R5cGUsIm1fbnVtSXRlcmF0aW9ucyIse2dldDpTLnByb3RvdHlwZS5NaSxzZXQ6Uy5wcm90b3R5cGUuR2p9KSxTLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe3hwKHRoaXMuV2gpfTtmdW5jdGlvbiBJKGUsbyxuLHIpe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksdGhpcy5XaD1UcChlLG8sbixyKSxBKEkpW3RoaXMuV2hdPXRoaXN9SS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSksSS5wcm90b3R5cGUuY29uc3RydWN0b3I9SSxJLnByb3RvdHlwZS5YaD1JLEkuWWg9e30sdC5idERpc2NyZXRlRHluYW1pY3NXb3JsZD1JLEkucHJvdG90eXBlLnNldEdyYXZpdHk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEZwKG8sZSl9LEkucHJvdG90eXBlLmdldEdyYXZpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gYShNcCh0aGlzLldoKSx5KX0sSS5wcm90b3R5cGUuYWRkUmlnaWRCb2R5PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/QXAocixlKTpuPT09dm9pZCAwP19lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9hZGRSaWdpZEJvZHlfMihyLGUsbyk6d3AocixlLG8sbil9LEkucHJvdG90eXBlLnJlbW92ZVJpZ2lkQm9keT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksa3AobyxlKX0sSS5wcm90b3R5cGUuc3RlcFNpbXVsYXRpb249ZnVuY3Rpb24oZSxvLG4pe3ZhciByPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/THAocixlKTpuPT09dm9pZCAwP0hwKHIsZSxvKTpZcChyLGUsbyxuKX0sSS5wcm90b3R5cGUuc2V0Q29udGFjdEFkZGVkQ2FsbGJhY2s9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFZwKG8sZSl9LEkucHJvdG90eXBlLnNldENvbnRhY3RQcm9jZXNzZWRDYWxsYmFjaz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksUXAobyxlKX0sSS5wcm90b3R5cGUuc2V0Q29udGFjdERlc3Ryb3llZENhbGxiYWNrPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxFcChvLGUpfSxJLnByb3RvdHlwZS5nZXREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoWHAodGhpcy5XaCksSyl9LEkucHJvdG90eXBlLmdldFBhaXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiBhKFVwKHRoaXMuV2gpLEopfSxJLnByb3RvdHlwZS5nZXREaXNwYXRjaEluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShHcCh0aGlzLldoKSxzKX0sSS5wcm90b3R5cGUuYWRkQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/enAocixlKTpuPT09dm9pZCAwP05wKHIsZSxvKTpxcChyLGUsbyxuKX0sSS5wcm90b3R5cGUucmVtb3ZlQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxacChvLGUpfSxJLnByb3RvdHlwZS5nZXRCcm9hZHBoYXNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoS3AodGhpcy5XaCksYXQpfSxJLnByb3RvdHlwZS5jb252ZXhTd2VlcFRlc3Q9ZnVuY3Rpb24oZSxvLG4scixjKXt2YXIgRD10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksYyYmdHlwZW9mIGM9PSJvYmplY3QiJiYoYz1jLldoKSwkcChELGUsbyxuLHIsYyl9LEkucHJvdG90eXBlLmNvbnRhY3RQYWlyVGVzdD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxKcChyLGUsbyxuKX0sSS5wcm90b3R5cGUuY29udGFjdFRlc3Q9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx0bChuLGUsbyl9LEkucHJvdG90eXBlLnVwZGF0ZVNpbmdsZUFhYmI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGVsKG8sZSl9LEkucHJvdG90eXBlLmFkZEFjdGlvbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksb2wobyxlKX0sSS5wcm90b3R5cGUucmVtb3ZlQWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxubChvLGUpfSxJLnByb3RvdHlwZS5nZXRTb2x2ZXJJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIGEocmwodGhpcy5XaCksUyl9LEkucHJvdG90eXBlLnNldEludGVybmFsVGlja0NhbGxiYWNrPWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/X2wocixlKTpuPT09dm9pZCAwP2lsKHIsZSxvKTphbChyLGUsbyxuKX0sSS5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtzbCh0aGlzLldoKX07ZnVuY3Rpb24gU3QoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRBY3Rpb25JbnRlcmZhY2UsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9cmV0dXJuIFN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxTdC5wcm90b3R5cGUuY29uc3RydWN0b3I9U3QsU3QucHJvdG90eXBlLlhoPVN0LFN0LlloPXt9LHQuYnRBY3Rpb25JbnRlcmZhY2U9U3QsU3QucHJvdG90eXBlLnVwZGF0ZUFjdGlvbj1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLHBsKG4sZSxvKX0sU3QucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bGwodGhpcy5XaCl9LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3QuUEhZX0ZMT0FUPXVsKCksdC5QSFlfRE9VQkxFPWNsKCksdC5QSFlfSU5URUdFUj15bCgpLHQuUEhZX1NIT1JUPWhsKCksdC5QSFlfRklYRURQT0lOVDg4PWZsKCksdC5QSFlfVUNIQVI9bWwoKX1PZT9lKCk6VnQudW5zaGlmdChlKX0oKSx0LkNPTlRBQ1RfQURERURfQ0FMTEJBQ0tfU0lHTkFUVVJFPSJpaWlpaWlpaSIsdC5DT05UQUNUX0RFU1RST1lFRF9DQUxMQkFDS19TSUdOQVRVUkU9ImlpIix0LkNPTlRBQ1RfUFJPQ0VTU0VEX0NBTExCQUNLX1NJR05BVFVSRT0iaWlpaSIsdC5JTlRFUk5BTF9USUNLX0NBTExCQUNLX1NJR05BVFVSRT0idmlmIix0aGlzLkFtbW89dCxwLnJlYWR5fWxldCBBdD1bXSx6dD1bXSxJdD17fSxOLGcsdWUsS3QsY2UsJHQ9MTUwLEp0PTE1MCx5dD0xLHRlPSExLGplPTYwLGk9ey4uLntzaXplOjkuNSxzdGFydGluZ0hlaWdodDo4LHNwaW5Gb3JjZTo2LHRocm93Rm9yY2U6NSxncmF2aXR5OjEsbWFzczoxLGZyaWN0aW9uOi44LHJlc3RpdHV0aW9uOi4xLGxpbmVhckRhbXBpbmc6LjUsYW5ndWxhckRhbXBpbmc6LjQsc2V0dGxlVGltZW91dDo1ZTN9fSx5ZSxrO3NlbGYub25tZXNzYWdlPXA9Pntzd2l0Y2gocC5kYXRhLmFjdGlvbil7Y2FzZSJyb2xsRGllIjpiZShwLmRhdGEuc2lkZXMpO2JyZWFrO2Nhc2UiaW5pdCI6ZGwocC5kYXRhKS50aGVuKCgpPT57c2VsZi5wb3N0TWVzc2FnZSh7YWN0aW9uOiJpbml0LWNvbXBsZXRlIn0pfSk7YnJlYWs7Y2FzZSJjbGVhckRpY2UiOlJsKCk7YnJlYWs7Y2FzZSJyZW1vdmVEaWUiOkRlKHAuZGF0YS5pZCk7YnJlYWs7Y2FzZSJyZXNpemUiOiR0PXAuZGF0YS53aWR0aCxKdD1wLmRhdGEuaGVpZ2h0LHl0PSR0L0p0LG1lKGkuc2l6ZSxpLnN0YXJ0aW5nSGVpZ2h0KzEwKTticmVhaztjYXNlInVwZGF0ZUNvbmZpZyI6V2wocC5kYXRhLm9wdGlvbnMpO2JyZWFrO2Nhc2UiY29ubmVjdCI6dWU9cC5wb3J0c1swXSx1ZS5vbm1lc3NhZ2U9dD0+e3N3aXRjaCh0LmRhdGEuYWN0aW9uKXtjYXNlImluaXRCdWZmZXIiOms9bmV3IEZsb2F0MzJBcnJheSh0LmRhdGEuZGljZUJ1ZmZlciksa1swXT0tMTticmVhaztjYXNlImxvYWRNb2RlbHMiOkNsKHQuZGF0YS5vcHRpb25zKTticmVhaztjYXNlImFkZERpZSI6dC5kYXRhLm9wdGlvbnMubmV3U3RhcnRQb2ludCYmaGUoKTtjb25zdCBtPURsKHQuZGF0YS5vcHRpb25zKTtiZShtKTticmVhaztjYXNlInJvbGxEaWUiOmJlKHQuZGF0YS5pZCk7YnJlYWs7Y2FzZSJyZW1vdmVEaWUiOkRlKHQuZGF0YS5pZCk7YnJlYWs7Y2FzZSJzdG9wU2ltdWxhdGlvbiI6dGU9ITA7YnJlYWs7Y2FzZSJyZXN1bWVTaW11bGF0aW9uIjp0LmRhdGEubmV3U3RhcnRQb2ludCYmaGUoKSx0ZT0hMSxTZSgpO2JyZWFrO2Nhc2Uic3RlcFNpbXVsYXRpb24iOms9bmV3IEZsb2F0MzJBcnJheSh0LmRhdGEuZGljZUJ1ZmZlciksU2UoKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoImFjdGlvbiBub3QgZm91bmQgaW4gcGh5c2ljcyB3b3JrZXIgZnJvbSB3b3JsZE9mZnNjcmVlbiB3b3JrZXI6Iix0LmRhdGEuYWN0aW9uKX19O2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiYWN0aW9uIG5vdCBmb3VuZCBpbiBwaHlzaWNzIHdvcmtlcjoiLHAuZGF0YS5hY3Rpb24pfX07Y29uc3QgZGw9YXN5bmMgcD0+eyR0PXAud2lkdGgsSnQ9cC5oZWlnaHQseXQ9JHQvSnQsaT17Li4uaSwuLi5wLm9wdGlvbnN9LGkuZ3Jhdml0eT09PTB8fGkuZ3Jhdml0eStpLm1hc3MvMyxpLm1hc3M9MStpLm1hc3MvMyxpLnNwaW5Gb3JjZT1pLnNwaW5Gb3JjZS9qZSxpLnRocm93Rm9yY2U9aS50aHJvd0ZvcmNlLzIvaS5tYXNzKigxK2kuc2NhbGUvNiksaS5zdGFydGluZ0hlaWdodD1pLnN0YXJ0aW5nSGVpZ2h0PDE/MTppLnN0YXJ0aW5nSGVpZ2h0O2NvbnN0IHQ9e2xvY2F0ZUZpbGU6KCk9PmAke2kub3JpZ2luK2kuYXNzZXRQYXRofWFtbW8vYW1tby53YXNtLndhc21gfTtnPWF3YWl0IG5ldyBnbCh0KSxLdD1uZXcgZy5idFRyYW5zZm9ybSxjZT1uZXcgZy5idFZlY3RvcjMoMCwwLDApLHllPVAoMCwwLDApLGhlKCksTj1TbCgpLG1lKGkuc2l6ZSxpLnN0YXJ0aW5nSGVpZ2h0KzEwKX0sV2w9cD0+e2k9ey4uLmksLi4ucH0saS5tYXNzPTEraS5tYXNzLzMsaS5ncmF2aXR5PWkuZ3Jhdml0eT09PTA/MDppLmdyYXZpdHkraS5tYXNzLzMsaS5zcGluRm9yY2U9aS5zcGluRm9yY2UvamUsaS50aHJvd0ZvcmNlPWkudGhyb3dGb3JjZS8yL2kubWFzcyooMStpLnNjYWxlLzYpLGkuc3RhcnRpbmdIZWlnaHQ9aS5zdGFydGluZ0hlaWdodDwxPzE6aS5zdGFydGluZ0hlaWdodCx2ZSgpLG1lKGkuc2l6ZSxpLnN0YXJ0aW5nSGVpZ2h0KzEwKSxOLnNldEdyYXZpdHkoUCgwLC05LjgxKmkuZ3Jhdml0eSwwKSksT2JqZWN0LnZhbHVlcyhJdCkubWFwKHQ9Pnt0LmNvbnZleEh1bGwuc2V0TG9jYWxTY2FsaW5nKFAoaS5zY2FsZSxpLnNjYWxlLGkuc2NhbGUpKX0pfSxDbD1hc3luYyh7Y29sbGlkZXJzOnAsbWVzaE5hbWU6dH0pPT57bGV0IG09ITEsZD0hMTtwLmZvckVhY2goKHYsTCk9PntJdFt0KyJfIit2Lm5hbWVdPXYsSXRbdCsiXyIrdi5uYW1lXS5jb252ZXhIdWxsPWpsKHYpLGR8fChkPXYuaWQ9PT0iZDEwX2NvbGxpZGVyIiksbXx8KG09di5pZD09PSJkMTAwX2NvbGxpZGVyIil9KSwhbSYmZCYmKEl0W2Ake3R9X2QxMDBfY29sbGlkZXJgXT1JdFtgJHt0fV9kMTBfY29sbGlkZXJgXSl9LFA9KHAsdCxtKT0+KGNlLnNldFZhbHVlKHAsdCxtKSxjZSksaGU9KCk9PntsZXQgcD1pLnNpemUsdD0uNSxtPXAqeXQvMi10LGQ9cCp5dC8tMit0LHY9cC8yLXQsTD1wLy0yK3QsSD1zdChtLGQsTWF0aC5yYW5kb20oKSkscT1zdCh2LEwsTWF0aC5yYW5kb20oKSksWT1NYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpLGo9TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKSxaPU1hdGgucm91bmQoTWF0aC5yYW5kb20oKSk7aS5zdGFydFBvc2l0aW9uPVtaP0g6aj9kOm0saS5zdGFydGluZ0hlaWdodCxaP1k/TDp2OnFdfSxqbD1wPT57Y29uc3QgdD1uZXcgZy5idENvbnZleEh1bGxTaGFwZTtsZXQgbT1wLnBvc2l0aW9ucy5sZW5ndGg7Zm9yKGxldCBkPTA7ZDxtO2QrPTMpe2xldCB2PVAocC5wb3NpdGlvbnNbZF0scC5wb3NpdGlvbnNbZCsxXSxwLnBvc2l0aW9uc1tkKzJdKTt0LmFkZFBvaW50KHYsITApfXJldHVybiB0LnNldExvY2FsU2NhbGluZyhQKHAuc2NhbGluZ1swXSppLnNjYWxlLHAuc2NhbGluZ1sxXSppLnNjYWxlLHAuc2NhbGluZ1syXSppLnNjYWxlKSksdH0sdmw9KHAsdCk9Pntjb25zdHttYXNzOm09LjEsY29sbGlzaW9uRmxhZ3M6ZD0wLHBvczp2PVswLDAsMF0scXVhdDpMPVtzdCgtMS41LDEuNSxNYXRoLnJhbmRvbSgpKSxzdCgtMS41LDEuNSxNYXRoLnJhbmRvbSgpKSxzdCgtMS41LDEuNSxNYXRoLnJhbmRvbSgpKSwtMV0sc2NhbGU6SD1bMSwxLDFdLGZyaWN0aW9uOnE9aS5mcmljdGlvbixyZXN0aXR1dGlvbjpZPWkucmVzdGl0dXRpb259PXQsaj1uZXcgZy5idFRyYW5zZm9ybTtqLnNldElkZW50aXR5KCksai5zZXRPcmlnaW4oUCh2WzBdLHZbMV0sdlsyXSkpLGouc2V0Um90YXRpb24obmV3IGcuYnRRdWF0ZXJuaW9uKExbMF0sTFsxXSxMWzJdLExbM10pKTtjb25zdCBaPW5ldyBnLmJ0RGVmYXVsdE1vdGlvblN0YXRlKGopLGh0PVAoMCwwLDApO20+MCYmcC5jYWxjdWxhdGVMb2NhbEluZXJ0aWEobSxodCk7Y29uc3Qgd3Q9bmV3IGcuYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKG0sWixwLGh0KSxHPW5ldyBnLmJ0UmlnaWRCb2R5KHd0KTtyZXR1cm4gbT4wJiZHLnNldEFjdGl2YXRpb25TdGF0ZSg0KSxHLnNldENvbGxpc2lvbkZsYWdzKGQpLEcuc2V0RnJpY3Rpb24ocSksRy5zZXRSZXN0aXR1dGlvbihZKSxHLnNldERhbXBpbmcoaS5saW5lYXJEYW1waW5nLGkuYW5ndWxhckRhbXBpbmcpLEd9O2xldCBmZT1bXTtjb25zdCBtZT0ocCx0KT0+e2NvbnN0IG09W10sZD1QKDAsMCwwKSx2PW5ldyBnLmJ0VHJhbnNmb3JtO3Yuc2V0SWRlbnRpdHkoKSx2LnNldE9yaWdpbihQKDAsLS41LDApKTtjb25zdCBMPW5ldyBnLmJ0Qm94U2hhcGUoUChwKnl0LDEscCkpLEg9bmV3IGcuYnREZWZhdWx0TW90aW9uU3RhdGUodikscT1uZXcgZy5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oMCxILEwsZCksWT1uZXcgZy5idFJpZ2lkQm9keShxKTtZLnNldEZyaWN0aW9uKGkuZnJpY3Rpb24pLFkuc2V0UmVzdGl0dXRpb24oaS5yZXN0aXR1dGlvbiksTi5hZGRSaWdpZEJvZHkoWSksbS5wdXNoKFkpO2NvbnN0IGo9bmV3IGcuYnRUcmFuc2Zvcm07ai5zZXRJZGVudGl0eSgpLGouc2V0T3JpZ2luKFAoMCx0LS41LDApKTtjb25zdCBaPW5ldyBnLmJ0Qm94U2hhcGUoUChwKnl0LDEscCkpLGh0PW5ldyBnLmJ0RGVmYXVsdE1vdGlvblN0YXRlKGopLHd0PW5ldyBnLmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbygwLGh0LFosZCksRz1uZXcgZy5idFJpZ2lkQm9keSh3dCk7Ry5zZXRGcmljdGlvbihpLmZyaWN0aW9uKSxHLnNldFJlc3RpdHV0aW9uKGkucmVzdGl0dXRpb24pLE4uYWRkUmlnaWRCb2R5KEcpLG0ucHVzaChHKTtjb25zdCBOdD1uZXcgZy5idFRyYW5zZm9ybTtOdC5zZXRJZGVudGl0eSgpLE50LnNldE9yaWdpbihQKDAsMCxwLy0yLS41KSk7Y29uc3QgT3Q9bmV3IGcuYnRCb3hTaGFwZShQKHAqeXQsdCwxKSksZWU9bmV3IGcuYnREZWZhdWx0TW90aW9uU3RhdGUoTnQpLEJ0PW5ldyBnLmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbygwLGVlLE90LGQpLGZ0PW5ldyBnLmJ0UmlnaWRCb2R5KEJ0KTtmdC5zZXRGcmljdGlvbihpLmZyaWN0aW9uKSxmdC5zZXRSZXN0aXR1dGlvbihpLnJlc3RpdHV0aW9uKSxOLmFkZFJpZ2lkQm9keShmdCksbS5wdXNoKGZ0KTtjb25zdCBrdD1uZXcgZy5idFRyYW5zZm9ybTtrdC5zZXRJZGVudGl0eSgpLGt0LnNldE9yaWdpbihQKDAsMCxwLzIrLjUpKTtjb25zdCBXdD1uZXcgZy5idEJveFNoYXBlKFAocCp5dCx0LDEpKSxvZT1uZXcgZy5idERlZmF1bHRNb3Rpb25TdGF0ZShrdCksTHQ9bmV3IGcuYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKDAsb2UsV3QsZCksQ3Q9bmV3IGcuYnRSaWdpZEJvZHkoTHQpO0N0LnNldEZyaWN0aW9uKGkuZnJpY3Rpb24pLEN0LnNldFJlc3RpdHV0aW9uKGkucmVzdGl0dXRpb24pLE4uYWRkUmlnaWRCb2R5KEN0KSxtLnB1c2goQ3QpO2NvbnN0IEh0PW5ldyBnLmJ0VHJhbnNmb3JtO0h0LnNldElkZW50aXR5KCksSHQuc2V0T3JpZ2luKFAocCp5dC8tMi0uNSwwLDApKTtjb25zdCBZdD1uZXcgZy5idEJveFNoYXBlKFAoMSx0LHApKSxYdD1uZXcgZy5idERlZmF1bHRNb3Rpb25TdGF0ZShIdCksbmU9bmV3IGcuYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKDAsWHQsWXQsZCksUHQ9bmV3IGcuYnRSaWdpZEJvZHkobmUpO1B0LnNldEZyaWN0aW9uKGkuZnJpY3Rpb24pLFB0LnNldFJlc3RpdHV0aW9uKGkucmVzdGl0dXRpb24pLE4uYWRkUmlnaWRCb2R5KFB0KSxtLnB1c2goUHQpO2NvbnN0IHR0PW5ldyBnLmJ0VHJhbnNmb3JtO3R0LnNldElkZW50aXR5KCksdHQuc2V0T3JpZ2luKFAocCp5dC8yKy41LDAsMCkpO2NvbnN0IFV0PW5ldyBnLmJ0Qm94U2hhcGUoUCgxLHQscCkpLHJlPW5ldyBnLmJ0RGVmYXVsdE1vdGlvblN0YXRlKHR0KSxfZT1uZXcgZy5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oMCxyZSxVdCxkKSxWdD1uZXcgZy5idFJpZ2lkQm9keShfZSk7VnQuc2V0RnJpY3Rpb24oaS5mcmljdGlvbiksVnQuc2V0UmVzdGl0dXRpb24oaS5yZXN0aXR1dGlvbiksTi5hZGRSaWdpZEJvZHkoVnQpLG0ucHVzaChWdCksZmUubGVuZ3RoJiZ2ZSgpLGZlPVsuLi5tXX0sdmU9KCk9PntmZS5mb3JFYWNoKHA9Pk4ucmVtb3ZlUmlnaWRCb2R5KHApKX0sRGw9cD0+e3ZhciBaO2NvbnN0e3NpZGVzOnQsaWQ6bSxtZXNoTmFtZTpkLHNjYWxlOnZ9PXA7bGV0IEw9YCR7dH1fY29sbGlkZXJgO2NvbnN0IEg9YCR7ZH1fJHtMfWAsWT0oKChaPUl0W0hdKT09bnVsbD92b2lkIDA6Wi5waHlzaWNzTWFzcyl8fC4xKSppLm1hc3MqaS5zY2FsZSxqPXZsKEl0W0hdLmNvbnZleEh1bGwse21hc3M6WSxzY2FsaW5nOkl0W0hdLnNjYWxpbmcscG9zOmkuc3RhcnRQb3NpdGlvbn0pO3JldHVybiBqLmlkPW0sai50aW1lb3V0PWkuc2V0dGxlVGltZW91dCxqLm1hc3M9WSxOLmFkZFJpZ2lkQm9keShqKSxBdC5wdXNoKGopLGp9LGJlPXA9PntwLnNldExpbmVhclZlbG9jaXR5KFAoc3QoLWkuc3RhcnRQb3NpdGlvblswXSouNSwtaS5zdGFydFBvc2l0aW9uWzBdKmkudGhyb3dGb3JjZSxNYXRoLnJhbmRvbSgpKSxzdCgtaS5zdGFydFBvc2l0aW9uWzFdLC1pLnN0YXJ0UG9zaXRpb25bMV0qMixNYXRoLnJhbmRvbSgpKSxzdCgtaS5zdGFydFBvc2l0aW9uWzJdKi41LC1pLnN0YXJ0UG9zaXRpb25bMl0qaS50aHJvd0ZvcmNlLE1hdGgucmFuZG9tKCkpKSk7Y29uc3QgdD1uZXcgZy5idFZlY3RvcjMoc3QoLWkuc3BpbkZvcmNlLGkuc3BpbkZvcmNlLE1hdGgucmFuZG9tKCkpLHN0KC1pLnNwaW5Gb3JjZSxpLnNwaW5Gb3JjZSxNYXRoLnJhbmRvbSgpKSxzdCgtaS5zcGluRm9yY2UsaS5zcGluRm9yY2UsTWF0aC5yYW5kb20oKSkpLG09TWF0aC5hYnMoaS5zY2FsZS0xKStpLnNjYWxlKmkuc2NhbGUqKHAubWFzcy9pLm1hc3MpKi43NTtwLmFwcGx5SW1wdWxzZSh0LFAobSxtLG0pKX0sRGU9cD0+e3p0PXp0LmZpbHRlcih0PT57bGV0IG09dC5pZD09PXA7cmV0dXJuIG0mJk4ucmVtb3ZlUmlnaWRCb2R5KHQpLCFtfSl9LFJsPSgpPT57ay5ieXRlTGVuZ3RoJiZrLmZpbGwoMCksdGU9ITAsQXQuZm9yRWFjaChwPT5OLnJlbW92ZVJpZ2lkQm9keShwKSksenQuZm9yRWFjaChwPT5OLnJlbW92ZVJpZ2lkQm9keShwKSksQXQ9W10senQ9W119LFNsPSgpPT57Y29uc3QgcD1uZXcgZy5idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uLHQ9bmV3IGcuYnREYnZ0QnJvYWRwaGFzZSxtPW5ldyBnLmJ0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyLGQ9bmV3IGcuYnRDb2xsaXNpb25EaXNwYXRjaGVyKHApLHY9bmV3IGcuYnREaXNjcmV0ZUR5bmFtaWNzV29ybGQoZCx0LG0scCk7cmV0dXJuIHYuc2V0R3Jhdml0eShQKDAsLTkuODEqaS5ncmF2aXR5LDApKSx2fSxJbD1wPT57Y29uc3QgdD1wLzFlMztOLnN0ZXBTaW11bGF0aW9uKHQsMiwxLzkwKSxrWzBdPUF0Lmxlbmd0aDtmb3IobGV0IG09QXQubGVuZ3RoLTE7bT49MDttLS0pe2NvbnN0IGQ9QXRbbV0sdj1kLmdldExpbmVhclZlbG9jaXR5KCkubGVuZ3RoKCksTD1kLmdldEFuZ3VsYXJWZWxvY2l0eSgpLmxlbmd0aCgpO2lmKHY8LjAxJiZMPC4wMDV8fGQudGltZW91dDwwKXtrW20qOCsxXT1kLmlkLGtbbSo4KzJdPS0xLGQuYXNsZWVwPSEwLGQuc2V0TWFzc1Byb3BzKDApLGQuZm9yY2VBY3RpdmF0aW9uU3RhdGUoMyksZC5zZXRMaW5lYXJWZWxvY2l0eSh5ZSksZC5zZXRBbmd1bGFyVmVsb2NpdHkoeWUpLHp0LnB1c2goQXQuc3BsaWNlKG0sMSlbMF0pO2NvbnRpbnVlfWQudGltZW91dC09cDtjb25zdCBIPWQuZ2V0TW90aW9uU3RhdGUoKTtpZihIKXtILmdldFdvcmxkVHJhbnNmb3JtKEt0KTtsZXQgcT1LdC5nZXRPcmlnaW4oKSxZPUt0LmdldFJvdGF0aW9uKCksaj1tKjgrMTtrW2pdPWQuaWQsa1tqKzFdPXEueCgpLGtbaisyXT1xLnkoKSxrW2orM109cS56KCksa1tqKzRdPVkueCgpLGtbais1XT1ZLnkoKSxrW2orNl09WS56KCksa1tqKzddPVkudygpfX19O2xldCBSZT1uZXcgRGF0ZSgpLmdldFRpbWUoKTtjb25zdCBTZT0oKT0+e2xldCBwPW5ldyBEYXRlKCkuZ2V0VGltZSgpO2NvbnN0IHQ9cC1SZTtSZT1wLCF0ZSYmay5ieXRlTGVuZ3RoJiYoSWwodCksdWUucG9zdE1lc3NhZ2Uoe2FjdGlvbjoidXBkYXRlcyIsZGljZUJ1ZmZlcjprLmJ1ZmZlcn0sW2suYnVmZmVyXSkpfX0pKCk7Cg==",zt=typeof window<"u"&&window.Blob&&new Blob([atob(uc)],{type:"text/javascript;charset=utf-8"});function kn(){const c=zt&&(window.URL||window.webkitURL).createObjectURL(zt);try{return c?new Worker(c):new Worker("data:application/javascript;base64,"+uc)}finally{c&&(window.URL||window.webkitURL).revokeObjectURL(c)}}const Pn=c=>{let d;return function(){let t=this,n=arguments;d&&window.cancelAnimationFrame(d),d=window.requestAnimationFrame(function(){c.apply(t,n)})}},In=(c={dedupe:!1})=>{const{dedupe:d}=c;let t=[],n;const u=e=>(d&&(t=[]),t.push(e),n||(n=b()),n.finally(()=>{n=void 0})),b=async()=>{const e=[];for(;t.length;){const X=t.shift();e.push(await X())}return e};return{push:u,queue:t,flush:()=>n||Promise.resolve([])}},eb=c=>JSON.parse(JSON.stringify(c));class Tt{static value(){const d=window.crypto||window.msCrypto,t=new Uint32Array(1);return d.getRandomValues(t)[0]/2**32}static range(d,t){return Math.floor(Math.pow(10,14)*this.value()*this.value())%(t-d+1)+d}}const Qn=c=>{let d=!1,t=c.slice(c.startsWith("#")?1:0);t.length===3?t=[...t].map(u=>u+u).join(""):t.length===8&&(d=!0),t=parseInt(t,16);let n={r:t>>>16,g:(t&65280)>>>8,b:t&255};return d&&(n.r=t>>>24,n.g=(t&16711680)>>>16,n.b=(t&65280)>>>8,n.a=t&255),n},jn={id:`dice-canvas-${Date.now()}`,enableShadows:!0,shadowTransparency:.8,lightIntensity:1,delay:10,scale:5,theme:"default",themeColor:"#2e8555",offscreen:!0,assetPath:"/assets/dice-box/",origin:location.origin,meshFile:"models/default.json",suspendSimulation:!1};var Wd,Id,Le,Se,Xl,Ne,Ve,Nl,Fe,pe,et,ic,tt,Xc,ct,oc,Ye,nt,fe,bt;class Mn{constructor(d,t={}){if(hl(this,et),hl(this,tt),hl(this,ct),hl(this,Ye),hl(this,fe),rd(this,"rollCollectionData",{}),rd(this,"rollGroupData",{}),rd(this,"rollDiceData",{}),rd(this,"themeData",[]),rd(this,"themesLoadedData",{}),hl(this,Wd,0),hl(this,Id,0),hl(this,Le,0),hl(this,Se,0),hl(this,Xl,{}),hl(this,Ne,void 0),hl(this,Ve,void 0),hl(this,Nl,void 0),hl(this,Fe,void 0),hl(this,pe,void 0),rd(this,"noop",()=>{}),typeof t!="object")throw new Error("Config options should be an object. Config reference: https://fantasticdice.games/docs/usage/config#configuration-options");const{onDieComplete:n,onRollComplete:u,onRemoveComplete:b,onThemeConfigLoaded:e,onThemeLoaded:X,...s}=t;this.config={...jn,...s},this.onDieComplete=t.onDieComplete||this.noop,this.onRollComplete=t.onRollComplete||this.noop,this.onRemoveComplete=t.onRemoveComplete||this.noop,this.onThemeLoaded=t.onThemeLoaded||this.noop,this.onThemeConfigLoaded=t.onThemeConfigLoaded||this.noop,this.canvas=Un({selector:d,id:this.config.id}),this.loadThemeQueue=In({dedupe:!0})}resizeWorld(){const d=Pn(()=>{dl(this,Xl).resize({width:this.canvas.clientWidth,height:this.canvas.clientHeight}),dl(this,Nl).postMessage({action:"resize",width:this.canvas.clientWidth,height:this.canvas.clientHeight})});window.addEventListener("resize",d)}async init(){return ql(this,tt,Xc).call(this),await ql(this,et,ic).call(this),this.resizeWorld(),dl(this,Xl).onRollResult=d=>{const t=this.rollDiceData[d.rollId],n=this.rollGroupData[t.groupId],u=this.rollCollectionData[t.collectionId];n.rolls[t.rollId].value=d.value,u.completedRolls++,u.completedRolls==u.rolls.length&&u.resolve(Object.values(u.rolls).map(({collectionId:s,id:l,meshName:i,...G})=>G));const{collectionId:b,id:e,...X}=t;this.onDieComplete(X)},dl(this,Xl).onRollComplete=()=>{this.onRollComplete(this.getRollResults())},dl(this,Xl).onDieRemoved=d=>{let t=this.rollDiceData[d];const n=this.rollCollectionData[t.removeCollectionId];n.completedRolls++,delete this.rollDiceData[t.rollId];const u=this.rollGroupData[t.groupId];delete u.rolls[t.rollId];const b=ql(this,fe,bt).call(this,t.groupId);u.value=b.value,u.qty=b.rollsArray.length,n.completedRolls==n.rolls.length&&n.resolve(Object.values(n.rolls).map(({id:G,...h})=>h));const{collectionId:e,id:X,removeCollectionId:s,meshName:l,...i}=t;this.onRemoveComplete(i)},await Promise.all([dl(this,Ne),dl(this,Fe)]),ql(this,ct,oc).call(this),await this.loadThemeQueue.push(()=>this.loadTheme(this.config.theme)),this}async getThemeConfig(d){const t=`${this.config.origin}${this.config.assetPath}themes/${d}`;let n;d==="default"?n={name:"Default Colors",material:{type:"color",diffuseTexture:{light:"diffuse-light.png",dark:"diffuse-dark.png"},diffuseLevel:1,bumpTexture:"normal.png",bumpLevel:.5,specularTexture:"specular.jpg",specularPower:1}}:n=await fetch(`${t}/theme.config.json`).then(e=>{if(e.ok){const X=e.headers.get("content-type");if(X&&X.indexOf("application/json")!==-1||e.type&&e.type==="basic")return e.json();throw new Error(`Incorrect contentType: ${X}. Expected "application/json" or "basic"`)}else throw new Error(`Unable to fetch config file for theme: '${d}'. Request rejected with status ${e.status}: ${e.statusText}`)}).catch(e=>console.error(e));let u=this.config.origin+this.config.assetPath+this.config.meshFile,b="default";if(!n)throw new Error("No theme config data to work with.");if(n.hasOwnProperty("meshFile")&&(u=`${t}/${n.meshFile}`,n.hasOwnProperty("meshName")?b=n.meshName:(console.warn("You should provide a meshName in your theme.config.json file"),b=n.meshFile.replace(/(.*)\..{2,4}$/,"$1"))),n.hasOwnProperty("diceAvailable")||(n.diceAvailable=["d4","d6","d8","d10","d12","d20","d100"]),n.hasOwnProperty("extends")){let e=this.themesLoadedData[n.extends];e||(e=await this.loadTheme(n.extends).catch(X=>console.error(X))),e&&(n.diceInherited=[...n.diceInherited||[]],e.diceAvailable.map(X=>{n.diceInherited[X]=e.systemName}))}return Object.assign(n,{basePath:t,meshFilePath:u,meshName:b,theme:d}),n}async loadTheme(d){if(this.themesLoadedData[d])return this.themesLoadedData[d];const t=this.themesLoadedData[d]=await this.getThemeConfig(d).catch(n=>console.error(n));if(this.onThemeConfigLoaded(t),!!t)return await dl(this,Xl).loadTheme(t).catch(n=>console.error(n)),this.onThemeLoaded(t),t}async updateConfig(d){const t={...this.config,...d};return await this.loadThemeQueue.push(()=>this.loadTheme(t.theme)),this.config=t,dl(this,Xl).updateConfig(t),dl(this,Nl).postMessage({action:"updateConfig",options:t}),this}clear(){return vl(this,Wd,0),vl(this,Id,0),vl(this,Le,0),vl(this,Se,0),this.rollCollectionData={},this.rollGroupData={},this.rollDiceData={},dl(this,Xl).clear(),dl(this,Nl).postMessage({action:"clearDice"}),this}hide(){return this.canvas.style.display="none",this}show(){return this.canvas.style.display="block",this}roll(d,{theme:t=this.config.theme,themeColor:n=this.config.themeColor,newStartPoint:u=!0}={}){this.clear();const b=Yd(this,Wd)._++;this.rollCollectionData[b]=new Ae({id:b,notation:d,theme:t,themeColor:n,newStartPoint:u});const e=this.createNotationArray(d,this.themesLoadedData[t].diceAvailable);return ql(this,Ye,nt).call(this,e,b),this.rollCollectionData[b].promise}add(d,{theme:t=this.config.theme,themeColor:n=this.config.themeColor,newStartPoint:u=!0}={}){const b=Yd(this,Wd)._++;this.rollCollectionData[b]=new Ae({id:b,notation:d,theme:t,themeColor:n,newStartPoint:u});const e=this.createNotationArray(d,this.themesLoadedData[t].diceAvailable);return ql(this,Ye,nt).call(this,e,b),this.rollCollectionData[b].promise}reroll(d,{remove:t=!1,hide:n=!1,newStartPoint:u=!0}={}){const b=(Array.isArray(d)?d:[d]).map(({value:e,...X})=>X);return t===!0&&this.remove(b,{hide:n}),this.add(b,{newStartPoint:u})}remove(d,{hide:t=!1}={}){const n=Array.isArray(d)?d:[d],u=Yd(this,Wd)._++;return this.rollCollectionData[u]=new Ae({id:u,notation:d,rolls:n}),n.map(b=>{this.rollDiceData[b.rollId].removeCollectionId=u;let e=this.rollDiceData[b.rollId].id;dl(this,Xl).remove({id:e,rollId:b.rollId}),dl(this,Nl).postMessage({action:"removeDie",id:e})}),this.rollCollectionData[u].promise}createNotationArray(d,t){const n=Array.isArray(d)?d:[d];let u=[];const b=s=>{if(s.hasOwnProperty("qty")||(s.qty=1),s.hasOwnProperty("sides"))return!0;{const l="Roll notation is missing sides";throw new Error(l)}},e=s=>{s=s.toString();let l=s.split(".");return l[1]?l[1]=parseInt(l[1])+1:l[1]=1,l[0]+"."+l[1]},X=s=>{s.hasOwnProperty("rollId")&&this.rollDiceData.hasOwnProperty(s.rollId)&&(s.rollId=e(s.rollId))};return n.forEach(s=>{typeof s=="string"?u.push(this.parse(s,t)):typeof n=="object"&&(X(s),b(s)&&u.push(s))}),u}parse(d,t){const n=/(\d+)([dD]{1}\d+)(.*)$/i,u=/(\d+)[dD]([0%]+)(.*)$/i,b=/(\d+)[dD](f+[ate]*)(.*)$/i,e=/(\d+)[dD]([\d\w]+)([+-]{0,1}\d+)?/i,X=/([+-])(\d+)/,s=d.trim().replace(/\s+/g,""),l=(y,L)=>{if(y=Number(y),Number.isNaN(y)||!Number.isInteger(y)||y<1)throw new Error(L);return y},i=s.match(u)||s.match(n)||s.match(b)||s.match(e);let G=0;const h="Invalid notation: "+d;if(!i||!i.length||i.length<3)throw new Error(h);if(i[3]&&X.test(i[3])){const y=i[3].match(X);let L=l(y[2],h);y[1].trim()==="-"&&(L*=-1),G=L}const R={qty:l(i[1],h),modifier:G};return s.match(u)?R.sides="100":s.match(b)?R.sides="fate":(t.includes(s.match(e)[2]),R.sides=i[2]),R}getRollResults(){return Object.entries(this.rollGroupData).map(([d,t])=>{const n=ql(this,fe,bt).call(this,d);t.value=n.value,t.qty=n.rollsArray.length;const u={...t};return u.rolls=n.rollsArray,u})}}Wd=new WeakMap,Id=new WeakMap,Le=new WeakMap,Se=new WeakMap,Xl=new WeakMap,Ne=new WeakMap,Ve=new WeakMap,Nl=new WeakMap,Fe=new WeakMap,pe=new WeakMap,et=new WeakSet,ic=async function(){vl(this,Ne,new Promise((d,t)=>{vl(this,Ve,d)}));const c=()=>{dl(this,Ve).call(this)};if("OffscreenCanvas"in window&&"transferControlToOffscreen"in this.canvas&&this.config.offscreen){const d=await gt(()=>import("./world.offscreen-932287d9.js"),[]).then(t=>t.default);vl(this,Xl,new d({canvas:this.canvas,options:this.config,onInitComplete:c}))}else{this.config.offscreen&&(console.warn("This browser does not support OffscreenCanvas. Using standard canvas fallback."),this.config.offscreen=!1);const d=await gt(()=>import("./world.onscreen-0b0d849f.js"),[]).then(t=>t.default);vl(this,Xl,new d({canvas:this.canvas,options:this.config,onInitComplete:c}))}},tt=new WeakSet,Xc=function(){vl(this,Nl,new kn),vl(this,Fe,new Promise((c,d)=>{vl(this,pe,c)})),dl(this,Nl).onmessage=c=>{switch(c.data.action){case"init-complete":dl(this,pe).call(this)}},dl(this,Nl).postMessage({action:"init",width:this.canvas.clientWidth,height:this.canvas.clientHeight,options:this.config})},ct=new WeakSet,oc=function(){const c=new MessageChannel;dl(this,Xl).connect(c.port1),dl(this,Nl).postMessage({action:"connect"},[c.port2])},Ye=new WeakSet,nt=async function(c,d){const t=this.rollCollectionData[d];let n=t.newStartPoint;c.forEach(async u=>{if(!u.sides)throw new Error("Improper dice notation or unable to parse notation");const b=u.theme||t.theme||this.config.theme,e=u.themeColor||t.themeColor||this.config.themeColor,X={},s=u.groupId!==void 0;let l;const i=()=>this.loadTheme(b);await this.loadThemeQueue.push(i);const{meshName:G,diceAvailable:h,diceInherited:R={},material:{type:y}}=this.themesLoadedData[b],L=Object.keys(R);let J="",C;y==="color"&&(C=Qn(e),J=C.r*.299+C.g*.587+C.b*.114>175?"_dark":"_light");for(var g=0,_=u.qty;g<_;g++){let $=u.rollId!==void 0?u.rollId:Yd(this,Le)._++,bl=u.id!==void 0?u.id:Yd(this,Se)._++;l=s?u.groupId:dl(this,Id);const Tl=Number.isInteger(u.sides)?`d${u.sides}`:u.sides;u.sides=Tl;const tl={sides:Tl,groupId:l,collectionId:t.id,rollId:$,id:bl,theme:b,themeColor:e,meshName:G};if(X[$]=tl,this.rollDiceData[$]=tl,t.rolls.push(this.rollDiceData[$]),tl.sides==="fate"&&!h.includes(tl.sides)&&!L.includes(tl.sides)){console.warn(`fate die unavailable in '${b}' theme. Using fallback.`);const Jl=-1,wl=1;tl.value=Tt.range(Jl,wl),dl(this,Xl).addNonDie(tl)}else if(this.config.suspendSimulation||!h.includes(tl.sides)&&!L.includes(tl.sides))console.warn(this.config.suspendSimulation?"3D simulation suspended. Using fallback.":`${tl.sides} die unavailable in '${b}' theme. Using fallback.`),tl.value=Tt.range(1,tl.sides),dl(this,Xl).addNonDie(tl);else{let Jl;if(L.includes(tl.sides)){const wl=R[tl.sides];Jl=this.themesLoadedData[wl]}dl(this,Xl).add({...tl,newStartPoint:n,theme:Jl?.systemName||b,meshName:Jl?.meshName||G,colorSuffix:J})}n=!1}s?Object.assign(this.rollGroupData[l].rolls,X):(u.rolls=X,u.id=l,this.rollGroupData[l]=u,++Yd(this,Id)._)})},fe=new WeakSet,bt=function(c){const d=this.rollGroupData[c],t=Object.values(d.rolls).map(({collectionId:u,id:b,meshName:e,...X})=>X);let n=t.reduce((u,b)=>{const e=isNaN(b.value)?0:b.value;return u+e},0);return n+=d.modifier?d.modifier:0,{value:n,rollsArray:t}};class Ae{constructor(d){Object.assign(this,d),this.rolls=d.rolls||[],this.completedRolls=0;const t=this;this.promise=new Promise((n,u)=>{t.resolve=n,t.reject=u})}}function Ut(c,d){const t=window.matchMedia("(prefers-color-scheme: dark)");console.log(t.matches);const n=t.matches?"dark":"light",u=t.matches?"light":"dark";for(var b=0;b<d.styleSheets.length;b++)for(var e=0;e<d.styleSheets[b].cssRules.length;e++){let X=d.styleSheets[b].cssRules[e];X&&X.media&&X.media.mediaText.includes("prefers-color-scheme")&&(c.mode=="LIGHT"?(X.media.appendMedium(`(prefers-color-scheme: ${n})`),X.media.mediaText.includes(u)&&X.media.deleteMedium(`(prefers-color-scheme: ${u})`)):c.mode=="DARK"&&(X.media.appendMedium(`(prefers-color-scheme: ${u})`),X.media.mediaText.includes(n)&&X.media.deleteMedium(`(prefers-color-scheme: ${n})`)))}}const kt=window.innerWidth<ol.MOBILEWIDTH;document.querySelector("#app").innerHTML=`
<header id="headerContainer" class="headerContainer"></header>
<section id="chatContainer" class="chatContainer">
    <div id="diceContainer" class="diceCont"></div>
    <ul id="chatLog">
    </ul>
</section>
<div class="inputContainer">
    <div id="targetSelect">
        <label for="players">${kt?"Send:":"Send Message To:"}</label>

        <select name="players" id="playerSelect">
        </select>
        <div id="safetyButtons">${kt?"":"Safety:"}
            <button id="happyButton" type="button">âœ”</button>
            <button id="waryButton" type="button">â—¯</button>
            <button id="badButton" type="button">âœ•</button>
        </div>
    </div>
    <div>
    <input id="chat-input" class="chatInput" type="text" name="message" placeholder="Type Message ..." class="form-control">
        <span>
            <button id="chat-button" type="button" class="button">Send</button>
        </span>
    </div>
</div>`;let Dd="",Fl="",Ad="",nl=0,Vd=!1,Md=[],Ze={chatlog:"",sender:"",created:"",color:""},Ge={chatlog:"",sender:"",created:"",color:""},he={chatlog:"",sender:"",created:"",color:""};const Dn=/^\/whisper (\w+) (.+)$/,An=/^\/w (\w+) (.+)$/,Pt="/roll ";let Rd;await ll.onReady(async()=>{const c=await ll.theme.getTheme();Ut(c,document),ll.theme.onChange(d=>{Ut(d,document)}),await qn(),Dd=await ll.player.getName(),Fl=await ll.player.getId(),Ad=await ll.player.getColor(),Md=(await ll.party.getPlayers()).map(d=>({id:d.id,name:d.name})),_n(),On(),ac(),lb()});function On(){const c=document.querySelector("#happyButton");c.onclick=async function(){const n={},u=new Date().toISOString();return n[`${ol.EXTENSIONID}/metadata_chatSafety`]={safety:"happy",created:u},await ll.player.setMetadata(n)};const d=document.querySelector("#badButton");d.onclick=async function(){const n={},u=new Date().toISOString();return n[`${ol.EXTENSIONID}/metadata_chatSafety`]={safety:"bad",created:u},await ll.player.setMetadata(n)};const t=document.querySelector("#waryButton");t.onclick=async function(){const n={},u=new Date().toISOString();return n[`${ol.EXTENSIONID}/metadata_chatSafety`]={safety:"wary",created:u},await ll.player.setMetadata(n)}}function _n(){const c=document.querySelector("#chat-input");c.addEventListener("keypress",async function(t){t.key==="Enter"&&await jt(c)});const d=document.querySelector("#chat-button");d.onclick=async function(){c.value&&await jt(c)}}function re(c){const t=new Date,n=new Date(c);return t-n>3e3}async function qn(){ll.player.onChange(async c=>{Dd=c.name,Fl=c.id,Ad=c.color,await It(c.metadata)}),ll.party.onChange(c=>{Md=c.map(d=>({id:d.id,name:d.name})),ac(),c.forEach(async d=>{await It(d.metadata)})}),ll.action.onOpenChange(async c=>{c&&(Vd=!1,nl=0,await ll.action.setBadgeText(void 0),await ll.action.setBadgeBackgroundColor("#BB99FF"),await ll.action.setIcon("/icon.svg"))})}async function It(c){const d=document.querySelector("#chatLog"),t=await ll.action.isOpen(),n=new Date().toLocaleTimeString();if(c[`${ol.EXTENSIONID}/metadata_chatlog`]!=null){const u=c[`${ol.EXTENSIONID}/metadata_chatlog`];if((Ze.chatlog!=u.chatlog||Ze.sender!=u.sender)&&!re(u.created)){Ze=u;const b=u.chatlog;Ze=u;const e=u.senderId==Fl,X=document.createElement("li"),s=document.createElement("li"),l=e?" itsMe":"";if(u.senderId==Fl||u.targetId=="0000"){const i=e&&u.targetId!="0000"?` to [${u.target}]`:"";X.className="rumbleAuthor"+l,X.style.color=u.color,X.innerText=`[${n}] - ${u.sender}`+i,s.className="rumbleLog"+l,s.innerText="â€¢    "+b,d.append(X),d.append(s),nl=e?nl:nl+1}else u.targetId==Fl&&(X.className="rumbleAuthor"+l,X.style.color=u.color,X.innerText=`[${n}] - ${u.sender} to [You]`,s.className="rumbleLog outline"+l,s.innerText="â€¢    "+b,d.append(X),d.append(s),nl=nl+1,Vd=!0)}}if(c[`${ol.CLASHID}/metadata_chatlog`]!=null){const u=c[`${ol.CLASHID}/metadata_chatlog`];if((Ge.chatlog!=u.chatlog||Ge.sender!=u.sender)&&!re(u.created)){if(u.targetId==Fl){Ge=u;const b=u.chatlog,e=document.createElement("li");e.className="rumbleAuthor clashLog",e.innerText=`[${n}] - ${u.sender} to [You]`;const X=document.createElement("li");X.className=u.critical?"clashLog glow":"clashLog",X.innerText="ðŸ¡†    "+b,d.append(e),d.append(X)}else if(u.targetId=="0000"){Ge=u;const b=u.chatlog,e=document.createElement("li");e.className="rumbleAuthor clashLog",e.innerText=`[${n}] - ${u.sender}`;const X=document.createElement("li");X.className=u.critical?"clashLog glow":"clashLog",X.innerText="ðŸ¡†    "+b,d.append(e),d.append(X),nl=nl+1}}}if(c[`${ol.OUTSIDEID}/metadata_chatlog`]!=null){const u=c[`${ol.OUTSIDEID}/metadata_chatlog`];if((he.chatlog!=u.chatlog||he.sender!=u.sender)&&!re(u.created)){if(u.targetId==Fl){he=u;const b=u.chatlog,e=document.createElement("li");e.className="rumbleAuthor friendLog",e.innerText=`[${n}] - ${u.sender} to [You]`;const X=document.createElement("li");X.className="friendLog",X.innerText="ðŸ¢¥    "+b,d.append(e),d.append(X)}else if(u.targetId=="0000"){he=u;const b=u.chatlog,e=document.createElement("li");e.className="rumbleAuthor friendLog",e.innerText=`[${n}] - ${u.sender}`;const X=document.createElement("li");X.className="friendLog",X.innerText="ðŸ¢¥    "+b,d.append(e),d.append(X),nl=nl+1}}}if(c[`${ol.EXTENSIONID}/metadata_chatSafety`]!=null){const u=await ll.player.getRole(),b=c[`${ol.EXTENSIONID}/metadata_chatSafety`];if(!re(b.created)){if(b.safety=="bad"){const e=document.createElement("li"),X=document.createElement("li"),s=new Date().toLocaleTimeString();e.className="rumbleAuthor clashLog",e.innerText=`[${s}] - âŒ Full Stop âŒ`,X.className="clashLog",X.innerText="ðŸ¡†    Someone is concerned with the current situation. Talk it out.",d.append(e),d.append(X),nl=nl+1,Vd=!0,ll.popover.open({id:"com.battle-system.rumble",url:`/subindex/sub${b.safety}.html`,height:400,width:400})}if(b.safety=="wary"){const e=document.createElement("li"),X=document.createElement("li"),s=new Date().toLocaleTimeString();e.className="rumbleAuthor clashLog",e.innerText=`[${s}] - ðŸŸ¡ Let's be careful ðŸŸ¡`,X.className="clashLog",X.innerText="ðŸ¡†    Someone is starting to feel wary about what's going on.",d.append(e),d.append(X),nl=nl+1,Vd=!0,ll.popover.open({id:"com.battle-system.rumble",url:`/subindex/sub${b.safety}.html`,height:400,width:400})}if(u=="GM"&&b.safety=="happy"){const e=document.createElement("li"),X=document.createElement("li"),s=new Date().toLocaleTimeString();e.className="rumbleAuthor clashLog",e.innerText=`[${s}] - âœ… Great Job! âœ…`,X.className="clashLog",X.innerText="ðŸ¡†    Someone has shown their approval!",d.append(e),d.append(X),nl=nl+1,ll.popover.open({id:"com.battle-system.rumble",url:`/subindex/sub${b.safety}.html`,height:200,width:200})}}}t&&(Vd=!1,nl=0),!t&&nl>0&&(await ll.action.setIcon("/icon-filled.svg"),await ll.action.setBadgeText(nl.toString()),Vd&&await ll.action.setBadgeBackgroundColor("yellow"))}function ac(){const c=document.getElementById("playerSelect");let d=c.value;const t=document.createElement("option");t.setAttribute("value","0000");const n=document.createTextNode("Everyone");if(t.appendChild(n),c.innerHTML="",c.appendChild(t),Md.forEach(b=>{let e=document.createElement("option");e.setAttribute("value",b.id);let X=document.createTextNode(b.name);e.appendChild(X),c.appendChild(e)}),!Md.find(b=>b.id===d)&&d&&d!=="0000"){let b=document.createElement("option");b.setAttribute("value",d);let e=document.createTextNode("(Disconnected)");b.appendChild(e),c.appendChild(b),c.value=d}else d&&(c.value=d)}async function Qt(c,d){if(c){const t=c[1],n=c[2],u=Md.find(b=>b.name.toLowerCase()===t.toLowerCase());if(u&&n){const b={},e=new Date().toISOString();return b[`${ol.EXTENSIONID}/metadata_chatlog`]={chatlog:n,sender:Dd,senderId:Fl,target:u.name,targetId:u.id,created:e,color:Ad},d.value="",await ll.player.setMetadata(b)}}}async function jt(c){if(c.value)if(c.value.startsWith("/whisper")){const d=c.value.match(Dn);await Qt(d,c)}else if(c.value.startsWith("/w")){const d=c.value.match(An);await Qt(d,c)}else if(c.value.startsWith(Pt)){const d=c.value.substring(Pt.length),t=new Rc.DiceRoller;try{const n=t.roll(d);let u=[];n.rolls.forEach(e=>{const X=e;u.push(`[${X.critical==="success"?"ðŸ’¥":""}${X.value}${X.valid?"":"âœ•"}]`)});const b=` rolled [${d}] â†’ ${u.join(", ")} for ${n.value}!`;await mc(b),c.value=""}catch{console.log("Rumble was unable to parse that roll notation.")}}else{const d=document.getElementById("playerSelect"),t=d.value,n=d.options[d.selectedIndex].text,u={},b=new Date().toISOString();return u[`${ol.EXTENSIONID}/metadata_chatlog`]={chatlog:c.value,sender:Dd,senderId:Fl,target:n,targetId:t,created:b,color:Ad},c.value="",await ll.player.setMetadata(u)}}async function mc(c){if(c){const d={},t=new Date().toISOString();return d[`${ol.CLASHID}/metadata_chatlog`]={chatlog:Dd+c,sender:"Rumble!",senderId:Fl,target:"",targetId:"0000",created:t,color:Ad},await ll.player.setMetadata(d)}}function $n(c){let d=[],t=0;return c.forEach(n=>{let u=[];n.rolls.length>0&&n.rolls.forEach(b=>{u.push(b.value)}),d.push(`${n.qty}${n.sides} â†’ [${u.join("-")}]`),t+=n.value}),` rolled (${d.join(", ")}) for ${t}!`}async function lb(){Rd=new Mn("#diceContainer",{id:"diceContainer",assetPath:"/assets/",scale:15,gravity:5,theme:"default",themeColor:"#ff9294"}),Rd.init().then(()=>{const c=new rc({target:"#headerContainer",onSubmit:d=>{const t=document.querySelector("#throwButton"),n=document.querySelector("#resetButton");t.disabled=!0,n.disabled=!0,Rd.roll(d)},onClear:()=>{Rd.clear()},onReroll:d=>{d.forEach(t=>Rd.add(t))}});c.ready(),Rd.onRollComplete=async d=>{const t=document.querySelector("#throwButton"),n=document.querySelector("#resetButton");let u=$n(d);await mc(u),await db(2e3),c.updateNotation(!0),t.disabled=!1,n.disabled=!1}})}function db(c){return new Promise(d=>setTimeout(d,c))}export{eb as J};
