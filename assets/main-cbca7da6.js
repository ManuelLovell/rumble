(function(){const Y=document.createElement("link").relList;if(Y&&Y.supports&&Y.supports("modulepreload"))return;for(const nl of document.querySelectorAll('link[rel="modulepreload"]'))dl(nl);new MutationObserver(nl=>{for(const el of nl)if(el.type==="childList")for(const J of el.addedNodes)J.tagName==="LINK"&&J.rel==="modulepreload"&&dl(J)}).observe(document,{childList:!0,subtree:!0});function F(nl){const el={};return nl.integrity&&(el.integrity=nl.integrity),nl.referrerPolicy&&(el.referrerPolicy=nl.referrerPolicy),nl.crossOrigin==="use-credentials"?el.credentials="include":nl.crossOrigin==="anonymous"?el.credentials="omit":el.credentials="same-origin",el}function dl(nl){if(nl.ep)return;nl.ep=!0;const el=F(nl);fetch(nl.href,el)}})();class Constants{static EXTENSIONID="com.battle-system.rumble";static CLASHID="com.battle-system.clash";static OUTSIDEID="com.battle-system.friends";static MOBILEWIDTH=495}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dist$1={exports:{}};(function(C,Y){(function(F,dl){C.exports=dl()})(commonjsGlobal,()=>(()=>{var F={95:(nl,el,J)=>{Object.defineProperty(el,"__esModule",{value:!0}),el.DiceRoller=void 0;const il=J(51);el.DiceRoller=class{constructor(tl,V=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,tl&&(this.randFunction=tl),this.maxRollCount=V}parse(tl){return il.parse(tl)}roll(tl){const V=il.parse(tl);return this.rollType(V)}rollValue(tl){return this.roll(tl).value}rollParsed(tl){return this.rollType(tl)}rollType(tl){let V;switch(tl.type){case"diceExpression":V=this.rollDiceExpr(tl);break;case"group":V=this.rollGroup(tl);break;case"die":V=this.rollDie(tl);break;case"expression":V=this.rollExpression(tl);break;case"mathfunction":V=this.rollFunction(tl);break;case"inline":V=this.rollType(tl.expr);break;case"number":V=Object.assign(Object.assign({},tl),{success:null,successes:0,failures:0,valid:!0,order:0});break;default:throw new Error(`Unable to render ${tl.type}`)}return tl.label&&(V.label=tl.label),V}rollDiceExpr(tl){const V=this.rollType(tl.head),sl=[V],Xl=[],Yl=tl.ops.reduce((yl,Hl,Bl)=>{const Cl=this.rollType(Hl.tail);switch(Cl.order=Bl,sl.push(Cl),Xl.push(Hl.op),Hl.op){case"+":return yl+Cl.value;case"-":return yl-Cl.value;default:return yl}},V.value);return{dice:sl,ops:Xl,success:null,successes:0,failures:0,type:"diceexpressionroll",valid:!0,value:Yl,order:0}}rollGroup(tl){let V=tl.rolls.map((Hl,Bl)=>Object.assign(Object.assign({},this.rollType(Hl)),{order:Bl})),sl=0,Xl=0,Yl=!1;if(tl.mods){const Hl=tl.mods,Bl=Cl=>(Yl=Hl.some(Tl=>["failure","success"].includes(Tl.type)),Cl=Hl.reduce((Tl,Ql)=>this.applyGroupMod(Tl,Ql),Cl),Yl&&(Cl=Cl.map(Tl=>(sl+=Tl.successes,Xl+=Tl.failures,Tl.value=Tl.successes-Tl.failures,Tl.success=Tl.value>0,Tl))),Cl);if(V.length===1&&["die","diceexpressionroll"].includes(V[0].type)){const Cl=V[0];let Tl=Cl.type==="die"?Cl.rolls:Cl.dice.filter(Ql=>Ql.type!=="number").reduce((Ql,cd)=>[...Ql,...cd.type==="die"?cd.rolls:cd.dice],[]);Tl=Bl(Tl),Cl.value=Tl.reduce((Ql,cd)=>cd.valid?Ql+cd.value:Ql,0)}else V=Bl(V)}const yl=V.reduce((Hl,Bl)=>Bl.valid?Hl+Bl.value:Hl,0);return{dice:V,success:Yl?yl>0:null,successes:sl,failures:Xl,type:"grouproll",valid:!0,value:yl,order:0}}rollDie(tl){const V=this.rollType(tl.count);if(V.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let sl,Xl;tl.die.type==="fate"?(Xl={type:"fate",success:null,successes:0,failures:0,valid:!1,value:0,order:0},sl=Array.from({length:V.value},(Tl,Ql)=>this.generateFateRoll(Ql))):(Xl=this.rollType(tl.die),sl=Array.from({length:V.value},(Tl,Ql)=>this.generateDiceRoll(Xl.value,Ql))),tl.mods&&(sl=tl.mods.reduce((Tl,Ql)=>this.applyMod(Tl,Ql),sl));let Yl=0,yl=0;tl.targets&&(sl=tl.targets.reduce((Tl,Ql)=>this.applyMod(Tl,Ql),sl).map(Tl=>(Yl+=Tl.successes,yl+=Tl.failures,Tl.value=Tl.successes-Tl.failures,Tl.success=Tl.value>0,Tl)));let Hl=!1,Bl=0;if(tl.match){const Tl=tl.match,Ql=sl.reduce((nd,ud)=>nd.set(ud.roll,(nd.get(ud.roll)||0)+1),new Map),cd=new Set(Array.from(Ql.entries()).filter(([nd,ud])=>ud>=Tl.min.value).filter(([nd])=>!(Tl.mod&&Tl.expr)||this.successTest(Tl.mod,this.rollType(Tl.expr).value,nd)).map(([nd])=>nd));sl.filter(nd=>cd.has(nd.roll)).forEach(nd=>nd.matched=!0),Tl.count&&(Hl=!0,Bl=cd.size)}tl.sort&&(sl=this.applySort(sl,tl.sort));const Cl=sl.reduce((Tl,Ql)=>Ql.valid?Tl+Ql.value:Tl,0);return{count:V,die:Xl,rolls:sl,success:tl.targets?Cl>0:null,successes:Yl,failures:yl,type:"die",valid:!0,value:Hl?Bl:Cl,order:0,matched:Hl}}rollExpression(tl){const V=this.rollType(tl.head),sl=[V],Xl=[],Yl=tl.ops.reduce((yl,Hl)=>{const Bl=this.rollType(Hl.tail);switch(sl.push(Bl),Xl.push(Hl.op),Hl.op){case"+":return yl+Bl.value;case"-":return yl-Bl.value;case"*":return yl*Bl.value;case"/":return yl/Bl.value;case"%":return yl%Bl.value;case"**":return yl**Bl.value;default:return yl}},V.value);return{dice:sl,ops:Xl,success:null,successes:0,failures:0,type:"expressionroll",valid:!0,value:Yl,order:0}}rollFunction(tl){const V=this.rollType(tl.expr);let sl;switch(tl.op){case"floor":sl=Math.floor(V.value);break;case"ceil":sl=Math.ceil(V.value);break;case"round":sl=Math.round(V.value);break;case"abs":sl=Math.abs(V.value);break;default:sl=V.value}return{expr:V,op:tl.op,success:null,successes:0,failures:0,type:"mathfunction",valid:!0,value:sl,order:0}}applyGroupMod(tl,V){return this.getGroupModMethod(V)(tl)}getGroupModMethod(tl){const V=sl=>sl.value;switch(tl.type){case"success":return this.getSuccessMethod(tl,V);case"failure":return this.getFailureMethod(tl,V);case"keep":return this.getKeepMethod(tl,V);case"drop":return this.getDropMethod(tl,V);default:throw new Error(`Mod ${tl.type} is not recognised`)}}applyMod(tl,V){return this.getModMethod(V)(tl)}getModMethod(tl){const V=sl=>sl.roll;switch(tl.type){case"success":return this.getSuccessMethod(tl,V);case"failure":return this.getFailureMethod(tl,V);case"crit":return this.getCritSuccessMethod(tl,V);case"critfail":return this.getCritFailureMethod(tl,V);case"keep":return sl=>this.getKeepMethod(tl,V)(sl).sort((Xl,Yl)=>Xl.order-Yl.order);case"drop":return sl=>this.getDropMethod(tl,V)(sl).sort((Xl,Yl)=>Xl.order-Yl.order);case"explode":return this.getExplodeMethod(tl);case"compound":return this.getCompoundMethod(tl);case"penetrate":return this.getPenetrateMethod(tl);case"reroll":return this.getReRollMethod(tl);case"rerollOnce":return this.getReRollOnceMethod(tl);default:throw new Error(`Mod ${tl.type} is not recognised`)}}applySort(tl,V){return tl.sort((sl,Xl)=>V.asc?sl.roll-Xl.roll:Xl.roll-sl.roll),tl.forEach((sl,Xl)=>sl.order=Xl),tl}getCritSuccessMethod(tl,V){const sl=this.rollType(tl.expr);return Xl=>Xl.map(Yl=>{if(!Yl.valid||Yl.type!=="roll"||Yl.success)return Yl;const yl=Yl;return this.successTest(tl.mod,sl.value,V(Yl))?yl.critical="success":yl.critical==="success"&&(yl.critical=null),Yl})}getCritFailureMethod(tl,V){const sl=this.rollType(tl.expr);return Xl=>Xl.map(Yl=>{if(!Yl.valid||Yl.type!=="roll"||Yl.success)return Yl;const yl=Yl;return this.successTest(tl.mod,sl.value,V(Yl))?yl.critical="failure":yl.critical==="failure"&&(yl.critical=null),Yl})}getSuccessMethod(tl,V){const sl=this.rollType(tl.expr);return Xl=>Xl.map(Yl=>(Yl.valid&&this.successTest(tl.mod,sl.value,V(Yl))&&(Yl.successes+=1),Yl))}getFailureMethod(tl,V){const sl=this.rollType(tl.expr);return Xl=>Xl.map(Yl=>(Yl.valid&&this.successTest(tl.mod,sl.value,V(Yl))&&(Yl.failures+=1),Yl))}getKeepMethod(tl,V){const sl=this.rollType(tl.expr);return Xl=>{if(Xl.length===0)return Xl;Xl=Xl.sort((Cl,Tl)=>tl.highlow==="l"?V(Tl)-V(Cl):V(Cl)-V(Tl)).sort((Cl,Tl)=>(Cl.valid?1:0)-(Tl.valid?1:0));const Yl=Math.max(Math.min(sl.value,Xl.length),0);let yl=0,Hl=0;const Bl=Xl.reduce((Cl,Tl)=>(Tl.valid?1:0)+Cl,0)-Yl;for(;Hl<Xl.length&&yl<Bl;)Xl[Hl].valid&&(Xl[Hl].valid=!1,Xl[Hl].drop=!0,yl++),Hl++;return Xl}}getDropMethod(tl,V){const sl=this.rollType(tl.expr);return Xl=>{Xl=Xl.sort((Bl,Cl)=>tl.highlow==="h"?V(Cl)-V(Bl):V(Bl)-V(Cl));const Yl=Math.max(Math.min(sl.value,Xl.length),0);let yl=0,Hl=0;for(;Hl<Xl.length&&yl<Yl;)Xl[Hl].valid&&(Xl[Hl].valid=!1,Xl[Hl].drop=!0,yl++),Hl++;return Xl}}getExplodeMethod(tl){const V=tl.target?this.rollType(tl.target.value):null;return sl=>{const Xl=V?Yl=>this.successTest(tl.target.mod,V.value,Yl.roll):Yl=>this.successTest("=",Yl.type==="fateroll"?1:Yl.die,Yl.roll);if(sl[0].type==="roll"&&Xl({roll:1})&&Xl({roll:sl[0].die}))throw new Error("Invalid reroll target");for(let Yl=0;Yl<sl.length;Yl++){let yl=sl[Yl];yl.order=Yl;let Hl=0;for(;Xl(yl)&&Hl++<1e3;){yl.explode=!0;const Bl=this.reRoll(yl,++Yl);sl.splice(Yl,0,Bl),yl=Bl}}return sl}}getCompoundMethod(tl){const V=tl.target?this.rollType(tl.target.value):null;return sl=>{const Xl=V?Yl=>this.successTest(tl.target.mod,V.value,Yl.roll):Yl=>this.successTest("=",Yl.type==="fateroll"?1:Yl.die,Yl.roll);if(sl[0].type==="roll"&&Xl({roll:1})&&Xl({roll:sl[0].die}))throw new Error("Invalid reroll target");for(let Yl=0;Yl<sl.length;Yl++){let yl=sl[Yl],Hl=yl.roll,Bl=0;for(;Xl(yl)&&Bl++<1e3;){yl.explode=!0;const Cl=this.reRoll(yl,Yl+1);Hl+=Cl.roll,yl=Cl}sl[Yl].value=Hl,sl[Yl].roll=Hl}return sl}}getPenetrateMethod(tl){const V=tl.target?this.rollType(tl.target.value):null;return sl=>{const Xl=V?Yl=>this.successTest(tl.target.mod,V.value,Yl.roll):Yl=>this.successTest("=",Yl.type==="fateroll"?1:Yl.die,Yl.roll);if(V&&sl[0].type==="roll"&&Xl(sl[0])&&this.successTest(tl.target.mod,V.value,1))throw new Error("Invalid reroll target");for(let Yl=0;Yl<sl.length;Yl++){let yl=sl[Yl];yl.order=Yl;let Hl=0;for(;Xl(yl)&&Hl++<1e3;){yl.explode=!0;const Bl=this.reRoll(yl,++Yl);Bl.value-=1,sl.splice(Yl,0,Bl),yl=Bl}}return sl}}getReRollMethod(tl){const V=tl.target?this.successTest.bind(null,tl.target.mod,this.rollType(tl.target.value).value):this.successTest.bind(null,"=",1);return sl=>{if(sl[0].type==="roll"&&V(1)&&V(sl[0].die))throw new Error("Invalid reroll target");for(let Xl=0;Xl<sl.length;Xl++)for(;V(sl[Xl].roll);){sl[Xl].reroll=!0,sl[Xl].valid=!1;const Yl=this.reRoll(sl[Xl],Xl+1);sl.splice(++Xl,0,Yl)}return sl}}getReRollOnceMethod(tl){const V=tl.target?this.successTest.bind(null,tl.target.mod,this.rollType(tl.target.value).value):this.successTest.bind(null,"=",1);return sl=>{if(sl[0].type==="roll"&&V(1)&&V(sl[0].die))throw new Error("Invalid reroll target");for(let Xl=0;Xl<sl.length;Xl++)if(V(sl[Xl].roll)){sl[Xl].reroll=!0,sl[Xl].valid=!1;const Yl=this.reRoll(sl[Xl],Xl+1);sl.splice(++Xl,0,Yl)}return sl}}successTest(tl,V,sl){switch(tl){case">":return sl>=V;case"<":return sl<=V;default:return sl==V}}reRoll(tl,V){switch(tl.type){case"roll":return this.generateDiceRoll(tl.die,V);case"fateroll":return this.generateFateRoll(V);default:throw new Error(`Cannot do a reroll of a ${tl.type}.`)}}generateDiceRoll(tl,V){const sl=parseInt((this.randFunction()*tl).toFixed(),10)+1;return{critical:sl===tl?"success":sl===1?"failure":null,die:tl,matched:!1,order:V,roll:sl,success:null,successes:0,failures:0,type:"roll",valid:!0,value:sl}}generateFateRoll(tl){const V=Math.floor(3*this.randFunction())-1;return{matched:!1,order:tl,roll:V,success:null,successes:0,failures:0,type:"fateroll",valid:!0,value:V}}}},619:(nl,el)=>{Object.defineProperty(el,"__esModule",{value:!0}),el.DiscordRollRenderer=void 0,el.DiscordRollRenderer=class{render(J){return this.doRender(J,!0)}doRender(J,il=!1){let tl="";switch(J.type){case"diceexpressionroll":tl=this.renderGroupExpr(J);break;case"grouproll":tl=this.renderGroup(J);break;case"die":tl=this.renderDie(J);break;case"expressionroll":tl=this.renderExpression(J);break;case"mathfunction":tl=this.renderFunction(J);break;case"roll":return this.renderRoll(J);case"fateroll":return this.renderFateRoll(J);case"number":const V=J.label?` (${J.label})`:"";return`${J.value}${V}`;case"fate":return"F";default:throw new Error("Unable to render")}return J.valid||(tl="~~"+tl.replace(/~~/g,"")+"~~"),il?this.stripBrackets(tl):J.label?`(${J.label}: ${tl})`:tl}renderGroup(J){const il=[];for(const tl of J.dice)il.push(this.doRender(tl));return il.length>1?`{ ${il.join(" + ")} } = ${J.value}`:`{ ${this.stripBrackets(il[0])} } = ${J.value}`}renderGroupExpr(J){const il=[];for(const tl of J.dice)il.push(this.doRender(tl));return il.length>1?`(${il.join(" + ")} = ${J.value})`:il[0]}renderDie(J){const il=[];for(const sl of J.rolls)il.push(this.doRender(sl));let tl=`${il.join(", ")}`;["number","fate"].includes(J.die.type)&&J.count.type==="number"||(tl+=`[*Rolling: ${this.doRender(J.count)}d${this.doRender(J.die)}*]`);const V=J.matched?" Match"+(J.value===1?"":"es"):"";return tl+=` = ${J.value}${V}`,`(${tl})`}renderExpression(J){if(J.dice.length>1){const il=[];for(let tl=0;tl<J.dice.length-1;tl++)il.push(this.doRender(J.dice[tl])),il.push(J.ops[tl]);return il.push(this.doRender(J.dice.slice(-1)[0])),il.push("="),il.push(J.value+""),`(${il.join(" ")})`}return J.dice[0].type==="number"?J.value+"":this.doRender(J.dice[0])}renderFunction(J){const il=this.doRender(J.expr);return`(${J.op}${this.addBrackets(il)} = ${J.value})`}addBrackets(J){return J.startsWith("(")||(J=`(${J}`),J.endsWith(")")||(J=`${J})`),J}stripBrackets(J){return J.startsWith("(")&&(J=J.substring(1)),J.endsWith(")")&&(J=J.substring(0,J.length-1)),J}renderRoll(J){let il=`${J.roll}`;return J.valid?J.success&&J.value===1?il=`**${J.roll}**`:J.success&&J.value===-1?il=`*${J.roll}*`:J.success||J.critical!=="success"?J.success||J.critical!=="failure"||(il=`*${J.roll}*`):il=`**${J.roll}**`:il=`~~${J.roll}~~`,J.matched&&(il=`__${il}__`),il}renderFateRoll(J){const il=J.roll===0?"0":J.roll>0?"+":"-";let tl=`${J.roll}`;return J.valid?J.success&&J.value===1?tl=`**${il}**`:J.success&&J.value===-1&&(tl=`*${il}*`):tl=`~~${il}~~`,J.matched&&(tl=`__${tl}__`),tl}}},607:function(nl,el,J){var il=this&&this.__createBinding||(Object.create?function(V,sl,Xl,Yl){Yl===void 0&&(Yl=Xl);var yl=Object.getOwnPropertyDescriptor(sl,Xl);yl&&!("get"in yl?!sl.__esModule:yl.writable||yl.configurable)||(yl={enumerable:!0,get:function(){return sl[Xl]}}),Object.defineProperty(V,Yl,yl)}:function(V,sl,Xl,Yl){Yl===void 0&&(Yl=Xl),V[Yl]=sl[Xl]}),tl=this&&this.__exportStar||function(V,sl){for(var Xl in V)Xl==="default"||Object.prototype.hasOwnProperty.call(sl,Xl)||il(sl,V,Xl)};Object.defineProperty(el,"__esModule",{value:!0}),tl(J(95),el),tl(J(604),el),tl(J(234),el),tl(J(619),el),tl(J(54),el)},604:(nl,el)=>{Object.defineProperty(el,"__esModule",{value:!0})},234:(nl,el)=>{Object.defineProperty(el,"__esModule",{value:!0})},54:(nl,el)=>{Object.defineProperty(el,"__esModule",{value:!0})},51:nl=>{function el(J,il,tl,V){this.message=J,this.expected=il,this.found=tl,this.location=V,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,el)}(function(J,il){function tl(){this.constructor=J}tl.prototype=il.prototype,J.prototype=new tl})(el,Error),el.buildMessage=function(J,il){var tl={literal:function(Yl){return'"'+sl(Yl.text)+'"'},class:function(Yl){var yl,Hl="";for(yl=0;yl<Yl.parts.length;yl++)Hl+=Yl.parts[yl]instanceof Array?Xl(Yl.parts[yl][0])+"-"+Xl(Yl.parts[yl][1]):Xl(Yl.parts[yl]);return"["+(Yl.inverted?"^":"")+Hl+"]"},any:function(Yl){return"any character"},end:function(Yl){return"end of input"},other:function(Yl){return Yl.description}};function V(Yl){return Yl.charCodeAt(0).toString(16).toUpperCase()}function sl(Yl){return Yl.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(yl){return"\\x0"+V(yl)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(yl){return"\\x"+V(yl)})}function Xl(Yl){return Yl.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(yl){return"\\x0"+V(yl)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(yl){return"\\x"+V(yl)})}return"Expected "+function(Yl){var yl,Hl,Bl,Cl=new Array(Yl.length);for(yl=0;yl<Yl.length;yl++)Cl[yl]=(Bl=Yl[yl],tl[Bl.type](Bl));if(Cl.sort(),Cl.length>0){for(yl=1,Hl=1;yl<Cl.length;yl++)Cl[yl-1]!==Cl[yl]&&(Cl[Hl]=Cl[yl],Hl++);Cl.length=Hl}switch(Cl.length){case 1:return Cl[0];case 2:return Cl[0]+" or "+Cl[1];default:return Cl.slice(0,-1).join(", ")+", or "+Cl[Cl.length-1]}}(J)+" but "+function(Yl){return Yl?'"'+sl(Yl)+'"':"end of input"}(il)+" found."},nl.exports={SyntaxError:el,parse:function(J,il){il=il!==void 0?il:{};var tl,V={},sl={start:fe},Xl=fe,Yl={type:"any"},yl=Al("[[",!1),Hl=Al("]]",!1),Bl=function(rl,fl){return fl&&(rl.label=fl),rl},Cl=">",Tl=Al(">",!1),Ql="<",cd=Al("<",!1),nd="=",ud=Al("=",!1),yd=Al("f",!1),sd=Al("cs",!1),Gd=Al("cf",!1),Vd=Al("m",!1),oe=Al("t",!1),Xe=Al("k",!1),me=Al("l",!1),Dd=Al("h",!1),_d=Al("d",!1),Kd=Al("{",!1),Ze=Al(",",!1),ve=Al("}",!1),gd="+",Ed=Al("+",!1),Je=Al("s",!1),Le=Al("a",!1),Se=Al("!",!1),Ne=Al("!!",!1),Ad=Al("!p",!1),re=Al("r",!1),he=Al("ro",!1),Od=Al("F",!1),vd=Al("%",!1),$d=Al("(",!1),qd=Al(")",!1),zd=Al("-",!1),le=function(rl,fl){return fl.length==0?rl:{head:rl,type:"expression",ops:fl.map(vl=>({type:"math",op:vl[1],tail:vl[3]}))}},Ge=Al("*",!1),Re=Al("/",!1),Td="**",We=Al("**",!1),de="floor",pe=Al("floor",!1),Ve="ceil",Fe=Al("ceil",!1),ee="round",Ye=Al("round",!1),He=Al("abs",!1),xe=Sd("integer"),te=/^[0-9]/,ce=be([["0","9"]],!1,!1),ol=Al("[",!1),ql=/^[^\]]/,Jd=be(["]"],!0,!1),hd=Al("]",!1),ne=Sd("whitespace"),Kl=/^[ \t\n\r]/,_l=be([" ","	",`
`,"\r"],!1,!1),al=0,dd=0,Ld=[{line:1,column:1}],Zd=0,El=[],gl=0;if("startRule"in il){if(!(il.startRule in sl))throw new Error(`Can't start parsing from rule "`+il.startRule+'".');Xl=sl[il.startRule]}function Al(rl,fl){return{type:"literal",text:rl,ignoreCase:fl}}function be(rl,fl,vl){return{type:"class",parts:rl,inverted:fl,ignoreCase:vl}}function Sd(rl){return{type:"other",description:rl}}function Nd(rl){var fl,vl=Ld[rl];if(vl)return vl;for(fl=rl-1;!Ld[fl];)fl--;for(vl={line:(vl=Ld[fl]).line,column:vl.column};fl<rl;)J.charCodeAt(fl)===10?(vl.line++,vl.column=1):vl.column++,fl++;return Ld[rl]=vl,vl}function se(rl,fl){var vl=Nd(rl),Nl=Nd(fl);return{start:{offset:rl,line:vl.line,column:vl.column},end:{offset:fl,line:Nl.line,column:Nl.column}}}function zl(rl){al<Zd||(al>Zd&&(Zd=al,El=[]),El.push(rl))}function fe(){var rl,fl,vl,Nl,Ul,xl;if(rl=al,(fl=xd())!==V){for(vl=[],J.length>al?(Nl=J.charAt(al),al++):(Nl=V,gl===0&&zl(Yl));Nl!==V;)vl.push(Nl),J.length>al?(Nl=J.charAt(al),al++):(Nl=V,gl===0&&zl(Yl));vl!==V?(dd=rl,xl=vl,(Ul=fl).root=!0,xl&&(Ul.label=xl.join("")),rl=fl=Ul):(al=rl,rl=V)}else al=rl,rl=V;return rl}function Rd(){var rl,fl,vl;return rl=al,J.charCodeAt(al)===62?(fl=Cl,al++):(fl=V,gl===0&&zl(Tl)),fl===V&&(J.charCodeAt(al)===60?(fl=Ql,al++):(fl=V,gl===0&&zl(cd)),fl===V&&(J.charCodeAt(al)===61?(fl=nd,al++):(fl=V,gl===0&&zl(ud)))),fl!==V&&(vl=Xd())!==V?(dd=rl,rl=fl={type:"success",mod:fl,expr:vl}):(al=rl,rl=V),rl}function Wd(){var rl,fl,vl,Nl;return rl=al,J.charCodeAt(al)===102?(fl="f",al++):(fl=V,gl===0&&zl(yd)),fl!==V?(J.charCodeAt(al)===62?(vl=Cl,al++):(vl=V,gl===0&&zl(Tl)),vl===V&&(J.charCodeAt(al)===60?(vl=Ql,al++):(vl=V,gl===0&&zl(cd)),vl===V&&(J.charCodeAt(al)===61?(vl=nd,al++):(vl=V,gl===0&&zl(ud)))),vl===V&&(vl=null),vl!==V&&(Nl=Xd())!==V?(dd=rl,rl=fl={type:"failure",mod:vl,expr:Nl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function Ud(){var rl,fl,vl,Nl;return rl=al,J.substr(al,2)==="cs"?(fl="cs",al+=2):(fl=V,gl===0&&zl(sd)),fl!==V?(J.charCodeAt(al)===62?(vl=Cl,al++):(vl=V,gl===0&&zl(Tl)),vl===V&&(J.charCodeAt(al)===60?(vl=Ql,al++):(vl=V,gl===0&&zl(cd)),vl===V&&(J.charCodeAt(al)===61?(vl=nd,al++):(vl=V,gl===0&&zl(ud)))),vl===V&&(vl=null),vl!==V&&(Nl=Xd())!==V?(dd=rl,rl=fl={type:"crit",mod:vl,expr:Nl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function kd(){var rl,fl,vl,Nl;return rl=al,J.substr(al,2)==="cf"?(fl="cf",al+=2):(fl=V,gl===0&&zl(Gd)),fl!==V?(J.charCodeAt(al)===62?(vl=Cl,al++):(vl=V,gl===0&&zl(Tl)),vl===V&&(J.charCodeAt(al)===60?(vl=Ql,al++):(vl=V,gl===0&&zl(cd)),vl===V&&(J.charCodeAt(al)===61?(vl=nd,al++):(vl=V,gl===0&&zl(ud)))),vl===V&&(vl=null),vl!==V&&(Nl=Xd())!==V?(dd=rl,rl=fl={type:"critfail",mod:vl,expr:Nl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function Fd(){var rl,fl,vl,Nl;return rl=al,J.charCodeAt(al)===107?(fl="k",al++):(fl=V,gl===0&&zl(Xe)),fl!==V?(J.charCodeAt(al)===108?(vl="l",al++):(vl=V,gl===0&&zl(me)),vl===V&&(J.charCodeAt(al)===104?(vl="h",al++):(vl=V,gl===0&&zl(Dd))),vl===V&&(vl=null),vl!==V?((Nl=Xd())===V&&(Nl=null),Nl!==V?(dd=rl,rl=fl={type:"keep",highlow:vl,expr:Nl||Ll}):(al=rl,rl=V)):(al=rl,rl=V)):(al=rl,rl=V),rl}function Hd(){var rl,fl,vl,Nl;return rl=al,J.charCodeAt(al)===100?(fl="d",al++):(fl=V,gl===0&&zl(_d)),fl!==V?(J.charCodeAt(al)===108?(vl="l",al++):(vl=V,gl===0&&zl(me)),vl===V&&(J.charCodeAt(al)===104?(vl="h",al++):(vl=V,gl===0&&zl(Dd))),vl===V&&(vl=null),vl!==V?((Nl=Xd())===V&&(Nl=null),Nl!==V?(dd=rl,rl=fl={type:"drop",highlow:vl,expr:Nl||Ll}):(al=rl,rl=V)):(al=rl,rl=V)):(al=rl,rl=V),rl}function Pd(){var rl,fl,vl,Nl,Ul,xl,kl,Ml,Il,jl;if(rl=al,(fl=Id())!==V){for(vl=[],Nl=al,(Ul=hl())!==V?(J.charCodeAt(al)===43?(xl=gd,al++):(xl=V,gl===0&&zl(Ed)),xl!==V&&(kl=hl())!==V&&(Ml=Id())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);Nl!==V;)vl.push(Nl),Nl=al,(Ul=hl())!==V?(J.charCodeAt(al)===43?(xl=gd,al++):(xl=V,gl===0&&zl(Ed)),xl!==V&&(kl=hl())!==V&&(Ml=Id())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);vl!==V?(dd=rl,Il=fl,rl=fl=(jl=vl).length==0?Il:{head:Il,type:"diceExpression",ops:jl.map(Dl=>({type:"math",op:Dl[1],tail:Dl[3]}))}):(al=rl,rl=V)}else al=rl,rl=V;return rl}function Id(){var rl;return(rl=ie())===V&&(rl=xd()),rl}function ie(){var rl,fl,vl;return rl=al,fl=function(){var Nl,Ul,xl,kl,Ml;if(Nl=al,Ul=function(){var Il,jl,Dl,ld,Ol,$l;if(Il=al,jl=function(){var td,ad,bd,od;return td=al,(ad=Xd())===V&&(ad=null),ad!==V?(J.charCodeAt(al)===100?(bd="d",al++):(bd=V,gl===0&&zl(_d)),bd!==V?(od=function(){var md,id;return md=al,J.charCodeAt(al)===70?(id="F",al++):(id=V,gl===0&&zl(Od)),id===V&&(J.charCodeAt(al)===102?(id="f",al++):(id=V,gl===0&&zl(yd))),id!==V&&(dd=md,id={type:"fate"}),id}(),od===V&&(od=function(){var md,id;return md=al,J.charCodeAt(al)===37?(id="%",al++):(id=V,gl===0&&zl(vd)),id!==V&&(dd=md,id={type:"number",value:"100"}),id}(),od===V&&(od=Xd())),od!==V?(dd=td,td=ad={die:od,count:ad||{type:"number",value:1},type:"die"}):(al=td,td=V)):(al=td,td=V)):(al=td,td=V),td}(),jl!==V){for(Dl=[],(ld=Yd())===V&&(ld=rd())===V&&(ld=ue())===V&&(ld=jd())===V&&(ld=Qd());ld!==V;)Dl.push(ld),(ld=Yd())===V&&(ld=rd())===V&&(ld=ue())===V&&(ld=jd())===V&&(ld=Qd());Dl!==V?(dd=Il,$l=Dl,(Ol=jl).mods=(Ol.mods||[]).concat($l),Il=jl=Ol):(al=Il,Il=V)}else al=Il,Il=V;return Il}(),Ul!==V){for(xl=[],(kl=Hd())===V&&(kl=Fd())===V&&(kl=Rd())===V&&(kl=Wd())===V&&(kl=kd())===V&&(kl=Ud());kl!==V;)xl.push(kl),(kl=Hd())===V&&(kl=Fd())===V&&(kl=Rd())===V&&(kl=Wd())===V&&(kl=kd())===V&&(kl=Ud());xl!==V?((kl=function(){var Il,jl,Dl,ld,Ol;return Il=al,J.charCodeAt(al)===109?(jl="m",al++):(jl=V,gl===0&&zl(Vd)),jl!==V?(J.charCodeAt(al)===116?(Dl="t",al++):(Dl=V,gl===0&&zl(oe)),Dl===V&&(Dl=null),Dl!==V?((ld=Md())===V&&(ld=null),ld!==V?(Ol=function(){var $l,td,ad;return $l=al,J.charCodeAt(al)===62?(td=Cl,al++):(td=V,gl===0&&zl(Tl)),td===V&&(J.charCodeAt(al)===60?(td=Ql,al++):(td=V,gl===0&&zl(cd)),td===V&&(J.charCodeAt(al)===61?(td=nd,al++):(td=V,gl===0&&zl(ud)))),td!==V&&(ad=Xd())!==V?(dd=$l,$l=td={mod:td,expr:ad}):(al=$l,$l=V),$l}(),Ol===V&&(Ol=null),Ol!==V?(dd=Il,Il=jl=function($l,td,ad){const bd={type:"match",min:td||{type:"number",value:2},count:!!$l};return ad&&(bd.mod=ad.mod,bd.expr=ad.expr),bd}(Dl,ld,Ol)):(al=Il,Il=V)):(al=Il,Il=V)):(al=Il,Il=V)):(al=Il,Il=V),Il}())===V&&(kl=null),kl!==V?(Ml=function(){var Il,jl,Dl;return Il=al,J.charCodeAt(al)===115?(jl="s",al++):(jl=V,gl===0&&zl(Je)),jl!==V?(J.charCodeAt(al)===97?(Dl="a",al++):(Dl=V,gl===0&&zl(Le)),Dl===V&&(J.charCodeAt(al)===100?(Dl="d",al++):(Dl=V,gl===0&&zl(_d))),Dl===V&&(Dl=null),Dl!==V?(dd=Il,Il=jl=Dl=="d"?{type:"sort",asc:!1}:{type:"sort",asc:!0}):(al=Il,Il=V)):(al=Il,Il=V),Il}(),Ml===V&&(Ml=null),Ml!==V?(dd=Nl,Nl=Ul=function(Il,jl,Dl,ld){const Ol=jl.filter($l=>["success","failure"].includes($l.type));return jl=jl.filter($l=>!Ol.includes($l)),Il.mods=(Il.mods||[]).concat(jl),Ol.length>0&&(Il.targets=Ol),Dl&&(Il.match=Dl),ld&&(Il.sort=ld),Il}(Ul,xl,kl,Ml)):(al=Nl,Nl=V)):(al=Nl,Nl=V)):(al=Nl,Nl=V)}else al=Nl,Nl=V;return Nl}(),fl!==V&&hl()!==V?((vl=wd())===V&&(vl=null),vl!==V?(dd=rl,rl=fl=Bl(fl,vl)):(al=rl,rl=V)):(al=rl,rl=V),rl}function ue(){var rl,fl,vl;return rl=al,J.charCodeAt(al)===33?(fl="!",al++):(fl=V,gl===0&&zl(Se)),fl!==V?((vl=pd())===V&&(vl=null),vl!==V?(dd=rl,rl=fl={type:"explode",target:vl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function Yd(){var rl,fl,vl;return rl=al,J.substr(al,2)==="!!"?(fl="!!",al+=2):(fl=V,gl===0&&zl(Ne)),fl!==V?((vl=pd())===V&&(vl=null),vl!==V?(dd=rl,rl=fl={type:"compound",target:vl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function rd(){var rl,fl,vl;return rl=al,J.substr(al,2)==="!p"?(fl="!p",al+=2):(fl=V,gl===0&&zl(Ad)),fl!==V?((vl=pd())===V&&(vl=null),vl!==V?(dd=rl,rl=fl={type:"penetrate",target:vl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function Qd(){var rl,fl,vl;return rl=al,J.charCodeAt(al)===114?(fl="r",al++):(fl=V,gl===0&&zl(re)),fl!==V?((vl=pd())===V&&(vl=null),vl!==V?(dd=rl,rl=fl={type:"reroll",target:vl||Sl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function jd(){var rl,fl,vl;return rl=al,J.substr(al,2)==="ro"?(fl="ro",al+=2):(fl=V,gl===0&&zl(he)),fl!==V?((vl=pd())===V&&(vl=null),vl!==V?(dd=rl,rl=fl={type:"rerollOnce",target:vl||Sl}):(al=rl,rl=V)):(al=rl,rl=V),rl}function pd(){var rl,fl,vl;return rl=al,J.charCodeAt(al)===62?(fl=Cl,al++):(fl=V,gl===0&&zl(Tl)),fl===V&&(J.charCodeAt(al)===60?(fl=Ql,al++):(fl=V,gl===0&&zl(cd)),fl===V&&(J.charCodeAt(al)===61?(fl=nd,al++):(fl=V,gl===0&&zl(ud)))),fl===V&&(fl=null),fl!==V&&(vl=Xd())!==V?(dd=rl,rl=fl={type:"target",mod:fl,value:vl}):(al=rl,rl=V),rl}function Xd(){var rl;return(rl=ae())===V&&(rl=Md()),rl}function xd(){var rl;return(rl=function(){var fl,vl,Nl,Ul;return fl=al,J.substr(al,2)==="[["?(vl="[[",al+=2):(vl=V,gl===0&&zl(yl)),vl!==V&&(Nl=xd())!==V?(J.substr(al,2)==="]]"?(Ul="]]",al+=2):(Ul=V,gl===0&&zl(Hl)),Ul!==V?(dd=fl,fl=vl={type:"inline",expr:Nl}):(al=fl,fl=V)):(al=fl,fl=V),fl}())===V&&(rl=Cd())===V&&(rl=ae()),rl}function ae(){var rl,fl,vl,Nl,Ul,xl,kl;return rl=al,J.charCodeAt(al)===40?(fl="(",al++):(fl=V,gl===0&&zl($d)),fl!==V&&(vl=Cd())!==V?(J.charCodeAt(al)===41?(Nl=")",al++):(Nl=V,gl===0&&zl(qd)),Nl!==V&&hl()!==V?((Ul=wd())===V&&(Ul=null),Ul!==V?(dd=rl,xl=vl,(kl=Ul)&&(xl.label=kl),rl=fl=xl):(al=rl,rl=V)):(al=rl,rl=V)):(al=rl,rl=V),rl}function Cd(){var rl,fl,vl,Nl,Ul,xl,kl,Ml;if(rl=al,(fl=Bd())!==V){for(vl=[],Nl=al,(Ul=hl())!==V?(J.charCodeAt(al)===43?(xl=gd,al++):(xl=V,gl===0&&zl(Ed)),xl===V&&(J.charCodeAt(al)===45?(xl="-",al++):(xl=V,gl===0&&zl(zd))),xl!==V&&(kl=hl())!==V&&(Ml=Bd())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);Nl!==V;)vl.push(Nl),Nl=al,(Ul=hl())!==V?(J.charCodeAt(al)===43?(xl=gd,al++):(xl=V,gl===0&&zl(Ed)),xl===V&&(J.charCodeAt(al)===45?(xl="-",al++):(xl=V,gl===0&&zl(zd))),xl!==V&&(kl=hl())!==V&&(Ml=Bd())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);vl!==V?(dd=rl,rl=fl=le(fl,vl)):(al=rl,rl=V)}else al=rl,rl=V;return rl}function Bd(){var rl,fl,vl,Nl,Ul,xl,kl,Ml;if(rl=al,(fl=fd())!==V){for(vl=[],Nl=al,(Ul=hl())!==V?(J.charCodeAt(al)===42?(xl="*",al++):(xl=V,gl===0&&zl(Ge)),xl===V&&(J.charCodeAt(al)===47?(xl="/",al++):(xl=V,gl===0&&zl(Re))),xl!==V&&(kl=hl())!==V&&(Ml=fd())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);Nl!==V;)vl.push(Nl),Nl=al,(Ul=hl())!==V?(J.charCodeAt(al)===42?(xl="*",al++):(xl=V,gl===0&&zl(Ge)),xl===V&&(J.charCodeAt(al)===47?(xl="/",al++):(xl=V,gl===0&&zl(Re))),xl!==V&&(kl=hl())!==V&&(Ml=fd())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);vl!==V?(dd=rl,rl=fl=le(fl,vl)):(al=rl,rl=V)}else al=rl,rl=V;return rl}function fd(){var rl,fl,vl,Nl,Ul,xl,kl,Ml;if(rl=al,(fl=ed())!==V){for(vl=[],Nl=al,(Ul=hl())!==V?(J.substr(al,2)===Td?(xl=Td,al+=2):(xl=V,gl===0&&zl(We)),xl===V&&(J.charCodeAt(al)===37?(xl="%",al++):(xl=V,gl===0&&zl(vd))),xl!==V&&(kl=hl())!==V&&(Ml=ed())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);Nl!==V;)vl.push(Nl),Nl=al,(Ul=hl())!==V?(J.substr(al,2)===Td?(xl=Td,al+=2):(xl=V,gl===0&&zl(We)),xl===V&&(J.charCodeAt(al)===37?(xl="%",al++):(xl=V,gl===0&&zl(vd))),xl!==V&&(kl=hl())!==V&&(Ml=ed())!==V?Nl=Ul=[Ul,xl,kl,Ml]:(al=Nl,Nl=V)):(al=Nl,Nl=V);vl!==V?(dd=rl,rl=fl=le(fl,vl)):(al=rl,rl=V)}else al=rl,rl=V;return rl}function ed(){var rl;return(rl=function(){var fl,vl,Nl,Ul,xl;return fl=al,vl=function(){var kl;return J.substr(al,5)===de?(kl=de,al+=5):(kl=V,gl===0&&zl(pe)),kl===V&&(J.substr(al,4)===Ve?(kl=Ve,al+=4):(kl=V,gl===0&&zl(Fe)),kl===V&&(J.substr(al,5)===ee?(kl=ee,al+=5):(kl=V,gl===0&&zl(Ye)),kl===V&&(J.substr(al,3)==="abs"?(kl="abs",al+=3):(kl=V,gl===0&&zl(He))))),kl}(),vl!==V&&hl()!==V?(J.charCodeAt(al)===40?(Nl="(",al++):(Nl=V,gl===0&&zl($d)),Nl!==V&&hl()!==V&&(Ul=Cd())!==V&&hl()!==V?(J.charCodeAt(al)===41?(xl=")",al++):(xl=V,gl===0&&zl(qd)),xl!==V?(dd=fl,fl=vl={type:"mathfunction",op:vl,expr:Ul}):(al=fl,fl=V)):(al=fl,fl=V)):(al=fl,fl=V),fl}())===V&&(rl=function(){var fl,vl,Nl;return fl=al,vl=function(){var Ul,xl,kl,Ml,Il,jl,Dl,ld;if(Ul=al,xl=function(){var Ol,$l,td,ad,bd,od,md,id,ye;if(Ol=al,J.charCodeAt(al)===123?($l="{",al++):($l=V,gl===0&&zl(Kd)),$l!==V)if(hl()!==V)if((td=Pd())!==V){for(ad=[],bd=al,(od=hl())!==V?(J.charCodeAt(al)===44?(md=",",al++):(md=V,gl===0&&zl(Ze)),md!==V&&(id=hl())!==V&&(ye=Pd())!==V?bd=od=[od,md,id,ye]:(al=bd,bd=V)):(al=bd,bd=V);bd!==V;)ad.push(bd),bd=al,(od=hl())!==V?(J.charCodeAt(al)===44?(md=",",al++):(md=V,gl===0&&zl(Ze)),md!==V&&(id=hl())!==V&&(ye=Pd())!==V?bd=od=[od,md,id,ye]:(al=bd,bd=V)):(al=bd,bd=V);ad!==V&&(bd=hl())!==V?(J.charCodeAt(al)===125?(od="}",al++):(od=V,gl===0&&zl(ve)),od!==V?(dd=Ol,Ol=$l={rolls:[td,...ad.map(Ce=>Ce[3])],type:"group"}):(al=Ol,Ol=V)):(al=Ol,Ol=V)}else al=Ol,Ol=V;else al=Ol,Ol=V;else al=Ol,Ol=V;return Ol}(),xl!==V){for(kl=[],(Ml=Fd())===V&&(Ml=Hd())===V&&(Ml=Rd())===V&&(Ml=Wd());Ml!==V;)kl.push(Ml),(Ml=Fd())===V&&(Ml=Hd())===V&&(Ml=Rd())===V&&(Ml=Wd());kl!==V&&(Ml=hl())!==V?((Il=wd())===V&&(Il=null),Il!==V?(dd=Ul,jl=xl,ld=Il,(Dl=kl).length>0&&(jl.mods=(jl.mods||[]).concat(Dl)),ld&&(jl.label=ld),Ul=xl=jl):(al=Ul,Ul=V)):(al=Ul,Ul=V)}else al=Ul,Ul=V;return Ul}(),vl===V&&(vl=ie())===V&&(vl=Md()),vl!==V&&hl()!==V?((Nl=wd())===V&&(Nl=null),Nl!==V?(dd=fl,fl=vl=Bl(vl,Nl)):(al=fl,fl=V)):(al=fl,fl=V),fl}())===V&&(rl=ae()),rl}function Md(){var rl,fl,vl,Nl;if(gl++,rl=al,J.charCodeAt(al)===45?(fl="-",al++):(fl=V,gl===0&&zl(zd)),fl===V&&(fl=null),fl!==V){if(vl=[],te.test(J.charAt(al))?(Nl=J.charAt(al),al++):(Nl=V,gl===0&&zl(ce)),Nl!==V)for(;Nl!==V;)vl.push(Nl),te.test(J.charAt(al))?(Nl=J.charAt(al),al++):(Nl=V,gl===0&&zl(ce));else vl=V;vl!==V?(dd=rl,rl=fl={type:"number",value:parseInt(J.substring(dd,al),10)}):(al=rl,rl=V)}else al=rl,rl=V;return gl--,rl===V&&(fl=V,gl===0&&zl(xe)),rl}function wd(){var rl,fl,vl,Nl;if(rl=al,J.charCodeAt(al)===91?(fl="[",al++):(fl=V,gl===0&&zl(ol)),fl!==V){if(vl=[],ql.test(J.charAt(al))?(Nl=J.charAt(al),al++):(Nl=V,gl===0&&zl(Jd)),Nl!==V)for(;Nl!==V;)vl.push(Nl),ql.test(J.charAt(al))?(Nl=J.charAt(al),al++):(Nl=V,gl===0&&zl(Jd));else vl=V;vl!==V?(J.charCodeAt(al)===93?(Nl="]",al++):(Nl=V,gl===0&&zl(hd)),Nl!==V?(dd=rl,rl=fl=vl.join("")):(al=rl,rl=V)):(al=rl,rl=V)}else al=rl,rl=V;return rl}function hl(){var rl,fl;for(gl++,rl=[],Kl.test(J.charAt(al))?(fl=J.charAt(al),al++):(fl=V,gl===0&&zl(_l));fl!==V;)rl.push(fl),Kl.test(J.charAt(al))?(fl=J.charAt(al),al++):(fl=V,gl===0&&zl(_l));return gl--,rl===V&&(fl=V,gl===0&&zl(ne)),rl}const Sl={type:"target",mod:"=",value:{type:"number",value:1}},Ll={type:"number",value:1};if((tl=Xl())!==V&&al===J.length)return tl;throw tl!==V&&al<J.length&&zl({type:"end"}),Fl=El,Pl=Zd<J.length?J.charAt(Zd):null,wl=Zd<J.length?se(Zd,Zd+1):se(Zd,Zd),new el(el.buildMessage(Fl,Pl),Fl,Pl,wl);var Fl,Pl,wl}}}},dl={};return function nl(el){var J=dl[el];if(J!==void 0)return J.exports;var il=dl[el]={exports:{}};return F[el].call(il.exports,il,il.exports,nl),il.exports}(607)})())})(dist$1);var distExports$1=dist$1.exports;let externalCount=0;class ParserInterface{constructor(Y={}){this.rollsAsFloats=[],this.dieGroups=[],this.parsedNotation=null,this.finalResults=null,this.targetRollsCritSuccess=Y?.targetRollsCritSuccess||Y?.targetRollsCrit||!1,this.targetRollsCritFailure=Y?.targetRollsCritFailure||Y?.targetRollsCrit||!1,this.initParser()}initParser(){this.rollParser=new distExports$1.DiceRoller((Y=this.rollsAsFloats)=>Y.length>0?Y[externalCount++]:(console.warn("No result was passed to the dice-roller-parser. Using fallback Math.random"),Math.random()))}parseNotation(Y){this.clear(),Y=Y.replace(/d00/,"d%"),this.parsedNotation=this.rollParser.parse(Y);const F=dl=>{const nl=dl.die.value||dl.die.type;this.dieGroups.push({qty:dl.count.value,sides:nl,mods:dl.mods})};return this.recursiveSearch(this.parsedNotation,"die",[],F),this.dieGroups}rollNotation(Y){return this.finalResults=this.rollParser.rollParsed(Y),this.finalResults}clear(){externalCount=0,this.rollsAsFloats=[],this.dieGroups=[],this.parsedNotation=null,this.finalResults=null}recursiveSearch(Y,F,dl=[],nl){const el=dl;return Object.keys(Y).forEach(J=>{const il=Y[J];J===F?(el.push(il),nl&&typeof nl=="function"&&nl(Y)):il&&typeof il=="object"&&this.recursiveSearch(il,F,el,nl)}),el}incrementId(Y){Y=Y.toString();let F=Y.split(".");return F[1]?F[1]=parseInt(F[1])+1:F[1]=1,F[0]+"."+F[1]}handleRerolls(Y=[]){const F=[];return Y.forEach((dl,nl)=>{if(dl.mods?.length>0){const el=(tl,V,sl)=>{switch(V){case">":return tl>=sl;case"<":return tl<=sl;case"=":default:return tl==sl}},J=dl.rolls.map(tl=>tl.rollId),il=tl=>{const V=this.incrementId(tl);return J.includes(V)};dl.mods.forEach(tl=>{const V={...dl.rolls};switch(tl.type){case"explode":case"compound":Object.entries(V).forEach(([sl,Xl])=>{const Yl=Xl.sides,yl=tl.target?.value?.value||Yl,Hl=tl.target?.mod||">";el(Xl.value,Hl,yl)&&!il(Xl.rollId)&&F.push({groupId:nl,rollId:this.incrementId(Xl.rollId),sides:Xl.sides,qty:1})});break;case"penetrate":Object.entries(V).forEach(([sl,Xl])=>{const Yl=Xl.sides,yl=tl.target?.value?.value||Yl,Hl=tl.target?.mod||"=";el(Xl.value,Hl,yl)&&!il(Xl.rollId)&&F.push({groupId:nl,rollId:this.incrementId(Xl.rollId),sides:Xl.sides,qty:1})});break;case"reroll":Object.entries(V).forEach(([sl,Xl])=>{Xl.sides,el(Xl.value,tl.target.mod,tl.target.value.value)&&!il(Xl.rollId)&&F.push({groupId:nl,rollId:this.incrementId(Xl.rollId),sides:Xl.sides,qty:1})});break;case"rerollOnce":Object.entries(V).forEach(([sl,Xl])=>{const Yl=tl.target?.value?.value,yl=tl.target.mod;el(Xl.value,yl,Yl)&&!il(Xl.rollId)&&!Xl.rollId.toString().includes(".")&&F.push({groupId:nl,rollId:this.incrementId(Xl.rollId),sides:Xl.sides,qty:1})});break}})}}),F}handleTargetCritSuccess(Y=[]){Y.rolls.forEach(F=>{F.successes>=1&&F.critical==="success"&&(F.successes+=1,Y.value+=1)})}handleTargetCritFailure(Y=[]){Y.rolls.forEach(F=>{F.failures>=1&&F.critical==="failure"&&(F.failures+=1,Y.value-=1)})}parseFinalResults(Y=[]){let F=this.recursiveSearch(Y,"rolls");(F.length?F:[Y]).forEach(el=>Object.entries(el).forEach(([J,il])=>{try{let tl=il.sides;const V=/[dD]\d+/i;typeof tl=="string"&&tl.match(V)&&(tl=parseInt(il.sides.substring(1))),tl&&(tl==="fate"?this.rollsAsFloats.push((il.value+2)*.25):this.rollsAsFloats.push((il.value-1)/tl))}catch{throw console.error("This object is not a properly formatted roll object.",il),new Error("Unable to parse final results")}}));const nl=this.rollParser.rollParsed(this.parsedNotation);return this.targetRollsCritSuccess&&nl.success!==null&&this.handleTargetCritSuccess(nl),this.targetRollsCritFailure&&nl.success!==null&&this.handleTargetCritFailure(nl),this.finalResults=nl,externalCount=0,this.rollsAsFloats=[],nl}}const noop=()=>{},defaultNotation={d4:{count:0},d6:{count:0},d8:{count:0},d10:{count:0},d12:{count:0},d20:{count:0},d100:{count:0}};function deepCopy(C){return JSON.parse(JSON.stringify(C))}class DiceUIPicker{baseMessage;target;elem;output;onSubmit;onClear;onReroll;onResults;DRP=new ParserInterface;notation=deepCopy(defaultNotation);constructor(Y){const F=window.innerWidth<Constants.MOBILEWIDTH;this.baseMessage="Use Buttons to Roll",this.target=Y.target?document.querySelector(Y.target):document.body,this.elem=this.elem=document.createRange().createContextualFragment(`
            <div class="dice-picker">
                <form>
                    <div class="dice${F?" center":""}">
                        <button class="button-47" value="d4">${F?"4":"D4"}</button>
                        <button class="button-47" value="d6">${F?"6":"D6"}</button>
                        <button class="button-47" value="d8">${F?"8":"D8"}</button>
                        ${F?"</br>":""}
                        <button class="button-47" value="d10">${F?"10":"D10"}</button>
                        <button class="button-47" value="d12">${F?"12":"D12"}</button>
                        <button class="button-47" value="d20">${F?"20":"D20"}</button>
                        <button class="button-47" value="d100">${F?"100":"D100"}</button>
                    </div>
                    <div id="buttonContainer">
                        <button id="resetButton" class="button-47" type="reset">${F?"ðŸš«":"Clear"}</button>
                        <button id="throwButton" class="button-47"type="submit">${F?"ðŸŽ²":"Throw"}</button>
                        <div id="diceNotes" class="output">${this.baseMessage}</div>
                    </div>
                </form>
            </div>
            `),this.onSubmit=Y?.onSubmit||noop,this.onClear=Y?.onClear||noop,this.onReroll=Y?.onReroll||noop,this.onResults=Y?.onResults||noop,this.output=null,this.Initialize()}Initialize(){this.output=this.elem.querySelector(".output");const Y=this.elem.querySelector("form"),F=this.elem.querySelectorAll(".dice button");F.forEach(dl=>dl.addEventListener("click",nl=>{nl.preventDefault(),this.notation[dl.value].count+=1,this.updateNotation(!1)})),F.forEach(dl=>dl.addEventListener("contextmenu",nl=>{nl.preventDefault(),this.notation[dl.value].count>0&&(this.notation[dl.value].count-=1,this.updateNotation(!1))})),Y.addEventListener("submit",dl=>{dl.preventDefault(),this.output.innerHTML!="Use Buttons to Roll"&&this.onSubmit(this.DRP.parseNotation(this.output.innerHTML))}),Y.addEventListener("reset",dl=>{dl.preventDefault(),this.updateNotation(!0)}),this.target.prepend(this.elem)}updateNotation(Y){let F="";Y?(this.clear(),F=this.baseMessage):F=Object.entries(this.notation).reduce((dl,[nl,el])=>{let J=el,il="";return dl!==""&&(il=" + "),J.count===0?dl:dl+il+J.count+nl},""),this.output.innerHTML=F}setNotation(Y={}){this.notation=Y,this.updateNotation(!1)}clear(){this.notation=deepCopy(defaultNotation),this.DRP.clear(),this.onClear()}handleResults(Y){const F=/[dD]\d+/i;Y.forEach(J=>{typeof J.sides=="string"&&J.sides.match(F)&&(J.sides=parseInt(J.sides.substring(1))),J.rolls.forEach(il=>{typeof il.sides=="string"&&il.sides.match(F)&&(il.sides=parseInt(il.sides.substring(1)))})});const dl=this.DRP.handleRerolls(Y);if(dl.length)return this.onReroll(dl),dl;const nl=this.DRP.parsedNotation?this.DRP.parseFinalResults(Y):Y,el=new CustomEvent("resultsAvailable",{detail:nl});return document.dispatchEvent(el),this.onResults(nl),nl}ready(){console.log("Dice UI Ready.")}}var dist={exports:{}};(function(C,Y){(function(F,dl){C.exports=dl()})(commonjsGlobal,function(){return function(F){var dl={};function nl(el){if(dl[el])return dl[el].exports;var J=dl[el]={i:el,l:!1,exports:{}};return F[el].call(J.exports,J,J.exports,nl),J.l=!0,J.exports}return nl.m=F,nl.c=dl,nl.d=function(el,J,il){nl.o(el,J)||Object.defineProperty(el,J,{enumerable:!0,get:il})},nl.r=function(el){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(el,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(el,"__esModule",{value:!0})},nl.t=function(el,J){if(1&J&&(el=nl(el)),8&J||4&J&&typeof el=="object"&&el&&el.__esModule)return el;var il=Object.create(null);if(nl.r(il),Object.defineProperty(il,"default",{enumerable:!0,value:el}),2&J&&typeof el!="string")for(var tl in el)nl.d(il,tl,function(V){return el[V]}.bind(null,tl));return il},nl.n=function(el){var J=el&&el.__esModule?function(){return el.default}:function(){return el};return nl.d(J,"a",J),J},nl.o=function(el,J){return Object.prototype.hasOwnProperty.call(el,J)},nl.p="",nl(nl.s=0)}([function(F,dl,nl){function el(J){for(var il in J)dl.hasOwnProperty(il)||(dl[il]=J[il])}Object.defineProperty(dl,"__esModule",{value:!0}),el(nl(1)),el(nl(3))},function(F,dl,nl){Object.defineProperty(dl,"__esModule",{value:!0});const el=nl(2);dl.DiceRoller=class{constructor(J,il=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,J&&(this.randFunction=J),this.maxRollCount=il}parse(J){return el.parse(J)}roll(J){const il=el.parse(J);return this.rollType(il)}rollValue(J){return this.roll(J).value}rollParsed(J){return this.rollType(J)}rollType(J){let il;switch(J.type){case"diceExpression":il=this.rollDiceExpr(J);break;case"group":il=this.rollGroup(J);break;case"die":il=this.rollDie(J);break;case"expression":il=this.rollExpression(J);break;case"mathfunction":il=this.rollFunction(J);break;case"inline":il=this.rollType(J.expr);break;case"number":il=Object.assign(Object.assign({},J),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${J.type}`)}return J.label&&(il.label=J.label),il}rollDiceExpr(J){const il=this.rollType(J.head),tl=[il],V=[],sl=J.ops.reduce((Xl,Yl,yl)=>{const Hl=this.rollType(Yl.tail);switch(Hl.order=yl,tl.push(Hl),V.push(Yl.op),Yl.op){case"+":return Xl+Hl.value;case"-":return Xl-Hl.value;default:return Xl}},il.value);return{dice:tl,ops:V,success:!1,type:"diceexpressionroll",valid:!0,value:sl,order:0}}rollGroup(J){let il=J.rolls.map((tl,V)=>Object.assign(Object.assign({},this.rollType(tl)),{order:V}));if(J.mods){const tl=J.mods,V=sl=>{const Xl=tl.some(Yl=>["failure","success"].includes(Yl.type));return sl=tl.reduce((Yl,yl)=>this.applyGroupMod(Yl,yl),sl),Xl&&(sl=sl.map(Yl=>(Yl.success||(Yl.value=0,Yl.success=!0),Yl))),sl};if(il.length===1&&["die","diceexpressionroll"].includes(il[0].type)){const sl=il[0];let Xl=sl.type==="die"?sl.rolls:sl.dice.filter(Yl=>Yl.type!=="number").reduce((Yl,yl)=>[...Yl,...yl.type==="die"?yl.rolls:yl.dice],[]);Xl=V(Xl),sl.value=Xl.reduce((Yl,yl)=>yl.valid?Yl+yl.value:Yl,0)}else il=V(il)}return{dice:il,success:!1,type:"grouproll",valid:!0,value:il.reduce((tl,V)=>V.valid?tl+V.value:tl,0),order:0}}rollDie(J){const il=this.rollType(J.count);if(il.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let tl,V;J.die.type==="fate"?(V={type:"fate",success:!1,valid:!1,value:0,order:0},tl=Array.from({length:il.value},(Yl,yl)=>this.generateFateRoll(yl))):(V=this.rollType(J.die),tl=Array.from({length:il.value},(Yl,yl)=>this.generateDiceRoll(V.value,yl))),J.mods&&(tl=J.mods.reduce((Yl,yl)=>this.applyMod(Yl,yl),tl)),J.targets&&(tl=J.targets.reduce((Yl,yl)=>this.applyMod(Yl,yl),tl).map(Yl=>(Yl.success||(Yl.value=0,Yl.success=!0),Yl)));let sl=!1,Xl=0;if(J.match){const Yl=J.match,yl=tl.reduce((Bl,Cl)=>Bl.set(Cl.roll,(Bl.get(Cl.roll)||0)+1),new Map),Hl=new Set(Array.from(yl.entries()).filter(([Bl,Cl])=>Cl>=Yl.min.value).filter(([Bl])=>!(Yl.mod&&Yl.expr)||this.successTest(Yl.mod,this.rollType(Yl.expr).value,Bl)).map(([Bl])=>Bl));tl.filter(Bl=>Hl.has(Bl.roll)).forEach(Bl=>Bl.matched=!0),Yl.count&&(sl=!0,Xl=Hl.size)}return J.sort&&(tl=this.applySort(tl,J.sort)),{count:il,die:V,rolls:tl,success:!1,type:"die",valid:!0,value:sl?Xl:tl.reduce((Yl,yl)=>yl.valid?Yl+yl.value:Yl,0),order:0,matched:sl}}rollExpression(J){const il=this.rollType(J.head),tl=[il],V=[],sl=J.ops.reduce((Xl,Yl)=>{const yl=this.rollType(Yl.tail);switch(tl.push(yl),V.push(Yl.op),Yl.op){case"+":return Xl+yl.value;case"-":return Xl-yl.value;case"*":return Xl*yl.value;case"/":return Xl/yl.value;case"%":return Xl%yl.value;case"**":return Xl**yl.value;default:return Xl}},il.value);return{dice:tl,ops:V,success:!1,type:"expressionroll",valid:!0,value:sl,order:0}}rollFunction(J){const il=this.rollType(J.expr);let tl;switch(J.op){case"floor":tl=Math.floor(il.value);break;case"ceil":tl=Math.ceil(il.value);break;case"round":tl=Math.round(il.value);break;case"abs":tl=Math.abs(il.value);break;default:tl=il.value}return{expr:il,op:J.op,success:!1,type:"mathfunction",valid:!0,value:tl,order:0}}applyGroupMod(J,il){return this.getGroupModMethod(il)(J)}getGroupModMethod(J){const il=tl=>tl.value;switch(J.type){case"success":return this.getSuccessMethod(J,il);case"failure":return this.getFailureMethod(J,il);case"keep":return this.getKeepMethod(J,il);case"drop":return this.getDropMethod(J,il);default:throw new Error(`Mod ${J.type} is not recognised`)}}applyMod(J,il){return this.getModMethod(il)(J)}getModMethod(J){const il=tl=>tl.roll;switch(J.type){case"success":return this.getSuccessMethod(J,il);case"failure":return this.getFailureMethod(J,il);case"crit":return this.getCritSuccessMethod(J,il);case"critfail":return this.getCritFailureMethod(J,il);case"keep":return tl=>this.getKeepMethod(J,il)(tl).sort((V,sl)=>V.order-sl.order);case"drop":return tl=>this.getDropMethod(J,il)(tl).sort((V,sl)=>V.order-sl.order);case"explode":return this.getExplodeMethod(J);case"compound":return this.getCompoundMethod(J);case"penetrate":return this.getPenetrateMethod(J);case"reroll":return this.getReRollMethod(J);case"rerollOnce":return this.getReRollOnceMethod(J);default:throw new Error(`Mod ${J.type} is not recognised`)}}applySort(J,il){return J.sort((tl,V)=>il.asc?tl.roll-V.roll:V.roll-tl.roll),J.forEach((tl,V)=>tl.order=V),J}getCritSuccessMethod(J,il){const tl=this.rollType(J.expr);return V=>V.map(sl=>{if(!sl.valid||sl.type!=="roll"||sl.success)return sl;const Xl=sl;return this.successTest(J.mod,tl.value,il(sl))?Xl.critical="success":Xl.critical==="success"&&(Xl.critical=null),sl})}getCritFailureMethod(J,il){const tl=this.rollType(J.expr);return V=>V.map(sl=>{if(!sl.valid||sl.type!=="roll"||sl.success)return sl;const Xl=sl;return this.successTest(J.mod,tl.value,il(sl))?Xl.critical="failure":Xl.critical==="failure"&&(Xl.critical=null),sl})}getSuccessMethod(J,il){const tl=this.rollType(J.expr);return V=>V.map(sl=>(sl.valid&&this.successTest(J.mod,tl.value,il(sl))&&(sl.success?sl.value+=1:(sl.value=1,sl.success=!0)),sl))}getFailureMethod(J,il){const tl=this.rollType(J.expr);return V=>V.map(sl=>(sl.valid&&this.successTest(J.mod,tl.value,il(sl))&&(sl.success?sl.value-=1:(sl.value=-1,sl.success=!0)),sl))}getKeepMethod(J,il){const tl=this.rollType(J.expr);return V=>{if(V.length===0)return V;V=V.sort((Hl,Bl)=>J.highlow==="l"?il(Bl)-il(Hl):il(Hl)-il(Bl)).sort((Hl,Bl)=>(Hl.valid?1:0)-(Bl.valid?1:0));const sl=Math.max(Math.min(tl.value,V.length),0);let Xl=0,Yl=0;const yl=V.reduce((Hl,Bl)=>(Bl.valid?1:0)+Hl,0)-sl;for(;Yl<V.length&&Xl<yl;)V[Yl].valid&&(V[Yl].valid=!1,Xl++),Yl++;return V}}getDropMethod(J,il){const tl=this.rollType(J.expr);return V=>{V=V.sort((yl,Hl)=>J.highlow==="h"?il(Hl)-il(yl):il(yl)-il(Hl));const sl=Math.max(Math.min(tl.value,V.length),0);let Xl=0,Yl=0;for(;Yl<V.length&&Xl<sl;)V[Yl].valid&&(V[Yl].valid=!1,Xl++),Yl++;return V}}getExplodeMethod(J){const il=J.target?this.rollType(J.target.value):null;return tl=>{const V=il?sl=>this.successTest(J.target.mod,il.value,sl.roll):sl=>this.successTest("=",sl.type==="fateroll"?1:sl.die,sl.roll);if(tl[0].type==="roll"&&V({roll:1})&&V({roll:tl[0].die}))throw new Error("Invalid reroll target");for(let sl=0;sl<tl.length;sl++){let Xl=tl[sl];Xl.order=sl;let Yl=0;for(;V(Xl)&&Yl++<1e3;){const yl=this.reRoll(Xl,++sl);tl.splice(sl,0,yl),Xl=yl}}return tl}}getCompoundMethod(J){const il=J.target?this.rollType(J.target.value):null;return tl=>{const V=il?sl=>this.successTest(J.target.mod,il.value,sl.roll):sl=>this.successTest("=",sl.type==="fateroll"?1:sl.die,sl.roll);if(tl[0].type==="roll"&&V({roll:1})&&V({roll:tl[0].die}))throw new Error("Invalid reroll target");for(let sl=0;sl<tl.length;sl++){let Xl=tl[sl],Yl=Xl.roll,yl=0;for(;V(Xl)&&yl++<1e3;){const Hl=this.reRoll(tl[sl],++sl);Yl+=Hl.roll,Xl=Hl}Xl.value=Yl,Xl.roll=Yl}return tl}}getPenetrateMethod(J){const il=J.target?this.rollType(J.target.value):null;return tl=>{const V=il?sl=>this.successTest(J.target.mod,il.value,sl.roll):sl=>this.successTest("=",sl.type==="fateroll"?1:sl.die,sl.roll);if(il&&tl[0].type==="roll"&&V(tl[0])&&this.successTest(J.target.mod,il.value,1))throw new Error("Invalid reroll target");for(let sl=0;sl<tl.length;sl++){let Xl=tl[sl];Xl.order=sl;let Yl=0;for(;V(Xl)&&Yl++<1e3;){const yl=this.reRoll(Xl,++sl);yl.value-=1,yl.roll-=1,tl.splice(sl,0,yl),Xl=yl}}return tl}}getReRollMethod(J){const il=J.target?this.successTest.bind(null,J.target.mod,this.rollType(J.target.value).value):this.successTest.bind(null,"=",1);return tl=>{if(tl[0].type==="roll"&&il(1)&&il(tl[0].die))throw new Error("Invalid reroll target");for(let V=0;V<tl.length;V++)for(;il(tl[V].roll);){tl[V].valid=!1;const sl=this.reRoll(tl[V],V+1);tl.splice(++V,0,sl)}return tl}}getReRollOnceMethod(J){const il=J.target?this.successTest.bind(null,J.target.mod,this.rollType(J.target.value).value):this.successTest.bind(null,"=",1);return tl=>{if(tl[0].type==="roll"&&il(1)&&il(tl[0].die))throw new Error("Invalid reroll target");for(let V=0;V<tl.length;V++)if(il(tl[V].roll)){tl[V].valid=!1;const sl=this.reRoll(tl[V],V+1);tl.splice(++V,0,sl)}return tl}}successTest(J,il,tl){switch(J){case">":return tl>=il;case"<":return tl<=il;case"=":default:return tl==il}}reRoll(J,il){switch(J.type){case"roll":return this.generateDiceRoll(J.die,il);case"fateroll":return this.generateFateRoll(il);default:throw new Error(`Cannot do a reroll of a ${J.type}.`)}}generateDiceRoll(J,il){const tl=Math.floor(this.randFunction()*J)+1;return{critical:tl===J?"success":tl===1?"failure":null,die:J,matched:!1,order:il,roll:tl,success:!1,type:"roll",valid:!0,value:tl}}generateFateRoll(J){const il=Math.floor(3*this.randFunction())-1;return{matched:!1,order:J,roll:il,success:!1,type:"fateroll",valid:!0,value:il}}}},function(F,dl,nl){function el(J,il,tl,V){this.message=J,this.expected=il,this.found=tl,this.location=V,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,el)}(function(J,il){function tl(){this.constructor=J}tl.prototype=il.prototype,J.prototype=new tl})(el,Error),el.buildMessage=function(J,il){var tl={literal:function(Yl){return'"'+sl(Yl.text)+'"'},class:function(Yl){var yl,Hl="";for(yl=0;yl<Yl.parts.length;yl++)Hl+=Yl.parts[yl]instanceof Array?Xl(Yl.parts[yl][0])+"-"+Xl(Yl.parts[yl][1]):Xl(Yl.parts[yl]);return"["+(Yl.inverted?"^":"")+Hl+"]"},any:function(Yl){return"any character"},end:function(Yl){return"end of input"},other:function(Yl){return Yl.description}};function V(Yl){return Yl.charCodeAt(0).toString(16).toUpperCase()}function sl(Yl){return Yl.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(yl){return"\\x0"+V(yl)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(yl){return"\\x"+V(yl)})}function Xl(Yl){return Yl.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(yl){return"\\x0"+V(yl)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(yl){return"\\x"+V(yl)})}return"Expected "+function(Yl){var yl,Hl,Bl,Cl=new Array(Yl.length);for(yl=0;yl<Yl.length;yl++)Cl[yl]=(Bl=Yl[yl],tl[Bl.type](Bl));if(Cl.sort(),Cl.length>0){for(yl=1,Hl=1;yl<Cl.length;yl++)Cl[yl-1]!==Cl[yl]&&(Cl[Hl]=Cl[yl],Hl++);Cl.length=Hl}switch(Cl.length){case 1:return Cl[0];case 2:return Cl[0]+" or "+Cl[1];default:return Cl.slice(0,-1).join(", ")+", or "+Cl[Cl.length-1]}}(J)+" but "+function(Yl){return Yl?'"'+sl(Yl)+'"':"end of input"}(il)+" found."},F.exports={SyntaxError:el,parse:function(J,il){il=il!==void 0?il:{};var tl,V={},sl={start:Al},Xl=Al,Yl={type:"any"},yl=_l("[[",!1),Hl=_l("]]",!1),Bl=function(hl,Sl){return Sl&&(hl.label=Sl),hl},Cl=_l(">",!1),Tl=_l("<",!1),Ql=_l("=",!1),cd=_l("f",!1),nd=_l("cs",!1),ud=_l("cf",!1),yd=_l("m",!1),sd=_l("t",!1),Gd=_l("k",!1),Vd=_l("l",!1),oe=_l("h",!1),Xe=_l("d",!1),me=_l("{",!1),Dd=_l(",",!1),_d=_l("}",!1),Kd=_l("+",!1),Ze=_l("sa",!1),ve=_l("sd",!1),gd=_l("!",!1),Ed=_l("!!",!1),Je=_l("!p",!1),Le=_l("r",!1),Se=_l("ro",!1),Ne=_l("F",!1),Ad=_l("%",!1),re=_l("(",!1),he=_l(")",!1),Od=_l("-",!1),vd=function(hl,Sl){return Sl.length==0?hl:{head:hl,type:"expression",ops:Sl.map(Ll=>({type:"math",op:Ll[1],tail:Ll[3]}))}},$d=_l("*",!1),qd=_l("/",!1),zd=_l("**",!1),le=_l("floor",!1),Ge=_l("ceil",!1),Re=_l("round",!1),Td=_l("abs",!1),We=dd("integer"),de=/^[0-9]/,pe=al([["0","9"]],!1,!1),Ve=function(){return{type:"number",value:parseInt(J.substring(ql,ol),10)}},Fe=_l("[",!1),ee=/^[^\]]/,Ye=al(["]"],!0,!1),He=_l("]",!1),xe=dd("whitespace"),te=/^[ \t\n\r]/,ce=al([" ","	",`
`,"\r"],!1,!1),ol=0,ql=0,Jd=[{line:1,column:1}],hd=0,ne=[],Kl=0;if("startRule"in il){if(!(il.startRule in sl))throw new Error(`Can't start parsing from rule "`+il.startRule+'".');Xl=sl[il.startRule]}function _l(hl,Sl){return{type:"literal",text:hl,ignoreCase:Sl}}function al(hl,Sl,Ll){return{type:"class",parts:hl,inverted:Sl,ignoreCase:Ll}}function dd(hl){return{type:"other",description:hl}}function Ld(hl){var Sl,Ll=Jd[hl];if(Ll)return Ll;for(Sl=hl-1;!Jd[Sl];)Sl--;for(Ll={line:(Ll=Jd[Sl]).line,column:Ll.column};Sl<hl;)J.charCodeAt(Sl)===10?(Ll.line++,Ll.column=1):Ll.column++,Sl++;return Jd[hl]=Ll,Ll}function Zd(hl,Sl){var Ll=Ld(hl),Fl=Ld(Sl);return{start:{offset:hl,line:Ll.line,column:Ll.column},end:{offset:Sl,line:Fl.line,column:Fl.column}}}function El(hl){ol<hd||(ol>hd&&(hd=ol,ne=[]),ne.push(hl))}function gl(hl,Sl,Ll){return new el(el.buildMessage(hl,Sl),hl,Sl,Ll)}function Al(){var hl,Sl,Ll,Fl,Pl,wl;if(hl=ol,(Sl=Qd())!==V){for(Ll=[],J.length>ol?(Fl=J.charAt(ol),ol++):(Fl=V,Kl===0&&El(Yl));Fl!==V;)Ll.push(Fl),J.length>ol?(Fl=J.charAt(ol),ol++):(Fl=V,Kl===0&&El(Yl));Ll!==V?(ql=hl,wl=Ll,(Pl=Sl).root=!0,wl&&(Pl.label=wl.join("")),hl=Sl=Pl):(ol=hl,hl=V)}else ol=hl,hl=V;return hl}function be(){var hl,Sl,Ll;return hl=ol,(Sl=function(){var Fl,Pl,wl,rl,fl;if(Fl=ol,(Pl=function(){var xl,kl,Ml,Il,jl,Dl,ld,Ol,$l;if(xl=ol,J.charCodeAt(ol)===123?(kl="{",ol++):(kl=V,Kl===0&&El(me)),kl!==V)if(ed()!==V)if((Ml=Ud())!==V){for(Il=[],jl=ol,(Dl=ed())!==V?(J.charCodeAt(ol)===44?(ld=",",ol++):(ld=V,Kl===0&&El(Dd)),ld!==V&&(Ol=ed())!==V&&($l=Ud())!==V?jl=Dl=[Dl,ld,Ol,$l]:(ol=jl,jl=V)):(ol=jl,jl=V);jl!==V;)Il.push(jl),jl=ol,(Dl=ed())!==V?(J.charCodeAt(ol)===44?(ld=",",ol++):(ld=V,Kl===0&&El(Dd)),ld!==V&&(Ol=ed())!==V&&($l=Ud())!==V?jl=Dl=[Dl,ld,Ol,$l]:(ol=jl,jl=V)):(ol=jl,jl=V);Il!==V&&(jl=ed())!==V?(J.charCodeAt(ol)===125?(Dl="}",ol++):(Dl=V,Kl===0&&El(_d)),Dl!==V?(ql=xl,kl={rolls:[Ml,...Il.map(td=>td[3])],type:"group"},xl=kl):(ol=xl,xl=V)):(ol=xl,xl=V)}else ol=xl,xl=V;else ol=xl,xl=V;else ol=xl,xl=V;return xl}())!==V){for(wl=[],(rl=Rd())===V&&(rl=Wd())===V&&(rl=Sd())===V&&(rl=Nd());rl!==V;)wl.push(rl),(rl=Rd())===V&&(rl=Wd())===V&&(rl=Sd())===V&&(rl=Nd());wl!==V&&(rl=ed())!==V?((fl=fd())===V&&(fl=null),fl!==V?(ql=Fl,vl=Pl,Ul=fl,(Nl=wl).length>0&&(vl.mods=(vl.mods||[]).concat(Nl)),Ul&&(vl.label=Ul),Fl=Pl=vl):(ol=Fl,Fl=V)):(ol=Fl,Fl=V)}else ol=Fl,Fl=V;var vl,Nl,Ul;return Fl}())===V&&(Sl=Fd())===V&&(Sl=Bd()),Sl!==V&&ed()!==V?((Ll=fd())===V&&(Ll=null),Ll!==V?(ql=hl,hl=Sl=Bl(Sl,Ll)):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Sd(){var hl,Sl,Ll;return hl=ol,J.charCodeAt(ol)===62?(Sl=">",ol++):(Sl=V,Kl===0&&El(Cl)),Sl===V&&(J.charCodeAt(ol)===60?(Sl="<",ol++):(Sl=V,Kl===0&&El(Tl)),Sl===V&&(J.charCodeAt(ol)===61?(Sl="=",ol++):(Sl=V,Kl===0&&El(Ql)))),Sl!==V&&(Ll=rd())!==V?(ql=hl,hl=Sl={type:"success",mod:Sl,expr:Ll}):(ol=hl,hl=V),hl}function Nd(){var hl,Sl,Ll,Fl;return hl=ol,J.charCodeAt(ol)===102?(Sl="f",ol++):(Sl=V,Kl===0&&El(cd)),Sl!==V?(J.charCodeAt(ol)===62?(Ll=">",ol++):(Ll=V,Kl===0&&El(Cl)),Ll===V&&(J.charCodeAt(ol)===60?(Ll="<",ol++):(Ll=V,Kl===0&&El(Tl)),Ll===V&&(J.charCodeAt(ol)===61?(Ll="=",ol++):(Ll=V,Kl===0&&El(Ql)))),Ll===V&&(Ll=null),Ll!==V&&(Fl=rd())!==V?(ql=hl,hl=Sl={type:"failure",mod:Ll,expr:Fl}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function se(){var hl,Sl,Ll,Fl;return hl=ol,J.substr(ol,2)==="cs"?(Sl="cs",ol+=2):(Sl=V,Kl===0&&El(nd)),Sl!==V?(J.charCodeAt(ol)===62?(Ll=">",ol++):(Ll=V,Kl===0&&El(Cl)),Ll===V&&(J.charCodeAt(ol)===60?(Ll="<",ol++):(Ll=V,Kl===0&&El(Tl)),Ll===V&&(J.charCodeAt(ol)===61?(Ll="=",ol++):(Ll=V,Kl===0&&El(Ql)))),Ll===V&&(Ll=null),Ll!==V&&(Fl=rd())!==V?(ql=hl,hl=Sl={type:"crit",mod:Ll,expr:Fl}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function zl(){var hl,Sl,Ll,Fl;return hl=ol,J.substr(ol,2)==="cf"?(Sl="cf",ol+=2):(Sl=V,Kl===0&&El(ud)),Sl!==V?(J.charCodeAt(ol)===62?(Ll=">",ol++):(Ll=V,Kl===0&&El(Cl)),Ll===V&&(J.charCodeAt(ol)===60?(Ll="<",ol++):(Ll=V,Kl===0&&El(Tl)),Ll===V&&(J.charCodeAt(ol)===61?(Ll="=",ol++):(Ll=V,Kl===0&&El(Ql)))),Ll===V&&(Ll=null),Ll!==V&&(Fl=rd())!==V?(ql=hl,hl=Sl={type:"critfail",mod:Ll,expr:Fl}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function fe(){var hl,Sl,Ll,Fl,Pl;return hl=ol,J.charCodeAt(ol)===109?(Sl="m",ol++):(Sl=V,Kl===0&&El(yd)),Sl!==V?(J.charCodeAt(ol)===116?(Ll="t",ol++):(Ll=V,Kl===0&&El(sd)),Ll===V&&(Ll=null),Ll!==V?((Fl=Bd())===V&&(Fl=null),Fl!==V?((Pl=function(){var wl,rl,fl;return wl=ol,J.charCodeAt(ol)===62?(rl=">",ol++):(rl=V,Kl===0&&El(Cl)),rl===V&&(J.charCodeAt(ol)===60?(rl="<",ol++):(rl=V,Kl===0&&El(Tl)),rl===V&&(J.charCodeAt(ol)===61?(rl="=",ol++):(rl=V,Kl===0&&El(Ql)))),rl!==V&&(fl=rd())!==V?(ql=wl,wl=rl={mod:rl,expr:fl}):(ol=wl,wl=V),wl}())===V&&(Pl=null),Pl!==V?(ql=hl,hl=Sl=function(wl,rl,fl){const vl={type:"match",min:rl||{type:"number",value:2},count:!!wl};return fl&&(vl.mod=fl.mod,vl.expr=fl.expr),vl}(Ll,Fl,Pl)):(ol=hl,hl=V)):(ol=hl,hl=V)):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Rd(){var hl,Sl,Ll,Fl;return hl=ol,J.charCodeAt(ol)===107?(Sl="k",ol++):(Sl=V,Kl===0&&El(Gd)),Sl!==V?(J.charCodeAt(ol)===108?(Ll="l",ol++):(Ll=V,Kl===0&&El(Vd)),Ll===V&&(J.charCodeAt(ol)===104?(Ll="h",ol++):(Ll=V,Kl===0&&El(oe))),Ll===V&&(Ll=null),Ll!==V?((Fl=rd())===V&&(Fl=null),Fl!==V?(ql=hl,hl=Sl={type:"keep",highlow:Ll,expr:Fl||wd}):(ol=hl,hl=V)):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Wd(){var hl,Sl,Ll,Fl;return hl=ol,J.charCodeAt(ol)===100?(Sl="d",ol++):(Sl=V,Kl===0&&El(Xe)),Sl!==V?(J.charCodeAt(ol)===108?(Ll="l",ol++):(Ll=V,Kl===0&&El(Vd)),Ll===V&&(J.charCodeAt(ol)===104?(Ll="h",ol++):(Ll=V,Kl===0&&El(oe))),Ll===V&&(Ll=null),Ll!==V?((Fl=rd())===V&&(Fl=null),Fl!==V?(ql=hl,hl=Sl={type:"drop",highlow:Ll,expr:Fl||wd}):(ol=hl,hl=V)):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Ud(){var hl,Sl,Ll,Fl,Pl,wl,rl,fl;if(hl=ol,(Sl=kd())!==V){for(Ll=[],Fl=ol,(Pl=ed())!==V?(J.charCodeAt(ol)===43?(wl="+",ol++):(wl=V,Kl===0&&El(Kd)),wl!==V&&(rl=ed())!==V&&(fl=kd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Fl!==V;)Ll.push(Fl),Fl=ol,(Pl=ed())!==V?(J.charCodeAt(ol)===43?(wl="+",ol++):(wl=V,Kl===0&&El(Kd)),wl!==V&&(rl=ed())!==V&&(fl=kd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Ll!==V?(ql=hl,hl=Sl=function(vl,Nl){return Nl.length==0?vl:{head:vl,type:"diceExpression",ops:Nl.map(Ul=>({type:"math",op:Ul[1],tail:Ul[3]}))}}(Sl,Ll)):(ol=hl,hl=V)}else ol=hl,hl=V;return hl}function kd(){var hl;return(hl=Fd())===V&&(hl=Qd()),hl}function Fd(){var hl,Sl,Ll;return hl=ol,(Sl=function(){var Fl,Pl,wl,rl,fl;if(Fl=ol,(Pl=function(){var vl,Nl,Ul,xl;if(vl=ol,(Nl=function(){var Il,jl,Dl,ld;return Il=ol,(jl=rd())===V&&(jl=null),jl!==V?(J.charCodeAt(ol)===100?(Dl="d",ol++):(Dl=V,Kl===0&&El(Xe)),Dl!==V?((ld=function(){var Ol,$l;return Ol=ol,J.charCodeAt(ol)===70?($l="F",ol++):($l=V,Kl===0&&El(Ne)),$l===V&&(J.charCodeAt(ol)===102?($l="f",ol++):($l=V,Kl===0&&El(cd))),$l!==V&&(ql=Ol,$l={type:"fate"}),Ol=$l}())===V&&(ld=function(){var Ol,$l;return Ol=ol,J.charCodeAt(ol)===37?($l="%",ol++):($l=V,Kl===0&&El(Ad)),$l!==V&&(ql=Ol,$l={type:"number",value:"100"}),Ol=$l}())===V&&(ld=rd()),ld!==V?(ql=Il,jl={die:ld,count:jl||{type:"number",value:1},type:"die"},Il=jl):(ol=Il,Il=V)):(ol=Il,Il=V)):(ol=Il,Il=V),Il}())!==V){for(Ul=[],(xl=Pd())===V&&(xl=Id())===V&&(xl=Hd())===V&&(xl=ue())===V&&(xl=ie());xl!==V;)Ul.push(xl),(xl=Pd())===V&&(xl=Id())===V&&(xl=Hd())===V&&(xl=ue())===V&&(xl=ie());Ul!==V?(ql=vl,Ml=Ul,(kl=Nl).mods=(kl.mods||[]).concat(Ml),vl=Nl=kl):(ol=vl,vl=V)}else ol=vl,vl=V;var kl,Ml;return vl}())!==V){for(wl=[],(rl=Wd())===V&&(rl=Rd())===V&&(rl=Sd())===V&&(rl=Nd())===V&&(rl=zl())===V&&(rl=se());rl!==V;)wl.push(rl),(rl=Wd())===V&&(rl=Rd())===V&&(rl=Sd())===V&&(rl=Nd())===V&&(rl=zl())===V&&(rl=se());wl!==V?((rl=fe())===V&&(rl=null),rl!==V?((fl=function(){var vl,Nl;return vl=ol,J.substr(ol,2)==="sa"?(Nl="sa",ol+=2):(Nl=V,Kl===0&&El(Ze)),Nl!==V&&(ql=vl,Nl={type:"sort",asc:!0}),vl=Nl}())===V&&(fl=function(){var vl,Nl;return vl=ol,J.substr(ol,2)==="sd"?(Nl="sd",ol+=2):(Nl=V,Kl===0&&El(ve)),Nl!==V&&(ql=vl,Nl={type:"sort",asc:!1}),vl=Nl}()),fl===V&&(fl=null),fl!==V?(ql=Fl,Pl=function(vl,Nl,Ul,xl){const kl=Nl.filter(Ml=>["success","failure"].includes(Ml.type));return Nl=Nl.filter(Ml=>!kl.includes(Ml)),vl.mods=(vl.mods||[]).concat(Nl),kl.length>0&&(vl.targets=kl),Ul&&(vl.match=Ul),xl&&(vl.sort=xl),vl}(Pl,wl,rl,fl),Fl=Pl):(ol=Fl,Fl=V)):(ol=Fl,Fl=V)):(ol=Fl,Fl=V)}else ol=Fl,Fl=V;return Fl}())!==V&&ed()!==V?((Ll=fd())===V&&(Ll=null),Ll!==V?(ql=hl,hl=Sl=Bl(Sl,Ll)):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Hd(){var hl,Sl,Ll;return hl=ol,J.charCodeAt(ol)===33?(Sl="!",ol++):(Sl=V,Kl===0&&El(gd)),Sl!==V?((Ll=Yd())===V&&(Ll=null),Ll!==V?(ql=hl,hl=Sl={type:"explode",target:Ll}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Pd(){var hl,Sl,Ll;return hl=ol,J.substr(ol,2)==="!!"?(Sl="!!",ol+=2):(Sl=V,Kl===0&&El(Ed)),Sl!==V?((Ll=Yd())===V&&(Ll=null),Ll!==V?(ql=hl,hl=Sl={type:"compound",target:Ll}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Id(){var hl,Sl,Ll;return hl=ol,J.substr(ol,2)==="!p"?(Sl="!p",ol+=2):(Sl=V,Kl===0&&El(Je)),Sl!==V?((Ll=Yd())===V&&(Ll=null),Ll!==V?(ql=hl,hl=Sl={type:"penetrate",target:Ll}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function ie(){var hl,Sl,Ll;return hl=ol,J.charCodeAt(ol)===114?(Sl="r",ol++):(Sl=V,Kl===0&&El(Le)),Sl!==V?((Ll=Yd())===V&&(Ll=null),Ll!==V?(ql=hl,hl=Sl={type:"reroll",target:Ll||Md}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function ue(){var hl,Sl,Ll;return hl=ol,J.substr(ol,2)==="ro"?(Sl="ro",ol+=2):(Sl=V,Kl===0&&El(Se)),Sl!==V?((Ll=Yd())===V&&(Ll=null),Ll!==V?(ql=hl,hl=Sl={type:"rerollOnce",target:Ll||Md}):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Yd(){var hl,Sl,Ll;return hl=ol,J.charCodeAt(ol)===62?(Sl=">",ol++):(Sl=V,Kl===0&&El(Cl)),Sl===V&&(J.charCodeAt(ol)===60?(Sl="<",ol++):(Sl=V,Kl===0&&El(Tl)),Sl===V&&(J.charCodeAt(ol)===61?(Sl="=",ol++):(Sl=V,Kl===0&&El(Ql)))),Sl===V&&(Sl=null),Sl!==V&&(Ll=rd())!==V?(ql=hl,hl=Sl={type:"target",mod:Sl,value:Ll}):(ol=hl,hl=V),hl}function rd(){var hl;return(hl=jd())===V&&(hl=Bd()),hl}function Qd(){var hl;return(hl=function(){var Sl,Ll,Fl,Pl;return Sl=ol,J.substr(ol,2)==="[["?(Ll="[[",ol+=2):(Ll=V,Kl===0&&El(yl)),Ll!==V&&(Fl=Qd())!==V?(J.substr(ol,2)==="]]"?(Pl="]]",ol+=2):(Pl=V,Kl===0&&El(Hl)),Pl!==V?(ql=Sl,Sl=Ll={type:"inline",expr:Fl}):(ol=Sl,Sl=V)):(ol=Sl,Sl=V),Sl}())===V&&(hl=pd())===V&&(hl=jd()),hl}function jd(){var hl,Sl,Ll,Fl,Pl,wl,rl;return hl=ol,J.charCodeAt(ol)===40?(Sl="(",ol++):(Sl=V,Kl===0&&El(re)),Sl!==V&&(Ll=pd())!==V?(J.charCodeAt(ol)===41?(Fl=")",ol++):(Fl=V,Kl===0&&El(he)),Fl!==V&&ed()!==V?((Pl=fd())===V&&(Pl=null),Pl!==V?(ql=hl,wl=Ll,(rl=Pl)&&(wl.label=rl),hl=Sl=wl):(ol=hl,hl=V)):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function pd(){var hl,Sl,Ll,Fl,Pl,wl,rl,fl;if(hl=ol,(Sl=Xd())!==V){for(Ll=[],Fl=ol,(Pl=ed())!==V?(J.charCodeAt(ol)===43?(wl="+",ol++):(wl=V,Kl===0&&El(Kd)),wl===V&&(J.charCodeAt(ol)===45?(wl="-",ol++):(wl=V,Kl===0&&El(Od))),wl!==V&&(rl=ed())!==V&&(fl=Xd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Fl!==V;)Ll.push(Fl),Fl=ol,(Pl=ed())!==V?(J.charCodeAt(ol)===43?(wl="+",ol++):(wl=V,Kl===0&&El(Kd)),wl===V&&(J.charCodeAt(ol)===45?(wl="-",ol++):(wl=V,Kl===0&&El(Od))),wl!==V&&(rl=ed())!==V&&(fl=Xd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Ll!==V?(ql=hl,hl=Sl=vd(Sl,Ll)):(ol=hl,hl=V)}else ol=hl,hl=V;return hl}function Xd(){var hl,Sl,Ll,Fl,Pl,wl,rl,fl;if(hl=ol,(Sl=xd())!==V){for(Ll=[],Fl=ol,(Pl=ed())!==V?(J.charCodeAt(ol)===42?(wl="*",ol++):(wl=V,Kl===0&&El($d)),wl===V&&(J.charCodeAt(ol)===47?(wl="/",ol++):(wl=V,Kl===0&&El(qd))),wl!==V&&(rl=ed())!==V&&(fl=xd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Fl!==V;)Ll.push(Fl),Fl=ol,(Pl=ed())!==V?(J.charCodeAt(ol)===42?(wl="*",ol++):(wl=V,Kl===0&&El($d)),wl===V&&(J.charCodeAt(ol)===47?(wl="/",ol++):(wl=V,Kl===0&&El(qd))),wl!==V&&(rl=ed())!==V&&(fl=xd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Ll!==V?(ql=hl,hl=Sl=vd(Sl,Ll)):(ol=hl,hl=V)}else ol=hl,hl=V;return hl}function xd(){var hl,Sl,Ll,Fl,Pl,wl,rl,fl;if(hl=ol,(Sl=Cd())!==V){for(Ll=[],Fl=ol,(Pl=ed())!==V?(J.substr(ol,2)==="**"?(wl="**",ol+=2):(wl=V,Kl===0&&El(zd)),wl===V&&(J.charCodeAt(ol)===37?(wl="%",ol++):(wl=V,Kl===0&&El(Ad))),wl!==V&&(rl=ed())!==V&&(fl=Cd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Fl!==V;)Ll.push(Fl),Fl=ol,(Pl=ed())!==V?(J.substr(ol,2)==="**"?(wl="**",ol+=2):(wl=V,Kl===0&&El(zd)),wl===V&&(J.charCodeAt(ol)===37?(wl="%",ol++):(wl=V,Kl===0&&El(Ad))),wl!==V&&(rl=ed())!==V&&(fl=Cd())!==V?Fl=Pl=[Pl,wl,rl,fl]:(ol=Fl,Fl=V)):(ol=Fl,Fl=V);Ll!==V?(ql=hl,hl=Sl=vd(Sl,Ll)):(ol=hl,hl=V)}else ol=hl,hl=V;return hl}function ae(){var hl,Sl,Ll,Fl,Pl;return hl=ol,(Sl=function(){var wl;return J.substr(ol,5)==="floor"?(wl="floor",ol+=5):(wl=V,Kl===0&&El(le)),wl===V&&(J.substr(ol,4)==="ceil"?(wl="ceil",ol+=4):(wl=V,Kl===0&&El(Ge)),wl===V&&(J.substr(ol,5)==="round"?(wl="round",ol+=5):(wl=V,Kl===0&&El(Re)),wl===V&&(J.substr(ol,3)==="abs"?(wl="abs",ol+=3):(wl=V,Kl===0&&El(Td))))),wl}())!==V&&ed()!==V?(J.charCodeAt(ol)===40?(Ll="(",ol++):(Ll=V,Kl===0&&El(re)),Ll!==V&&ed()!==V&&(Fl=pd())!==V&&ed()!==V?(J.charCodeAt(ol)===41?(Pl=")",ol++):(Pl=V,Kl===0&&El(he)),Pl!==V?(ql=hl,hl=Sl={type:"mathfunction",op:Sl,expr:Fl}):(ol=hl,hl=V)):(ol=hl,hl=V)):(ol=hl,hl=V),hl}function Cd(){var hl;return(hl=ae())===V&&(hl=be())===V&&(hl=jd()),hl}function Bd(){var hl,Sl,Ll,Fl;if(Kl++,hl=ol,J.charCodeAt(ol)===45?(Sl="-",ol++):(Sl=V,Kl===0&&El(Od)),Sl===V&&(Sl=null),Sl!==V){if(Ll=[],de.test(J.charAt(ol))?(Fl=J.charAt(ol),ol++):(Fl=V,Kl===0&&El(pe)),Fl!==V)for(;Fl!==V;)Ll.push(Fl),de.test(J.charAt(ol))?(Fl=J.charAt(ol),ol++):(Fl=V,Kl===0&&El(pe));else Ll=V;Ll!==V?(ql=hl,hl=Sl=Ve()):(ol=hl,hl=V)}else ol=hl,hl=V;return Kl--,hl===V&&(Sl=V,Kl===0&&El(We)),hl}function fd(){var hl,Sl,Ll,Fl;if(hl=ol,J.charCodeAt(ol)===91?(Sl="[",ol++):(Sl=V,Kl===0&&El(Fe)),Sl!==V){if(Ll=[],ee.test(J.charAt(ol))?(Fl=J.charAt(ol),ol++):(Fl=V,Kl===0&&El(Ye)),Fl!==V)for(;Fl!==V;)Ll.push(Fl),ee.test(J.charAt(ol))?(Fl=J.charAt(ol),ol++):(Fl=V,Kl===0&&El(Ye));else Ll=V;Ll!==V?(J.charCodeAt(ol)===93?(Fl="]",ol++):(Fl=V,Kl===0&&El(He)),Fl!==V?(ql=hl,hl=Sl=Ll.join("")):(ol=hl,hl=V)):(ol=hl,hl=V)}else ol=hl,hl=V;return hl}function ed(){var hl,Sl;for(Kl++,hl=[],te.test(J.charAt(ol))?(Sl=J.charAt(ol),ol++):(Sl=V,Kl===0&&El(ce));Sl!==V;)hl.push(Sl),te.test(J.charAt(ol))?(Sl=J.charAt(ol),ol++):(Sl=V,Kl===0&&El(ce));return Kl--,hl===V&&(Sl=V,Kl===0&&El(xe)),hl}const Md={type:"target",mod:"=",value:{type:"number",value:1}},wd={type:"number",value:1};if((tl=Xl())!==V&&ol===J.length)return tl;throw tl!==V&&ol<J.length&&El({type:"end"}),gl(ne,hd<J.length?J.charAt(hd):null,hd<J.length?Zd(hd,hd+1):Zd(hd,hd))}}},function(F,dl,nl){Object.defineProperty(dl,"__esModule",{value:!0}),dl.DiscordRollRenderer=class{render(el){return this.doRender(el,!0)}doRender(el,J=!1){let il="";switch(el.type){case"diceexpressionroll":il=this.renderGroupExpr(el);break;case"grouproll":il=this.renderGroup(el);break;case"die":il=this.renderDie(el);break;case"expressionroll":il=this.renderExpression(el);break;case"mathfunction":il=this.renderFunction(el);break;case"roll":return this.renderRoll(el);case"fateroll":return this.renderFateRoll(el);case"number":const tl=el.label?` (${el.label})`:"";return`${el.value}${tl}`;case"fate":return"F";default:throw new Error("Unable to render")}return el.valid||(il="~~"+il.replace(/~~/g,"")+"~~"),J?this.stripBrackets(il):el.label?`(${el.label}: ${il})`:il}renderGroup(el){const J=[];for(const il of el.dice)J.push(this.doRender(il));return J.length>1?`{ ${J.join(" + ")} } = ${el.value}`:`{ ${this.stripBrackets(J[0])} } = ${el.value}`}renderGroupExpr(el){const J=[];for(const il of el.dice)J.push(this.doRender(il));return J.length>1?`(${J.join(" + ")} = ${el.value})`:J[0]}renderDie(el){const J=[];for(const V of el.rolls)J.push(this.doRender(V));let il=`${J.join(", ")}`;["number","fate"].includes(el.die.type)&&el.count.type==="number"||(il+=`[*Rolling: ${this.doRender(el.count)}d${this.doRender(el.die)}*]`);const tl=el.matched?` Match${el.value===1?"":"es"}`:"";return il+=` = ${el.value}${tl}`,`(${il})`}renderExpression(el){if(el.dice.length>1){const J=[];for(let il=0;il<el.dice.length-1;il++)J.push(this.doRender(el.dice[il])),J.push(el.ops[il]);return J.push(this.doRender(el.dice.slice(-1)[0])),J.push("="),J.push(el.value+""),`(${J.join(" ")})`}return el.dice[0].type==="number"?el.value+"":this.doRender(el.dice[0])}renderFunction(el){const J=this.doRender(el.expr);return`(${el.op}${this.addBrackets(J)} = ${el.value})`}addBrackets(el){return el.startsWith("(")||(el=`(${el}`),el.endsWith(")")||(el=`${el})`),el}stripBrackets(el){return el.startsWith("(")&&(el=el.substring(1)),el.endsWith(")")&&(el=el.substring(0,el.length-1)),el}renderRoll(el){let J=`${el.roll}`;return el.valid?el.success&&el.value===1?J=`**${el.roll}**`:el.success&&el.value===-1?J=`*${el.roll}*`:el.success||el.critical!=="success"?el.success||el.critical!=="failure"||(J=`*${el.roll}*`):J=`**${el.roll}**`:J=`~~${el.roll}~~`,el.matched&&(J=`__${J}__`),J}renderFateRoll(el){const J=el.roll===0?"0":el.roll>0?"+":"-";let il=`${el.roll}`;return el.valid?el.success&&el.value===1?il=`**${J}**`:el.success&&el.value===-1&&(il=`*${J}*`):il=`~~${J}~~`,el.matched&&(il=`__${il}__`),il}}}])})})(dist);var distExports=dist.exports,__awaiter$h=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class PlayerApi{constructor(Y){this.messageBus=Y}get id(){if(!this.messageBus.userId)throw Error("Unable to get user ID: not ready");return this.messageBus.userId}getSelection(){return __awaiter$h(this,void 0,void 0,function*(){const{selection:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_SELECTION",{});return Y})}select(Y,F){return __awaiter$h(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:Y,replace:F})})}deselect(Y){return __awaiter$h(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_DESELECt",{items:Y})})}getName(){return __awaiter$h(this,void 0,void 0,function*(){const{name:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_NAME",{});return Y})}setName(Y){return __awaiter$h(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_NAME",{name:Y})})}getColor(){return __awaiter$h(this,void 0,void 0,function*(){const{color:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_COLOR",{});return Y})}setColor(Y){return __awaiter$h(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_COLOR",{color:Y})})}getSyncView(){return __awaiter$h(this,void 0,void 0,function*(){const{syncView:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_SYNC_VIEW",{});return Y})}setSyncView(Y){return __awaiter$h(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_SYNC_VIEW",{syncView:Y})})}getId(){return __awaiter$h(this,void 0,void 0,function*(){const{id:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_ID",{});return Y})}getRole(){return __awaiter$h(this,void 0,void 0,function*(){const{role:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_ROLE",{});return Y})}getMetadata(){return __awaiter$h(this,void 0,void 0,function*(){const{metadata:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_METADATA",{});return Y})}setMetadata(Y){return __awaiter$h(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_METADATA",{update:Y})})}hasPermission(Y){return __awaiter$h(this,void 0,void 0,function*(){if((yield this.getRole())==="GM")return!0;const{permissions:dl}=yield this.messageBus.sendAsync("OBR_ROOM_GET_PERMISSIONS",{});return dl.indexOf(Y)===-1})}getConnectionId(){return __awaiter$h(this,void 0,void 0,function*(){const{connectionId:Y}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_CONNECTION_ID",{});return Y})}onChange(Y){const F=dl=>{Y(dl.player)};return this.messageBus.send("OBR_PLAYER_SUBSCRIBE",{}),this.messageBus.on("OBR_PLAYER_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_PLAYER_UNSUBSCRIBE",{}),this.messageBus.off("OBR_PLAYER_EVENT_CHANGE",F)}}}var __awaiter$g=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class ViewportApi{constructor(Y){this.messageBus=Y}reset(){return __awaiter$g(this,void 0,void 0,function*(){const{transform:Y}=yield this.messageBus.sendAsync("OBR_VIEWPORT_RESET",{});return Y})}animateTo(Y){return __awaiter$g(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_ANIMATE_TO",{transform:Y})})}animateToBounds(Y){return __awaiter$g(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_ANIMATE_TO_BOUNDS",{bounds:Y})})}getPosition(){return __awaiter$g(this,void 0,void 0,function*(){const{position:Y}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_POSITION",{});return Y})}setPosition(Y){return __awaiter$g(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_SET_POSITION",{position:Y})})}getScale(){return __awaiter$g(this,void 0,void 0,function*(){const{scale:Y}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_SCALE",{});return Y})}setScale(Y){return __awaiter$g(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_SET_SCALE",{scale:Y})})}getWidth(){return __awaiter$g(this,void 0,void 0,function*(){const{width:Y}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_WIDTH",{});return Y})}getHeight(){return __awaiter$g(this,void 0,void 0,function*(){const{height:Y}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_HEIGHT",{});return Y})}transformPoint(Y){return __awaiter$g(this,void 0,void 0,function*(){const{point:F}=yield this.messageBus.sendAsync("OBR_VIEWPORT_TRANSFORM_POINT",{point:Y});return F})}inverseTransformPoint(Y){return __awaiter$g(this,void 0,void 0,function*(){const{point:F}=yield this.messageBus.sendAsync("OBR_VIEWPORT_INVERSE_TRANSFORM_POINT",{point:Y});return F})}}function isMessage(C){return typeof C.id=="string"}var events={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function(Y,F,dl){return Function.prototype.apply.call(Y,F,dl)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:ReflectOwnKeys=function(Y){return Object.getOwnPropertyNames(Y)};function ProcessEmitWarning(C){console&&console.warn&&console.warn(C)}var NumberIsNaN=Number.isNaN||function(Y){return Y!==Y};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(C){if(typeof C!="number"||C<0||NumberIsNaN(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");defaultMaxListeners=C}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||NumberIsNaN(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this};function _getMaxListeners(C){return C._maxListeners===void 0?EventEmitter.defaultMaxListeners:C._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(Y){for(var F=[],dl=1;dl<arguments.length;dl++)F.push(arguments[dl]);var nl=Y==="error",el=this._events;if(el!==void 0)nl=nl&&el.error===void 0;else if(!nl)return!1;if(nl){var J;if(F.length>0&&(J=F[0]),J instanceof Error)throw J;var il=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw il.context=J,il}var tl=el[Y];if(tl===void 0)return!1;if(typeof tl=="function")ReflectApply(tl,this,F);else for(var V=tl.length,sl=arrayClone(tl,V),dl=0;dl<V;++dl)ReflectApply(sl[dl],this,F);return!0};function _addListener(C,Y,F,dl){var nl,el,J;if(checkListener(F),el=C._events,el===void 0?(el=C._events=Object.create(null),C._eventsCount=0):(el.newListener!==void 0&&(C.emit("newListener",Y,F.listener?F.listener:F),el=C._events),J=el[Y]),J===void 0)J=el[Y]=F,++C._eventsCount;else if(typeof J=="function"?J=el[Y]=dl?[F,J]:[J,F]:dl?J.unshift(F):J.push(F),nl=_getMaxListeners(C),nl>0&&J.length>nl&&!J.warned){J.warned=!0;var il=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(Y)+" listeners added. Use emitter.setMaxListeners() to increase limit");il.name="MaxListenersExceededWarning",il.emitter=C,il.type=Y,il.count=J.length,ProcessEmitWarning(il)}return C}EventEmitter.prototype.addListener=function(Y,F){return _addListener(this,Y,F,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(Y,F){return _addListener(this,Y,F,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(C,Y,F){var dl={fired:!1,wrapFn:void 0,target:C,type:Y,listener:F},nl=onceWrapper.bind(dl);return nl.listener=F,dl.wrapFn=nl,nl}EventEmitter.prototype.once=function(Y,F){return checkListener(F),this.on(Y,_onceWrap(this,Y,F)),this};EventEmitter.prototype.prependOnceListener=function(Y,F){return checkListener(F),this.prependListener(Y,_onceWrap(this,Y,F)),this};EventEmitter.prototype.removeListener=function(Y,F){var dl,nl,el,J,il;if(checkListener(F),nl=this._events,nl===void 0)return this;if(dl=nl[Y],dl===void 0)return this;if(dl===F||dl.listener===F)--this._eventsCount===0?this._events=Object.create(null):(delete nl[Y],nl.removeListener&&this.emit("removeListener",Y,dl.listener||F));else if(typeof dl!="function"){for(el=-1,J=dl.length-1;J>=0;J--)if(dl[J]===F||dl[J].listener===F){il=dl[J].listener,el=J;break}if(el<0)return this;el===0?dl.shift():spliceOne(dl,el),dl.length===1&&(nl[Y]=dl[0]),nl.removeListener!==void 0&&this.emit("removeListener",Y,il||F)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(Y){var F,dl,nl;if(dl=this._events,dl===void 0)return this;if(dl.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):dl[Y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete dl[Y]),this;if(arguments.length===0){var el=Object.keys(dl),J;for(nl=0;nl<el.length;++nl)J=el[nl],J!=="removeListener"&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(F=dl[Y],typeof F=="function")this.removeListener(Y,F);else if(F!==void 0)for(nl=F.length-1;nl>=0;nl--)this.removeListener(Y,F[nl]);return this};function _listeners(C,Y,F){var dl=C._events;if(dl===void 0)return[];var nl=dl[Y];return nl===void 0?[]:typeof nl=="function"?F?[nl.listener||nl]:[nl]:F?unwrapListeners(nl):arrayClone(nl,nl.length)}EventEmitter.prototype.listeners=function(Y){return _listeners(this,Y,!0)};EventEmitter.prototype.rawListeners=function(Y){return _listeners(this,Y,!1)};EventEmitter.listenerCount=function(C,Y){return typeof C.listenerCount=="function"?C.listenerCount(Y):listenerCount.call(C,Y)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(C){var Y=this._events;if(Y!==void 0){var F=Y[C];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(C,Y){for(var F=new Array(Y),dl=0;dl<Y;++dl)F[dl]=C[dl];return F}function spliceOne(C,Y){for(;Y+1<C.length;Y++)C[Y]=C[Y+1];C.pop()}function unwrapListeners(C){for(var Y=new Array(C.length),F=0;F<Y.length;++F)Y[F]=C[F].listener||C[F];return Y}function once(C,Y){return new Promise(function(F,dl){function nl(J){C.removeListener(Y,el),dl(J)}function el(){typeof C.removeListener=="function"&&C.removeListener("error",nl),F([].slice.call(arguments))}eventTargetAgnosticAddListener(C,Y,el,{once:!0}),Y!=="error"&&addErrorHandlerIfEventEmitter(C,nl,{once:!0})})}function addErrorHandlerIfEventEmitter(C,Y,F){typeof C.on=="function"&&eventTargetAgnosticAddListener(C,"error",Y,F)}function eventTargetAgnosticAddListener(C,Y,F,dl){if(typeof C.on=="function")dl.once?C.once(Y,F):C.on(Y,F);else if(typeof C.addEventListener=="function")C.addEventListener(Y,function nl(el){dl.once&&C.removeEventListener(Y,nl),F(el)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}var eventsExports=events.exports;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let C=0;C<256;++C)byteToHex.push((C+256).toString(16).slice(1));function unsafeStringify(C,Y=0){return(byteToHex[C[Y+0]]+byteToHex[C[Y+1]]+byteToHex[C[Y+2]]+byteToHex[C[Y+3]]+"-"+byteToHex[C[Y+4]]+byteToHex[C[Y+5]]+"-"+byteToHex[C[Y+6]]+byteToHex[C[Y+7]]+"-"+byteToHex[C[Y+8]]+byteToHex[C[Y+9]]+"-"+byteToHex[C[Y+10]]+byteToHex[C[Y+11]]+byteToHex[C[Y+12]]+byteToHex[C[Y+13]]+byteToHex[C[Y+14]]+byteToHex[C[Y+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(C,Y,F){if(native.randomUUID&&!Y&&!C)return native.randomUUID();C=C||{};const dl=C.random||(C.rng||rng)();if(dl[6]=dl[6]&15|64,dl[8]=dl[8]&63|128,Y){F=F||0;for(let nl=0;nl<16;++nl)Y[F+nl]=dl[nl];return Y}return unsafeStringify(dl)}class MessageBus extends eventsExports.EventEmitter{constructor(Y,F){super(),this.ready=!1,this.userId=null,this.ref=null,this.handleMessage=dl=>{const nl=dl.data;if(dl.origin===this.targetOrigin&&isMessage(nl)){if(nl.id==="OBR_READY"){this.ready=!0;const el=nl.data;this.ref=el.ref,this.userId=el.userId}this.emit(nl.id,nl.data)}},this.send=(dl,nl,el)=>{var J;if(!this.ref)throw Error("Unable to send message: not ready");(J=window.parent)===null||J===void 0||J.postMessage({id:dl,data:nl,ref:this.ref,nonce:el},this.targetOrigin)},this.sendAsync=(dl,nl,el=5e3)=>{const J=`_${v4()}`;return this.send(dl,nl,J),Promise.race([new Promise((il,tl)=>{const V=this;function sl(Yl){V.off(`${dl}_RESPONSE${J}`,sl),V.off(`${dl}_ERROR${J}`,Xl),il(Yl)}function Xl(Yl){V.off(`${dl}_RESPONSE${J}`,sl),V.off(`${dl}_ERROR${J}`,Xl),tl(Yl)}this.on(`${dl}_RESPONSE${J}`,sl),this.on(`${dl}_ERROR${J}`,Xl)}),new Promise((il,tl)=>window.setTimeout(()=>tl(new Error(`Message ${dl} took longer than ${el}ms to get a result`)),el))])},this.roomId=F,this.targetOrigin=Y,window.addEventListener("message",this.handleMessage),this.setMaxListeners(100)}destroy(){window.removeEventListener("message",this.handleMessage)}}var __awaiter$f=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class NotificationApi{constructor(Y){this.messageBus=Y}show(Y,F){return __awaiter$f(this,void 0,void 0,function*(){const{id:dl}=yield this.messageBus.sendAsync("OBR_NOTIFICATION_SHOW",{message:Y,variant:F});return dl})}close(Y){return __awaiter$f(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_NOTIFICATION_CLOSE",{id:Y})})}}var __awaiter$e=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class SceneFogApi{constructor(Y){this.messageBus=Y}getColor(){return __awaiter$e(this,void 0,void 0,function*(){const{color:Y}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_COLOR",{});return Y})}setColor(Y){return __awaiter$e(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_COLOR",{color:Y})})}getStrokeWidth(){return __awaiter$e(this,void 0,void 0,function*(){const{strokeWidth:Y}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_STROKE_WIDTH",{});return Y})}setStrokeWidth(Y){return __awaiter$e(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_STROKE_WIDTH",{strokeWidth:Y})})}getFilled(){return __awaiter$e(this,void 0,void 0,function*(){const{filled:Y}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_FILLED",{});return Y})}setFilled(Y){return __awaiter$e(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_FILLED",{filled:Y})})}onChange(Y){const F=dl=>{Y(dl.fog)};return this.messageBus.send("OBR_SCENE_FOG_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_FOG_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_SCENE_FOG_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_FOG_EVENT_CHANGE",F)}}}var __awaiter$d=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class SceneGridApi{constructor(Y){this.messageBus=Y}getDpi(){return __awaiter$d(this,void 0,void 0,function*(){const{dpi:Y}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_DPI",{});return Y})}getScale(){return __awaiter$d(this,void 0,void 0,function*(){return yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_SCALE",{})})}setScale(Y){return __awaiter$d(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_SCALE",{scale:Y})})}getColor(){return __awaiter$d(this,void 0,void 0,function*(){const{color:Y}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_COLOR",{});return Y})}setColor(Y){return __awaiter$d(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_COLOR",{color:Y})})}getOpacity(){return __awaiter$d(this,void 0,void 0,function*(){const{opacity:Y}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_OPACITY",{});return Y})}setOpacity(Y){return __awaiter$d(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_OPACITY",{opacity:Y})})}getType(){return __awaiter$d(this,void 0,void 0,function*(){const{type:Y}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_TYPE",{});return Y})}setType(Y){return __awaiter$d(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_TYPE",{type:Y})})}getLineType(){return __awaiter$d(this,void 0,void 0,function*(){const{lineType:Y}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_LINE_TYPE",{});return Y})}setLineType(Y){return __awaiter$d(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_LINE_TYPE",{lineType:Y})})}getMeasurement(){return __awaiter$d(this,void 0,void 0,function*(){const{measurement:Y}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_MEASUREMENT",{});return Y})}setMeasurement(Y){return __awaiter$d(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_MEASUREMENT",{measurement:Y})})}snapPosition(Y,F,dl){return __awaiter$d(this,void 0,void 0,function*(){const{position:nl}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_SNAP_POSITION",{position:Y,snappingSensitivity:F,useCorners:dl});return nl})}getDistance(Y,F){return __awaiter$d(this,void 0,void 0,function*(){const{distance:dl}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_DISTANCE",{from:Y,to:F});return dl})}onChange(Y){const F=dl=>{Y(dl.grid)};return this.messageBus.send("OBR_SCENE_GRID_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_GRID_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_SCENE_GRID_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_GRID_EVENT_CHANGE",F)}}}var __awaiter$c=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class SceneHistoryApi{constructor(Y){this.messageBus=Y}undo(){return __awaiter$c(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_UNDO",{})})}redo(){return __awaiter$c(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_REDO",{})})}canUndo(){return __awaiter$c(this,void 0,void 0,function*(){const{canUndo:Y}=yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_CAN_UNDO",{});return Y})}canRedo(){return __awaiter$c(this,void 0,void 0,function*(){const{canRedo:Y}=yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_CAN_REDO",{});return Y})}}function n(C){for(var Y=arguments.length,F=Array(Y>1?Y-1:0),dl=1;dl<Y;dl++)F[dl-1]=arguments[dl];throw Error("[Immer] minified error nr: "+C+(F.length?" "+F.map(function(nl){return"'"+nl+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(C){return!!C&&!!C[Q$1]}function t$1(C){var Y;return!!C&&(function(F){if(!F||typeof F!="object")return!1;var dl=Object.getPrototypeOf(F);if(dl===null)return!0;var nl=Object.hasOwnProperty.call(dl,"constructor")&&dl.constructor;return nl===Object||typeof nl=="function"&&Function.toString.call(nl)===Z}(C)||Array.isArray(C)||!!C[L]||!!(!((Y=C.constructor)===null||Y===void 0)&&Y[L])||s(C)||v(C))}function i$1(C,Y,F){F===void 0&&(F=!1),o$1(C)===0?(F?Object.keys:nn)(C).forEach(function(dl){F&&typeof dl=="symbol"||Y(dl,C[dl],C)}):C.forEach(function(dl,nl){return Y(nl,dl,C)})}function o$1(C){var Y=C[Q$1];return Y?Y.i>3?Y.i-4:Y.i:Array.isArray(C)?1:s(C)?2:v(C)?3:0}function u$1(C,Y){return o$1(C)===2?C.has(Y):Object.prototype.hasOwnProperty.call(C,Y)}function a$1(C,Y){return o$1(C)===2?C.get(Y):C[Y]}function f$1(C,Y,F){var dl=o$1(C);dl===2?C.set(Y,F):dl===3?C.add(F):C[Y]=F}function c(C,Y){return C===Y?C!==0||1/C==1/Y:C!=C&&Y!=Y}function s(C){return X&&C instanceof Map}function v(C){return q$1&&C instanceof Set}function p$1(C){return C.o||C.t}function l(C){if(Array.isArray(C))return Array.prototype.slice.call(C);var Y=rn(C);delete Y[Q$1];for(var F=nn(Y),dl=0;dl<F.length;dl++){var nl=F[dl],el=Y[nl];el.writable===!1&&(el.writable=!0,el.configurable=!0),(el.get||el.set)&&(Y[nl]={configurable:!0,writable:!0,enumerable:el.enumerable,value:C[nl]})}return Object.create(Object.getPrototypeOf(C),Y)}function d(C,Y){return Y===void 0&&(Y=!1),y$1(C)||r(C)||!t$1(C)||(o$1(C)>1&&(C.set=C.add=C.clear=C.delete=h),Object.freeze(C),Y&&i$1(C,function(F,dl){return d(dl,!0)},!0)),C}function h(){n(2)}function y$1(C){return C==null||typeof C!="object"||Object.isFrozen(C)}function b(C){var Y=tn[C];return Y||n(18,C),Y}function m(C,Y){tn[C]||(tn[C]=Y)}function _$1(){return U}function j(C,Y){Y&&(b("Patches"),C.u=[],C.s=[],C.v=Y)}function g$1(C){O$1(C),C.p.forEach(S$1),C.p=null}function O$1(C){C===U&&(U=C.l)}function w$1(C){return U={p:[],l:U,h:C,m:!0,_:0}}function S$1(C){var Y=C[Q$1];Y.i===0||Y.i===1?Y.j():Y.g=!0}function P$1(C,Y){Y._=Y.p.length;var F=Y.p[0],dl=C!==void 0&&C!==F;return Y.h.O||b("ES5").S(Y,C,dl),dl?(F[Q$1].P&&(g$1(Y),n(4)),t$1(C)&&(C=M$1(Y,C),Y.l||x$1(Y,C)),Y.u&&b("Patches").M(F[Q$1].t,C,Y.u,Y.s)):C=M$1(Y,F,[]),g$1(Y),Y.u&&Y.v(Y.u,Y.s),C!==H$1?C:void 0}function M$1(C,Y,F){if(y$1(Y))return Y;var dl=Y[Q$1];if(!dl)return i$1(Y,function(il,tl){return A(C,dl,Y,il,tl,F)},!0),Y;if(dl.A!==C)return Y;if(!dl.P)return x$1(C,dl.t,!0),dl.t;if(!dl.I){dl.I=!0,dl.A._--;var nl=dl.i===4||dl.i===5?dl.o=l(dl.k):dl.o,el=nl,J=!1;dl.i===3&&(el=new Set(nl),nl.clear(),J=!0),i$1(el,function(il,tl){return A(C,dl,nl,il,tl,F,J)}),x$1(C,nl,!1),F&&C.u&&b("Patches").N(dl,F,C.u,C.s)}return dl.o}function A(C,Y,F,dl,nl,el,J){if(r(nl)){var il=M$1(C,nl,el&&Y&&Y.i!==3&&!u$1(Y.R,dl)?el.concat(dl):void 0);if(f$1(F,dl,il),!r(il))return;C.m=!1}else J&&F.add(nl);if(t$1(nl)&&!y$1(nl)){if(!C.h.D&&C._<1)return;M$1(C,nl),Y&&Y.A.l||x$1(C,nl)}}function x$1(C,Y,F){F===void 0&&(F=!1),!C.l&&C.h.D&&C.m&&d(Y,F)}function z$1(C,Y){var F=C[Q$1];return(F?p$1(F):C)[Y]}function I(C,Y){if(Y in C)for(var F=Object.getPrototypeOf(C);F;){var dl=Object.getOwnPropertyDescriptor(F,Y);if(dl)return dl;F=Object.getPrototypeOf(F)}}function k$1(C){C.P||(C.P=!0,C.l&&k$1(C.l))}function E$1(C){C.o||(C.o=l(C.t))}function N$1(C,Y,F){var dl=s(Y)?b("MapSet").F(Y,F):v(Y)?b("MapSet").T(Y,F):C.O?function(nl,el){var J=Array.isArray(nl),il={i:J?1:0,A:el?el.A:_$1(),P:!1,I:!1,R:{},l:el,t:nl,k:null,o:null,j:null,C:!1},tl=il,V=en;J&&(tl=[il],V=on);var sl=Proxy.revocable(tl,V),Xl=sl.revoke,Yl=sl.proxy;return il.k=Yl,il.j=Xl,Yl}(Y,F):b("ES5").J(Y,F);return(F?F.A:_$1()).p.push(dl),dl}function R(C){return r(C)||n(22,C),function Y(F){if(!t$1(F))return F;var dl,nl=F[Q$1],el=o$1(F);if(nl){if(!nl.P&&(nl.i<4||!b("ES5").K(nl)))return nl.t;nl.I=!0,dl=D(F,el),nl.I=!1}else dl=D(F,el);return i$1(dl,function(J,il){nl&&a$1(nl.t,J)===il||f$1(dl,J,Y(il))}),el===3?new Set(dl):dl}(C)}function D(C,Y){switch(Y){case 2:return new Map(C);case 3:return Array.from(C)}return l(C)}function T$1(){function C(dl){if(!t$1(dl))return dl;if(Array.isArray(dl))return dl.map(C);if(s(dl))return new Map(Array.from(dl.entries()).map(function(J){return[J[0],C(J[1])]}));if(v(dl))return new Set(Array.from(dl).map(C));var nl=Object.create(Object.getPrototypeOf(dl));for(var el in dl)nl[el]=C(dl[el]);return u$1(dl,L)&&(nl[L]=dl[L]),nl}function Y(dl){return r(dl)?C(dl):dl}var F="add";m("Patches",{$:function(dl,nl){return nl.forEach(function(el){for(var J=el.path,il=el.op,tl=dl,V=0;V<J.length-1;V++){var sl=o$1(tl),Xl=J[V];typeof Xl!="string"&&typeof Xl!="number"&&(Xl=""+Xl),sl!==0&&sl!==1||Xl!=="__proto__"&&Xl!=="constructor"||n(24),typeof tl=="function"&&Xl==="prototype"&&n(24),typeof(tl=a$1(tl,Xl))!="object"&&n(15,J.join("/"))}var Yl=o$1(tl),yl=C(el.value),Hl=J[J.length-1];switch(il){case"replace":switch(Yl){case 2:return tl.set(Hl,yl);case 3:n(16);default:return tl[Hl]=yl}case F:switch(Yl){case 1:return Hl==="-"?tl.push(yl):tl.splice(Hl,0,yl);case 2:return tl.set(Hl,yl);case 3:return tl.add(yl);default:return tl[Hl]=yl}case"remove":switch(Yl){case 1:return tl.splice(Hl,1);case 2:return tl.delete(Hl);case 3:return tl.delete(el.value);default:return delete tl[Hl]}default:n(17,il)}}),dl},N:function(dl,nl,el,J){switch(dl.i){case 0:case 4:case 2:return function(il,tl,V,sl){var Xl=il.t,Yl=il.o;i$1(il.R,function(yl,Hl){var Bl=a$1(Xl,yl),Cl=a$1(Yl,yl),Tl=Hl?u$1(Xl,yl)?"replace":F:"remove";if(Bl!==Cl||Tl!=="replace"){var Ql=tl.concat(yl);V.push(Tl==="remove"?{op:Tl,path:Ql}:{op:Tl,path:Ql,value:Cl}),sl.push(Tl===F?{op:"remove",path:Ql}:Tl==="remove"?{op:F,path:Ql,value:Y(Bl)}:{op:"replace",path:Ql,value:Y(Bl)})}})}(dl,nl,el,J);case 5:case 1:return function(il,tl,V,sl){var Xl=il.t,Yl=il.R,yl=il.o;if(yl.length<Xl.length){var Hl=[yl,Xl];Xl=Hl[0],yl=Hl[1];var Bl=[sl,V];V=Bl[0],sl=Bl[1]}for(var Cl=0;Cl<Xl.length;Cl++)if(Yl[Cl]&&yl[Cl]!==Xl[Cl]){var Tl=tl.concat([Cl]);V.push({op:"replace",path:Tl,value:Y(yl[Cl])}),sl.push({op:"replace",path:Tl,value:Y(Xl[Cl])})}for(var Ql=Xl.length;Ql<yl.length;Ql++){var cd=tl.concat([Ql]);V.push({op:F,path:cd,value:Y(yl[Ql])})}Xl.length<yl.length&&sl.push({op:"replace",path:tl.concat(["length"]),value:Xl.length})}(dl,nl,el,J);case 3:return function(il,tl,V,sl){var Xl=il.t,Yl=il.o,yl=0;Xl.forEach(function(Hl){if(!Yl.has(Hl)){var Bl=tl.concat([yl]);V.push({op:"remove",path:Bl,value:Hl}),sl.unshift({op:F,path:Bl,value:Hl})}yl++}),yl=0,Yl.forEach(function(Hl){if(!Xl.has(Hl)){var Bl=tl.concat([yl]);V.push({op:F,path:Bl,value:Hl}),sl.unshift({op:"remove",path:Bl,value:Hl})}yl++})}(dl,nl,el,J)}},M:function(dl,nl,el,J){el.push({op:"replace",path:[],value:nl===H$1?void 0:nl}),J.push({op:"replace",path:[],value:dl})}})}var G,U,W$1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X=typeof Map<"u",q$1=typeof Set<"u",B$1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$1=W$1?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W$1?Symbol.for("immer-draftable"):"__$immer_draftable",Q$1=W$1?Symbol.for("immer-state"):"__$immer_state",Z=""+Object.prototype.constructor,nn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(C){var Y={};return nn(C).forEach(function(F){Y[F]=Object.getOwnPropertyDescriptor(C,F)}),Y},tn={},en={get:function(C,Y){if(Y===Q$1)return C;var F=p$1(C);if(!u$1(F,Y))return function(nl,el,J){var il,tl=I(el,J);return tl?"value"in tl?tl.value:(il=tl.get)===null||il===void 0?void 0:il.call(nl.k):void 0}(C,F,Y);var dl=F[Y];return C.I||!t$1(dl)?dl:dl===z$1(C.t,Y)?(E$1(C),C.o[Y]=N$1(C.A.h,dl,C)):dl},has:function(C,Y){return Y in p$1(C)},ownKeys:function(C){return Reflect.ownKeys(p$1(C))},set:function(C,Y,F){var dl=I(p$1(C),Y);if(dl?.set)return dl.set.call(C.k,F),!0;if(!C.P){var nl=z$1(p$1(C),Y),el=nl?.[Q$1];if(el&&el.t===F)return C.o[Y]=F,C.R[Y]=!1,!0;if(c(F,nl)&&(F!==void 0||u$1(C.t,Y)))return!0;E$1(C),k$1(C)}return C.o[Y]===F&&(F!==void 0||Y in C.o)||Number.isNaN(F)&&Number.isNaN(C.o[Y])||(C.o[Y]=F,C.R[Y]=!0),!0},deleteProperty:function(C,Y){return z$1(C.t,Y)!==void 0||Y in C.t?(C.R[Y]=!1,E$1(C),k$1(C)):delete C.R[Y],C.o&&delete C.o[Y],!0},getOwnPropertyDescriptor:function(C,Y){var F=p$1(C),dl=Reflect.getOwnPropertyDescriptor(F,Y);return dl&&{writable:!0,configurable:C.i!==1||Y!=="length",enumerable:dl.enumerable,value:F[Y]}},defineProperty:function(){n(11)},getPrototypeOf:function(C){return Object.getPrototypeOf(C.t)},setPrototypeOf:function(){n(12)}},on={};i$1(en,function(C,Y){on[C]=function(){return arguments[0]=arguments[0][0],Y.apply(this,arguments)}}),on.deleteProperty=function(C,Y){return on.set.call(this,C,Y,void 0)},on.set=function(C,Y,F){return en.set.call(this,C[0],Y,F,C[0])};var un=function(){function C(F){var dl=this;this.O=B$1,this.D=!0,this.produce=function(nl,el,J){if(typeof nl=="function"&&typeof el!="function"){var il=el;el=nl;var tl=dl;return function(Bl){var Cl=this;Bl===void 0&&(Bl=il);for(var Tl=arguments.length,Ql=Array(Tl>1?Tl-1:0),cd=1;cd<Tl;cd++)Ql[cd-1]=arguments[cd];return tl.produce(Bl,function(nd){var ud;return(ud=el).call.apply(ud,[Cl,nd].concat(Ql))})}}var V;if(typeof el!="function"&&n(6),J!==void 0&&typeof J!="function"&&n(7),t$1(nl)){var sl=w$1(dl),Xl=N$1(dl,nl,void 0),Yl=!0;try{V=el(Xl),Yl=!1}finally{Yl?g$1(sl):O$1(sl)}return typeof Promise<"u"&&V instanceof Promise?V.then(function(Bl){return j(sl,J),P$1(Bl,sl)},function(Bl){throw g$1(sl),Bl}):(j(sl,J),P$1(V,sl))}if(!nl||typeof nl!="object"){if((V=el(nl))===void 0&&(V=nl),V===H$1&&(V=void 0),dl.D&&d(V,!0),J){var yl=[],Hl=[];b("Patches").M(nl,V,yl,Hl),J(yl,Hl)}return V}n(21,nl)},this.produceWithPatches=function(nl,el){if(typeof nl=="function")return function(V){for(var sl=arguments.length,Xl=Array(sl>1?sl-1:0),Yl=1;Yl<sl;Yl++)Xl[Yl-1]=arguments[Yl];return dl.produceWithPatches(V,function(yl){return nl.apply(void 0,[yl].concat(Xl))})};var J,il,tl=dl.produce(nl,el,function(V,sl){J=V,il=sl});return typeof Promise<"u"&&tl instanceof Promise?tl.then(function(V){return[V,J,il]}):[tl,J,il]},typeof F?.useProxies=="boolean"&&this.setUseProxies(F.useProxies),typeof F?.autoFreeze=="boolean"&&this.setAutoFreeze(F.autoFreeze)}var Y=C.prototype;return Y.createDraft=function(F){t$1(F)||n(8),r(F)&&(F=R(F));var dl=w$1(this),nl=N$1(this,F,void 0);return nl[Q$1].C=!0,O$1(dl),nl},Y.finishDraft=function(F,dl){var nl=F&&F[Q$1],el=nl.A;return j(el,dl),P$1(void 0,el)},Y.setAutoFreeze=function(F){this.D=F},Y.setUseProxies=function(F){F&&!B$1&&n(20),this.O=F},Y.applyPatches=function(F,dl){var nl;for(nl=dl.length-1;nl>=0;nl--){var el=dl[nl];if(el.path.length===0&&el.op==="replace"){F=el.value;break}}nl>-1&&(dl=dl.slice(nl+1));var J=b("Patches").$;return r(F)?J(F,dl):this.produce(F,function(il){return J(il,dl)})},C}(),an=new un;an.produce;var cn=an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);var __awaiter$b=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};T$1();class SceneItemsApi{constructor(Y){this.messageBus=Y}getItems(Y){return __awaiter$b(this,void 0,void 0,function*(){if(Array.isArray(Y)){const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEMS",{ids:Y});return F}else if(Y){const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ALL_ITEMS",{});return F.filter(Y)}else{const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ALL_ITEMS",{});return F}})}isItemArray(Y){return Array.isArray(Y)&&Y.every(F=>typeof F!="string")}updateItems(Y,F){return __awaiter$b(this,void 0,void 0,function*(){let dl;this.isItemArray(Y)?dl=Y:dl=yield this.getItems(Y);const[nl,el]=cn(dl,F),J=nl.map(il=>({id:il.id,type:il.type}));for(const il of el){const[tl,V]=il.path;typeof tl=="number"&&typeof V=="string"&&(J[tl][V]=nl[tl][V])}yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_UPDATE_ITEMS",{updates:J})})}addItems(Y){return __awaiter$b(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_ADD_ITEMS",{items:Y})})}deleteItems(Y){return __awaiter$b(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_DELETE_ITEMS",{ids:Y})})}getItemAttachments(Y){return __awaiter$b(this,void 0,void 0,function*(){const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEM_ATTACHMENTS",{ids:Y});return F})}getItemBounds(Y){return __awaiter$b(this,void 0,void 0,function*(){const{bounds:F}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEM_BOUNDS",{ids:Y});return F})}onChange(Y){const F=dl=>{Y(dl.items)};return this.messageBus.send("OBR_SCENE_ITEMS_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_ITEMS_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_SCENE_ITEMS_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_ITEMS_EVENT_CHANGE",F)}}}var __awaiter$a=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};T$1();class SceneLocalApi{constructor(Y){this.messageBus=Y}getItems(Y){return __awaiter$a(this,void 0,void 0,function*(){if(Array.isArray(Y)){const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEMS",{ids:Y});return F}else if(Y){const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ALL_ITEMS",{});return F.filter(Y)}else{const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ALL_ITEMS",{});return F}})}updateItems(Y,F,dl){return __awaiter$a(this,void 0,void 0,function*(){const nl=yield this.getItems(Y),[el,J]=cn(nl,F),il=el.map(tl=>({id:tl.id,type:tl.type}));for(const tl of J){const[V,sl]=tl.path;typeof V=="number"&&typeof sl=="string"&&(il[V][sl]=el[V][sl])}yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_UPDATE_ITEMS",{updates:il,fastUpdate:dl})})}addItems(Y){return __awaiter$a(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_ADD_ITEMS",{items:Y})})}deleteItems(Y){return __awaiter$a(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_DELETE_ITEMS",{ids:Y})})}getItemAttachments(Y){return __awaiter$a(this,void 0,void 0,function*(){const{items:F}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEM_ATTACHMENTS",{ids:Y});return F})}getItemBounds(Y){return __awaiter$a(this,void 0,void 0,function*(){const{bounds:F}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEM_BOUNDS",{ids:Y});return F})}onChange(Y){const F=dl=>{Y(dl.items)};return this.messageBus.send("OBR_SCENE_LOCAL_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_LOCAL_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_SCENE_LOCAL_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_LOCAL_EVENT_CHANGE",F)}}}var __awaiter$9=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class SceneApi{constructor(Y){this.messageBus=Y,this.grid=new SceneGridApi(Y),this.fog=new SceneFogApi(Y),this.history=new SceneHistoryApi(Y),this.items=new SceneItemsApi(Y),this.local=new SceneLocalApi(Y)}isReady(){return __awaiter$9(this,void 0,void 0,function*(){const{ready:Y}=yield this.messageBus.sendAsync("OBR_SCENE_IS_READY",{});return Y})}onReadyChange(Y){const F=dl=>{Y(dl.ready)};return this.messageBus.send("OBR_SCENE_READY_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_EVENT_READY_CHANGE",F),()=>{this.messageBus.send("OBR_SCENE_READY_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_EVENT_READY_CHANGE",F)}}getMetadata(){return __awaiter$9(this,void 0,void 0,function*(){const{metadata:Y}=yield this.messageBus.sendAsync("OBR_SCENE_GET_METADATA",{});return Y})}setMetadata(Y){return __awaiter$9(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_SET_METADATA",{update:Y})})}onMetadataChange(Y){const F=dl=>{Y(dl.metadata)};return this.messageBus.send("OBR_SCENE_METADATA_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_METADATA_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_SCENE_METADATA_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_METADATA_EVENT_CHANGE",F)}}}function normalizeIconPaths(C){return C.map(Y=>Object.assign(Object.assign({},Y),{icon:Y.icon.startsWith("http")?Y.icon:`${window.location.origin}${Y.icon}`}))}function normalizeUrlObject(C){return Object.assign(Object.assign({},C),{url:C.url.startsWith("http")?C.url:`${window.location.origin}${C.url}`})}var __awaiter$8=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class ContextMenuApi{constructor(Y){this.contextMenus={},this.handleClick=F=>{const dl=this.contextMenus[F.id];dl&&dl.onClick(F.context,F.elementId)},this.messageBus=Y,Y.on("OBR_CONTEXT_MENU_EVENT_CLICK",this.handleClick)}create(Y){return __awaiter$8(this,void 0,void 0,function*(){this.messageBus.sendAsync("OBR_CONTEXT_MENU_CREATE",{id:Y.id,shortcut:Y.shortcut,icons:normalizeIconPaths(Y.icons)}),this.contextMenus[Y.id]=Y})}remove(Y){return __awaiter$8(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_CONTEXT_MENU_REMOVE",{id:Y}),delete this.contextMenus[Y]})}}var __awaiter$7=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class ToolApi{constructor(Y){this.tools={},this.toolActions={},this.toolModes={},this.handleToolClick=F=>{const dl=this.tools[F.id];if(dl)if(dl.onClick){const nl=dl.onClick(F.context,F.elementId);Promise.resolve(nl).then(el=>{el&&this.messageBus.send("OBR_TOOL_ACTIVATE",{id:F.id})})}else this.messageBus.send("OBR_TOOL_ACTIVATE",{id:F.id})},this.handleToolActionClick=F=>{var dl;const nl=this.toolActions[F.id];nl&&((dl=nl.onClick)===null||dl===void 0||dl.call(nl,F.context,F.elementId))},this.handleToolModeClick=F=>{const dl=this.toolModes[F.id];if(dl)if(dl.onClick){const nl=dl.onClick(F.context,F.elementId);Promise.resolve(nl).then(el=>{el&&this.messageBus.send("OBR_TOOL_MODE_ACTIVATE",{toolId:F.context.activeTool,modeId:F.id})})}else this.messageBus.send("OBR_TOOL_MODE_ACTIVATE",{toolId:F.context.activeTool,modeId:F.id})},this.handleToolModeToolClick=F=>{const dl=this.toolModes[F.id];if(dl)if(dl.onToolClick){const nl=dl.onToolClick(F.context,F.event);Promise.resolve(nl).then(el=>{el&&F.event.target&&!F.event.target.locked&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[F.event.target.id]})})}else F.event.target&&!F.event.target.locked&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[F.event.target.id]})},this.handleToolModeToolDoubleClick=F=>{const dl=this.toolModes[F.id];if(dl)if(dl.onToolDoubleClick){const nl=dl.onToolDoubleClick(F.context,F.event);Promise.resolve(nl).then(el=>{el&&F.event.target&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[F.event.target.id]})})}else F.event.target&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[F.event.target.id]})},this.handleToolModeToolDown=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onToolDown)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeToolMove=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onToolMove)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeToolUp=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onToolUp)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeToolDragStart=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onToolDragStart)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeToolDragMove=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onToolDragMove)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeToolDragEnd=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onToolDragEnd)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeToolDragCancel=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onToolDragCancel)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeKeyDown=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onKeyDown)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.handleToolModeKeyUp=F=>{var dl;const nl=this.toolModes[F.id];nl&&((dl=nl.onKeyUp)===null||dl===void 0||dl.call(nl,F.context,F.event))},this.messageBus=Y,Y.on("OBR_TOOL_EVENT_CLICK",this.handleToolClick),Y.on("OBR_TOOL_ACTION_EVENT_CLICK",this.handleToolActionClick),Y.on("OBR_TOOL_MODE_EVENT_CLICK",this.handleToolModeClick),Y.on("OBR_TOOL_MODE_EVENT_TOOL_CLICK",this.handleToolModeToolClick),Y.on("OBR_TOOL_MODE_EVENT_TOOL_DOUBLE_CLICK",this.handleToolModeToolDoubleClick),Y.on("OBR_TOOL_MODE_EVENT_TOOL_DOWN",this.handleToolModeToolDown),Y.on("OBR_TOOL_MODE_EVENT_TOOL_MOVE",this.handleToolModeToolMove),Y.on("OBR_TOOL_MODE_EVENT_TOOL_UP",this.handleToolModeToolUp),Y.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_START",this.handleToolModeToolDragStart),Y.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_MOVE",this.handleToolModeToolDragMove),Y.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_END",this.handleToolModeToolDragEnd),Y.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_CANCEL",this.handleToolModeToolDragCancel),Y.on("OBR_TOOL_MODE_EVENT_KEY_DOWN",this.handleToolModeKeyDown),Y.on("OBR_TOOL_MODE_EVENT_KEY_UP",this.handleToolModeKeyUp)}create(Y){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_CREATE",{id:Y.id,shortcut:Y.shortcut,defaultMode:Y.defaultMode,defaultMetadata:Y.defaultMetadata,icons:normalizeIconPaths(Y.icons),disabled:Y.disabled}),this.tools[Y.id]=Y})}remove(Y){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_REMOVE",{id:Y}),delete this.tools[Y]})}activateTool(Y){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTIVATE",{id:Y})})}getMetadata(Y){return __awaiter$7(this,void 0,void 0,function*(){const{metadata:F}=yield this.messageBus.sendAsync("OBR_TOOL_GET_METADATA",{id:Y});return F})}setMetadata(Y,F){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_SET_METADATA",{toolId:Y,update:F})})}createAction(Y){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTION_CREATE",{id:Y.id,shortcut:Y.shortcut,icons:normalizeIconPaths(Y.icons),disabled:Y.disabled}),this.toolActions[Y.id]=Y})}removeAction(Y){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTION_REMOVE",{id:Y}),delete this.tools[Y]})}createMode(Y){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_CREATE",{id:Y.id,shortcut:Y.shortcut,icons:normalizeIconPaths(Y.icons),preventDrag:Y.preventDrag,disabled:Y.disabled,cursors:Y.cursors}),this.toolModes[Y.id]=Y})}removeMode(Y){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_REMOVE",{id:Y}),delete this.tools[Y]})}activateMode(Y,F){return __awaiter$7(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_ACTIVATE",{toolId:Y,modeId:F})})}}var __awaiter$6=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class PopoverApi{constructor(Y){this.messageBus=Y}open(Y){return __awaiter$6(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_OPEN",Object.assign({},normalizeUrlObject(Y)))})}close(Y){return __awaiter$6(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_CLOSE",{id:Y})})}}var __awaiter$5=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class ModalApi{constructor(Y){this.messageBus=Y}open(Y){return __awaiter$5(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_MODAL_OPEN",Object.assign({},normalizeUrlObject(Y)))})}close(Y){return __awaiter$5(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_MODAL_CLOSE",{id:Y})})}}var __awaiter$4=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class ActionApi{constructor(Y){this.messageBus=Y}getWidth(){return __awaiter$4(this,void 0,void 0,function*(){const{width:Y}=yield this.messageBus.sendAsync("OBR_ACTION_GET_WIDTH",{});return Y})}setWidth(Y){return __awaiter$4(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_WIDTH",{width:Y})})}getHeight(){return __awaiter$4(this,void 0,void 0,function*(){const{height:Y}=yield this.messageBus.sendAsync("OBR_ACTION_GET_HEIGHT",{});return Y})}setHeight(Y){return __awaiter$4(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_HEIGHT",{height:Y})})}getBadgeText(){return __awaiter$4(this,void 0,void 0,function*(){const{badgeText:Y}=yield this.messageBus.sendAsync("OBR_ACTION_GET_BADGE_TEXT",{});return Y})}setBadgeText(Y){return __awaiter$4(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_BADGE_TEXT",{badgeText:Y})})}getBadgeBackgroundColor(){return __awaiter$4(this,void 0,void 0,function*(){const{badgeBackgroundColor:Y}=yield this.messageBus.sendAsync("OBR_ACTION_GET_BADGE_BACKGROUND_COLOR",{});return Y})}setBadgeBackgroundColor(Y){return __awaiter$4(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_BADGE_BACKGROUND_COLOR",{badgeBackgroundColor:Y})})}getIcon(){return __awaiter$4(this,void 0,void 0,function*(){const{icon:Y}=yield this.messageBus.sendAsync("OBR_ACTION_GET_ICON",{});return Y})}setIcon(Y){return __awaiter$4(this,void 0,void 0,function*(){const F=normalizeIconPaths([{icon:Y}]);yield this.messageBus.sendAsync("OBR_ACTION_SET_ICON",{icon:F[0].icon})})}getTitle(){return __awaiter$4(this,void 0,void 0,function*(){const{title:Y}=yield this.messageBus.sendAsync("OBR_ACTION_GET_TITLE",{});return Y})}setTitle(Y){return __awaiter$4(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_TITLE",{title:Y})})}isOpen(){return __awaiter$4(this,void 0,void 0,function*(){const{isOpen:Y}=yield this.messageBus.sendAsync("OBR_ACTION_GET_IS_OPEN",{});return Y})}onOpenChange(Y){const F=dl=>{Y(dl.isOpen)};return this.messageBus.send("OBR_ACTION_IS_OPEN_SUBSCRIBE",{}),this.messageBus.on("OBR_ACTION_IS_OPEN_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_IS_OPEN_ACTION_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ACTION_IS_OPEN_EVENT_CHANGE",F)}}}var __awaiter$3=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};T$1();class InteractionApi{constructor(Y){this.messageBus=Y}startItemInteraction(Y){return __awaiter$3(this,void 0,void 0,function*(){const{id:F}=yield this.messageBus.sendAsync("OBR_INTERACTION_START_ITEM_INTERACTION",{baseState:Y});let dl=Y;return[J=>{const[il,tl]=cn(dl,J);return dl=il,this.messageBus.send("OBR_INTERACTION_UPDATE_ITEM_INTERACTION",{id:F,patches:tl}),il},()=>{this.messageBus.send("OBR_INTERACTION_STOP_ITEM_INTERACTION",{id:F})}]})}}var __awaiter$2=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class PartyApi{constructor(Y){this.messageBus=Y}getPlayers(){return __awaiter$2(this,void 0,void 0,function*(){const{players:Y}=yield this.messageBus.sendAsync("OBR_PARTY_GET_PLAYERS",{});return Y})}onChange(Y){const F=dl=>{Y(dl.players)};return this.messageBus.send("OBR_PARTY_SUBSCRIBE",{}),this.messageBus.on("OBR_PARTY_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_PARTY_UNSUBSCRIBE",{}),this.messageBus.off("OBR_PARTY_EVENT_CHANGE",F)}}}var __awaiter$1=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class RoomApi{constructor(Y){this.messageBus=Y}get id(){return this.messageBus.roomId}getPermissions(){return __awaiter$1(this,void 0,void 0,function*(){const{permissions:Y}=yield this.messageBus.sendAsync("OBR_ROOM_GET_PERMISSIONS",{});return Y})}getMetadata(){return __awaiter$1(this,void 0,void 0,function*(){const{metadata:Y}=yield this.messageBus.sendAsync("OBR_ROOM_GET_METADATA",{});return Y})}setMetadata(Y){return __awaiter$1(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ROOM_SET_METADATA",{update:Y})})}onMetadataChange(Y){const F=dl=>{Y(dl.metadata)};return this.messageBus.send("OBR_ROOM_METADATA_SUBSCRIBE",{}),this.messageBus.on("OBR_ROOM_METADATA_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_METADATA_ROOM_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ROOM_METADATA_EVENT_CHANGE",F)}}onPermissionsChange(Y){const F=dl=>{Y(dl.permissions)};return this.messageBus.send("OBR_ROOM_PERMISSIONS_SUBSCRIBE",{}),this.messageBus.on("OBR_ROOM_PERMISSIONS_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_PERMISSIONS_ROOM_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ROOM_PERMISSIONS_EVENT_CHANGE",F)}}}var __awaiter=globalThis&&globalThis.__awaiter||function(C,Y,F,dl){function nl(el){return el instanceof F?el:new F(function(J){J(el)})}return new(F||(F=Promise))(function(el,J){function il(sl){try{V(dl.next(sl))}catch(Xl){J(Xl)}}function tl(sl){try{V(dl.throw(sl))}catch(Xl){J(Xl)}}function V(sl){sl.done?el(sl.value):nl(sl.value).then(il,tl)}V((dl=dl.apply(C,Y||[])).next())})};class ThemeApi{constructor(Y){this.messageBus=Y}getTheme(){return __awaiter(this,void 0,void 0,function*(){const{theme:Y}=yield this.messageBus.sendAsync("OBR_THEME_GET_THEME",{});return Y})}onChange(Y){const F=dl=>{Y(dl.theme)};return this.messageBus.send("OBR_THEME_SUBSCRIBE",{}),this.messageBus.on("OBR_THEME_EVENT_CHANGE",F),()=>{this.messageBus.send("OBR_THEME_UNSUBSCRIBE",{}),this.messageBus.off("OBR_THEME_EVENT_CHANGE",F)}}}const _hasatob=typeof atob=="function",_hasBuffer=typeof Buffer=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(C=>{let Y={};return C.forEach((F,dl)=>Y[F]=dl),Y})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):C=>new Uint8Array(Array.prototype.slice.call(C,0)),_tidyB64=C=>C.replace(/[^A-Za-z0-9\+\/]/g,""),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=C=>{switch(C.length){case 4:var Y=(7&C.charCodeAt(0))<<18|(63&C.charCodeAt(1))<<12|(63&C.charCodeAt(2))<<6|63&C.charCodeAt(3),F=Y-65536;return _fromCC((F>>>10)+55296)+_fromCC((F&1023)+56320);case 3:return _fromCC((15&C.charCodeAt(0))<<12|(63&C.charCodeAt(1))<<6|63&C.charCodeAt(2));default:return _fromCC((31&C.charCodeAt(0))<<6|63&C.charCodeAt(1))}},btou=C=>C.replace(re_btou,cb_btou),atobPolyfill=C=>{if(C=C.replace(/\s+/g,""),!b64re.test(C))throw new TypeError("malformed base64.");C+="==".slice(2-(C.length&3));let Y,F="",dl,nl;for(let el=0;el<C.length;)Y=b64tab[C.charAt(el++)]<<18|b64tab[C.charAt(el++)]<<12|(dl=b64tab[C.charAt(el++)])<<6|(nl=b64tab[C.charAt(el++)]),F+=dl===64?_fromCC(Y>>16&255):nl===64?_fromCC(Y>>16&255,Y>>8&255):_fromCC(Y>>16&255,Y>>8&255,Y&255);return F},_atob=_hasatob?C=>atob(_tidyB64(C)):_hasBuffer?C=>Buffer.from(C,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?C=>_U8Afrom(Buffer.from(C,"base64")):C=>_U8Afrom(_atob(C).split("").map(Y=>Y.charCodeAt(0))),_decode=_hasBuffer?C=>Buffer.from(C,"base64").toString("utf8"):_TD?C=>_TD.decode(_toUint8Array(C)):C=>btou(_atob(C)),_unURI=C=>_tidyB64(C.replace(/[-_]/g,Y=>Y=="-"?"+":"/")),decode=C=>_decode(_unURI(C));function getDetails(){const Y=new URLSearchParams(window.location.search).get("obrref");let F="",dl="";if(Y){const el=decode(Y).split(" ");el.length===2&&(F=el[0],dl=el[1])}return{origin:F,roomId:dl}}var Command;(function(C){C[C.MOVE=0]="MOVE",C[C.LINE=1]="LINE",C[C.QUAD=2]="QUAD",C[C.CONIC=3]="CONIC",C[C.CUBIC=4]="CUBIC",C[C.CLOSE=5]="CLOSE"})(Command||(Command={}));const details=getDetails(),messageBus=new MessageBus(details.origin,details.roomId),viewportApi=new ViewportApi(messageBus),playerApi=new PlayerApi(messageBus),partyApi=new PartyApi(messageBus),notificationApi=new NotificationApi(messageBus),sceneApi=new SceneApi(messageBus),contextMenuApi=new ContextMenuApi(messageBus),toolApi=new ToolApi(messageBus),popoverApi=new PopoverApi(messageBus),modalApi=new ModalApi(messageBus),actionApi=new ActionApi(messageBus),interactionApi=new InteractionApi(messageBus),roomApi=new RoomApi(messageBus),themeApi=new ThemeApi(messageBus),OBR={onReady:C=>{messageBus.ready?C():messageBus.once("OBR_READY",()=>C())},get isReady(){return messageBus.ready},viewport:viewportApi,player:playerApi,party:partyApi,notification:notificationApi,scene:sceneApi,contextMenu:contextMenuApi,tool:toolApi,popover:popoverApi,modal:modalApi,action:actionApi,interaction:interactionApi,room:roomApi,theme:themeApi,isAvailable:!!details.origin},scriptRel="modulepreload",assetsURL=function(C){return"/"+C},seen={},__vitePreload=function(Y,F,dl){if(!F||F.length===0)return Y();const nl=document.getElementsByTagName("link");return Promise.all(F.map(el=>{if(el=assetsURL(el),el in seen)return;seen[el]=!0;const J=el.endsWith(".css"),il=J?'[rel="stylesheet"]':"";if(!!dl)for(let sl=nl.length-1;sl>=0;sl--){const Xl=nl[sl];if(Xl.href===el&&(!J||Xl.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${el}"]${il}`))return;const V=document.createElement("link");if(V.rel=J?"stylesheet":scriptRel,J||(V.as="script",V.crossOrigin=""),V.href=el,document.head.appendChild(V),J)return new Promise((sl,Xl)=>{V.addEventListener("load",sl),V.addEventListener("error",()=>Xl(new Error(`Unable to preload CSS for ${el}`)))})})).then(()=>Y())};var Zl=Object.defineProperty,ml=(C,Y,F)=>Y in C?Zl(C,Y,{enumerable:!0,configurable:!0,writable:!0,value:F}):C[Y]=F,N=(C,Y,F)=>(ml(C,typeof Y!="symbol"?Y+"":Y,F),F),E=(C,Y,F)=>{if(!Y.has(C))throw TypeError("Cannot "+F)},W=(C,Y,F)=>(E(C,Y,"read from private field"),F?F.call(C):Y.get(C)),p=(C,Y,F)=>{if(Y.has(C))throw TypeError("Cannot add the same private member more than once");Y instanceof WeakSet?Y.add(C):Y.set(C,F)},i=(C,Y,F,dl)=>(E(C,Y,"write to private field"),dl?dl.call(C,F):Y.set(C,F),F),S=(C,Y,F,dl)=>({set _(nl){i(C,Y,nl,F)},get _(){return W(C,Y,dl)}}),y=(C,Y,F)=>(E(C,Y,"access private method"),F);function cl(C){const{selector:Y,id:F}=C;if(!Y||typeof Y!="string")throw new Error("You must provide a DOM selector as the first argument in order to render the Dice Box");let dl;const nl=document.querySelector(Y);if(!(nl!=null&&nl.nodeName))throw new Error(`DiceBox target DOM node: '${Y}' not found or not available yet. Try invoking inside a DOMContentLoaded event`);return nl.nodeName.toLowerCase()!=="canvas"?(dl=document.createElement("canvas"),dl.id=F,nl.appendChild(dl)):dl=nl,dl}const $="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHN0KHAsdCxtKXtyZXR1cm4gcCooMS1tKSt0Km19dmFyIFp0PXR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmN1cnJlbnRTY3JpcHQ/ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM6dm9pZCAwO3R5cGVvZiBfX2ZpbGVuYW1lPCJ1IiYmKFp0PVp0fHxfX2ZpbGVuYW1lKTtmdW5jdGlvbiBnbChwKXtwPXB8fHt9O3ZhciB0O3R8fCh0PXR5cGVvZiBwPCJ1Ij9wOnt9KTt2YXIgbTt0LnJlYWR5PW5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe209ZX0pO3ZhciBkPXt9LHY7Zm9yKHYgaW4gdCl0Lmhhc093blByb3BlcnR5KHYpJiYoZFt2XT10W3ZdKTt2YXIgTD0hMSxIPSExLHE9ITEsWT0hMTtMPXR5cGVvZiB3aW5kb3c9PSJvYmplY3QiLEg9dHlwZW9mIGltcG9ydFNjcmlwdHM9PSJmdW5jdGlvbiIscT10eXBlb2YgcHJvY2Vzcz09Im9iamVjdCImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zPT0ib2JqZWN0IiYmdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZT09InN0cmluZyIsWT0hTCYmIXEmJiFIO3ZhciBqPSIiLFosaHQsd3QsRztxPyhqPUg/cmVxdWlyZSgicGF0aCIpLmRpcm5hbWUoaikrIi8iOl9fZGlybmFtZSsiLyIsWj1mdW5jdGlvbihlLG8pe3JldHVybiB3dHx8KHd0PXJlcXVpcmUoImZzIikpLEd8fChHPXJlcXVpcmUoInBhdGgiKSksZT1HLm5vcm1hbGl6ZShlKSx3dC5yZWFkRmlsZVN5bmMoZSxvP251bGw6InV0ZjgiKX0saHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9WihlLCEwKSxlLmJ1ZmZlcnx8KGU9bmV3IFVpbnQ4QXJyYXkoZSkpLEx0KGUuYnVmZmVyKSxlfSwxPHByb2Nlc3MuYXJndi5sZW5ndGgmJnByb2Nlc3MuYXJndlsxXS5yZXBsYWNlKC9cXC9nLCIvIikscHJvY2Vzcy5hcmd2LnNsaWNlKDIpLHByb2Nlc3Mub24oInVuY2F1Z2h0RXhjZXB0aW9uIixmdW5jdGlvbihlKXt0aHJvdyBlfSkscHJvY2Vzcy5vbigidW5oYW5kbGVkUmVqZWN0aW9uIixHdCksdC5pbnNwZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn0pOlk/KHR5cGVvZiByZWFkPCJ1IiYmKFo9ZnVuY3Rpb24oZSl7cmV0dXJuIHJlYWQoZSl9KSxodD1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHJlYWRidWZmZXI9PSJmdW5jdGlvbiI/bmV3IFVpbnQ4QXJyYXkocmVhZGJ1ZmZlcihlKSk6KGU9cmVhZChlLCJiaW5hcnkiKSxMdCh0eXBlb2YgZT09Im9iamVjdCIpLGUpfSx0eXBlb2YgcHJpbnQ8InUiJiYodHlwZW9mIGNvbnNvbGU+InUiJiYoY29uc29sZT17fSksY29uc29sZS5sb2c9cHJpbnQsY29uc29sZS53YXJuPWNvbnNvbGUuZXJyb3I9dHlwZW9mIHByaW50RXJyPCJ1Ij9wcmludEVycjpwcmludCkpOihMfHxIKSYmKEg/aj1zZWxmLmxvY2F0aW9uLmhyZWY6ZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKGo9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpLFp0JiYoaj1adCksaj1qLmluZGV4T2YoImJsb2I6IikhPT0wP2ouc3Vic3RyKDAsai5sYXN0SW5kZXhPZigiLyIpKzEpOiIiLFo9ZnVuY3Rpb24oZSl7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBvLm9wZW4oIkdFVCIsZSwhMSksby5zZW5kKG51bGwpLG8ucmVzcG9uc2VUZXh0fSxIJiYoaHQ9ZnVuY3Rpb24oZSl7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBvLm9wZW4oIkdFVCIsZSwhMSksby5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIixvLnNlbmQobnVsbCksbmV3IFVpbnQ4QXJyYXkoby5yZXNwb25zZSl9KSk7dmFyIE50PXQucHJpbnR8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksT3Q9dC5wcmludEVycnx8Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7Zm9yKHYgaW4gZClkLmhhc093blByb3BlcnR5KHYpJiYodFt2XT1kW3ZdKTtkPW51bGw7dmFyIGVlPVtdLEJ0LGZ0O3Qud2FzbUJpbmFyeSYmKGZ0PXQud2FzbUJpbmFyeSksdC5ub0V4aXRSdW50aW1lJiZ0Lm5vRXhpdFJ1bnRpbWUsdHlwZW9mIFdlYkFzc2VtYmx5IT0ib2JqZWN0IiYmT3QoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIga3QsV3Q9bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHtpbml0aWFsOjQ3NSxlbGVtZW50OiJhbnlmdW5jIn0pLG9lPSExO2Z1bmN0aW9uIEx0KGUsbyl7ZXx8R3QoIkFzc2VydGlvbiBmYWlsZWQ6ICIrbyl9dmFyIEN0LEh0LFl0LFh0LG5lLFB0PXQuSU5JVElBTF9NRU1PUll8fDY3MTA4ODY0OyhrdD10Lndhc21NZW1vcnk/dC53YXNtTWVtb3J5Om5ldyBXZWJBc3NlbWJseS5NZW1vcnkoe2luaXRpYWw6UHQvNjU1MzYsbWF4aW11bTpQdC82NTUzNn0pKSYmKEN0PWt0LmJ1ZmZlciksUHQ9Q3QuYnl0ZUxlbmd0aDt2YXIgdHQ9Q3Q7Q3Q9dHQsdC5IRUFQOD1uZXcgSW50OEFycmF5KHR0KSx0LkhFQVAxNj1uZXcgSW50MTZBcnJheSh0dCksdC5IRUFQMzI9WXQ9bmV3IEludDMyQXJyYXkodHQpLHQuSEVBUFU4PUh0PW5ldyBVaW50OEFycmF5KHR0KSx0LkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KHR0KSx0LkhFQVBVMzI9bmV3IFVpbnQzMkFycmF5KHR0KSx0LkhFQVBGMzI9WHQ9bmV3IEZsb2F0MzJBcnJheSh0dCksdC5IRUFQRjY0PW5lPW5ldyBGbG9hdDY0QXJyYXkodHQpLFl0WzQ0OTJdPTUyNjEwMDg7ZnVuY3Rpb24gVXQoZSl7Zm9yKDswPGUubGVuZ3RoOyl7dmFyIG89ZS5zaGlmdCgpO2lmKHR5cGVvZiBvPT0iZnVuY3Rpb24iKW8odCk7ZWxzZXt2YXIgbj1vLmhpO3R5cGVvZiBuPT0ibnVtYmVyIj9vLmNpPT09dm9pZCAwP3QuZHluQ2FsbF92KG4pOnQuZHluQ2FsbF92aShuLG8uY2kpOm4oby5jaT09PXZvaWQgMD9udWxsOm8uY2kpfX19dmFyIHJlPVtdLF9lPVtdLFZ0PVtdLEllPVtdLE9lPSExO2Z1bmN0aW9uIE9sKCl7dmFyIGU9dC5wcmVSdW4uc2hpZnQoKTtyZS51bnNoaWZ0KGUpfXZhciBRdD0wLHF0PW51bGw7dC5wcmVsb2FkZWRJbWFnZXM9e30sdC5wcmVsb2FkZWRBdWRpb3M9e307ZnVuY3Rpb24gR3QoZSl7dGhyb3cgdC5vbkFib3J0JiZ0Lm9uQWJvcnQoZSksZSs9IiIsTnQoZSksT3QoZSksb2U9ITAsbmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcigiYWJvcnQoIitlKyIpLiBCdWlsZCB3aXRoIC1zIEFTU0VSVElPTlM9MSBmb3IgbW9yZSBpbmZvLiIpfWZ1bmN0aW9uIGdlKGUpe3ZhciBvPXh0O3JldHVybiBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGg/by5zdGFydHNXaXRoKGUpOm8uaW5kZXhPZihlKT09PTB9ZnVuY3Rpb24gQmUoKXtyZXR1cm4gZ2UoImRhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwiKX12YXIgeHQ9ImFtbW8ud2FzbS53YXNtIjtpZighQmUoKSl7dmFyIFBlPXh0O3h0PXQubG9jYXRlRmlsZT90LmxvY2F0ZUZpbGUoUGUsaik6aitQZX1mdW5jdGlvbiB4ZSgpe3RyeXtpZihmdClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZnQpO2lmKGh0KXJldHVybiBodCh4dCk7dGhyb3ciYm90aCBhc3luYyBhbmQgc3luYyBmZXRjaGluZyBvZiB0aGUgd2FzbSBmYWlsZWQifWNhdGNoKGUpe0d0KGUpfX1mdW5jdGlvbiBCbCgpe3JldHVybiBmdHx8IUwmJiFIfHx0eXBlb2YgZmV0Y2ghPSJmdW5jdGlvbiJ8fGdlKCJmaWxlOi8vIik/bmV3IFByb21pc2UoZnVuY3Rpb24oZSl7ZSh4ZSgpKX0pOmZldGNoKHh0LHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihlKXtpZighZS5vayl0aHJvdyJmYWlsZWQgdG8gbG9hZCB3YXNtIGJpbmFyeSBmaWxlIGF0ICciK3h0KyInIjtyZXR1cm4gZS5hcnJheUJ1ZmZlcigpfSkuY2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4geGUoKX0pfXZhciBQbD17MTM3NjpmdW5jdGlvbihlLG8sbixyLGMsRCxVLGN0KXtpZihlPXQuZ2V0Q2FjaGUodC5Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFjaylbZV0sIWUuaGFzT3duUHJvcGVydHkoImFkZFNpbmdsZVJlc3VsdCIpKXRocm93ImEgSlNJbXBsZW1lbnRhdGlvbiBtdXN0IGltcGxlbWVudCBhbGwgZnVuY3Rpb25zLCB5b3UgZm9yZ290IENvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrOjphZGRTaW5nbGVSZXN1bHQuIjtyZXR1cm4gZS5hZGRTaW5nbGVSZXN1bHQobyxuLHIsYyxELFUsY3QpfX07X2UucHVzaCh7aGk6ZnVuY3Rpb24oKXtUZSgpfX0pO3ZhciBkZT1bXSx4bD17ZTpmdW5jdGlvbigpe0d0KCl9LGI6ZnVuY3Rpb24oZSxvLG4pe2RlLmxlbmd0aD0wO3ZhciByO2ZvcihuPj49MjtyPUh0W28rK107KWRlLnB1c2goMTA1PnI/bmVbKytuPj4xXTpZdFtuXSksKytuO3JldHVybiBQbFtlXS5hcHBseShudWxsLGRlKX0sYzpmdW5jdGlvbihlLG8sbil7SHQuY29weVdpdGhpbihlLG8sbytuKX0sZDpmdW5jdGlvbigpe0d0KCJPT00iKX0sYTpmdW5jdGlvbihlKXt2YXIgbz1EYXRlLm5vdygpO3JldHVybiBZdFtlPj4yXT1vLzFlM3wwLFl0W2UrND4+Ml09byUxZTMqMWUzfDAsMH0sbWVtb3J5Omt0LHRhYmxlOld0fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGMpe3QuYXNtPWMuZXhwb3J0cyxRdC0tLHQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmdC5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKFF0KSxRdD09MCYmcXQmJihjPXF0LHF0PW51bGwsYygpKX1mdW5jdGlvbiBvKGMpe2UoYy5pbnN0YW5jZSl9ZnVuY3Rpb24gbihjKXtyZXR1cm4gQmwoKS50aGVuKGZ1bmN0aW9uKEQpe3JldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShELHIpfSkudGhlbihjLGZ1bmN0aW9uKEQpe090KCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiAiK0QpLEd0KEQpfSkuY2F0Y2goRD0+e2NvbnNvbGUuZXJyb3IoImVycm9yIixEKSxjb25zb2xlLmVycm9yKGBBbW1vIGZpbGUgJyR7eHR9JyBub3QgZm91bmQuIFRoaXMgaXMgcmVxdWlyZWQgdG8gcnVuIHRoZSBwaHlzaWNzIHNpbXVsYXRpb24uIElzIHlvdXIgJ2Fzc2V0UGF0aCcgY29uZmlnIG9wdGlvbiBjb3JyZWN0IGFuZCBpcyB0aGVyZSBhbiAnYW1tbycgZm9sZGVyIHdpdGggdGhlICdhbW1vLndhc20ud2FzbScgZmlsZT8gRW5zdXJlIHlvdXIgc2VydmVyIGhhcyB0aGUgcHJvcGVyIG1pbWUgdHlwZSBmb3IgJy53YXNtJyBmaWxlcy5gKX0pfXZhciByPXthOnhsfTtpZihRdCsrLHQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmdC5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKFF0KSx0Lmluc3RhbnRpYXRlV2FzbSl0cnl7cmV0dXJuIHQuaW5zdGFudGlhdGVXYXNtKHIsZSl9Y2F0Y2goYyl7cmV0dXJuIE90KCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiAiK2MpLCExfXJldHVybiBmdW5jdGlvbigpe2lmKGZ0fHx0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmchPSJmdW5jdGlvbiJ8fEJlKCl8fGdlKCJmaWxlOi8vIil8fHR5cGVvZiBmZXRjaCE9ImZ1bmN0aW9uIilyZXR1cm4gbihvKTtmZXRjaCh4dCx7Y3JlZGVudGlhbHM6InNhbWUtb3JpZ2luIn0pLnRoZW4oZnVuY3Rpb24oYyl7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKGMscikudGhlbihvLGZ1bmN0aW9uKEQpe3JldHVybiBPdCgid2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICIrRCksT3QoImZhbGxpbmcgYmFjayB0byBBcnJheUJ1ZmZlciBpbnN0YW50aWF0aW9uIiksbihvKX0pfSl9KCkse319KSgpO3ZhciBUZT10Ll9fX3dhc21fY2FsbF9jdG9ycz1mdW5jdGlvbigpe3JldHVybihUZT10Ll9fX3dhc21fY2FsbF9jdG9ycz10LmFzbS5mKS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3QuX19fZW1fanNfX2FycmF5X2JvdW5kc19jaGVja19lcnJvcj1mdW5jdGlvbigpe3JldHVybih0Ll9fX2VtX2pzX19hcnJheV9ib3VuZHNfY2hlY2tfZXJyb3I9dC5hc20uZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfTt2YXIgRmU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9nZXREaXNwYXRjaGVyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRmU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9nZXREaXNwYXRjaGVyXzA9dC5hc20uaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldFBhaXJDYWNoZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKE1lPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfZ2V0UGFpckNhY2hlXzA9dC5hc20uaSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldERpc3BhdGNoSW5mb18wPWZ1bmN0aW9uKCl7cmV0dXJuKEFlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9dC5hc20uaikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3ZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHdlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20uaykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8yPWZ1bmN0aW9uKCl7cmV0dXJuKGtlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzI9dC5hc20ubCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8zPWZ1bmN0aW9uKCl7cmV0dXJuKExlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9dC5hc20ubSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX3JlbW92ZUNvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEhlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20ubikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldEJyb2FkcGhhc2VfMD1mdW5jdGlvbigpe3JldHVybihZZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2dldEJyb2FkcGhhc2VfMD10LmFzbS5vKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfY29udmV4U3dlZXBUZXN0XzU9ZnVuY3Rpb24oKXtyZXR1cm4oVmU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9jb252ZXhTd2VlcFRlc3RfNT10LmFzbS5wKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfY29udGFjdFBhaXJUZXN0XzM9ZnVuY3Rpb24oKXtyZXR1cm4oUWU9dC5fZWJfYnRDb2xsaXNpb25Xb3JsZF9jb250YWN0UGFpclRlc3RfMz10LmFzbS5xKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfY29udGFjdFRlc3RfMj1mdW5jdGlvbigpe3JldHVybihFZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX2NvbnRhY3RUZXN0XzI9dC5hc20ucikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX3VwZGF0ZVNpbmdsZUFhYmJfMT1mdW5jdGlvbigpe3JldHVybihYZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX3VwZGF0ZVNpbmdsZUFhYmJfMT10LmFzbS5zKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFVlPXQuX2ViX2J0Q29sbGlzaW9uV29ybGRfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihVZT10Ll9lYl9idENvbGxpc2lvbldvcmxkX19fZGVzdHJveV9fXzA9dC5hc20udCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHZT10Ll9lYl9idFF1YWRXb3JkX3hfMD1mdW5jdGlvbigpe3JldHVybihHZT10Ll9lYl9idFF1YWRXb3JkX3hfMD10LmFzbS51KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHplPXQuX2ViX2J0UXVhZFdvcmRfeV8wPWZ1bmN0aW9uKCl7cmV0dXJuKHplPXQuX2ViX2J0UXVhZFdvcmRfeV8wPXQuYXNtLnYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTmU9dC5fZWJfYnRRdWFkV29yZF96XzA9ZnVuY3Rpb24oKXtyZXR1cm4oTmU9dC5fZWJfYnRRdWFkV29yZF96XzA9dC5hc20udykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxZT10Ll9lYl9idFF1YWRXb3JkX3dfMD1mdW5jdGlvbigpe3JldHVybihxZT10Ll9lYl9idFF1YWRXb3JkX3dfMD10LmFzbS54KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFplPXQuX2ViX2J0UXVhZFdvcmRfc2V0WF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFplPXQuX2ViX2J0UXVhZFdvcmRfc2V0WF8xPXQuYXNtLnkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS2U9dC5fZWJfYnRRdWFkV29yZF9zZXRZXzE9ZnVuY3Rpb24oKXtyZXR1cm4oS2U9dC5fZWJfYnRRdWFkV29yZF9zZXRZXzE9dC5hc20ueikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkZT10Ll9lYl9idFF1YWRXb3JkX3NldFpfMT1mdW5jdGlvbigpe3JldHVybigkZT10Ll9lYl9idFF1YWRXb3JkX3NldFpfMT10LmFzbS5BKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEplPXQuX2ViX2J0UXVhZFdvcmRfc2V0V18xPWZ1bmN0aW9uKCl7cmV0dXJuKEplPXQuX2ViX2J0UXVhZFdvcmRfc2V0V18xPXQuYXNtLkIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdG89dC5fZWJfYnRRdWFkV29yZF9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHRvPXQuX2ViX2J0UXVhZFdvcmRfX19kZXN0cm95X19fMD10LmFzbS5DKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGVvPXQuX2ViX2J0TW90aW9uU3RhdGVfZ2V0V29ybGRUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihlbz10Ll9lYl9idE1vdGlvblN0YXRlX2dldFdvcmxkVHJhbnNmb3JtXzE9dC5hc20uRCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvbz10Ll9lYl9idE1vdGlvblN0YXRlX3NldFdvcmxkVHJhbnNmb3JtXzE9ZnVuY3Rpb24oKXtyZXR1cm4ob289dC5fZWJfYnRNb3Rpb25TdGF0ZV9zZXRXb3JsZFRyYW5zZm9ybV8xPXQuYXNtLkUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbm89dC5fZWJfYnRNb3Rpb25TdGF0ZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKG5vPXQuX2ViX2J0TW90aW9uU3RhdGVfX19kZXN0cm95X19fMD10LmFzbS5GKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldEFuaXNvdHJvcGljRnJpY3Rpb25fMj1mdW5jdGlvbigpe3JldHVybihybz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRBbmlzb3Ryb3BpY0ZyaWN0aW9uXzI9dC5hc20uRykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxfbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRDb2xsaXNpb25TaGFwZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKF9vPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldENvbGxpc2lvblNoYXBlXzA9dC5hc20uSCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxpbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDb250YWN0UHJvY2Vzc2luZ1RocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGlvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkXzE9dC5hc20uSSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRBY3RpdmF0aW9uU3RhdGVfMT1mdW5jdGlvbigpe3JldHVybihhbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRBY3RpdmF0aW9uU3RhdGVfMT10LmFzbS5KKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHNvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2ZvcmNlQWN0aXZhdGlvblN0YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oc289dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZm9yY2VBY3RpdmF0aW9uU3RhdGVfMT10LmFzbS5LKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHBvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2FjdGl2YXRlXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfYWN0aXZhdGVfMD10LmFzbS5MKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2FjdGl2YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4obG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfYWN0aXZhdGVfMT10LmFzbS5NKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHVvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzQWN0aXZlXzA9ZnVuY3Rpb24oKXtyZXR1cm4odW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfaXNBY3RpdmVfMD10LmFzbS5OKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzS2luZW1hdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oY289dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfaXNLaW5lbWF0aWNPYmplY3RfMD10LmFzbS5PKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzU3RhdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oeW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfaXNTdGF0aWNPYmplY3RfMD10LmFzbS5QKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGhvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2lzU3RhdGljT3JLaW5lbWF0aWNPYmplY3RfMD1mdW5jdGlvbigpe3JldHVybihobz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0XzA9dC5hc20uUSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxmbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRSZXN0aXR1dGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKGZvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFJlc3RpdHV0aW9uXzA9dC5hc20uUikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRGcmljdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKG1vPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldEZyaWN0aW9uXzA9dC5hc20uUykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxibz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRSb2xsaW5nRnJpY3Rpb25fMD1mdW5jdGlvbigpe3JldHVybihibz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRSb2xsaW5nRnJpY3Rpb25fMD10LmFzbS5UKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFJlc3RpdHV0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZ289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0UmVzdGl0dXRpb25fMT10LmFzbS5VKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldEZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oV289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0RnJpY3Rpb25fMT10LmFzbS5WKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LENvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFJvbGxpbmdGcmljdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKENvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFJvbGxpbmdGcmljdGlvbl8xPXQuYXNtLlcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sam89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0V29ybGRUcmFuc2Zvcm1fMD1mdW5jdGlvbigpe3JldHVybihqbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRXb3JsZFRyYW5zZm9ybV8wPXQuYXNtLlgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdm89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0Q29sbGlzaW9uRmxhZ3NfMD1mdW5jdGlvbigpe3JldHVybih2bz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9nZXRDb2xsaXNpb25GbGFnc18wPXQuYXNtLlkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q29sbGlzaW9uRmxhZ3NfMT1mdW5jdGlvbigpe3JldHVybihEbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDb2xsaXNpb25GbGFnc18xPXQuYXNtLlopLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUm89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0V29ybGRUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihSbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRXb3JsZFRyYW5zZm9ybV8xPXQuYXNtLl8pLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q29sbGlzaW9uU2hhcGVfMT1mdW5jdGlvbigpe3JldHVybihTbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDb2xsaXNpb25TaGFwZV8xPXQuYXNtLiQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q2NkTW90aW9uVGhyZXNob2xkXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSW89dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q2NkTW90aW9uVGhyZXNob2xkXzE9dC5hc20uYWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT289dC5fZWJfYnRDb2xsaXNpb25PYmplY3Rfc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXNfMT1mdW5jdGlvbigpe3JldHVybihPbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRDY2RTd2VwdFNwaGVyZVJhZGl1c18xPXQuYXNtLmJhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFVzZXJJbmRleF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEJvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFVzZXJJbmRleF8wPXQuYXNtLmNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFBvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFVzZXJJbmRleF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFBvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFVzZXJJbmRleF8xPXQuYXNtLmRhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHhvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldFVzZXJQb2ludGVyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oeG89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0VXNlclBvaW50ZXJfMD10LmFzbS5lYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxUbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9zZXRVc2VyUG9pbnRlcl8xPWZ1bmN0aW9uKCl7cmV0dXJuKFRvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X3NldFVzZXJQb2ludGVyXzE9dC5hc20uZmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRm89dC5fZWJfYnRDb2xsaXNpb25PYmplY3RfZ2V0QnJvYWRwaGFzZUhhbmRsZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKEZvPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X2dldEJyb2FkcGhhc2VIYW5kbGVfMD10LmFzbS5nYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNbz10Ll9lYl9idENvbGxpc2lvbk9iamVjdF9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKE1vPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0X19fZGVzdHJveV9fXzA9dC5hc20uaGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQW89dC5fZWJfQ29udGFjdFJlc3VsdENhbGxiYWNrX2FkZFNpbmdsZVJlc3VsdF83PWZ1bmN0aW9uKCl7cmV0dXJuKEFvPXQuX2ViX0NvbnRhY3RSZXN1bHRDYWxsYmFja19hZGRTaW5nbGVSZXN1bHRfNz10LmFzbS5pYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3bz10Ll9lYl9Db250YWN0UmVzdWx0Q2FsbGJhY2tfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybih3bz10Ll9lYl9Db250YWN0UmVzdWx0Q2FsbGJhY2tfX19kZXN0cm95X19fMD10LmFzbS5qYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19oYXNIaXRfMD1mdW5jdGlvbigpe3JldHVybihrbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19oYXNIaXRfMD10LmFzbS5rYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPWZ1bmN0aW9uKCl7cmV0dXJuKExvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwXzA9dC5hc20ubGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSG89dC5fZWJfQ29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXBfMT1mdW5jdGlvbigpe3JldHVybihIbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPXQuYXNtLm1hKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFlvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMD1mdW5jdGlvbigpe3JldHVybihZbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzA9dC5hc20ubmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVm89dC5fZWJfQ29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29sbGlzaW9uRmlsdGVyTWFza18xPWZ1bmN0aW9uKCl7cmV0dXJuKFZvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMT10LmFzbS5vYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxRbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMD1mdW5jdGlvbigpe3JldHVybihRbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMD10LmFzbS5wYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxFbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihFbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMT10LmFzbS5xYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYbz10Ll9lYl9Db252ZXhSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFhvPXQuX2ViX0NvbnZleFJlc3VsdENhbGxiYWNrX19fZGVzdHJveV9fXzA9dC5hc20ucmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVW89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9zZXRMb2NhbFNjYWxpbmdfMT1mdW5jdGlvbigpe3JldHVybihVbz10Ll9lYl9idENvbGxpc2lvblNoYXBlX3NldExvY2FsU2NhbGluZ18xPXQuYXNtLnNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEdvPXQuX2ViX2J0Q29sbGlzaW9uU2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oR289dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9nZXRMb2NhbFNjYWxpbmdfMD10LmFzbS50YSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6bz10Ll9lYl9idENvbGxpc2lvblNoYXBlX2NhbGN1bGF0ZUxvY2FsSW5lcnRpYV8yPWZ1bmN0aW9uKCl7cmV0dXJuKHpvPXQuX2ViX2J0Q29sbGlzaW9uU2hhcGVfY2FsY3VsYXRlTG9jYWxJbmVydGlhXzI9dC5hc20udWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTm89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9zZXRNYXJnaW5fMT1mdW5jdGlvbigpe3JldHVybihObz10Ll9lYl9idENvbGxpc2lvblNoYXBlX3NldE1hcmdpbl8xPXQuYXNtLnZhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHFvPXQuX2ViX2J0Q29sbGlzaW9uU2hhcGVfZ2V0TWFyZ2luXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocW89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9nZXRNYXJnaW5fMD10LmFzbS53YSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxabz10Ll9lYl9idENvbGxpc2lvblNoYXBlX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oWm89dC5fZWJfYnRDb2xsaXNpb25TaGFwZV9fX2Rlc3Ryb3lfX18wPXQuYXNtLnhhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEtvPXQuX2ViX2J0RGlzcGF0Y2hlcl9nZXROdW1NYW5pZm9sZHNfMD1mdW5jdGlvbigpe3JldHVybihLbz10Ll9lYl9idERpc3BhdGNoZXJfZ2V0TnVtTWFuaWZvbGRzXzA9dC5hc20ueWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sJG89dC5fZWJfYnREaXNwYXRjaGVyX2dldE1hbmlmb2xkQnlJbmRleEludGVybmFsXzE9ZnVuY3Rpb24oKXtyZXR1cm4oJG89dC5fZWJfYnREaXNwYXRjaGVyX2dldE1hbmlmb2xkQnlJbmRleEludGVybmFsXzE9dC5hc20uemEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSm89dC5fZWJfYnREaXNwYXRjaGVyX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oSm89dC5fZWJfYnREaXNwYXRjaGVyX19fZGVzdHJveV9fXzA9dC5hc20uQWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdG49dC5fZWJfYnREeW5hbWljc1dvcmxkX2FkZEFjdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKHRuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9hZGRBY3Rpb25fMT10LmFzbS5CYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxlbj10Ll9lYl9idER5bmFtaWNzV29ybGRfcmVtb3ZlQWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZW49dC5fZWJfYnREeW5hbWljc1dvcmxkX3JlbW92ZUFjdGlvbl8xPXQuYXNtLkNhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG9uPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9nZXRTb2x2ZXJJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4ob249dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldFNvbHZlckluZm9fMD10LmFzbS5EYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxubj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMT1mdW5jdGlvbigpe3JldHVybihubj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMT10LmFzbS5FYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxybj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMj1mdW5jdGlvbigpe3JldHVybihybj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMj10LmFzbS5GYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxfbj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMz1mdW5jdGlvbigpe3JldHVybihfbj10Ll9lYl9idER5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMz10LmFzbS5HYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhbj10Ll9lYl9idER5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hlcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKGFuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9nZXREaXNwYXRjaGVyXzA9dC5hc20uSGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc249dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldFBhaXJDYWNoZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKHNuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9nZXRQYWlyQ2FjaGVfMD10LmFzbS5JYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwbj10Ll9lYl9idER5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocG49dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldERpc3BhdGNoSW5mb18wPXQuYXNtLkphKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9hZGRDb2xsaXNpb25PYmplY3RfMT1mdW5jdGlvbigpe3JldHVybihsbj10Ll9lYl9idER5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20uS2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdW49dC5fZWJfYnREeW5hbWljc1dvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8yPWZ1bmN0aW9uKCl7cmV0dXJuKHVuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9hZGRDb2xsaXNpb25PYmplY3RfMj10LmFzbS5MYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxjbj10Ll9lYl9idER5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9ZnVuY3Rpb24oKXtyZXR1cm4oY249dC5fZWJfYnREeW5hbWljc1dvcmxkX2FkZENvbGxpc2lvbk9iamVjdF8zPXQuYXNtLk1hKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHluPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9yZW1vdmVDb2xsaXNpb25PYmplY3RfMT1mdW5jdGlvbigpe3JldHVybih5bj10Ll9lYl9idER5bmFtaWNzV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20uTmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saG49dC5fZWJfYnREeW5hbWljc1dvcmxkX2dldEJyb2FkcGhhc2VfMD1mdW5jdGlvbigpe3JldHVybihobj10Ll9lYl9idER5bmFtaWNzV29ybGRfZ2V0QnJvYWRwaGFzZV8wPXQuYXNtLk9hKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZuPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9jb252ZXhTd2VlcFRlc3RfNT1mdW5jdGlvbigpe3JldHVybihmbj10Ll9lYl9idER5bmFtaWNzV29ybGRfY29udmV4U3dlZXBUZXN0XzU9dC5hc20uUGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbW49dC5fZWJfYnREeW5hbWljc1dvcmxkX2NvbnRhY3RQYWlyVGVzdF8zPWZ1bmN0aW9uKCl7cmV0dXJuKG1uPXQuX2ViX2J0RHluYW1pY3NXb3JsZF9jb250YWN0UGFpclRlc3RfMz10LmFzbS5RYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxibj10Ll9lYl9idER5bmFtaWNzV29ybGRfY29udGFjdFRlc3RfMj1mdW5jdGlvbigpe3JldHVybihibj10Ll9lYl9idER5bmFtaWNzV29ybGRfY29udGFjdFRlc3RfMj10LmFzbS5SYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxnbj10Ll9lYl9idER5bmFtaWNzV29ybGRfdXBkYXRlU2luZ2xlQWFiYl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGduPXQuX2ViX2J0RHluYW1pY3NXb3JsZF91cGRhdGVTaW5nbGVBYWJiXzE9dC5hc20uU2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZG49dC5fZWJfYnREeW5hbWljc1dvcmxkX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZG49dC5fZWJfYnREeW5hbWljc1dvcmxkX19fZGVzdHJveV9fXzA9dC5hc20uVGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sV249dC5fZWJfVm9pZFB0cl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFduPXQuX2ViX1ZvaWRQdHJfX19kZXN0cm95X19fMD10LmFzbS5VYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxDbj10Ll9lYl9idFZlY3RvcjNfYnRWZWN0b3IzXzA9ZnVuY3Rpb24oKXtyZXR1cm4oQ249dC5fZWJfYnRWZWN0b3IzX2J0VmVjdG9yM18wPXQuYXNtLlZhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGpuPXQuX2ViX2J0VmVjdG9yM19idFZlY3RvcjNfMz1mdW5jdGlvbigpe3JldHVybihqbj10Ll9lYl9idFZlY3RvcjNfYnRWZWN0b3IzXzM9dC5hc20uV2EpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdm49dC5fZWJfYnRWZWN0b3IzX2xlbmd0aF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHZuPXQuX2ViX2J0VmVjdG9yM19sZW5ndGhfMD10LmFzbS5YYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxEbj10Ll9lYl9idFZlY3RvcjNfeF8wPWZ1bmN0aW9uKCl7cmV0dXJuKERuPXQuX2ViX2J0VmVjdG9yM194XzA9dC5hc20uWWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUm49dC5fZWJfYnRWZWN0b3IzX3lfMD1mdW5jdGlvbigpe3JldHVybihSbj10Ll9lYl9idFZlY3RvcjNfeV8wPXQuYXNtLlphKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFNuPXQuX2ViX2J0VmVjdG9yM196XzA9ZnVuY3Rpb24oKXtyZXR1cm4oU249dC5fZWJfYnRWZWN0b3IzX3pfMD10LmFzbS5fYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxJbj10Ll9lYl9idFZlY3RvcjNfc2V0WF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEluPXQuX2ViX2J0VmVjdG9yM19zZXRYXzE9dC5hc20uJGEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT249dC5fZWJfYnRWZWN0b3IzX3NldFlfMT1mdW5jdGlvbigpe3JldHVybihPbj10Ll9lYl9idFZlY3RvcjNfc2V0WV8xPXQuYXNtLmFiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJuPXQuX2ViX2J0VmVjdG9yM19zZXRaXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQm49dC5fZWJfYnRWZWN0b3IzX3NldFpfMT10LmFzbS5iYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQbj10Ll9lYl9idFZlY3RvcjNfc2V0VmFsdWVfMz1mdW5jdGlvbigpe3JldHVybihQbj10Ll9lYl9idFZlY3RvcjNfc2V0VmFsdWVfMz10LmFzbS5jYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx4bj10Ll9lYl9idFZlY3RvcjNfbm9ybWFsaXplXzA9ZnVuY3Rpb24oKXtyZXR1cm4oeG49dC5fZWJfYnRWZWN0b3IzX25vcm1hbGl6ZV8wPXQuYXNtLmRiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRuPXQuX2ViX2J0VmVjdG9yM19yb3RhdGVfMj1mdW5jdGlvbigpe3JldHVybihUbj10Ll9lYl9idFZlY3RvcjNfcm90YXRlXzI9dC5hc20uZWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRm49dC5fZWJfYnRWZWN0b3IzX2RvdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEZuPXQuX2ViX2J0VmVjdG9yM19kb3RfMT10LmFzbS5mYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNbj10Ll9lYl9idFZlY3RvcjNfb3BfbXVsXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTW49dC5fZWJfYnRWZWN0b3IzX29wX211bF8xPXQuYXNtLmdiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEFuPXQuX2ViX2J0VmVjdG9yM19vcF9hZGRfMT1mdW5jdGlvbigpe3JldHVybihBbj10Ll9lYl9idFZlY3RvcjNfb3BfYWRkXzE9dC5hc20uaGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sd249dC5fZWJfYnRWZWN0b3IzX29wX3N1Yl8xPWZ1bmN0aW9uKCl7cmV0dXJuKHduPXQuX2ViX2J0VmVjdG9yM19vcF9zdWJfMT10LmFzbS5pYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrbj10Ll9lYl9idFZlY3RvcjNfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihrbj10Ll9lYl9idFZlY3RvcjNfX19kZXN0cm95X19fMD10LmFzbS5qYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMbj10Ll9lYl9idFF1YXRlcm5pb25fYnRRdWF0ZXJuaW9uXzQ9ZnVuY3Rpb24oKXtyZXR1cm4oTG49dC5fZWJfYnRRdWF0ZXJuaW9uX2J0UXVhdGVybmlvbl80PXQuYXNtLmtiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEhuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRWYWx1ZV80PWZ1bmN0aW9uKCl7cmV0dXJuKEhuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRWYWx1ZV80PXQuYXNtLmxiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFluPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRFdWxlclpZWF8zPWZ1bmN0aW9uKCl7cmV0dXJuKFluPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRFdWxlclpZWF8zPXQuYXNtLm1iKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRSb3RhdGlvbl8yPWZ1bmN0aW9uKCl7cmV0dXJuKFZuPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRSb3RhdGlvbl8yPXQuYXNtLm5iKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFuPXQuX2ViX2J0UXVhdGVybmlvbl9ub3JtYWxpemVfMD1mdW5jdGlvbigpe3JldHVybihRbj10Ll9lYl9idFF1YXRlcm5pb25fbm9ybWFsaXplXzA9dC5hc20ub2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRW49dC5fZWJfYnRRdWF0ZXJuaW9uX2xlbmd0aDJfMD1mdW5jdGlvbigpe3JldHVybihFbj10Ll9lYl9idFF1YXRlcm5pb25fbGVuZ3RoMl8wPXQuYXNtLnBiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFhuPXQuX2ViX2J0UXVhdGVybmlvbl9sZW5ndGhfMD1mdW5jdGlvbigpe3JldHVybihYbj10Ll9lYl9idFF1YXRlcm5pb25fbGVuZ3RoXzA9dC5hc20ucWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVW49dC5fZWJfYnRRdWF0ZXJuaW9uX2RvdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFVuPXQuX2ViX2J0UXVhdGVybmlvbl9kb3RfMT10LmFzbS5yYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHbj10Ll9lYl9idFF1YXRlcm5pb25fbm9ybWFsaXplZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEduPXQuX2ViX2J0UXVhdGVybmlvbl9ub3JtYWxpemVkXzA9dC5hc20uc2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sem49dC5fZWJfYnRRdWF0ZXJuaW9uX2dldEF4aXNfMD1mdW5jdGlvbigpe3JldHVybih6bj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QXhpc18wPXQuYXNtLnRiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5uPXQuX2ViX2J0UXVhdGVybmlvbl9pbnZlcnNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTm49dC5fZWJfYnRRdWF0ZXJuaW9uX2ludmVyc2VfMD10LmFzbS51YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxbj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVfMD1mdW5jdGlvbigpe3JldHVybihxbj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVfMD10LmFzbS52YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxabj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVTaG9ydGVzdFBhdGhfMD1mdW5jdGlvbigpe3JldHVybihabj10Ll9lYl9idFF1YXRlcm5pb25fZ2V0QW5nbGVTaG9ydGVzdFBhdGhfMD10LmFzbS53YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxLbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVfMT1mdW5jdGlvbigpe3JldHVybihLbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVfMT10LmFzbS54YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVTaG9ydGVzdFBhdGhfMT1mdW5jdGlvbigpe3JldHVybigkbj10Ll9lYl9idFF1YXRlcm5pb25fYW5nbGVTaG9ydGVzdFBhdGhfMT10LmFzbS55YikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxKbj10Ll9lYl9idFF1YXRlcm5pb25fb3BfYWRkXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSm49dC5fZWJfYnRRdWF0ZXJuaW9uX29wX2FkZF8xPXQuYXNtLnpiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHRyPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9zdWJfMT1mdW5jdGlvbigpe3JldHVybih0cj10Ll9lYl9idFF1YXRlcm5pb25fb3Bfc3ViXzE9dC5hc20uQWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZXI9dC5fZWJfYnRRdWF0ZXJuaW9uX29wX211bF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGVyPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9tdWxfMT10LmFzbS5CYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvcj10Ll9lYl9idFF1YXRlcm5pb25fb3BfbXVscV8xPWZ1bmN0aW9uKCl7cmV0dXJuKG9yPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9tdWxxXzE9dC5hc20uQ2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbnI9dC5fZWJfYnRRdWF0ZXJuaW9uX29wX2Rpdl8xPWZ1bmN0aW9uKCl7cmV0dXJuKG5yPXQuX2ViX2J0UXVhdGVybmlvbl9vcF9kaXZfMT10LmFzbS5EYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxycj10Ll9lYl9idFF1YXRlcm5pb25feF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHJyPXQuX2ViX2J0UXVhdGVybmlvbl94XzA9dC5hc20uRWIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sX3I9dC5fZWJfYnRRdWF0ZXJuaW9uX3lfMD1mdW5jdGlvbigpe3JldHVybihfcj10Ll9lYl9idFF1YXRlcm5pb25feV8wPXQuYXNtLkZiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGlyPXQuX2ViX2J0UXVhdGVybmlvbl96XzA9ZnVuY3Rpb24oKXtyZXR1cm4oaXI9dC5fZWJfYnRRdWF0ZXJuaW9uX3pfMD10LmFzbS5HYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhcj10Ll9lYl9idFF1YXRlcm5pb25fd18wPWZ1bmN0aW9uKCl7cmV0dXJuKGFyPXQuX2ViX2J0UXVhdGVybmlvbl93XzA9dC5hc20uSGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc3I9dC5fZWJfYnRRdWF0ZXJuaW9uX3NldFhfMT1mdW5jdGlvbigpe3JldHVybihzcj10Ll9lYl9idFF1YXRlcm5pb25fc2V0WF8xPXQuYXNtLkliKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHByPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRZXzE9ZnVuY3Rpb24oKXtyZXR1cm4ocHI9dC5fZWJfYnRRdWF0ZXJuaW9uX3NldFlfMT10LmFzbS5KYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxscj10Ll9lYl9idFF1YXRlcm5pb25fc2V0Wl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGxyPXQuX2ViX2J0UXVhdGVybmlvbl9zZXRaXzE9dC5hc20uS2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdXI9dC5fZWJfYnRRdWF0ZXJuaW9uX3NldFdfMT1mdW5jdGlvbigpe3JldHVybih1cj10Ll9lYl9idFF1YXRlcm5pb25fc2V0V18xPXQuYXNtLkxiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNyPXQuX2ViX2J0UXVhdGVybmlvbl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGNyPXQuX2ViX2J0UXVhdGVybmlvbl9fX2Rlc3Ryb3lfX18wPXQuYXNtLk1iKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlyPXQuX2ViX2J0TWF0cml4M3gzX3NldEV1bGVyWllYXzM9ZnVuY3Rpb24oKXtyZXR1cm4oeXI9dC5fZWJfYnRNYXRyaXgzeDNfc2V0RXVsZXJaWVhfMz10LmFzbS5OYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxocj10Ll9lYl9idE1hdHJpeDN4M19nZXRSb3RhdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGhyPXQuX2ViX2J0TWF0cml4M3gzX2dldFJvdGF0aW9uXzE9dC5hc20uT2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZnI9dC5fZWJfYnRNYXRyaXgzeDNfZ2V0Um93XzE9ZnVuY3Rpb24oKXtyZXR1cm4oZnI9dC5fZWJfYnRNYXRyaXgzeDNfZ2V0Um93XzE9dC5hc20uUGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbXI9dC5fZWJfYnRNYXRyaXgzeDNfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihtcj10Ll9lYl9idE1hdHJpeDN4M19fX2Rlc3Ryb3lfX18wPXQuYXNtLlFiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGJyPXQuX2ViX2J0VHJhbnNmb3JtX2J0VHJhbnNmb3JtXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYnI9dC5fZWJfYnRUcmFuc2Zvcm1fYnRUcmFuc2Zvcm1fMD10LmFzbS5SYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxncj10Ll9lYl9idFRyYW5zZm9ybV9idFRyYW5zZm9ybV8yPWZ1bmN0aW9uKCl7cmV0dXJuKGdyPXQuX2ViX2J0VHJhbnNmb3JtX2J0VHJhbnNmb3JtXzI9dC5hc20uU2IpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZHI9dC5fZWJfYnRUcmFuc2Zvcm1fc2V0SWRlbnRpdHlfMD1mdW5jdGlvbigpe3JldHVybihkcj10Ll9lYl9idFRyYW5zZm9ybV9zZXRJZGVudGl0eV8wPXQuYXNtLlRiKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdyPXQuX2ViX2J0VHJhbnNmb3JtX3NldE9yaWdpbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKFdyPXQuX2ViX2J0VHJhbnNmb3JtX3NldE9yaWdpbl8xPXQuYXNtLlViKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LENyPXQuX2ViX2J0VHJhbnNmb3JtX3NldFJvdGF0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQ3I9dC5fZWJfYnRUcmFuc2Zvcm1fc2V0Um90YXRpb25fMT10LmFzbS5WYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxqcj10Ll9lYl9idFRyYW5zZm9ybV9nZXRPcmlnaW5fMD1mdW5jdGlvbigpe3JldHVybihqcj10Ll9lYl9idFRyYW5zZm9ybV9nZXRPcmlnaW5fMD10LmFzbS5XYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx2cj10Ll9lYl9idFRyYW5zZm9ybV9nZXRSb3RhdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHZyPXQuX2ViX2J0VHJhbnNmb3JtX2dldFJvdGF0aW9uXzA9dC5hc20uWGIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRHI9dC5fZWJfYnRUcmFuc2Zvcm1fZ2V0QmFzaXNfMD1mdW5jdGlvbigpe3JldHVybihEcj10Ll9lYl9idFRyYW5zZm9ybV9nZXRCYXNpc18wPXQuYXNtLlliKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFJyPXQuX2ViX2J0VHJhbnNmb3JtX3NldEZyb21PcGVuR0xNYXRyaXhfMT1mdW5jdGlvbigpe3JldHVybihScj10Ll9lYl9idFRyYW5zZm9ybV9zZXRGcm9tT3BlbkdMTWF0cml4XzE9dC5hc20uWmIpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU3I9dC5fZWJfYnRUcmFuc2Zvcm1faW52ZXJzZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFNyPXQuX2ViX2J0VHJhbnNmb3JtX2ludmVyc2VfMD10LmFzbS5fYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxJcj10Ll9lYl9idFRyYW5zZm9ybV9vcF9tdWxfMT1mdW5jdGlvbigpe3JldHVybihJcj10Ll9lYl9idFRyYW5zZm9ybV9vcF9tdWxfMT10LmFzbS4kYikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxPcj10Ll9lYl9idFRyYW5zZm9ybV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKE9yPXQuX2ViX2J0VHJhbnNmb3JtX19fZGVzdHJveV9fXzA9dC5hc20uYWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQnI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfYnREZWZhdWx0TW90aW9uU3RhdGVfMD1mdW5jdGlvbigpe3JldHVybihCcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9idERlZmF1bHRNb3Rpb25TdGF0ZV8wPXQuYXNtLmJjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFByPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX2J0RGVmYXVsdE1vdGlvblN0YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUHI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfYnREZWZhdWx0TW90aW9uU3RhdGVfMT10LmFzbS5jYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx4cj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9idERlZmF1bHRNb3Rpb25TdGF0ZV8yPWZ1bmN0aW9uKCl7cmV0dXJuKHhyPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX2J0RGVmYXVsdE1vdGlvblN0YXRlXzI9dC5hc20uZGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVHI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfZ2V0V29ybGRUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihUcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9nZXRXb3JsZFRyYW5zZm9ybV8xPXQuYXNtLmVjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEZyPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX3NldFdvcmxkVHJhbnNmb3JtXzE9ZnVuY3Rpb24oKXtyZXR1cm4oRnI9dC5fZWJfYnREZWZhdWx0TW90aW9uU3RhdGVfc2V0V29ybGRUcmFuc2Zvcm1fMT10LmFzbS5mYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9nZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMD1mdW5jdGlvbigpe3JldHVybihNcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9nZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMD10LmFzbS5nYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9zZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMT1mdW5jdGlvbigpe3JldHVybihBcj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9zZXRfbV9ncmFwaGljc1dvcmxkVHJhbnNfMT10LmFzbS5oYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3cj10Ll9lYl9idERlZmF1bHRNb3Rpb25TdGF0ZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHdyPXQuX2ViX2J0RGVmYXVsdE1vdGlvblN0YXRlX19fZGVzdHJveV9fXzA9dC5hc20uaWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa3I9dC5fZWJfYnRDb2xsaXNpb25PYmplY3RXcmFwcGVyX2dldFdvcmxkVHJhbnNmb3JtXzA9ZnVuY3Rpb24oKXtyZXR1cm4oa3I9dC5fZWJfYnRDb2xsaXNpb25PYmplY3RXcmFwcGVyX2dldFdvcmxkVHJhbnNmb3JtXzA9dC5hc20uamMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTHI9dC5fZWJfYnRDb2xsaXNpb25PYmplY3RXcmFwcGVyX2dldENvbGxpc2lvbk9iamVjdF8wPWZ1bmN0aW9uKCl7cmV0dXJuKExyPXQuX2ViX2J0Q29sbGlzaW9uT2JqZWN0V3JhcHBlcl9nZXRDb2xsaXNpb25PYmplY3RfMD10LmFzbS5rYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIcj10Ll9lYl9idENvbGxpc2lvbk9iamVjdFdyYXBwZXJfZ2V0Q29sbGlzaW9uU2hhcGVfMD1mdW5jdGlvbigpe3JldHVybihIcj10Ll9lYl9idENvbGxpc2lvbk9iamVjdFdyYXBwZXJfZ2V0Q29sbGlzaW9uU2hhcGVfMD10LmFzbS5sYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZcj10Ll9lYl9idENvbnN0Q29sbGlzaW9uT2JqZWN0QXJyYXlfc2l6ZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFlyPXQuX2ViX2J0Q29uc3RDb2xsaXNpb25PYmplY3RBcnJheV9zaXplXzA9dC5hc20ubWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVnI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X2F0XzE9ZnVuY3Rpb24oKXtyZXR1cm4oVnI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X2F0XzE9dC5hc20ubmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUXI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oUXI9dC5fZWJfYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5X19fZGVzdHJveV9fXzA9dC5hc20ub2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRXI9dC5fZWJfYnRTY2FsYXJBcnJheV9zaXplXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRXI9dC5fZWJfYnRTY2FsYXJBcnJheV9zaXplXzA9dC5hc20ucGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWHI9dC5fZWJfYnRTY2FsYXJBcnJheV9hdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFhyPXQuX2ViX2J0U2NhbGFyQXJyYXlfYXRfMT10LmFzbS5xYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxVcj10Ll9lYl9idFNjYWxhckFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oVXI9dC5fZWJfYnRTY2FsYXJBcnJheV9fX2Rlc3Ryb3lfX18wPXQuYXNtLnJjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEdyPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRQb3NpdGlvbldvcmxkT25BXzA9ZnVuY3Rpb24oKXtyZXR1cm4oR3I9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldFBvc2l0aW9uV29ybGRPbkFfMD10LmFzbS5zYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6cj10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0UG9zaXRpb25Xb3JsZE9uQl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHpyPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRQb3NpdGlvbldvcmxkT25CXzA9dC5hc20udGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldEFwcGxpZWRJbXB1bHNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldEFwcGxpZWRJbXB1bHNlXzA9dC5hc20udWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scXI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldERpc3RhbmNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocXI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldERpc3RhbmNlXzA9dC5hc20udmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRBXzA9ZnVuY3Rpb24oKXtyZXR1cm4oWnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRBXzA9dC5hc20ud2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS3I9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRBXzE9ZnVuY3Rpb24oKXtyZXR1cm4oS3I9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRBXzE9dC5hc20ueGMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sJHI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRCXzA9ZnVuY3Rpb24oKXtyZXR1cm4oJHI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX2xvY2FsUG9pbnRCXzA9dC5hc20ueWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRCXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSnI9dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX2xvY2FsUG9pbnRCXzE9dC5hc20uemMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdF89dC5fZWJfYnRNYW5pZm9sZFBvaW50X2dldF9tX3Bvc2l0aW9uV29ybGRPbkJfMD1mdW5jdGlvbigpe3JldHVybih0Xz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0X21fcG9zaXRpb25Xb3JsZE9uQl8wPXQuYXNtLkFjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGVfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV9wb3NpdGlvbldvcmxkT25CXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZV89dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX3Bvc2l0aW9uV29ybGRPbkJfMT10LmFzbS5CYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0X21fcG9zaXRpb25Xb3JsZE9uQV8wPWZ1bmN0aW9uKCl7cmV0dXJuKG9fPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV9wb3NpdGlvbldvcmxkT25BXzA9dC5hc20uQ2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbl89dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX3Bvc2l0aW9uV29ybGRPbkFfMT1mdW5jdGlvbigpe3JldHVybihuXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfc2V0X21fcG9zaXRpb25Xb3JsZE9uQV8xPXQuYXNtLkRjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV9ub3JtYWxXb3JsZE9uQl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHJfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV9ub3JtYWxXb3JsZE9uQl8wPXQuYXNtLkVjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LF9fPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV9ub3JtYWxXb3JsZE9uQl8xPWZ1bmN0aW9uKCl7cmV0dXJuKF9fPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV9ub3JtYWxXb3JsZE9uQl8xPXQuYXNtLkZjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGlfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9nZXRfbV91c2VyUGVyc2lzdGVudERhdGFfMD1mdW5jdGlvbigpe3JldHVybihpXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfZ2V0X21fdXNlclBlcnNpc3RlbnREYXRhXzA9dC5hc20uR2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYV89dC5fZWJfYnRNYW5pZm9sZFBvaW50X3NldF9tX3VzZXJQZXJzaXN0ZW50RGF0YV8xPWZ1bmN0aW9uKCl7cmV0dXJuKGFfPXQuX2ViX2J0TWFuaWZvbGRQb2ludF9zZXRfbV91c2VyUGVyc2lzdGVudERhdGFfMT10LmFzbS5IYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihzXz10Ll9lYl9idE1hbmlmb2xkUG9pbnRfX19kZXN0cm95X19fMD10LmFzbS5JYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwXz10Ll9lYl9Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFja19Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFja18wPWZ1bmN0aW9uKCl7cmV0dXJuKHBfPXQuX2ViX0NvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrX0NvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrXzA9dC5hc20uSmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbF89dC5fZWJfQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2tfYWRkU2luZ2xlUmVzdWx0Xzc9ZnVuY3Rpb24oKXtyZXR1cm4obF89dC5fZWJfQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2tfYWRkU2luZ2xlUmVzdWx0Xzc9dC5hc20uS2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdV89dC5fZWJfQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2tfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybih1Xz10Ll9lYl9Db25jcmV0ZUNvbnRhY3RSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPXQuYXNtLkxjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX2dldF9tX3NoYXBlUGFydF8wPWZ1bmN0aW9uKCl7cmV0dXJuKGNfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX2dldF9tX3NoYXBlUGFydF8wPXQuYXNtLk1jKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX3NldF9tX3NoYXBlUGFydF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHlfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX3NldF9tX3NoYXBlUGFydF8xPXQuYXNtLk5jKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGhfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX2dldF9tX3RyaWFuZ2xlSW5kZXhfMD1mdW5jdGlvbigpe3JldHVybihoXz10Ll9lYl9Mb2NhbFNoYXBlSW5mb19nZXRfbV90cmlhbmdsZUluZGV4XzA9dC5hc20uT2MpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZl89dC5fZWJfTG9jYWxTaGFwZUluZm9fc2V0X21fdHJpYW5nbGVJbmRleF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGZfPXQuX2ViX0xvY2FsU2hhcGVJbmZvX3NldF9tX3RyaWFuZ2xlSW5kZXhfMT10LmFzbS5QYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtXz10Ll9lYl9Mb2NhbFNoYXBlSW5mb19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKG1fPXQuX2ViX0xvY2FsU2hhcGVJbmZvX19fZGVzdHJveV9fXzA9dC5hc20uUWMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYl89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfTG9jYWxDb252ZXhSZXN1bHRfNT1mdW5jdGlvbigpe3JldHVybihiXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9Mb2NhbENvbnZleFJlc3VsdF81PXQuYXNtLlJjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X2dldF9tX2hpdENvbGxpc2lvbk9iamVjdF8wPWZ1bmN0aW9uKCl7cmV0dXJuKGdfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X2dldF9tX2hpdENvbGxpc2lvbk9iamVjdF8wPXQuYXNtLlNjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGRfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdENvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKGRfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdENvbGxpc2lvbk9iamVjdF8xPXQuYXNtLlRjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X2dldF9tX2xvY2FsU2hhcGVJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4oV189dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21fbG9jYWxTaGFwZUluZm9fMD10LmFzbS5VYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxDXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9zZXRfbV9sb2NhbFNoYXBlSW5mb18xPWZ1bmN0aW9uKCl7cmV0dXJuKENfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2xvY2FsU2hhcGVJbmZvXzE9dC5hc20uVmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sal89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21faGl0Tm9ybWFsTG9jYWxfMD1mdW5jdGlvbigpe3JldHVybihqXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9nZXRfbV9oaXROb3JtYWxMb2NhbF8wPXQuYXNtLldjKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHZfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdE5vcm1hbExvY2FsXzE9ZnVuY3Rpb24oKXtyZXR1cm4odl89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfc2V0X21faGl0Tm9ybWFsTG9jYWxfMT10LmFzbS5YYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxEXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9nZXRfbV9oaXRQb2ludExvY2FsXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRF89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21faGl0UG9pbnRMb2NhbF8wPXQuYXNtLlljKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFJfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdFBvaW50TG9jYWxfMT1mdW5jdGlvbigpe3JldHVybihSXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9zZXRfbV9oaXRQb2ludExvY2FsXzE9dC5hc20uWmMpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU189dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfZ2V0X21faGl0RnJhY3Rpb25fMD1mdW5jdGlvbigpe3JldHVybihTXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9nZXRfbV9oaXRGcmFjdGlvbl8wPXQuYXNtLl9jKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LElfPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X3NldF9tX2hpdEZyYWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSV89dC5fZWJfTG9jYWxDb252ZXhSZXN1bHRfc2V0X21faGl0RnJhY3Rpb25fMT10LmFzbS4kYykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxPXz10Ll9lYl9Mb2NhbENvbnZleFJlc3VsdF9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKE9fPXQuX2ViX0xvY2FsQ29udmV4UmVzdWx0X19fZGVzdHJveV9fXzA9dC5hc20uYWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQl89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja18yPWZ1bmN0aW9uKCl7cmV0dXJuKEJfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfMj10LmFzbS5iZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfaGFzSGl0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oUF89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2hhc0hpdF8wPXQuYXNtLmNkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHhfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9oaXRDb2xsaXNpb25PYmplY3RfMD1mdW5jdGlvbigpe3JldHVybih4Xz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0Q29sbGlzaW9uT2JqZWN0XzA9dC5hc20uZGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVF89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2hpdENvbGxpc2lvbk9iamVjdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFRfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9oaXRDb2xsaXNpb25PYmplY3RfMT10LmFzbS5lZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21fY29udmV4RnJvbVdvcmxkXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRl89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbnZleEZyb21Xb3JsZF8wPXQuYXNtLmZkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE1fPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb252ZXhGcm9tV29ybGRfMT1mdW5jdGlvbigpe3JldHVybihNXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29udmV4RnJvbVdvcmxkXzE9dC5hc20uZ2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbnZleFRvV29ybGRfMD1mdW5jdGlvbigpe3JldHVybihBXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21fY29udmV4VG9Xb3JsZF8wPXQuYXNtLmhkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHdfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb252ZXhUb1dvcmxkXzE9ZnVuY3Rpb24oKXtyZXR1cm4od189dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2NvbnZleFRvV29ybGRfMT10LmFzbS5pZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0Tm9ybWFsV29ybGRfMD1mdW5jdGlvbigpe3JldHVybihrXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0Tm9ybWFsV29ybGRfMD10LmFzbS5qZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21faGl0Tm9ybWFsV29ybGRfMT1mdW5jdGlvbigpe3JldHVybihMXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21faGl0Tm9ybWFsV29ybGRfMT10LmFzbS5rZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfZ2V0X21faGl0UG9pbnRXb3JsZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEhfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9oaXRQb2ludFdvcmxkXzA9dC5hc20ubGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2hpdFBvaW50V29ybGRfMT1mdW5jdGlvbigpe3JldHVybihZXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21faGl0UG9pbnRXb3JsZF8xPXQuYXNtLm1kKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPWZ1bmN0aW9uKCl7cmV0dXJuKFZfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPXQuYXNtLm5kKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFFfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPXQuYXNtLm9kKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMD10LmFzbS5wZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY29sbGlzaW9uRmlsdGVyTWFza18xPWZ1bmN0aW9uKCl7cmV0dXJuKFhfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19zZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzE9dC5hc20ucWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVV89dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX2dldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFVfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb25fMD10LmFzbS5yZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHXz10Ll9lYl9DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tfc2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oR189dC5fZWJfQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrX3NldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbl8xPXQuYXNtLnNkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHpfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHpfPXQuX2ViX0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja19fX2Rlc3Ryb3lfX18wPXQuYXNtLnRkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5fPXQuX2ViX2J0Q29udmV4U2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTl89dC5fZWJfYnRDb252ZXhTaGFwZV9zZXRMb2NhbFNjYWxpbmdfMT10LmFzbS51ZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxXz10Ll9lYl9idENvbnZleFNoYXBlX2dldExvY2FsU2NhbGluZ18wPWZ1bmN0aW9uKCl7cmV0dXJuKHFfPXQuX2ViX2J0Q29udmV4U2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9dC5hc20udmQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWl89dC5fZWJfYnRDb252ZXhTaGFwZV9jYWxjdWxhdGVMb2NhbEluZXJ0aWFfMj1mdW5jdGlvbigpe3JldHVybihaXz10Ll9lYl9idENvbnZleFNoYXBlX2NhbGN1bGF0ZUxvY2FsSW5lcnRpYV8yPXQuYXNtLndkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEtfPXQuX2ViX2J0Q29udmV4U2hhcGVfc2V0TWFyZ2luXzE9ZnVuY3Rpb24oKXtyZXR1cm4oS189dC5fZWJfYnRDb252ZXhTaGFwZV9zZXRNYXJnaW5fMT10LmFzbS54ZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkXz10Ll9lYl9idENvbnZleFNoYXBlX2dldE1hcmdpbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKCRfPXQuX2ViX2J0Q29udmV4U2hhcGVfZ2V0TWFyZ2luXzA9dC5hc20ueWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSl89dC5fZWJfYnRDb252ZXhTaGFwZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKEpfPXQuX2ViX2J0Q29udmV4U2hhcGVfX19kZXN0cm95X19fMD10LmFzbS56ZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0aT10Ll9lYl9idEJveFNoYXBlX2J0Qm94U2hhcGVfMT1mdW5jdGlvbigpe3JldHVybih0aT10Ll9lYl9idEJveFNoYXBlX2J0Qm94U2hhcGVfMT10LmFzbS5BZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxlaT10Ll9lYl9idEJveFNoYXBlX3NldE1hcmdpbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGVpPXQuX2ViX2J0Qm94U2hhcGVfc2V0TWFyZ2luXzE9dC5hc20uQmQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sb2k9dC5fZWJfYnRCb3hTaGFwZV9nZXRNYXJnaW5fMD1mdW5jdGlvbigpe3JldHVybihvaT10Ll9lYl9idEJveFNoYXBlX2dldE1hcmdpbl8wPXQuYXNtLkNkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG5pPXQuX2ViX2J0Qm94U2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4obmk9dC5fZWJfYnRCb3hTaGFwZV9zZXRMb2NhbFNjYWxpbmdfMT10LmFzbS5EZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxyaT10Ll9lYl9idEJveFNoYXBlX2dldExvY2FsU2NhbGluZ18wPWZ1bmN0aW9uKCl7cmV0dXJuKHJpPXQuX2ViX2J0Qm94U2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9dC5hc20uRWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sX2k9dC5fZWJfYnRCb3hTaGFwZV9jYWxjdWxhdGVMb2NhbEluZXJ0aWFfMj1mdW5jdGlvbigpe3JldHVybihfaT10Ll9lYl9idEJveFNoYXBlX2NhbGN1bGF0ZUxvY2FsSW5lcnRpYV8yPXQuYXNtLkZkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGlpPXQuX2ViX2J0Qm94U2hhcGVfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihpaT10Ll9lYl9idEJveFNoYXBlX19fZGVzdHJveV9fXzA9dC5hc20uR2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYWk9dC5fZWJfYnRJbnRBcnJheV9zaXplXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYWk9dC5fZWJfYnRJbnRBcnJheV9zaXplXzA9dC5hc20uSGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc2k9dC5fZWJfYnRJbnRBcnJheV9hdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHNpPXQuX2ViX2J0SW50QXJyYXlfYXRfMT10LmFzbS5JZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwaT10Ll9lYl9idEludEFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocGk9dC5fZWJfYnRJbnRBcnJheV9fX2Rlc3Ryb3lfX18wPXQuYXNtLkpkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxpPXQuX2ViX2J0RmFjZV9nZXRfbV9pbmRpY2VzXzA9ZnVuY3Rpb24oKXtyZXR1cm4obGk9dC5fZWJfYnRGYWNlX2dldF9tX2luZGljZXNfMD10LmFzbS5LZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx1aT10Ll9lYl9idEZhY2Vfc2V0X21faW5kaWNlc18xPWZ1bmN0aW9uKCl7cmV0dXJuKHVpPXQuX2ViX2J0RmFjZV9zZXRfbV9pbmRpY2VzXzE9dC5hc20uTGQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sY2k9dC5fZWJfYnRGYWNlX2dldF9tX3BsYW5lXzE9ZnVuY3Rpb24oKXtyZXR1cm4oY2k9dC5fZWJfYnRGYWNlX2dldF9tX3BsYW5lXzE9dC5hc20uTWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0seWk9dC5fZWJfYnRGYWNlX3NldF9tX3BsYW5lXzI9ZnVuY3Rpb24oKXtyZXR1cm4oeWk9dC5fZWJfYnRGYWNlX3NldF9tX3BsYW5lXzI9dC5hc20uTmQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saGk9dC5fZWJfYnRGYWNlX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oaGk9dC5fZWJfYnRGYWNlX19fZGVzdHJveV9fXzA9dC5hc20uT2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZmk9dC5fZWJfYnRWZWN0b3IzQXJyYXlfc2l6ZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKGZpPXQuX2ViX2J0VmVjdG9yM0FycmF5X3NpemVfMD10LmFzbS5QZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtaT10Ll9lYl9idFZlY3RvcjNBcnJheV9hdF8xPWZ1bmN0aW9uKCl7cmV0dXJuKG1pPXQuX2ViX2J0VmVjdG9yM0FycmF5X2F0XzE9dC5hc20uUWQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYmk9dC5fZWJfYnRWZWN0b3IzQXJyYXlfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihiaT10Ll9lYl9idFZlY3RvcjNBcnJheV9fX2Rlc3Ryb3lfX18wPXQuYXNtLlJkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdpPXQuX2ViX2J0RmFjZUFycmF5X3NpemVfMD1mdW5jdGlvbigpe3JldHVybihnaT10Ll9lYl9idEZhY2VBcnJheV9zaXplXzA9dC5hc20uU2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZGk9dC5fZWJfYnRGYWNlQXJyYXlfYXRfMT1mdW5jdGlvbigpe3JldHVybihkaT10Ll9lYl9idEZhY2VBcnJheV9hdF8xPXQuYXNtLlRkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdpPXQuX2ViX2J0RmFjZUFycmF5X19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oV2k9dC5fZWJfYnRGYWNlQXJyYXlfX19kZXN0cm95X19fMD10LmFzbS5VZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxDaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fdmVydGljZXNfMD1mdW5jdGlvbigpe3JldHVybihDaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fdmVydGljZXNfMD10LmFzbS5WZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxqaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fdmVydGljZXNfMT1mdW5jdGlvbigpe3JldHVybihqaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fdmVydGljZXNfMT10LmFzbS5XZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx2aT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fZmFjZXNfMD1mdW5jdGlvbigpe3JldHVybih2aT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fZ2V0X21fZmFjZXNfMD10LmFzbS5YZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxEaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fZmFjZXNfMT1mdW5jdGlvbigpe3JldHVybihEaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fc2V0X21fZmFjZXNfMT10LmFzbS5ZZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxSaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihSaT10Ll9lYl9idENvbnZleFBvbHloZWRyb25fX19kZXN0cm95X19fMD10LmFzbS5aZCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxTaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9idENvbnZleEh1bGxTaGFwZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFNpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2J0Q29udmV4SHVsbFNoYXBlXzA9dC5hc20uX2QpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSWk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfYnRDb252ZXhIdWxsU2hhcGVfMT1mdW5jdGlvbigpe3JldHVybihJaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9idENvbnZleEh1bGxTaGFwZV8xPXQuYXNtLiRkKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE9pPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2J0Q29udmV4SHVsbFNoYXBlXzI9ZnVuY3Rpb24oKXtyZXR1cm4oT2k9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfYnRDb252ZXhIdWxsU2hhcGVfMj10LmFzbS5hZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxCaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9hZGRQb2ludF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEJpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2FkZFBvaW50XzE9dC5hc20uYmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sUGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfYWRkUG9pbnRfMj1mdW5jdGlvbigpe3JldHVybihQaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9hZGRQb2ludF8yPXQuYXNtLmNlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHhpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3NldE1hcmdpbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKHhpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3NldE1hcmdpbl8xPXQuYXNtLmRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldE1hcmdpbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFRpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldE1hcmdpbl8wPXQuYXNtLmVlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEZpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldE51bVZlcnRpY2VzXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRmk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfZ2V0TnVtVmVydGljZXNfMD10LmFzbS5mZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9pbml0aWFsaXplUG9seWhlZHJhbEZlYXR1cmVzXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTWk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfaW5pdGlhbGl6ZVBvbHloZWRyYWxGZWF0dXJlc18xPXQuYXNtLmdlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEFpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3JlY2FsY0xvY2FsQWFiYl8wPWZ1bmN0aW9uKCl7cmV0dXJuKEFpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX3JlY2FsY0xvY2FsQWFiYl8wPXQuYXNtLmhlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHdpPXQuX2ViX2J0Q29udmV4SHVsbFNoYXBlX2dldENvbnZleFBvbHloZWRyb25fMD1mdW5jdGlvbigpe3JldHVybih3aT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9nZXRDb252ZXhQb2x5aGVkcm9uXzA9dC5hc20uaWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa2k9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4oa2k9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfc2V0TG9jYWxTY2FsaW5nXzE9dC5hc20uamUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfZ2V0TG9jYWxTY2FsaW5nXzA9dC5hc20ua2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfY2FsY3VsYXRlTG9jYWxJbmVydGlhXzI9ZnVuY3Rpb24oKXtyZXR1cm4oSGk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfY2FsY3VsYXRlTG9jYWxJbmVydGlhXzI9dC5hc20ubGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWWk9dC5fZWJfYnRDb252ZXhIdWxsU2hhcGVfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihZaT10Ll9lYl9idENvbnZleEh1bGxTaGFwZV9fX2Rlc3Ryb3lfX18wPXQuYXNtLm1lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFZpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm9fYnREZWZhdWx0Q29sbGlzaW9uQ29uc3RydWN0aW9uSW5mb18wPWZ1bmN0aW9uKCl7cmV0dXJuKFZpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm9fYnREZWZhdWx0Q29sbGlzaW9uQ29uc3RydWN0aW9uSW5mb18wPXQuYXNtLm5lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm9fX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihRaT10Ll9lYl9idERlZmF1bHRDb2xsaXNpb25Db25zdHJ1Y3Rpb25JbmZvX19fZGVzdHJveV9fXzA9dC5hc20ub2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRWk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oRWk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzA9dC5hc20ucGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWGk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oWGk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uXzE9dC5hc20ucWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVWk9dC5fZWJfYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFVpPXQuX2ViX2J0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb25fX19kZXN0cm95X19fMD10LmFzbS5yZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHaT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9idFBlcnNpc3RlbnRNYW5pZm9sZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKEdpPXQuX2ViX2J0UGVyc2lzdGVudE1hbmlmb2xkX2J0UGVyc2lzdGVudE1hbmlmb2xkXzA9dC5hc20uc2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0semk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Qm9keTBfMD1mdW5jdGlvbigpe3JldHVybih6aT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9nZXRCb2R5MF8wPXQuYXNtLnRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5pPXQuX2ViX2J0UGVyc2lzdGVudE1hbmlmb2xkX2dldEJvZHkxXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTmk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Qm9keTFfMD10LmFzbS51ZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxaT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9nZXROdW1Db250YWN0c18wPWZ1bmN0aW9uKCl7cmV0dXJuKHFpPXQuX2ViX2J0UGVyc2lzdGVudE1hbmlmb2xkX2dldE51bUNvbnRhY3RzXzA9dC5hc20udmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWmk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Q29udGFjdFBvaW50XzE9ZnVuY3Rpb24oKXtyZXR1cm4oWmk9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfZ2V0Q29udGFjdFBvaW50XzE9dC5hc20ud2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS2k9dC5fZWJfYnRQZXJzaXN0ZW50TWFuaWZvbGRfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihLaT10Ll9lYl9idFBlcnNpc3RlbnRNYW5pZm9sZF9fX2Rlc3Ryb3lfX18wPXQuYXNtLnhlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LCRpPXQuX2ViX2J0Q29sbGlzaW9uRGlzcGF0Y2hlcl9idENvbGxpc2lvbkRpc3BhdGNoZXJfMT1mdW5jdGlvbigpe3JldHVybigkaT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfYnRDb2xsaXNpb25EaXNwYXRjaGVyXzE9dC5hc20ueWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sSmk9dC5fZWJfYnRDb2xsaXNpb25EaXNwYXRjaGVyX2dldE51bU1hbmlmb2xkc18wPWZ1bmN0aW9uKCl7cmV0dXJuKEppPXQuX2ViX2J0Q29sbGlzaW9uRGlzcGF0Y2hlcl9nZXROdW1NYW5pZm9sZHNfMD10LmFzbS56ZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0YT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWxfMT1mdW5jdGlvbigpe3JldHVybih0YT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWxfMT10LmFzbS5BZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxlYT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihlYT10Ll9lYl9idENvbGxpc2lvbkRpc3BhdGNoZXJfX19kZXN0cm95X19fMD10LmFzbS5CZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvYT10Ll9lYl9idE92ZXJsYXBwaW5nUGFpckNhbGxiYWNrX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4ob2E9dC5fZWJfYnRPdmVybGFwcGluZ1BhaXJDYWxsYmFja19fX2Rlc3Ryb3lfX18wPXQuYXNtLkNlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG5hPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfc2V0SW50ZXJuYWxHaG9zdFBhaXJDYWxsYmFja18xPWZ1bmN0aW9uKCl7cmV0dXJuKG5hPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfc2V0SW50ZXJuYWxHaG9zdFBhaXJDYWxsYmFja18xPXQuYXNtLkRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJhPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfZ2V0TnVtT3ZlcmxhcHBpbmdQYWlyc18wPWZ1bmN0aW9uKCl7cmV0dXJuKHJhPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfZ2V0TnVtT3ZlcmxhcHBpbmdQYWlyc18wPXQuYXNtLkVlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LF9hPXQuX2ViX2J0T3ZlcmxhcHBpbmdQYWlyQ2FjaGVfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybihfYT10Ll9lYl9idE92ZXJsYXBwaW5nUGFpckNhY2hlX19fZGVzdHJveV9fXzA9dC5hc20uRmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX2dldE92ZXJsYXBwaW5nUGFpckNhY2hlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oaWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX2dldE92ZXJsYXBwaW5nUGFpckNhY2hlXzA9dC5hc20uR2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYWE9dC5fZWJfYnRCcm9hZHBoYXNlSW50ZXJmYWNlX19fZGVzdHJveV9fXzA9dC5hc20uSGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sc2E9dC5fZWJfYnRDb2xsaXNpb25Db25maWd1cmF0aW9uX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oc2E9dC5fZWJfYnRDb2xsaXNpb25Db25maWd1cmF0aW9uX19fZGVzdHJveV9fXzA9dC5hc20uSWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scGE9dC5fZWJfYnREYnZ0QnJvYWRwaGFzZV9idERidnRCcm9hZHBoYXNlXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocGE9dC5fZWJfYnREYnZ0QnJvYWRwaGFzZV9idERidnRCcm9hZHBoYXNlXzA9dC5hc20uSmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbGE9dC5fZWJfYnREYnZ0QnJvYWRwaGFzZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGxhPXQuX2ViX2J0RGJ2dEJyb2FkcGhhc2VfX19kZXN0cm95X19fMD10LmFzbS5LZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx1YT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9nZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHVhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X2dldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwXzA9dC5hc20uTGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sY2E9dC5fZWJfYnRCcm9hZHBoYXNlUHJveHlfc2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXBfMT1mdW5jdGlvbigpe3JldHVybihjYT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cF8xPXQuYXNtLk1lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X2dldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMD1mdW5jdGlvbigpe3JldHVybih5YT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9nZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrXzA9dC5hc20uTmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saGE9dC5fZWJfYnRCcm9hZHBoYXNlUHJveHlfc2V0X21fY29sbGlzaW9uRmlsdGVyTWFza18xPWZ1bmN0aW9uKCl7cmV0dXJuKGhhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X3NldF9tX2NvbGxpc2lvbkZpbHRlck1hc2tfMT10LmFzbS5PZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxmYT10Ll9lYl9idEJyb2FkcGhhc2VQcm94eV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGZhPXQuX2ViX2J0QnJvYWRwaGFzZVByb3h5X19fZGVzdHJveV9fXzA9dC5hc20uUGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbWE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb18zPWZ1bmN0aW9uKCl7cmV0dXJuKG1hPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fMz10LmFzbS5RZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxiYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvXzQ9ZnVuY3Rpb24oKXtyZXR1cm4oYmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb180PXQuYXNtLlJlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9saW5lYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZ2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2xpbmVhckRhbXBpbmdfMD10LmFzbS5TZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxkYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fbGluZWFyRGFtcGluZ18xPWZ1bmN0aW9uKCl7cmV0dXJuKGRhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9saW5lYXJEYW1waW5nXzE9dC5hc20uVGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sV2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FuZ3VsYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oV2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FuZ3VsYXJEYW1waW5nXzA9dC5hc20uVWUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQ2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FuZ3VsYXJEYW1waW5nXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQ2E9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FuZ3VsYXJEYW1waW5nXzE9dC5hc20uVmUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0samE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2ZyaWN0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oamE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2ZyaWN0aW9uXzA9dC5hc20uV2UpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2ZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4odmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2ZyaWN0aW9uXzE9dC5hc20uWGUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRGE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX3JvbGxpbmdGcmljdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKERhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9yb2xsaW5nRnJpY3Rpb25fMD10LmFzbS5ZZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxSYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fcm9sbGluZ0ZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX3JvbGxpbmdGcmljdGlvbl8xPXQuYXNtLlplKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFNhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9yZXN0aXR1dGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFNhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9yZXN0aXR1dGlvbl8wPXQuYXNtLl9lKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LElhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9yZXN0aXR1dGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKElhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9yZXN0aXR1dGlvbl8xPXQuYXNtLiRlKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE9hPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8wPWZ1bmN0aW9uKCl7cmV0dXJuKE9hPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8wPXQuYXNtLmFmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKEJhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZF8xPXQuYXNtLmJmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFBhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9hbmd1bGFyU2xlZXBpbmdUaHJlc2hvbGRfMD1mdW5jdGlvbigpe3JldHVybihQYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYW5ndWxhclNsZWVwaW5nVGhyZXNob2xkXzA9dC5hc20uY2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0seGE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FuZ3VsYXJTbGVlcGluZ1RocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHhhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9hbmd1bGFyU2xlZXBpbmdUaHJlc2hvbGRfMT10LmFzbS5kZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxUYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdfMD1mdW5jdGlvbigpe3JldHVybihUYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdfMD10LmFzbS5lZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdfMT1mdW5jdGlvbigpe3JldHVybihGYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdfMT10LmFzbS5mZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxNYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMD1mdW5jdGlvbigpe3JldHVybihNYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMD10LmFzbS5nZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMT1mdW5jdGlvbigpe3JldHVybihBYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3JfMT10LmFzbS5oZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx3YT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMD1mdW5jdGlvbigpe3JldHVybih3YT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMD10LmFzbS5qZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxrYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMT1mdW5jdGlvbigpe3JldHVybihrYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXJfMT10LmFzbS5rZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxMYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fZ2V0X21fYWRkaXRpb25hbEFuZ3VsYXJEYW1waW5nVGhyZXNob2xkU3FyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTGE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ1RocmVzaG9sZFNxcl8wPXQuYXNtLmxmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEhhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19zZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdUaHJlc2hvbGRTcXJfMT1mdW5jdGlvbigpe3JldHVybihIYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbEFuZ3VsYXJEYW1waW5nVGhyZXNob2xkU3FyXzE9dC5hc20ubWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWWE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX2dldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3Rvcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKFlhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19nZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdGYWN0b3JfMD10LmFzbS5uZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxWYT10Ll9lYl9idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm9fc2V0X21fYWRkaXRpb25hbEFuZ3VsYXJEYW1waW5nRmFjdG9yXzE9ZnVuY3Rpb24oKXtyZXR1cm4oVmE9dC5fZWJfYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvX3NldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3Rvcl8xPXQuYXNtLm9mKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKFFhPXQuX2ViX2J0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mb19fX2Rlc3Ryb3lfX18wPXQuYXNtLnBmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVhPXQuX2ViX2J0UmlnaWRCb2R5X2J0UmlnaWRCb2R5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oRWE9dC5fZWJfYnRSaWdpZEJvZHlfYnRSaWdpZEJvZHlfMT10LmFzbS5xZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxYYT10Ll9lYl9idFJpZ2lkQm9keV9nZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMD1mdW5jdGlvbigpe3JldHVybihYYT10Ll9lYl9idFJpZ2lkQm9keV9nZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMD10LmFzbS5yZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxVYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMT1mdW5jdGlvbigpe3JldHVybihVYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm1fMT10LmFzbS5zZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxHYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRTbGVlcGluZ1RocmVzaG9sZHNfMj1mdW5jdGlvbigpe3JldHVybihHYT10Ll9lYl9idFJpZ2lkQm9keV9zZXRTbGVlcGluZ1RocmVzaG9sZHNfMj10LmFzbS50ZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6YT10Ll9lYl9idFJpZ2lkQm9keV9nZXRMaW5lYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oemE9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0TGluZWFyRGFtcGluZ18wPXQuYXNtLnVmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE5hPXQuX2ViX2J0UmlnaWRCb2R5X2dldEFuZ3VsYXJEYW1waW5nXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTmE9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QW5ndWxhckRhbXBpbmdfMD10LmFzbS52ZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxYT10Ll9lYl9idFJpZ2lkQm9keV9zZXREYW1waW5nXzI9ZnVuY3Rpb24oKXtyZXR1cm4ocWE9dC5fZWJfYnRSaWdpZEJvZHlfc2V0RGFtcGluZ18yPXQuYXNtLndmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFphPXQuX2ViX2J0UmlnaWRCb2R5X3NldE1hc3NQcm9wc18yPWZ1bmN0aW9uKCl7cmV0dXJuKFphPXQuX2ViX2J0UmlnaWRCb2R5X3NldE1hc3NQcm9wc18yPXQuYXNtLnhmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEthPXQuX2ViX2J0UmlnaWRCb2R5X2dldExpbmVhckZhY3Rvcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKEthPXQuX2ViX2J0UmlnaWRCb2R5X2dldExpbmVhckZhY3Rvcl8wPXQuYXNtLnlmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LCRhPXQuX2ViX2J0UmlnaWRCb2R5X3NldExpbmVhckZhY3Rvcl8xPWZ1bmN0aW9uKCl7cmV0dXJuKCRhPXQuX2ViX2J0UmlnaWRCb2R5X3NldExpbmVhckZhY3Rvcl8xPXQuYXNtLnpmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEphPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5VG9ycXVlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oSmE9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlUb3JxdWVfMT10LmFzbS5BZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0cz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUxvY2FsVG9ycXVlXzE9ZnVuY3Rpb24oKXtyZXR1cm4odHM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlMb2NhbFRvcnF1ZV8xPXQuYXNtLkJmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGVzPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5Rm9yY2VfMj1mdW5jdGlvbigpe3JldHVybihlcz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUZvcmNlXzI9dC5hc20uQ2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sb3M9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlDZW50cmFsRm9yY2VfMT1mdW5jdGlvbigpe3JldHVybihvcz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUNlbnRyYWxGb3JjZV8xPXQuYXNtLkRmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG5zPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5Q2VudHJhbExvY2FsRm9yY2VfMT1mdW5jdGlvbigpe3JldHVybihucz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUNlbnRyYWxMb2NhbEZvcmNlXzE9dC5hc20uRWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scnM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlUb3JxdWVJbXB1bHNlXzE9ZnVuY3Rpb24oKXtyZXR1cm4ocnM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlUb3JxdWVJbXB1bHNlXzE9dC5hc20uRmYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sX3M9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlJbXB1bHNlXzI9ZnVuY3Rpb24oKXtyZXR1cm4oX3M9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlJbXB1bHNlXzI9dC5hc20uR2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saXM9dC5fZWJfYnRSaWdpZEJvZHlfYXBwbHlDZW50cmFsSW1wdWxzZV8xPWZ1bmN0aW9uKCl7cmV0dXJuKGlzPXQuX2ViX2J0UmlnaWRCb2R5X2FwcGx5Q2VudHJhbEltcHVsc2VfMT10LmFzbS5IZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhcz10Ll9lYl9idFJpZ2lkQm9keV91cGRhdGVJbmVydGlhVGVuc29yXzA9ZnVuY3Rpb24oKXtyZXR1cm4oYXM9dC5fZWJfYnRSaWdpZEJvZHlfdXBkYXRlSW5lcnRpYVRlbnNvcl8wPXQuYXNtLklmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHNzPXQuX2ViX2J0UmlnaWRCb2R5X2dldExpbmVhclZlbG9jaXR5XzA9ZnVuY3Rpb24oKXtyZXR1cm4oc3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0TGluZWFyVmVsb2NpdHlfMD10LmFzbS5KZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRBbmd1bGFyVmVsb2NpdHlfMD1mdW5jdGlvbigpe3JldHVybihwcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRBbmd1bGFyVmVsb2NpdHlfMD10LmFzbS5LZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxscz10Ll9lYl9idFJpZ2lkQm9keV9zZXRMaW5lYXJWZWxvY2l0eV8xPWZ1bmN0aW9uKCl7cmV0dXJuKGxzPXQuX2ViX2J0UmlnaWRCb2R5X3NldExpbmVhclZlbG9jaXR5XzE9dC5hc20uTGYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0QW5ndWxhclZlbG9jaXR5XzE9ZnVuY3Rpb24oKXtyZXR1cm4odXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0QW5ndWxhclZlbG9jaXR5XzE9dC5hc20uTWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sY3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0TW90aW9uU3RhdGVfMD1mdW5jdGlvbigpe3JldHVybihjcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRNb3Rpb25TdGF0ZV8wPXQuYXNtLk5mKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlzPXQuX2ViX2J0UmlnaWRCb2R5X3NldE1vdGlvblN0YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oeXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0TW90aW9uU3RhdGVfMT10LmFzbS5PZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxocz10Ll9lYl9idFJpZ2lkQm9keV9nZXRBbmd1bGFyRmFjdG9yXzA9ZnVuY3Rpb24oKXtyZXR1cm4oaHM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QW5ndWxhckZhY3Rvcl8wPXQuYXNtLlBmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEFuZ3VsYXJGYWN0b3JfMT1mdW5jdGlvbigpe3JldHVybihmcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBbmd1bGFyRmFjdG9yXzE9dC5hc20uUWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sbXM9dC5fZWJfYnRSaWdpZEJvZHlfdXBjYXN0XzE9ZnVuY3Rpb24oKXtyZXR1cm4obXM9dC5fZWJfYnRSaWdpZEJvZHlfdXBjYXN0XzE9dC5hc20uUmYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYnM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QWFiYl8yPWZ1bmN0aW9uKCl7cmV0dXJuKGJzPXQuX2ViX2J0UmlnaWRCb2R5X2dldEFhYmJfMj10LmFzbS5TZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxncz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUdyYXZpdHlfMD1mdW5jdGlvbigpe3JldHVybihncz10Ll9lYl9idFJpZ2lkQm9keV9hcHBseUdyYXZpdHlfMD10LmFzbS5UZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxkcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRHcmF2aXR5XzA9ZnVuY3Rpb24oKXtyZXR1cm4oZHM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0R3Jhdml0eV8wPXQuYXNtLlVmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFdzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEdyYXZpdHlfMT1mdW5jdGlvbigpe3JldHVybihXcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRHcmF2aXR5XzE9dC5hc20uVmYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQ3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QnJvYWRwaGFzZVByb3h5XzA9ZnVuY3Rpb24oKXtyZXR1cm4oQ3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0QnJvYWRwaGFzZVByb3h5XzA9dC5hc20uV2YpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sanM9dC5fZWJfYnRSaWdpZEJvZHlfY2xlYXJGb3JjZXNfMD1mdW5jdGlvbigpe3JldHVybihqcz10Ll9lYl9idFJpZ2lkQm9keV9jbGVhckZvcmNlc18wPXQuYXNtLlhmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHZzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEFuaXNvdHJvcGljRnJpY3Rpb25fMj1mdW5jdGlvbigpe3JldHVybih2cz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBbmlzb3Ryb3BpY0ZyaWN0aW9uXzI9dC5hc20uWWYpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRHM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Q29sbGlzaW9uU2hhcGVfMD1mdW5jdGlvbigpe3JldHVybihEcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRDb2xsaXNpb25TaGFwZV8wPXQuYXNtLlpmKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFJzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUnM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q29udGFjdFByb2Nlc3NpbmdUaHJlc2hvbGRfMT10LmFzbS5fZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxTcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBY3RpdmF0aW9uU3RhdGVfMT1mdW5jdGlvbigpe3JldHVybihTcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRBY3RpdmF0aW9uU3RhdGVfMT10LmFzbS4kZikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxJcz10Ll9lYl9idFJpZ2lkQm9keV9mb3JjZUFjdGl2YXRpb25TdGF0ZV8xPWZ1bmN0aW9uKCl7cmV0dXJuKElzPXQuX2ViX2J0UmlnaWRCb2R5X2ZvcmNlQWN0aXZhdGlvblN0YXRlXzE9dC5hc20uYWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT3M9dC5fZWJfYnRSaWdpZEJvZHlfYWN0aXZhdGVfMD1mdW5jdGlvbigpe3JldHVybihPcz10Ll9lYl9idFJpZ2lkQm9keV9hY3RpdmF0ZV8wPXQuYXNtLmJnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEJzPXQuX2ViX2J0UmlnaWRCb2R5X2FjdGl2YXRlXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQnM9dC5fZWJfYnRSaWdpZEJvZHlfYWN0aXZhdGVfMT10LmFzbS5jZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQcz10Ll9lYl9idFJpZ2lkQm9keV9pc0FjdGl2ZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFBzPXQuX2ViX2J0UmlnaWRCb2R5X2lzQWN0aXZlXzA9dC5hc20uZGcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0seHM9dC5fZWJfYnRSaWdpZEJvZHlfaXNLaW5lbWF0aWNPYmplY3RfMD1mdW5jdGlvbigpe3JldHVybih4cz10Ll9lYl9idFJpZ2lkQm9keV9pc0tpbmVtYXRpY09iamVjdF8wPXQuYXNtLmVnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRzPXQuX2ViX2J0UmlnaWRCb2R5X2lzU3RhdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oVHM9dC5fZWJfYnRSaWdpZEJvZHlfaXNTdGF0aWNPYmplY3RfMD10LmFzbS5mZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGcz10Ll9lYl9idFJpZ2lkQm9keV9pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0XzA9ZnVuY3Rpb24oKXtyZXR1cm4oRnM9dC5fZWJfYnRSaWdpZEJvZHlfaXNTdGF0aWNPcktpbmVtYXRpY09iamVjdF8wPXQuYXNtLmdnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE1zPXQuX2ViX2J0UmlnaWRCb2R5X2dldFJlc3RpdHV0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oTXM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0UmVzdGl0dXRpb25fMD10LmFzbS5oZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxBcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRGcmljdGlvbl8wPWZ1bmN0aW9uKCl7cmV0dXJuKEFzPXQuX2ViX2J0UmlnaWRCb2R5X2dldEZyaWN0aW9uXzA9dC5hc20uaWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sd3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Um9sbGluZ0ZyaWN0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4od3M9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Um9sbGluZ0ZyaWN0aW9uXzA9dC5hc20uamcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa3M9dC5fZWJfYnRSaWdpZEJvZHlfc2V0UmVzdGl0dXRpb25fMT1mdW5jdGlvbigpe3JldHVybihrcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRSZXN0aXR1dGlvbl8xPXQuYXNtLmtnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LExzPXQuX2ViX2J0UmlnaWRCb2R5X3NldEZyaWN0aW9uXzE9ZnVuY3Rpb24oKXtyZXR1cm4oTHM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0RnJpY3Rpb25fMT10LmFzbS5sZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxIcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRSb2xsaW5nRnJpY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihIcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRSb2xsaW5nRnJpY3Rpb25fMT10LmFzbS5tZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRXb3JsZFRyYW5zZm9ybV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFlzPXQuX2ViX2J0UmlnaWRCb2R5X2dldFdvcmxkVHJhbnNmb3JtXzA9dC5hc20ubmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVnM9dC5fZWJfYnRSaWdpZEJvZHlfZ2V0Q29sbGlzaW9uRmxhZ3NfMD1mdW5jdGlvbigpe3JldHVybihWcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRDb2xsaXNpb25GbGFnc18wPXQuYXNtLm9nKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENvbGxpc2lvbkZsYWdzXzE9ZnVuY3Rpb24oKXtyZXR1cm4oUXM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q29sbGlzaW9uRmxhZ3NfMT10LmFzbS5wZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxFcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRXb3JsZFRyYW5zZm9ybV8xPWZ1bmN0aW9uKCl7cmV0dXJuKEVzPXQuX2ViX2J0UmlnaWRCb2R5X3NldFdvcmxkVHJhbnNmb3JtXzE9dC5hc20ucWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWHM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q29sbGlzaW9uU2hhcGVfMT1mdW5jdGlvbigpe3JldHVybihYcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRDb2xsaXNpb25TaGFwZV8xPXQuYXNtLnJnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFVzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENjZE1vdGlvblRocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKFVzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENjZE1vdGlvblRocmVzaG9sZF8xPXQuYXNtLnNnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEdzPXQuX2ViX2J0UmlnaWRCb2R5X3NldENjZFN3ZXB0U3BoZXJlUmFkaXVzXzE9ZnVuY3Rpb24oKXtyZXR1cm4oR3M9dC5fZWJfYnRSaWdpZEJvZHlfc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXNfMT10LmFzbS50ZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx6cz10Ll9lYl9idFJpZ2lkQm9keV9nZXRVc2VySW5kZXhfMD1mdW5jdGlvbigpe3JldHVybih6cz10Ll9lYl9idFJpZ2lkQm9keV9nZXRVc2VySW5kZXhfMD10LmFzbS51ZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxOcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRVc2VySW5kZXhfMT1mdW5jdGlvbigpe3JldHVybihOcz10Ll9lYl9idFJpZ2lkQm9keV9zZXRVc2VySW5kZXhfMT10LmFzbS52ZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxxcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRVc2VyUG9pbnRlcl8wPWZ1bmN0aW9uKCl7cmV0dXJuKHFzPXQuX2ViX2J0UmlnaWRCb2R5X2dldFVzZXJQb2ludGVyXzA9dC5hc20ud2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWnM9dC5fZWJfYnRSaWdpZEJvZHlfc2V0VXNlclBvaW50ZXJfMT1mdW5jdGlvbigpe3JldHVybihacz10Ll9lYl9idFJpZ2lkQm9keV9zZXRVc2VyUG9pbnRlcl8xPXQuYXNtLnhnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEtzPXQuX2ViX2J0UmlnaWRCb2R5X2dldEJyb2FkcGhhc2VIYW5kbGVfMD1mdW5jdGlvbigpe3JldHVybihLcz10Ll9lYl9idFJpZ2lkQm9keV9nZXRCcm9hZHBoYXNlSGFuZGxlXzA9dC5hc20ueWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sJHM9dC5fZWJfYnRSaWdpZEJvZHlfX19kZXN0cm95X19fMD1mdW5jdGlvbigpe3JldHVybigkcz10Ll9lYl9idFJpZ2lkQm9keV9fX2Rlc3Ryb3lfX18wPXQuYXNtLnpnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEpzPXQuX2ViX2J0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyX2J0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyXzA9ZnVuY3Rpb24oKXtyZXR1cm4oSnM9dC5fZWJfYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXJfYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXJfMD10LmFzbS5BZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0cD10Ll9lYl9idFNlcXVlbnRpYWxJbXB1bHNlQ29uc3RyYWludFNvbHZlcl9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKHRwPXQuX2ViX2J0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyX19fZGVzdHJveV9fXzA9dC5hc20uQmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZXA9dC5fZWJfYnRDb25zdHJhaW50U29sdmVyX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZXA9dC5fZWJfYnRDb25zdHJhaW50U29sdmVyX19fZGVzdHJveV9fXzA9dC5hc20uQ2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sb3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV90aW1lU3RlcF8wPWZ1bmN0aW9uKCl7cmV0dXJuKG9wPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdGltZVN0ZXBfMD10LmFzbS5EZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxucD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3RpbWVTdGVwXzE9ZnVuY3Rpb24oKXtyZXR1cm4obnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV90aW1lU3RlcF8xPXQuYXNtLkVnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHJwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fc3RlcENvdW50XzA9ZnVuY3Rpb24oKXtyZXR1cm4ocnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9zdGVwQ291bnRfMD10LmFzbS5GZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxfcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3N0ZXBDb3VudF8xPWZ1bmN0aW9uKCl7cmV0dXJuKF9wPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fc3RlcENvdW50XzE9dC5hc20uR2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saXA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9kaXNwYXRjaEZ1bmNfMD1mdW5jdGlvbigpe3JldHVybihpcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX2Rpc3BhdGNoRnVuY18wPXQuYXNtLkhnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGFwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fZGlzcGF0Y2hGdW5jXzE9ZnVuY3Rpb24oKXtyZXR1cm4oYXA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV9kaXNwYXRjaEZ1bmNfMT10LmFzbS5JZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxzcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX3RpbWVPZkltcGFjdF8wPWZ1bmN0aW9uKCl7cmV0dXJuKHNwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdGltZU9mSW1wYWN0XzA9dC5hc20uSmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scHA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV90aW1lT2ZJbXBhY3RfMT1mdW5jdGlvbigpe3JldHVybihwcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3RpbWVPZkltcGFjdF8xPXQuYXNtLktnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGxwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdXNlQ29udGludW91c18wPWZ1bmN0aW9uKCl7cmV0dXJuKGxwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdXNlQ29udGludW91c18wPXQuYXNtLkxnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHVwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fdXNlQ29udGludW91c18xPWZ1bmN0aW9uKCl7cmV0dXJuKHVwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fdXNlQ29udGludW91c18xPXQuYXNtLk1nKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fZW5hYmxlU2F0Q29udmV4XzA9ZnVuY3Rpb24oKXtyZXR1cm4oY3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9lbmFibGVTYXRDb252ZXhfMD10LmFzbS5OZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx5cD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX2VuYWJsZVNhdENvbnZleF8xPWZ1bmN0aW9uKCl7cmV0dXJuKHlwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fZW5hYmxlU2F0Q29udmV4XzE9dC5hc20uT2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saHA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9lbmFibGVTUFVfMD1mdW5jdGlvbigpe3JldHVybihocD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX2VuYWJsZVNQVV8wPXQuYXNtLlBnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fZW5hYmxlU1BVXzE9ZnVuY3Rpb24oKXtyZXR1cm4oZnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV9lbmFibGVTUFVfMT10LmFzbS5RZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxtcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX3VzZUVwYV8wPWZ1bmN0aW9uKCl7cmV0dXJuKG1wPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fdXNlRXBhXzA9dC5hc20uUmcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYnA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV91c2VFcGFfMT1mdW5jdGlvbigpe3JldHVybihicD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX3VzZUVwYV8xPXQuYXNtLlNnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGdwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fZ2V0X21fYWxsb3dlZENjZFBlbmV0cmF0aW9uXzA9ZnVuY3Rpb24oKXtyZXR1cm4oZ3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9hbGxvd2VkQ2NkUGVuZXRyYXRpb25fMD10LmFzbS5UZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxkcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX2FsbG93ZWRDY2RQZW5ldHJhdGlvbl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGRwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fYWxsb3dlZENjZFBlbmV0cmF0aW9uXzE9dC5hc20uVWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sV3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWxfMD1mdW5jdGlvbigpe3JldHVybihXcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX3VzZUNvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVXRpbF8wPXQuYXNtLlZnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LENwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fdXNlQ29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VVdGlsXzE9ZnVuY3Rpb24oKXtyZXR1cm4oQ3A9dC5fZWJfYnREaXNwYXRjaGVySW5mb19zZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWxfMT10LmFzbS5XZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxqcD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX2dldF9tX2NvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVGhyZXNob2xkXzA9ZnVuY3Rpb24oKXtyZXR1cm4oanA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19nZXRfbV9jb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVRocmVzaG9sZF8wPXQuYXNtLlhnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHZwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fc2V0X21fY29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VUaHJlc2hvbGRfMT1mdW5jdGlvbigpe3JldHVybih2cD10Ll9lYl9idERpc3BhdGNoZXJJbmZvX3NldF9tX2NvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVGhyZXNob2xkXzE9dC5hc20uWWcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sRHA9dC5fZWJfYnREaXNwYXRjaGVySW5mb19fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKERwPXQuX2ViX2J0RGlzcGF0Y2hlckluZm9fX19kZXN0cm95X19fMD10LmFzbS5aZykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxScD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX3NwbGl0SW1wdWxzZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKFJwPXQuX2ViX2J0Q29udGFjdFNvbHZlckluZm9fZ2V0X21fc3BsaXRJbXB1bHNlXzA9dC5hc20uX2cpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sU3A9dC5fZWJfYnRDb250YWN0U29sdmVySW5mb19zZXRfbV9zcGxpdEltcHVsc2VfMT1mdW5jdGlvbigpe3JldHVybihTcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX3NldF9tX3NwbGl0SW1wdWxzZV8xPXQuYXNtLiRnKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LElwPXQuX2ViX2J0Q29udGFjdFNvbHZlckluZm9fZ2V0X21fc3BsaXRJbXB1bHNlUGVuZXRyYXRpb25UaHJlc2hvbGRfMD1mdW5jdGlvbigpe3JldHVybihJcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX3NwbGl0SW1wdWxzZVBlbmV0cmF0aW9uVGhyZXNob2xkXzA9dC5hc20uYWgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sT3A9dC5fZWJfYnRDb250YWN0U29sdmVySW5mb19zZXRfbV9zcGxpdEltcHVsc2VQZW5ldHJhdGlvblRocmVzaG9sZF8xPWZ1bmN0aW9uKCl7cmV0dXJuKE9wPXQuX2ViX2J0Q29udGFjdFNvbHZlckluZm9fc2V0X21fc3BsaXRJbXB1bHNlUGVuZXRyYXRpb25UaHJlc2hvbGRfMT10LmFzbS5iaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxCcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX251bUl0ZXJhdGlvbnNfMD1mdW5jdGlvbigpe3JldHVybihCcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX2dldF9tX251bUl0ZXJhdGlvbnNfMD10LmFzbS5jaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxQcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX3NldF9tX251bUl0ZXJhdGlvbnNfMT1mdW5jdGlvbigpe3JldHVybihQcD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX3NldF9tX251bUl0ZXJhdGlvbnNfMT10LmFzbS5kaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx4cD10Ll9lYl9idENvbnRhY3RTb2x2ZXJJbmZvX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oeHA9dC5fZWJfYnRDb250YWN0U29sdmVySW5mb19fX2Rlc3Ryb3lfX18wPXQuYXNtLmVoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFRwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkXzQ9ZnVuY3Rpb24oKXtyZXR1cm4oVHA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfND10LmFzbS5maCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxGcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRHcmF2aXR5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oRnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0R3Jhdml0eV8xPXQuYXNtLmdoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LE1wPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2dldEdyYXZpdHlfMD1mdW5jdGlvbigpe3JldHVybihNcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9nZXRHcmF2aXR5XzA9dC5hc20uaGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sQXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oQXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzE9dC5hc20uaWgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sd3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzM9ZnVuY3Rpb24oKXtyZXR1cm4od3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkUmlnaWRCb2R5XzM9dC5hc20uamgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sa3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlUmlnaWRCb2R5XzE9ZnVuY3Rpb24oKXtyZXR1cm4oa3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlUmlnaWRCb2R5XzE9dC5hc20ua2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTHA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc3RlcFNpbXVsYXRpb25fMT1mdW5jdGlvbigpe3JldHVybihMcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zdGVwU2ltdWxhdGlvbl8xPXQuYXNtLmxoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEhwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3N0ZXBTaW11bGF0aW9uXzI9ZnVuY3Rpb24oKXtyZXR1cm4oSHA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc3RlcFNpbXVsYXRpb25fMj10LmFzbS5taCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxZcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zdGVwU2ltdWxhdGlvbl8zPWZ1bmN0aW9uKCl7cmV0dXJuKFlwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3N0ZXBTaW11bGF0aW9uXzM9dC5hc20ubmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0Q29udGFjdEFkZGVkQ2FsbGJhY2tfMT1mdW5jdGlvbigpe3JldHVybihWcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRDb250YWN0QWRkZWRDYWxsYmFja18xPXQuYXNtLm9oKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFFwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3RQcm9jZXNzZWRDYWxsYmFja18xPWZ1bmN0aW9uKCl7cmV0dXJuKFFwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3RQcm9jZXNzZWRDYWxsYmFja18xPXQuYXNtLnBoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3REZXN0cm95ZWRDYWxsYmFja18xPWZ1bmN0aW9uKCl7cmV0dXJuKEVwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldENvbnRhY3REZXN0cm95ZWRDYWxsYmFja18xPXQuYXNtLnFoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LFhwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2dldERpc3BhdGNoZXJfMD1mdW5jdGlvbigpe3JldHVybihYcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9nZXREaXNwYXRjaGVyXzA9dC5hc20ucmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sVXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0UGFpckNhY2hlXzA9ZnVuY3Rpb24oKXtyZXR1cm4oVXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0UGFpckNhY2hlXzA9dC5hc20uc2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sR3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4oR3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0RGlzcGF0Y2hJbmZvXzA9dC5hc20udGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0senA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9ZnVuY3Rpb24oKXtyZXR1cm4oenA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20udWgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sTnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzI9ZnVuY3Rpb24oKXtyZXR1cm4oTnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzI9dC5hc20udmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0scXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9ZnVuY3Rpb24oKXtyZXR1cm4ocXA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfYWRkQ29sbGlzaW9uT2JqZWN0XzM9dC5hc20ud2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sWnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9ZnVuY3Rpb24oKXtyZXR1cm4oWnA9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfcmVtb3ZlQ29sbGlzaW9uT2JqZWN0XzE9dC5hc20ueGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sS3A9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0QnJvYWRwaGFzZV8wPWZ1bmN0aW9uKCl7cmV0dXJuKEtwPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2dldEJyb2FkcGhhc2VfMD10LmFzbS55aCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSwkcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb252ZXhTd2VlcFRlc3RfNT1mdW5jdGlvbigpe3JldHVybigkcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb252ZXhTd2VlcFRlc3RfNT10LmFzbS56aCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxKcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb250YWN0UGFpclRlc3RfMz1mdW5jdGlvbigpe3JldHVybihKcD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb250YWN0UGFpclRlc3RfMz10LmFzbS5BaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0bD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9jb250YWN0VGVzdF8yPWZ1bmN0aW9uKCl7cmV0dXJuKHRsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX2NvbnRhY3RUZXN0XzI9dC5hc20uQmgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZWw9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfdXBkYXRlU2luZ2xlQWFiYl8xPWZ1bmN0aW9uKCl7cmV0dXJuKGVsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3VwZGF0ZVNpbmdsZUFhYmJfMT10LmFzbS5DaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxvbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9hZGRBY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihvbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9hZGRBY3Rpb25fMT10LmFzbS5EaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxubD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9yZW1vdmVBY3Rpb25fMT1mdW5jdGlvbigpe3JldHVybihubD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9yZW1vdmVBY3Rpb25fMT10LmFzbS5FaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxybD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9nZXRTb2x2ZXJJbmZvXzA9ZnVuY3Rpb24oKXtyZXR1cm4ocmw9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfZ2V0U29sdmVySW5mb18wPXQuYXNtLkZoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LF9sPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldEludGVybmFsVGlja0NhbGxiYWNrXzE9ZnVuY3Rpb24oKXtyZXR1cm4oX2w9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMT10LmFzbS5HaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxpbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRJbnRlcm5hbFRpY2tDYWxsYmFja18yPWZ1bmN0aW9uKCl7cmV0dXJuKGlsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX3NldEludGVybmFsVGlja0NhbGxiYWNrXzI9dC5hc20uSGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYWw9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2tfMz1mdW5jdGlvbigpe3JldHVybihhbD10Ll9lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9zZXRJbnRlcm5hbFRpY2tDYWxsYmFja18zPXQuYXNtLkloKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHNsPXQuX2ViX2J0RGlzY3JldGVEeW5hbWljc1dvcmxkX19fZGVzdHJveV9fXzA9ZnVuY3Rpb24oKXtyZXR1cm4oc2w9dC5fZWJfYnREaXNjcmV0ZUR5bmFtaWNzV29ybGRfX19kZXN0cm95X19fMD10LmFzbS5KaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxwbD10Ll9lYl9idEFjdGlvbkludGVyZmFjZV91cGRhdGVBY3Rpb25fMj1mdW5jdGlvbigpe3JldHVybihwbD10Ll9lYl9idEFjdGlvbkludGVyZmFjZV91cGRhdGVBY3Rpb25fMj10LmFzbS5LaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxsbD10Ll9lYl9idEFjdGlvbkludGVyZmFjZV9fX2Rlc3Ryb3lfX18wPWZ1bmN0aW9uKCl7cmV0dXJuKGxsPXQuX2ViX2J0QWN0aW9uSW50ZXJmYWNlX19fZGVzdHJveV9fXzA9dC5hc20uTGgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdWw9dC5fZW1zY3JpcHRlbl9lbnVtX1BIWV9TY2FsYXJUeXBlX1BIWV9GTE9BVD1mdW5jdGlvbigpe3JldHVybih1bD10Ll9lbXNjcmlwdGVuX2VudW1fUEhZX1NjYWxhclR5cGVfUEhZX0ZMT0FUPXQuYXNtLk1oKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGNsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRE9VQkxFPWZ1bmN0aW9uKCl7cmV0dXJuKGNsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRE9VQkxFPXQuYXNtLk5oKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHlsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfSU5URUdFUj1mdW5jdGlvbigpe3JldHVybih5bD10Ll9lbXNjcmlwdGVuX2VudW1fUEhZX1NjYWxhclR5cGVfUEhZX0lOVEVHRVI9dC5hc20uT2gpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0saGw9dC5fZW1zY3JpcHRlbl9lbnVtX1BIWV9TY2FsYXJUeXBlX1BIWV9TSE9SVD1mdW5jdGlvbigpe3JldHVybihobD10Ll9lbXNjcmlwdGVuX2VudW1fUEhZX1NjYWxhclR5cGVfUEhZX1NIT1JUPXQuYXNtLlBoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGZsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRklYRURQT0lOVDg4PWZ1bmN0aW9uKCl7cmV0dXJuKGZsPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfRklYRURQT0lOVDg4PXQuYXNtLlFoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LG1sPXQuX2Vtc2NyaXB0ZW5fZW51bV9QSFlfU2NhbGFyVHlwZV9QSFlfVUNIQVI9ZnVuY3Rpb24oKXtyZXR1cm4obWw9dC5fZW1zY3JpcHRlbl9lbnVtX1BIWV9TY2FsYXJUeXBlX1BIWV9VQ0hBUj10LmFzbS5SaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTt0Ll9tYWxsb2M9ZnVuY3Rpb24oKXtyZXR1cm4odC5fbWFsbG9jPXQuYXNtLlNoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2ZyZWU9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZnJlZT10LmFzbS5UaCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0LmR5bkNhbGxfdmk9ZnVuY3Rpb24oKXtyZXR1cm4odC5keW5DYWxsX3ZpPXQuYXNtLlVoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuZHluQ2FsbF92PWZ1bmN0aW9uKCl7cmV0dXJuKHQuZHluQ2FsbF92PXQuYXNtLlZoKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuYWRkRnVuY3Rpb249ZnVuY3Rpb24oZSxvKXtpZighQnQpe0J0PW5ldyBXZWFrTWFwO2Zvcih2YXIgbj0wO248V3QubGVuZ3RoO24rKyl7dmFyIHI9V3QuZ2V0KG4pO3ImJkJ0LnNldChyLG4pfX1pZihCdC5oYXMoZSkpZT1CdC5nZXQoZSk7ZWxzZXtpZihlZS5sZW5ndGgpbj1lZS5wb3AoKTtlbHNle249V3QubGVuZ3RoO3RyeXtXdC5ncm93KDEpfWNhdGNoKGN0KXt0aHJvdyBjdCBpbnN0YW5jZW9mIFJhbmdlRXJyb3I/IlVuYWJsZSB0byBncm93IHdhc20gdGFibGUuIFNldCBBTExPV19UQUJMRV9HUk9XVEguIjpjdH19dHJ5e1d0LnNldChuLGUpfWNhdGNoKGN0KXtpZighKGN0IGluc3RhbmNlb2YgVHlwZUVycm9yKSl0aHJvdyBjdDtpZih0eXBlb2YgV2ViQXNzZW1ibHkuRnVuY3Rpb249PSJmdW5jdGlvbiIpe3ZhciBjPXtpOiJpMzIiLGo6Imk2NCIsZjoiZjMyIixkOiJmNjQifSxEPXtwYXJhbWV0ZXJzOltdLHJlc3VsdHM6b1swXT09InYiP1tdOltjW29bMF1dXX07Zm9yKHI9MTtyPG8ubGVuZ3RoOysrcilELnBhcmFtZXRlcnMucHVzaChjW29bcl1dKTtvPW5ldyBXZWJBc3NlbWJseS5GdW5jdGlvbihELGUpfWVsc2V7Yz1bMSwwLDEsOTZdLEQ9by5zbGljZSgwLDEpLG89by5zbGljZSgxKTt2YXIgVT17aToxMjcsajoxMjYsZjoxMjUsZDoxMjR9O2ZvcihjLnB1c2goby5sZW5ndGgpLHI9MDtyPG8ubGVuZ3RoOysrciljLnB1c2goVVtvW3JdXSk7RD09InYiP2MucHVzaCgwKTpjPWMuY29uY2F0KFsxLFVbRF1dKSxjWzFdPWMubGVuZ3RoLTIsbz1uZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDBdLmNvbmNhdChjLFsyLDcsMSwxLDEwMSwxLDEwMiwwLDAsNyw1LDEsMSwxMDIsMCwwXSkpLG89bmV3IFdlYkFzc2VtYmx5Lk1vZHVsZShvKSxvPW5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShvLHtlOntmOmV9fSkuZXhwb3J0cy5mfVd0LnNldChuLG8pfUJ0LnNldChlLG4pLGU9bn1yZXR1cm4gZX07dmFyIGllO3F0PWZ1bmN0aW9uIGUoKXtpZXx8V2UoKSxpZXx8KHF0PWUpfTtmdW5jdGlvbiBXZSgpe2Z1bmN0aW9uIGUoKXtpZighaWUmJihpZT0hMCx0LmNhbGxlZFJ1bj0hMCwhb2UpKXtpZihPZT0hMCxVdChfZSksVXQoVnQpLG0odCksdC5vblJ1bnRpbWVJbml0aWFsaXplZCYmdC5vblJ1bnRpbWVJbml0aWFsaXplZCgpLHQucG9zdFJ1bilmb3IodHlwZW9mIHQucG9zdFJ1bj09ImZ1bmN0aW9uIiYmKHQucG9zdFJ1bj1bdC5wb3N0UnVuXSk7dC5wb3N0UnVuLmxlbmd0aDspe3ZhciBvPXQucG9zdFJ1bi5zaGlmdCgpO0llLnVuc2hpZnQobyl9VXQoSWUpfX1pZighKDA8UXQpKXtpZih0LnByZVJ1bilmb3IodHlwZW9mIHQucHJlUnVuPT0iZnVuY3Rpb24iJiYodC5wcmVSdW49W3QucHJlUnVuXSk7dC5wcmVSdW4ubGVuZ3RoOylPbCgpO1V0KHJlKSwwPFF0fHwodC5zZXRTdGF0dXM/KHQuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksc2V0VGltZW91dChmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldFN0YXR1cygiIil9LDEpLGUoKX0sMSkpOmUoKSl9fWlmKHQucnVuPVdlLHQucHJlSW5pdClmb3IodHlwZW9mIHQucHJlSW5pdD09ImZ1bmN0aW9uIiYmKHQucHJlSW5pdD1bdC5wcmVJbml0XSk7MDx0LnByZUluaXQubGVuZ3RoOyl0LnByZUluaXQucG9wKCkoKTtXZSgpO2Z1bmN0aW9uIGIoKXt9Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYi5wcm90b3R5cGUuY29uc3RydWN0b3I9YixiLnByb3RvdHlwZS5YaD1iLGIuWWg9e30sdC5XcmFwcGVyT2JqZWN0PWI7ZnVuY3Rpb24gQShlKXtyZXR1cm4oZXx8YikuWWh9dC5nZXRDYWNoZT1BO2Z1bmN0aW9uIGEoZSxvKXt2YXIgbj1BKG8pLHI9bltlXTtyZXR1cm4gcnx8KHI9T2JqZWN0LmNyZWF0ZSgob3x8YikucHJvdG90eXBlKSxyLldoPWUsbltlXT1yKX10LndyYXBQb2ludGVyPWEsdC5jYXN0T2JqZWN0PWZ1bmN0aW9uKGUsbyl7cmV0dXJuIGEoZS5XaCxvKX0sdC5OVUxMPWEoMCksdC5kZXN0cm95PWZ1bmN0aW9uKGUpe2lmKCFlLl9fZGVzdHJveV9fKXRocm93IkVycm9yOiBDYW5ub3QgZGVzdHJveSBvYmplY3QuIChEaWQgeW91IGNyZWF0ZSBpdCB5b3Vyc2VsZj8pIjtlLl9fZGVzdHJveV9fKCksZGVsZXRlIEEoZS5YaClbZS5XaF19LHQuY29tcGFyZT1mdW5jdGlvbihlLG8pe3JldHVybiBlLldoPT09by5XaH0sdC5nZXRQb2ludGVyPWZ1bmN0aW9uKGUpe3JldHVybiBlLldofSx0LmdldENsYXNzPWZ1bmN0aW9uKGUpe3JldHVybiBlLlhofTt2YXIgRXQ9MCxhZT0wLHNlPTAscGU9W10sbGU9MDtmdW5jdGlvbiBDZSgpe2lmKGxlKXtmb3IodmFyIGU9MDtlPHBlLmxlbmd0aDtlKyspdC5fZnJlZShwZVtlXSk7cGUubGVuZ3RoPTAsdC5fZnJlZShFdCksRXQ9MCxhZSs9bGUsbGU9MH1FdHx8KGFlKz0xMjgsRXQ9dC5fbWFsbG9jKGFlKSxMdChFdCkpLHNlPTB9ZnVuY3Rpb24gYmwoZSl7aWYodHlwZW9mIGU9PSJvYmplY3QiKXtMdChFdCk7dmFyIG89ZS5sZW5ndGgqWHQuQllURVNfUEVSX0VMRU1FTlQ7aWYobz1vKzcmLTgsc2Urbz49YWUpe0x0KDA8byksbGUrPW87dmFyIG49dC5fbWFsbG9jKG8pO3BlLnB1c2gobil9ZWxzZSBuPUV0K3NlLHNlKz1vO3N3aXRjaChvPW4sbj1vPj4+MCxYdC5CWVRFU19QRVJfRUxFTUVOVCl7Y2FzZSAyOm4+Pj49MTticmVhaztjYXNlIDQ6bj4+Pj0yO2JyZWFrO2Nhc2UgODpuPj4+PTN9Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspWHRbbityXT1lW3JdO3JldHVybiBvfXJldHVybiBlfWZ1bmN0aW9uIFYoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb2xsaXNpb25Xb3JsZCwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1WLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxWLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1WLFYucHJvdG90eXBlLlhoPVYsVi5ZaD17fSx0LmJ0Q29sbGlzaW9uV29ybGQ9VixWLnByb3RvdHlwZS5nZXREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoRmUodGhpcy5XaCksSyl9LFYucHJvdG90eXBlLmdldFBhaXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiBhKE1lKHRoaXMuV2gpLEopfSxWLnByb3RvdHlwZS5nZXREaXNwYXRjaEluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShBZSh0aGlzLldoKSxzKX0sVi5wcm90b3R5cGUuYWRkQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/d2UocixlKTpuPT09dm9pZCAwP2tlKHIsZSxvKTpMZShyLGUsbyxuKX0sVi5wcm90b3R5cGUucmVtb3ZlQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxIZShvLGUpfSxWLnByb3RvdHlwZS5nZXRCcm9hZHBoYXNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoWWUodGhpcy5XaCksYXQpfSxWLnByb3RvdHlwZS5jb252ZXhTd2VlcFRlc3Q9ZnVuY3Rpb24oZSxvLG4scixjKXt2YXIgRD10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksYyYmdHlwZW9mIGM9PSJvYmplY3QiJiYoYz1jLldoKSxWZShELGUsbyxuLHIsYyl9LFYucHJvdG90eXBlLmNvbnRhY3RQYWlyVGVzdD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxRZShyLGUsbyxuKX0sVi5wcm90b3R5cGUuY29udGFjdFRlc3Q9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxFZShuLGUsbyl9LFYucHJvdG90eXBlLnVwZGF0ZVNpbmdsZUFhYmI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFhlKG8sZSl9LFYucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7VWUodGhpcy5XaCl9O2Z1bmN0aW9uIHcoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRRdWFkV29yZCwgbm8gY29uc3RydWN0b3IgaW4gSURMIn13LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSx3LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj13LHcucHJvdG90eXBlLlhoPXcsdy5ZaD17fSx0LmJ0UXVhZFdvcmQ9dyx3LnByb3RvdHlwZS54PXcucHJvdG90eXBlLng9ZnVuY3Rpb24oKXtyZXR1cm4gR2UodGhpcy5XaCl9LHcucHJvdG90eXBlLnk9dy5wcm90b3R5cGUueT1mdW5jdGlvbigpe3JldHVybiB6ZSh0aGlzLldoKX0sdy5wcm90b3R5cGUuej13LnByb3RvdHlwZS56PWZ1bmN0aW9uKCl7cmV0dXJuIE5lKHRoaXMuV2gpfSx3LnByb3RvdHlwZS53PWZ1bmN0aW9uKCl7cmV0dXJuIHFlKHRoaXMuV2gpfSx3LnByb3RvdHlwZS5zZXRYPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxaZShvLGUpfSx3LnByb3RvdHlwZS5zZXRZPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxLZShvLGUpfSx3LnByb3RvdHlwZS5zZXRaPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSwkZShvLGUpfSx3LnByb3RvdHlwZS5zZXRXPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxKZShvLGUpfSx3LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe3RvKHRoaXMuV2gpfTtmdW5jdGlvbiBvdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidE1vdGlvblN0YXRlLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifW90LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxvdC5wcm90b3R5cGUuY29uc3RydWN0b3I9b3Qsb3QucHJvdG90eXBlLlhoPW90LG90LlloPXt9LHQuYnRNb3Rpb25TdGF0ZT1vdCxvdC5wcm90b3R5cGUuZ2V0V29ybGRUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGVvKG8sZSl9LG90LnByb3RvdHlwZS5zZXRXb3JsZFRyYW5zZm9ybT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksb28obyxlKX0sb3QucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bm8odGhpcy5XaCl9O2Z1bmN0aW9uIEMoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb2xsaXNpb25PYmplY3QsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Qy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksQy5wcm90b3R5cGUuY29uc3RydWN0b3I9QyxDLnByb3RvdHlwZS5YaD1DLEMuWWg9e30sdC5idENvbGxpc2lvbk9iamVjdD1DLEMucHJvdG90eXBlLnNldEFuaXNvdHJvcGljRnJpY3Rpb249ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxybyhuLGUsbyl9LEMucHJvdG90eXBlLmdldENvbGxpc2lvblNoYXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoX28odGhpcy5XaCksUSl9LEMucHJvdG90eXBlLnNldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxpbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRBY3RpdmF0aW9uU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGFvKG8sZSl9LEMucHJvdG90eXBlLmZvcmNlQWN0aXZhdGlvblN0YXRlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxzbyhvLGUpfSxDLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZT09PXZvaWQgMD9wbyhvKTpsbyhvLGUpfSxDLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiEhdW8odGhpcy5XaCl9LEMucHJvdG90eXBlLmlzS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISFjbyh0aGlzLldoKX0sQy5wcm90b3R5cGUuaXNTdGF0aWNPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4hIXlvKHRoaXMuV2gpfSxDLnByb3RvdHlwZS5pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISFobyh0aGlzLldoKX0sQy5wcm90b3R5cGUuZ2V0UmVzdGl0dXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gZm8odGhpcy5XaCl9LEMucHJvdG90eXBlLmdldEZyaWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG1vKHRoaXMuV2gpfSxDLnByb3RvdHlwZS5nZXRSb2xsaW5nRnJpY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gYm8odGhpcy5XaCl9LEMucHJvdG90eXBlLnNldFJlc3RpdHV0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxnbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRGcmljdGlvbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksV28obyxlKX0sQy5wcm90b3R5cGUuc2V0Um9sbGluZ0ZyaWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxDbyhvLGUpfSxDLnByb3RvdHlwZS5nZXRXb3JsZFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBhKGpvKHRoaXMuV2gpLE8pfSxDLnByb3RvdHlwZS5nZXRDb2xsaXNpb25GbGFncz1mdW5jdGlvbigpe3JldHVybiB2byh0aGlzLldoKX0sQy5wcm90b3R5cGUuc2V0Q29sbGlzaW9uRmxhZ3M9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLERvKG8sZSl9LEMucHJvdG90eXBlLnNldFdvcmxkVHJhbnNmb3JtPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxSbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRDb2xsaXNpb25TaGFwZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksU28obyxlKX0sQy5wcm90b3R5cGUuc2V0Q2NkTW90aW9uVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxJbyhvLGUpfSxDLnByb3RvdHlwZS5zZXRDY2RTd2VwdFNwaGVyZVJhZGl1cz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksT28obyxlKX0sQy5wcm90b3R5cGUuZ2V0VXNlckluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIEJvKHRoaXMuV2gpfSxDLnByb3RvdHlwZS5zZXRVc2VySW5kZXg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFBvKG8sZSl9LEMucHJvdG90eXBlLmdldFVzZXJQb2ludGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoeG8odGhpcy5XaCksYnQpfSxDLnByb3RvdHlwZS5zZXRVc2VyUG9pbnRlcj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksVG8obyxlKX0sQy5wcm90b3R5cGUuZ2V0QnJvYWRwaGFzZUhhbmRsZT1mdW5jdGlvbigpe3JldHVybiBhKEZvKHRoaXMuV2gpLEIpfSxDLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe01vKHRoaXMuV2gpfTtmdW5jdGlvbiBtdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBDb250YWN0UmVzdWx0Q2FsbGJhY2ssIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9bXQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLG10LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1tdCxtdC5wcm90b3R5cGUuWGg9bXQsbXQuWWg9e30sdC5Db250YWN0UmVzdWx0Q2FsbGJhY2s9bXQsbXQucHJvdG90eXBlLmFkZFNpbmdsZVJlc3VsdD1mdW5jdGlvbihlLG8sbixyLGMsRCxVKXt2YXIgY3Q9dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSxjJiZ0eXBlb2YgYz09Im9iamVjdCImJihjPWMuV2gpLEQmJnR5cGVvZiBEPT0ib2JqZWN0IiYmKEQ9RC5XaCksVSYmdHlwZW9mIFU9PSJvYmplY3QiJiYoVT1VLldoKSxBbyhjdCxlLG8sbixyLGMsRCxVKX0sbXQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7d28odGhpcy5XaCl9O2Z1bmN0aW9uIFIoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgQ29udmV4UmVzdWx0Q2FsbGJhY2ssIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Ui5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksUi5wcm90b3R5cGUuY29uc3RydWN0b3I9UixSLnByb3RvdHlwZS5YaD1SLFIuWWg9e30sdC5Db252ZXhSZXN1bHRDYWxsYmFjaz1SLFIucHJvdG90eXBlLmhhc0hpdD1mdW5jdGlvbigpe3JldHVybiEha28odGhpcy5XaCl9LFIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwPVIucHJvdG90eXBlLlpoPWZ1bmN0aW9uKCl7cmV0dXJuIExvKHRoaXMuV2gpfSxSLnByb3RvdHlwZS5zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cD1SLnByb3RvdHlwZS5haT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSG8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFIucHJvdG90eXBlLCJtX2NvbGxpc2lvbkZpbHRlckdyb3VwIix7Z2V0OlIucHJvdG90eXBlLlpoLHNldDpSLnByb3RvdHlwZS5haX0pLFIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Ui5wcm90b3R5cGUuJGg9ZnVuY3Rpb24oKXtyZXR1cm4gWW8odGhpcy5XaCl9LFIucHJvdG90eXBlLnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Ui5wcm90b3R5cGUuYmk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFZvKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSLnByb3RvdHlwZSwibV9jb2xsaXNpb25GaWx0ZXJNYXNrIix7Z2V0OlIucHJvdG90eXBlLiRoLHNldDpSLnByb3RvdHlwZS5iaX0pLFIucHJvdG90eXBlLmdldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbj1SLnByb3RvdHlwZS5kaT1mdW5jdGlvbigpe3JldHVybiBRbyh0aGlzLldoKX0sUi5wcm90b3R5cGUuc2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uPVIucHJvdG90eXBlLmZpPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxFbyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUi5wcm90b3R5cGUsIm1fY2xvc2VzdEhpdEZyYWN0aW9uIix7Z2V0OlIucHJvdG90eXBlLmRpLHNldDpSLnByb3RvdHlwZS5maX0pLFIucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7WG8odGhpcy5XaCl9O2Z1bmN0aW9uIFEoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb2xsaXNpb25TaGFwZSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1RLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxRLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1RLFEucHJvdG90eXBlLlhoPVEsUS5ZaD17fSx0LmJ0Q29sbGlzaW9uU2hhcGU9USxRLnByb3RvdHlwZS5zZXRMb2NhbFNjYWxpbmc9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFVvKG8sZSl9LFEucHJvdG90eXBlLmdldExvY2FsU2NhbGluZz1mdW5jdGlvbigpe3JldHVybiBhKEdvKHRoaXMuV2gpLHkpfSxRLnByb3RvdHlwZS5jYWxjdWxhdGVMb2NhbEluZXJ0aWE9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx6byhuLGUsbyl9LFEucHJvdG90eXBlLnNldE1hcmdpbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTm8obyxlKX0sUS5wcm90b3R5cGUuZ2V0TWFyZ2luPWZ1bmN0aW9uKCl7cmV0dXJuIHFvKHRoaXMuV2gpfSxRLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1pvKHRoaXMuV2gpfTtmdW5jdGlvbiBLKCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0RGlzcGF0Y2hlciwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1LLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxLLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1LLEsucHJvdG90eXBlLlhoPUssSy5ZaD17fSx0LmJ0RGlzcGF0Y2hlcj1LLEsucHJvdG90eXBlLmdldE51bU1hbmlmb2xkcz1mdW5jdGlvbigpe3JldHVybiBLbyh0aGlzLldoKX0sSy5wcm90b3R5cGUuZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWw9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKCRvKG8sZSkseil9LEsucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7Sm8odGhpcy5XaCl9O2Z1bmN0aW9uIHgoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnREeW5hbWljc1dvcmxkLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifXgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVi5wcm90b3R5cGUpLHgucHJvdG90eXBlLmNvbnN0cnVjdG9yPXgseC5wcm90b3R5cGUuWGg9eCx4LlloPXt9LHQuYnREeW5hbWljc1dvcmxkPXgseC5wcm90b3R5cGUuYWRkQWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx0bihvLGUpfSx4LnByb3RvdHlwZS5yZW1vdmVBY3Rpb249ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGVuKG8sZSl9LHgucHJvdG90eXBlLmdldFNvbHZlckluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShvbih0aGlzLldoKSxTKX0seC5wcm90b3R5cGUuc2V0SW50ZXJuYWxUaWNrQ2FsbGJhY2s9ZnVuY3Rpb24oZSxvLG4pe3ZhciByPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksbz09PXZvaWQgMD9ubihyLGUpOm49PT12b2lkIDA/cm4ocixlLG8pOl9uKHIsZSxvLG4pfSx4LnByb3RvdHlwZS5nZXREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoYW4odGhpcy5XaCksSyl9LHgucHJvdG90eXBlLmdldFBhaXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiBhKHNuKHRoaXMuV2gpLEopfSx4LnByb3RvdHlwZS5nZXREaXNwYXRjaEluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShwbih0aGlzLldoKSxzKX0seC5wcm90b3R5cGUuYWRkQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/bG4ocixlKTpuPT09dm9pZCAwP3VuKHIsZSxvKTpjbihyLGUsbyxuKX0seC5wcm90b3R5cGUucmVtb3ZlQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx5bihvLGUpfSx4LnByb3RvdHlwZS5nZXRCcm9hZHBoYXNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoaG4odGhpcy5XaCksYXQpfSx4LnByb3RvdHlwZS5jb252ZXhTd2VlcFRlc3Q9ZnVuY3Rpb24oZSxvLG4scixjKXt2YXIgRD10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksYyYmdHlwZW9mIGM9PSJvYmplY3QiJiYoYz1jLldoKSxmbihELGUsbyxuLHIsYyl9LHgucHJvdG90eXBlLmNvbnRhY3RQYWlyVGVzdD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxtbihyLGUsbyxuKX0seC5wcm90b3R5cGUuY29udGFjdFRlc3Q9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxibihuLGUsbyl9LHgucHJvdG90eXBlLnVwZGF0ZVNpbmdsZUFhYmI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGduKG8sZSl9LHgucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7ZG4odGhpcy5XaCl9O2Z1bmN0aW9uIGJ0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIFZvaWRQdHIsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9YnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGJ0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1idCxidC5wcm90b3R5cGUuWGg9YnQsYnQuWWg9e30sdC5Wb2lkUHRyPWJ0LGJ0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1duKHRoaXMuV2gpfTtmdW5jdGlvbiB5KGUsbyxuKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSx0aGlzLldoPWU9PT12b2lkIDA/Q24oKTpvPT09dm9pZCAwP19lYl9idFZlY3RvcjNfYnRWZWN0b3IzXzEoZSk6bj09PXZvaWQgMD9fZWJfYnRWZWN0b3IzX2J0VmVjdG9yM18yKGUsbyk6am4oZSxvLG4pLEEoeSlbdGhpcy5XaF09dGhpc315LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSx5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15LHkucHJvdG90eXBlLlhoPXkseS5ZaD17fSx0LmJ0VmVjdG9yMz15LHkucHJvdG90eXBlLmxlbmd0aD15LnByb3RvdHlwZS5sZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdm4odGhpcy5XaCl9LHkucHJvdG90eXBlLng9eS5wcm90b3R5cGUueD1mdW5jdGlvbigpe3JldHVybiBEbih0aGlzLldoKX0seS5wcm90b3R5cGUueT15LnByb3RvdHlwZS55PWZ1bmN0aW9uKCl7cmV0dXJuIFJuKHRoaXMuV2gpfSx5LnByb3RvdHlwZS56PXkucHJvdG90eXBlLno9ZnVuY3Rpb24oKXtyZXR1cm4gU24odGhpcy5XaCl9LHkucHJvdG90eXBlLnNldFg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEluKG8sZSl9LHkucHJvdG90eXBlLnNldFk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE9uKG8sZSl9LHkucHJvdG90eXBlLnNldFo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEJuKG8sZSl9LHkucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLFBuKHIsZSxvLG4pfSx5LnByb3RvdHlwZS5ub3JtYWxpemU9eS5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKCl7eG4odGhpcy5XaCl9LHkucHJvdG90eXBlLnJvdGF0ZT15LnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksYShUbihuLGUsbykseSl9LHkucHJvdG90eXBlLmRvdD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEZuKG8sZSl9LHkucHJvdG90eXBlLm9wX211bD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEoTW4obyxlKSx5KX0seS5wcm90b3R5cGUub3BfYWRkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShBbihvLGUpLHkpfSx5LnByb3RvdHlwZS5vcF9zdWI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKHduKG8sZSkseSl9LHkucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7a24odGhpcy5XaCl9O2Z1bmN0aW9uIGYoZSxvLG4scil7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSx0aGlzLldoPUxuKGUsbyxuLHIpLEEoZilbdGhpcy5XaF09dGhpc31mLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHcucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLlhoPWYsZi5ZaD17fSx0LmJ0UXVhdGVybmlvbj1mLGYucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbyxuLHIpe3ZhciBjPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSxIbihjLGUsbyxuLHIpfSxmLnByb3RvdHlwZS5zZXRFdWxlclpZWD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxZbihyLGUsbyxuKX0sZi5wcm90b3R5cGUuc2V0Um90YXRpb249ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxWbihuLGUsbyl9LGYucHJvdG90eXBlLm5vcm1hbGl6ZT1mLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtRbih0aGlzLldoKX0sZi5wcm90b3R5cGUubGVuZ3RoMj1mdW5jdGlvbigpe3JldHVybiBFbih0aGlzLldoKX0sZi5wcm90b3R5cGUubGVuZ3RoPWYucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiBYbih0aGlzLldoKX0sZi5wcm90b3R5cGUuZG90PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksVW4obyxlKX0sZi5wcm90b3R5cGUubm9ybWFsaXplZD1mdW5jdGlvbigpe3JldHVybiBhKEduKHRoaXMuV2gpLGYpfSxmLnByb3RvdHlwZS5nZXRBeGlzPWZ1bmN0aW9uKCl7cmV0dXJuIGEoem4odGhpcy5XaCkseSl9LGYucHJvdG90eXBlLmludmVyc2U9Zi5wcm90b3R5cGUuaW52ZXJzZT1mdW5jdGlvbigpe3JldHVybiBhKE5uKHRoaXMuV2gpLGYpfSxmLnByb3RvdHlwZS5nZXRBbmdsZT1mdW5jdGlvbigpe3JldHVybiBxbih0aGlzLldoKX0sZi5wcm90b3R5cGUuZ2V0QW5nbGVTaG9ydGVzdFBhdGg9ZnVuY3Rpb24oKXtyZXR1cm4gWm4odGhpcy5XaCl9LGYucHJvdG90eXBlLmFuZ2xlPWYucHJvdG90eXBlLmFuZ2xlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksS24obyxlKX0sZi5wcm90b3R5cGUuYW5nbGVTaG9ydGVzdFBhdGg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSwkbihvLGUpfSxmLnByb3RvdHlwZS5vcF9hZGQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKEpuKG8sZSksZil9LGYucHJvdG90eXBlLm9wX3N1Yj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEodHIobyxlKSxmKX0sZi5wcm90b3R5cGUub3BfbXVsPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShlcihvLGUpLGYpfSxmLnByb3RvdHlwZS5vcF9tdWxxPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShvcihvLGUpLGYpfSxmLnByb3RvdHlwZS5vcF9kaXY9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKG5yKG8sZSksZil9LGYucHJvdG90eXBlLng9Zi5wcm90b3R5cGUueD1mdW5jdGlvbigpe3JldHVybiBycih0aGlzLldoKX0sZi5wcm90b3R5cGUueT1mLnByb3RvdHlwZS55PWZ1bmN0aW9uKCl7cmV0dXJuIF9yKHRoaXMuV2gpfSxmLnByb3RvdHlwZS56PWYucHJvdG90eXBlLno9ZnVuY3Rpb24oKXtyZXR1cm4gaXIodGhpcy5XaCl9LGYucHJvdG90eXBlLnc9ZnVuY3Rpb24oKXtyZXR1cm4gYXIodGhpcy5XaCl9LGYucHJvdG90eXBlLnNldFg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHNyKG8sZSl9LGYucHJvdG90eXBlLnNldFk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHByKG8sZSl9LGYucHJvdG90eXBlLnNldFo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGxyKG8sZSl9LGYucHJvdG90eXBlLnNldFc9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHVyKG8sZSl9LGYucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7Y3IodGhpcy5XaCl9O2Z1bmN0aW9uIG50KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0TWF0cml4M3gzLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxudC5wcm90b3R5cGUuY29uc3RydWN0b3I9bnQsbnQucHJvdG90eXBlLlhoPW50LG50LlloPXt9LHQuYnRNYXRyaXgzeDM9bnQsbnQucHJvdG90eXBlLnNldEV1bGVyWllYPWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHlyKHIsZSxvLG4pfSxudC5wcm90b3R5cGUuZ2V0Um90YXRpb249ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGhyKG8sZSl9LG50LnByb3RvdHlwZS5nZXRSb3c9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKGZyKG8sZSkseSl9LG50LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe21yKHRoaXMuV2gpfTtmdW5jdGlvbiBPKGUsbyl7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLHRoaXMuV2g9ZT09PXZvaWQgMD9icigpOm89PT12b2lkIDA/X2ViX2J0VHJhbnNmb3JtX2J0VHJhbnNmb3JtXzEoZSk6Z3IoZSxvKSxBKE8pW3RoaXMuV2hdPXRoaXN9Ty5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksTy5wcm90b3R5cGUuY29uc3RydWN0b3I9TyxPLnByb3RvdHlwZS5YaD1PLE8uWWg9e30sdC5idFRyYW5zZm9ybT1PLE8ucHJvdG90eXBlLnNldElkZW50aXR5PWZ1bmN0aW9uKCl7ZHIodGhpcy5XaCl9LE8ucHJvdG90eXBlLnNldE9yaWdpbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksV3IobyxlKX0sTy5wcm90b3R5cGUuc2V0Um90YXRpb249ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLENyKG8sZSl9LE8ucHJvdG90eXBlLmdldE9yaWdpbj1mdW5jdGlvbigpe3JldHVybiBhKGpyKHRoaXMuV2gpLHkpfSxPLnByb3RvdHlwZS5nZXRSb3RhdGlvbj1mdW5jdGlvbigpe3JldHVybiBhKHZyKHRoaXMuV2gpLGYpfSxPLnByb3RvdHlwZS5nZXRCYXNpcz1mdW5jdGlvbigpe3JldHVybiBhKERyKHRoaXMuV2gpLG50KX0sTy5wcm90b3R5cGUuc2V0RnJvbU9wZW5HTE1hdHJpeD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO0NlKCksdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1ibChlKSksUnIobyxlKX0sTy5wcm90b3R5cGUuaW52ZXJzZT1PLnByb3RvdHlwZS5pbnZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoU3IodGhpcy5XaCksTyl9LE8ucHJvdG90eXBlLm9wX211bD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEoSXIobyxlKSxPKX0sTy5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtPcih0aGlzLldoKX07ZnVuY3Rpb24gWChlLG8pe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx0aGlzLldoPWU9PT12b2lkIDA/QnIoKTpvPT09dm9pZCAwP1ByKGUpOnhyKGUsbyksQShYKVt0aGlzLldoXT10aGlzfVgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUob3QucHJvdG90eXBlKSxYLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1YLFgucHJvdG90eXBlLlhoPVgsWC5ZaD17fSx0LmJ0RGVmYXVsdE1vdGlvblN0YXRlPVgsWC5wcm90b3R5cGUuZ2V0V29ybGRUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFRyKG8sZSl9LFgucHJvdG90eXBlLnNldFdvcmxkVHJhbnNmb3JtPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxGcihvLGUpfSxYLnByb3RvdHlwZS5nZXRfbV9ncmFwaGljc1dvcmxkVHJhbnM9WC5wcm90b3R5cGUuemk9ZnVuY3Rpb24oKXtyZXR1cm4gYShNcih0aGlzLldoKSxPKX0sWC5wcm90b3R5cGUuc2V0X21fZ3JhcGhpY3NXb3JsZFRyYW5zPVgucHJvdG90eXBlLnRqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxBcihvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoWC5wcm90b3R5cGUsIm1fZ3JhcGhpY3NXb3JsZFRyYW5zIix7Z2V0OlgucHJvdG90eXBlLnppLHNldDpYLnByb3RvdHlwZS50an0pLFgucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7d3IodGhpcy5XaCl9O2Z1bmN0aW9uIGd0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlciwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1ndC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksZ3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPWd0LGd0LnByb3RvdHlwZS5YaD1ndCxndC5ZaD17fSx0LmJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlcj1ndCxndC5wcm90b3R5cGUuZ2V0V29ybGRUcmFuc2Zvcm09ZnVuY3Rpb24oKXtyZXR1cm4gYShrcih0aGlzLldoKSxPKX0sZ3QucHJvdG90eXBlLmdldENvbGxpc2lvbk9iamVjdD1mdW5jdGlvbigpe3JldHVybiBhKExyKHRoaXMuV2gpLEMpfSxndC5wcm90b3R5cGUuZ2V0Q29sbGlzaW9uU2hhcGU9ZnVuY3Rpb24oKXtyZXR1cm4gYShIcih0aGlzLldoKSxRKX07ZnVuY3Rpb24gcHQoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5LCBubyBjb25zdHJ1Y3RvciBpbiBJREwifXB0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxwdC5wcm90b3R5cGUuY29uc3RydWN0b3I9cHQscHQucHJvdG90eXBlLlhoPXB0LHB0LlloPXt9LHQuYnRDb25zdENvbGxpc2lvbk9iamVjdEFycmF5PXB0LHB0LnByb3RvdHlwZS5zaXplPXB0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIFlyKHRoaXMuV2gpfSxwdC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKFZyKG8sZSksQyl9LHB0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1FyKHRoaXMuV2gpfTtmdW5jdGlvbiBsdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidFNjYWxhckFycmF5LCBubyBjb25zdHJ1Y3RvciBpbiBJREwifWx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxsdC5wcm90b3R5cGUuY29uc3RydWN0b3I9bHQsbHQucHJvdG90eXBlLlhoPWx0LGx0LlloPXt9LHQuYnRTY2FsYXJBcnJheT1sdCxsdC5wcm90b3R5cGUuc2l6ZT1sdC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiBFcih0aGlzLldoKX0sbHQucHJvdG90eXBlLmF0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWHIobyxlKX0sbHQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7VXIodGhpcy5XaCl9O2Z1bmN0aW9uIGgoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRNYW5pZm9sZFBvaW50LCBubyBjb25zdHJ1Y3RvciBpbiBJREwifWgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGgucHJvdG90eXBlLmNvbnN0cnVjdG9yPWgsaC5wcm90b3R5cGUuWGg9aCxoLlloPXt9LHQuYnRNYW5pZm9sZFBvaW50PWgsaC5wcm90b3R5cGUuZ2V0UG9zaXRpb25Xb3JsZE9uQT1mdW5jdGlvbigpe3JldHVybiBhKEdyKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5nZXRQb3NpdGlvbldvcmxkT25CPWZ1bmN0aW9uKCl7cmV0dXJuIGEoenIodGhpcy5XaCkseSl9LGgucHJvdG90eXBlLmdldEFwcGxpZWRJbXB1bHNlPWZ1bmN0aW9uKCl7cmV0dXJuIE5yKHRoaXMuV2gpfSxoLnByb3RvdHlwZS5nZXREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBxcih0aGlzLldoKX0saC5wcm90b3R5cGUuZ2V0X21fbG9jYWxQb2ludEE9aC5wcm90b3R5cGUuSWk9ZnVuY3Rpb24oKXtyZXR1cm4gYShacih0aGlzLldoKSx5KX0saC5wcm90b3R5cGUuc2V0X21fbG9jYWxQb2ludEE9aC5wcm90b3R5cGUuQ2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEtyKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLnByb3RvdHlwZSwibV9sb2NhbFBvaW50QSIse2dldDpoLnByb3RvdHlwZS5JaSxzZXQ6aC5wcm90b3R5cGUuQ2p9KSxoLnByb3RvdHlwZS5nZXRfbV9sb2NhbFBvaW50Qj1oLnByb3RvdHlwZS5KaT1mdW5jdGlvbigpe3JldHVybiBhKCRyKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5zZXRfbV9sb2NhbFBvaW50Qj1oLnByb3RvdHlwZS5Eaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSnIobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGgucHJvdG90eXBlLCJtX2xvY2FsUG9pbnRCIix7Z2V0OmgucHJvdG90eXBlLkppLHNldDpoLnByb3RvdHlwZS5Ean0pLGgucHJvdG90eXBlLmdldF9tX3Bvc2l0aW9uV29ybGRPbkI9aC5wcm90b3R5cGUuUGk9ZnVuY3Rpb24oKXtyZXR1cm4gYSh0Xyh0aGlzLldoKSx5KX0saC5wcm90b3R5cGUuc2V0X21fcG9zaXRpb25Xb3JsZE9uQj1oLnByb3RvdHlwZS5Kaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZV8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGgucHJvdG90eXBlLCJtX3Bvc2l0aW9uV29ybGRPbkIiLHtnZXQ6aC5wcm90b3R5cGUuUGksc2V0OmgucHJvdG90eXBlLkpqfSksaC5wcm90b3R5cGUuZ2V0X21fcG9zaXRpb25Xb3JsZE9uQT1oLnByb3RvdHlwZS5PaT1mdW5jdGlvbigpe3JldHVybiBhKG9fKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5zZXRfbV9wb3NpdGlvbldvcmxkT25BPWgucHJvdG90eXBlLklqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxuXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaC5wcm90b3R5cGUsIm1fcG9zaXRpb25Xb3JsZE9uQSIse2dldDpoLnByb3RvdHlwZS5PaSxzZXQ6aC5wcm90b3R5cGUuSWp9KSxoLnByb3RvdHlwZS5nZXRfbV9ub3JtYWxXb3JsZE9uQj1oLnByb3RvdHlwZS5MaT1mdW5jdGlvbigpe3JldHVybiBhKHJfKHRoaXMuV2gpLHkpfSxoLnByb3RvdHlwZS5zZXRfbV9ub3JtYWxXb3JsZE9uQj1oLnByb3RvdHlwZS5Gaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksX18obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGgucHJvdG90eXBlLCJtX25vcm1hbFdvcmxkT25CIix7Z2V0OmgucHJvdG90eXBlLkxpLHNldDpoLnByb3RvdHlwZS5Gan0pLGgucHJvdG90eXBlLmdldF9tX3VzZXJQZXJzaXN0ZW50RGF0YT1oLnByb3RvdHlwZS5iaj1mdW5jdGlvbigpe3JldHVybiBpXyh0aGlzLldoKX0saC5wcm90b3R5cGUuc2V0X21fdXNlclBlcnNpc3RlbnREYXRhPWgucHJvdG90eXBlLldqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaC5wcm90b3R5cGUsIm1fdXNlclBlcnNpc3RlbnREYXRhIix7Z2V0OmgucHJvdG90eXBlLmJqLHNldDpoLnByb3RvdHlwZS5Xan0pLGgucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7c18odGhpcy5XaCl9O2Z1bmN0aW9uIGR0KCl7dGhpcy5XaD1wXygpLEEoZHQpW3RoaXMuV2hdPXRoaXN9ZHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobXQucHJvdG90eXBlKSxkdC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZHQsZHQucHJvdG90eXBlLlhoPWR0LGR0LlloPXt9LHQuQ29uY3JldGVDb250YWN0UmVzdWx0Q2FsbGJhY2s9ZHQsZHQucHJvdG90eXBlLmFkZFNpbmdsZVJlc3VsdD1mdW5jdGlvbihlLG8sbixyLGMsRCxVKXt2YXIgY3Q9dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSxjJiZ0eXBlb2YgYz09Im9iamVjdCImJihjPWMuV2gpLEQmJnR5cGVvZiBEPT0ib2JqZWN0IiYmKEQ9RC5XaCksVSYmdHlwZW9mIFU9PSJvYmplY3QiJiYoVT1VLldoKSxsXyhjdCxlLG8sbixyLGMsRCxVKX0sZHQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7dV8odGhpcy5XaCl9O2Z1bmN0aW9uIFQoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgTG9jYWxTaGFwZUluZm8sIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9VC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksVC5wcm90b3R5cGUuY29uc3RydWN0b3I9VCxULnByb3RvdHlwZS5YaD1ULFQuWWg9e30sdC5Mb2NhbFNoYXBlSW5mbz1ULFQucHJvdG90eXBlLmdldF9tX3NoYXBlUGFydD1ULnByb3RvdHlwZS5TaT1mdW5jdGlvbigpe3JldHVybiBjXyh0aGlzLldoKX0sVC5wcm90b3R5cGUuc2V0X21fc2hhcGVQYXJ0PVQucHJvdG90eXBlLk1qPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx5XyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVC5wcm90b3R5cGUsIm1fc2hhcGVQYXJ0Iix7Z2V0OlQucHJvdG90eXBlLlNpLHNldDpULnByb3RvdHlwZS5Nan0pLFQucHJvdG90eXBlLmdldF9tX3RyaWFuZ2xlSW5kZXg9VC5wcm90b3R5cGUuWWk9ZnVuY3Rpb24oKXtyZXR1cm4gaF8odGhpcy5XaCl9LFQucHJvdG90eXBlLnNldF9tX3RyaWFuZ2xlSW5kZXg9VC5wcm90b3R5cGUuU2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGZfKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShULnByb3RvdHlwZSwibV90cmlhbmdsZUluZGV4Iix7Z2V0OlQucHJvdG90eXBlLllpLHNldDpULnByb3RvdHlwZS5Tan0pLFQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bV8odGhpcy5XaCl9O2Z1bmN0aW9uIFcoZSxvLG4scixjKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxyJiZ0eXBlb2Ygcj09Im9iamVjdCImJihyPXIuV2gpLGMmJnR5cGVvZiBjPT0ib2JqZWN0IiYmKGM9Yy5XaCksdGhpcy5XaD1iXyhlLG8sbixyLGMpLEEoVylbdGhpcy5XaF09dGhpc31XLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxXLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1XLFcucHJvdG90eXBlLlhoPVcsVy5ZaD17fSx0LkxvY2FsQ29udmV4UmVzdWx0PVcsVy5wcm90b3R5cGUuZ2V0X21faGl0Q29sbGlzaW9uT2JqZWN0PVcucHJvdG90eXBlLmVpPWZ1bmN0aW9uKCl7cmV0dXJuIGEoZ18odGhpcy5XaCksQyl9LFcucHJvdG90eXBlLnNldF9tX2hpdENvbGxpc2lvbk9iamVjdD1XLnByb3RvdHlwZS5naT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZF8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFcucHJvdG90eXBlLCJtX2hpdENvbGxpc2lvbk9iamVjdCIse2dldDpXLnByb3RvdHlwZS5laSxzZXQ6Vy5wcm90b3R5cGUuZ2l9KSxXLnByb3RvdHlwZS5nZXRfbV9sb2NhbFNoYXBlSW5mbz1XLnByb3RvdHlwZS5LaT1mdW5jdGlvbigpe3JldHVybiBhKFdfKHRoaXMuV2gpLFQpfSxXLnByb3RvdHlwZS5zZXRfbV9sb2NhbFNoYXBlSW5mbz1XLnByb3RvdHlwZS5Faj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksQ18obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFcucHJvdG90eXBlLCJtX2xvY2FsU2hhcGVJbmZvIix7Z2V0OlcucHJvdG90eXBlLktpLHNldDpXLnByb3RvdHlwZS5Fan0pLFcucHJvdG90eXBlLmdldF9tX2hpdE5vcm1hbExvY2FsPVcucHJvdG90eXBlLkJpPWZ1bmN0aW9uKCl7cmV0dXJuIGEoal8odGhpcy5XaCkseSl9LFcucHJvdG90eXBlLnNldF9tX2hpdE5vcm1hbExvY2FsPVcucHJvdG90eXBlLnZqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx2XyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVy5wcm90b3R5cGUsIm1faGl0Tm9ybWFsTG9jYWwiLHtnZXQ6Vy5wcm90b3R5cGUuQmksc2V0OlcucHJvdG90eXBlLnZqfSksVy5wcm90b3R5cGUuZ2V0X21faGl0UG9pbnRMb2NhbD1XLnByb3RvdHlwZS5EaT1mdW5jdGlvbigpe3JldHVybiBhKERfKHRoaXMuV2gpLHkpfSxXLnByb3RvdHlwZS5zZXRfbV9oaXRQb2ludExvY2FsPVcucHJvdG90eXBlLnhqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxSXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVy5wcm90b3R5cGUsIm1faGl0UG9pbnRMb2NhbCIse2dldDpXLnByb3RvdHlwZS5EaSxzZXQ6Vy5wcm90b3R5cGUueGp9KSxXLnByb3RvdHlwZS5nZXRfbV9oaXRGcmFjdGlvbj1XLnByb3RvdHlwZS5BaT1mdW5jdGlvbigpe3JldHVybiBTXyh0aGlzLldoKX0sVy5wcm90b3R5cGUuc2V0X21faGl0RnJhY3Rpb249Vy5wcm90b3R5cGUudWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLElfKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXLnByb3RvdHlwZSwibV9oaXRGcmFjdGlvbiIse2dldDpXLnByb3RvdHlwZS5BaSxzZXQ6Vy5wcm90b3R5cGUudWp9KSxXLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe09fKHRoaXMuV2gpfTtmdW5jdGlvbiB1KGUsbyl7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLHRoaXMuV2g9Ql8oZSxvKSxBKHUpW3RoaXMuV2hdPXRoaXN9dS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShSLnByb3RvdHlwZSksdS5wcm90b3R5cGUuY29uc3RydWN0b3I9dSx1LnByb3RvdHlwZS5YaD11LHUuWWg9e30sdC5DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2s9dSx1LnByb3RvdHlwZS5oYXNIaXQ9ZnVuY3Rpb24oKXtyZXR1cm4hIVBfKHRoaXMuV2gpfSx1LnByb3RvdHlwZS5nZXRfbV9oaXRDb2xsaXNpb25PYmplY3Q9dS5wcm90b3R5cGUuZWk9ZnVuY3Rpb24oKXtyZXR1cm4gYSh4Xyh0aGlzLldoKSxDKX0sdS5wcm90b3R5cGUuc2V0X21faGl0Q29sbGlzaW9uT2JqZWN0PXUucHJvdG90eXBlLmdpPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxUXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsIm1faGl0Q29sbGlzaW9uT2JqZWN0Iix7Z2V0OnUucHJvdG90eXBlLmVpLHNldDp1LnByb3RvdHlwZS5naX0pLHUucHJvdG90eXBlLmdldF9tX2NvbnZleEZyb21Xb3JsZD11LnByb3RvdHlwZS5zaT1mdW5jdGlvbigpe3JldHVybiBhKEZfKHRoaXMuV2gpLHkpfSx1LnByb3RvdHlwZS5zZXRfbV9jb252ZXhGcm9tV29ybGQ9dS5wcm90b3R5cGUubWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE1fKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LnByb3RvdHlwZSwibV9jb252ZXhGcm9tV29ybGQiLHtnZXQ6dS5wcm90b3R5cGUuc2ksc2V0OnUucHJvdG90eXBlLm1qfSksdS5wcm90b3R5cGUuZ2V0X21fY29udmV4VG9Xb3JsZD11LnByb3RvdHlwZS50aT1mdW5jdGlvbigpe3JldHVybiBhKEFfKHRoaXMuV2gpLHkpfSx1LnByb3RvdHlwZS5zZXRfbV9jb252ZXhUb1dvcmxkPXUucHJvdG90eXBlLm5qPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx3XyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsIm1fY29udmV4VG9Xb3JsZCIse2dldDp1LnByb3RvdHlwZS50aSxzZXQ6dS5wcm90b3R5cGUubmp9KSx1LnByb3RvdHlwZS5nZXRfbV9oaXROb3JtYWxXb3JsZD11LnByb3RvdHlwZS5DaT1mdW5jdGlvbigpe3JldHVybiBhKGtfKHRoaXMuV2gpLHkpfSx1LnByb3RvdHlwZS5zZXRfbV9oaXROb3JtYWxXb3JsZD11LnByb3RvdHlwZS53aj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTF8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHUucHJvdG90eXBlLCJtX2hpdE5vcm1hbFdvcmxkIix7Z2V0OnUucHJvdG90eXBlLkNpLHNldDp1LnByb3RvdHlwZS53an0pLHUucHJvdG90eXBlLmdldF9tX2hpdFBvaW50V29ybGQ9dS5wcm90b3R5cGUuRWk9ZnVuY3Rpb24oKXtyZXR1cm4gYShIXyh0aGlzLldoKSx5KX0sdS5wcm90b3R5cGUuc2V0X21faGl0UG9pbnRXb3JsZD11LnByb3RvdHlwZS55aj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWV8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHUucHJvdG90eXBlLCJtX2hpdFBvaW50V29ybGQiLHtnZXQ6dS5wcm90b3R5cGUuRWksc2V0OnUucHJvdG90eXBlLnlqfSksdS5wcm90b3R5cGUuZ2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXA9dS5wcm90b3R5cGUuWmg9ZnVuY3Rpb24oKXtyZXR1cm4gVl8odGhpcy5XaCl9LHUucHJvdG90eXBlLnNldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwPXUucHJvdG90eXBlLmFpPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxRXyhvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsIm1fY29sbGlzaW9uRmlsdGVyR3JvdXAiLHtnZXQ6dS5wcm90b3R5cGUuWmgsc2V0OnUucHJvdG90eXBlLmFpfSksdS5wcm90b3R5cGUuZ2V0X21fY29sbGlzaW9uRmlsdGVyTWFzaz11LnByb3RvdHlwZS4kaD1mdW5jdGlvbigpe3JldHVybiBFXyh0aGlzLldoKX0sdS5wcm90b3R5cGUuc2V0X21fY29sbGlzaW9uRmlsdGVyTWFzaz11LnByb3RvdHlwZS5iaT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWF8obyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHUucHJvdG90eXBlLCJtX2NvbGxpc2lvbkZpbHRlck1hc2siLHtnZXQ6dS5wcm90b3R5cGUuJGgsc2V0OnUucHJvdG90eXBlLmJpfSksdS5wcm90b3R5cGUuZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uPXUucHJvdG90eXBlLmRpPWZ1bmN0aW9uKCl7cmV0dXJuIFVfKHRoaXMuV2gpfSx1LnByb3RvdHlwZS5zZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb249dS5wcm90b3R5cGUuZmk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEdfKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LnByb3RvdHlwZSwibV9jbG9zZXN0SGl0RnJhY3Rpb24iLHtnZXQ6dS5wcm90b3R5cGUuZGksc2V0OnUucHJvdG90eXBlLmZpfSksdS5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXt6Xyh0aGlzLldoKX07ZnVuY3Rpb24gZXQoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRDb252ZXhTaGFwZSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1ldC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksZXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWV0LGV0LnByb3RvdHlwZS5YaD1ldCxldC5ZaD17fSx0LmJ0Q29udmV4U2hhcGU9ZXQsZXQucHJvdG90eXBlLnNldExvY2FsU2NhbGluZz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTl8obyxlKX0sZXQucHJvdG90eXBlLmdldExvY2FsU2NhbGluZz1mdW5jdGlvbigpe3JldHVybiBhKHFfKHRoaXMuV2gpLHkpfSxldC5wcm90b3R5cGUuY2FsY3VsYXRlTG9jYWxJbmVydGlhPWZ1bmN0aW9uKGUsbyl7dmFyIG49dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksWl8obixlLG8pfSxldC5wcm90b3R5cGUuc2V0TWFyZ2luPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxLXyhvLGUpfSxldC5wcm90b3R5cGUuZ2V0TWFyZ2luPWZ1bmN0aW9uKCl7cmV0dXJuICRfKHRoaXMuV2gpfSxldC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtKXyh0aGlzLldoKX07ZnVuY3Rpb24gJChlKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHRoaXMuV2g9dGkoZSksQSgkKVt0aGlzLldoXT10aGlzfSQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUS5wcm90b3R5cGUpLCQucHJvdG90eXBlLmNvbnN0cnVjdG9yPSQsJC5wcm90b3R5cGUuWGg9JCwkLlloPXt9LHQuYnRCb3hTaGFwZT0kLCQucHJvdG90eXBlLnNldE1hcmdpbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZWkobyxlKX0sJC5wcm90b3R5cGUuZ2V0TWFyZ2luPWZ1bmN0aW9uKCl7cmV0dXJuIG9pKHRoaXMuV2gpfSwkLnByb3RvdHlwZS5zZXRMb2NhbFNjYWxpbmc9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG5pKG8sZSl9LCQucHJvdG90eXBlLmdldExvY2FsU2NhbGluZz1mdW5jdGlvbigpe3JldHVybiBhKHJpKHRoaXMuV2gpLHkpfSwkLnByb3RvdHlwZS5jYWxjdWxhdGVMb2NhbEluZXJ0aWE9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxfaShuLGUsbyl9LCQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7aWkodGhpcy5XaCl9O2Z1bmN0aW9uIHJ0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0SW50QXJyYXksIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9cnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLHJ0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ydCxydC5wcm90b3R5cGUuWGg9cnQscnQuWWg9e30sdC5idEludEFycmF5PXJ0LHJ0LnByb3RvdHlwZS5zaXplPXJ0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGFpKHRoaXMuV2gpfSxydC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxzaShvLGUpfSxydC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtwaSh0aGlzLldoKX07ZnVuY3Rpb24gRigpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidEZhY2UsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Ri5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksRi5wcm90b3R5cGUuY29uc3RydWN0b3I9RixGLnByb3RvdHlwZS5YaD1GLEYuWWg9e30sdC5idEZhY2U9RixGLnByb3RvdHlwZS5nZXRfbV9pbmRpY2VzPUYucHJvdG90eXBlLkZpPWZ1bmN0aW9uKCl7cmV0dXJuIGEobGkodGhpcy5XaCkscnQpfSxGLnByb3RvdHlwZS5zZXRfbV9pbmRpY2VzPUYucHJvdG90eXBlLnpqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx1aShvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRi5wcm90b3R5cGUsIm1faW5kaWNlcyIse2dldDpGLnByb3RvdHlwZS5GaSxzZXQ6Ri5wcm90b3R5cGUuemp9KSxGLnByb3RvdHlwZS5nZXRfbV9wbGFuZT1GLnByb3RvdHlwZS5OaT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGNpKG8sZSl9LEYucHJvdG90eXBlLnNldF9tX3BsYW5lPUYucHJvdG90eXBlLkhqPWZ1bmN0aW9uKGUsbyl7dmFyIG49dGhpcy5XaDtDZSgpLGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx5aShuLGUsbyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGLnByb3RvdHlwZSwibV9wbGFuZSIse2dldDpGLnByb3RvdHlwZS5OaSxzZXQ6Ri5wcm90b3R5cGUuSGp9KSxGLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe2hpKHRoaXMuV2gpfTtmdW5jdGlvbiBfdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidFZlY3RvcjNBcnJheSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1fdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksX3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPV90LF90LnByb3RvdHlwZS5YaD1fdCxfdC5ZaD17fSx0LmJ0VmVjdG9yM0FycmF5PV90LF90LnByb3RvdHlwZS5zaXplPV90LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGZpKHRoaXMuV2gpfSxfdC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKG1pKG8sZSkseSl9LF90LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe2JpKHRoaXMuV2gpfTtmdW5jdGlvbiBpdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidEZhY2VBcnJheSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1pdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksaXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWl0LGl0LnByb3RvdHlwZS5YaD1pdCxpdC5ZaD17fSx0LmJ0RmFjZUFycmF5PWl0LGl0LnByb3RvdHlwZS5zaXplPWl0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGdpKHRoaXMuV2gpfSxpdC5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKGRpKG8sZSksRil9LGl0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1dpKHRoaXMuV2gpfTtmdW5jdGlvbiBNKCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29udmV4UG9seWhlZHJvbiwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1NLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxNLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NLE0ucHJvdG90eXBlLlhoPU0sTS5ZaD17fSx0LmJ0Q29udmV4UG9seWhlZHJvbj1NLE0ucHJvdG90eXBlLmdldF9tX3ZlcnRpY2VzPU0ucHJvdG90eXBlLmNqPWZ1bmN0aW9uKCl7cmV0dXJuIGEoQ2kodGhpcy5XaCksX3QpfSxNLnByb3RvdHlwZS5zZXRfbV92ZXJ0aWNlcz1NLnByb3RvdHlwZS5Yaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksamkobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KE0ucHJvdG90eXBlLCJtX3ZlcnRpY2VzIix7Z2V0Ok0ucHJvdG90eXBlLmNqLHNldDpNLnByb3RvdHlwZS5Yan0pLE0ucHJvdG90eXBlLmdldF9tX2ZhY2VzPU0ucHJvdG90eXBlLnhpPWZ1bmN0aW9uKCl7cmV0dXJuIGEodmkodGhpcy5XaCksaXQpfSxNLnByb3RvdHlwZS5zZXRfbV9mYWNlcz1NLnByb3RvdHlwZS5yaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksRGkobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KE0ucHJvdG90eXBlLCJtX2ZhY2VzIix7Z2V0Ok0ucHJvdG90eXBlLnhpLHNldDpNLnByb3RvdHlwZS5yan0pLE0ucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7UmkodGhpcy5XaCl9O2Z1bmN0aW9uIEUoZSxvKXtDZSgpLHR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9YmwoZSkpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksdGhpcy5XaD1lPT09dm9pZCAwP1NpKCk6bz09PXZvaWQgMD9JaShlKTpPaShlLG8pLEEoRSlbdGhpcy5XaF09dGhpc31FLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFEucHJvdG90eXBlKSxFLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FLEUucHJvdG90eXBlLlhoPUUsRS5ZaD17fSx0LmJ0Q29udmV4SHVsbFNoYXBlPUUsRS5wcm90b3R5cGUuYWRkUG9pbnQ9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxvPT09dm9pZCAwP0JpKG4sZSk6UGkobixlLG8pfSxFLnByb3RvdHlwZS5zZXRNYXJnaW49ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHhpKG8sZSl9LEUucHJvdG90eXBlLmdldE1hcmdpbj1mdW5jdGlvbigpe3JldHVybiBUaSh0aGlzLldoKX0sRS5wcm90b3R5cGUuZ2V0TnVtVmVydGljZXM9ZnVuY3Rpb24oKXtyZXR1cm4gRmkodGhpcy5XaCl9LEUucHJvdG90eXBlLmluaXRpYWxpemVQb2x5aGVkcmFsRmVhdHVyZXM9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSwhIU1pKG8sZSl9LEUucHJvdG90eXBlLnJlY2FsY0xvY2FsQWFiYj1mdW5jdGlvbigpe0FpKHRoaXMuV2gpfSxFLnByb3RvdHlwZS5nZXRDb252ZXhQb2x5aGVkcm9uPWZ1bmN0aW9uKCl7cmV0dXJuIGEod2kodGhpcy5XaCksTSl9LEUucHJvdG90eXBlLnNldExvY2FsU2NhbGluZz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksa2kobyxlKX0sRS5wcm90b3R5cGUuZ2V0TG9jYWxTY2FsaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGEoTGkodGhpcy5XaCkseSl9LEUucHJvdG90eXBlLmNhbGN1bGF0ZUxvY2FsSW5lcnRpYT1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLEhpKG4sZSxvKX0sRS5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtZaSh0aGlzLldoKX07ZnVuY3Rpb24ganQoKXt0aGlzLldoPVZpKCksQShqdClbdGhpcy5XaF09dGhpc31qdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksanQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWp0LGp0LnByb3RvdHlwZS5YaD1qdCxqdC5ZaD17fSx0LmJ0RGVmYXVsdENvbGxpc2lvbkNvbnN0cnVjdGlvbkluZm89anQsanQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7UWkodGhpcy5XaCl9O2Z1bmN0aW9uIHZ0KGUpe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdGhpcy5XaD1lPT09dm9pZCAwP0VpKCk6WGkoZSksQSh2dClbdGhpcy5XaF09dGhpc312dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksdnQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXZ0LHZ0LnByb3RvdHlwZS5YaD12dCx2dC5ZaD17fSx0LmJ0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb249dnQsdnQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7VWkodGhpcy5XaCl9O2Z1bmN0aW9uIHooKXt0aGlzLldoPUdpKCksQSh6KVt0aGlzLldoXT10aGlzfXoucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLHoucHJvdG90eXBlLmNvbnN0cnVjdG9yPXosei5wcm90b3R5cGUuWGg9eix6LlloPXt9LHQuYnRQZXJzaXN0ZW50TWFuaWZvbGQ9eix6LnByb3RvdHlwZS5nZXRCb2R5MD1mdW5jdGlvbigpe3JldHVybiBhKHppKHRoaXMuV2gpLEMpfSx6LnByb3RvdHlwZS5nZXRCb2R5MT1mdW5jdGlvbigpe3JldHVybiBhKE5pKHRoaXMuV2gpLEMpfSx6LnByb3RvdHlwZS5nZXROdW1Db250YWN0cz1mdW5jdGlvbigpe3JldHVybiBxaSh0aGlzLldoKX0sei5wcm90b3R5cGUuZ2V0Q29udGFjdFBvaW50PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYShaaShvLGUpLGgpfSx6LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe0tpKHRoaXMuV2gpfTtmdW5jdGlvbiB1dChlKXtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHRoaXMuV2g9JGkoZSksQSh1dClbdGhpcy5XaF09dGhpc311dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShLLnByb3RvdHlwZSksdXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXV0LHV0LnByb3RvdHlwZS5YaD11dCx1dC5ZaD17fSx0LmJ0Q29sbGlzaW9uRGlzcGF0Y2hlcj11dCx1dC5wcm90b3R5cGUuZ2V0TnVtTWFuaWZvbGRzPWZ1bmN0aW9uKCl7cmV0dXJuIEppKHRoaXMuV2gpfSx1dC5wcm90b3R5cGUuZ2V0TWFuaWZvbGRCeUluZGV4SW50ZXJuYWw9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtyZXR1cm4gZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhKHRhKG8sZSkseil9LHV0LnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe2VhKHRoaXMuV2gpfTtmdW5jdGlvbiBUdCgpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidE92ZXJsYXBwaW5nUGFpckNhbGxiYWNrLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifVR0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxUdC5wcm90b3R5cGUuY29uc3RydWN0b3I9VHQsVHQucHJvdG90eXBlLlhoPVR0LFR0LlloPXt9LHQuYnRPdmVybGFwcGluZ1BhaXJDYWxsYmFjaz1UdCxUdC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtvYSh0aGlzLldoKX07ZnVuY3Rpb24gSigpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidE92ZXJsYXBwaW5nUGFpckNhY2hlLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifUoucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLEoucHJvdG90eXBlLmNvbnN0cnVjdG9yPUosSi5wcm90b3R5cGUuWGg9SixKLlloPXt9LHQuYnRPdmVybGFwcGluZ1BhaXJDYWNoZT1KLEoucHJvdG90eXBlLnNldEludGVybmFsR2hvc3RQYWlyQ2FsbGJhY2s9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG5hKG8sZSl9LEoucHJvdG90eXBlLmdldE51bU92ZXJsYXBwaW5nUGFpcnM9ZnVuY3Rpb24oKXtyZXR1cm4gcmEodGhpcy5XaCl9LEoucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7X2EodGhpcy5XaCl9O2Z1bmN0aW9uIGF0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0QnJvYWRwaGFzZUludGVyZmFjZSwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1hdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWF0LGF0LnByb3RvdHlwZS5YaD1hdCxhdC5ZaD17fSx0LmJ0QnJvYWRwaGFzZUludGVyZmFjZT1hdCxhdC5wcm90b3R5cGUuZ2V0T3ZlcmxhcHBpbmdQYWlyQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gYShpYSh0aGlzLldoKSxKKX0sYXQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7YWEodGhpcy5XaCl9O2Z1bmN0aW9uIEZ0KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29sbGlzaW9uQ29uZmlndXJhdGlvbiwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1GdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksRnQucHJvdG90eXBlLmNvbnN0cnVjdG9yPUZ0LEZ0LnByb3RvdHlwZS5YaD1GdCxGdC5ZaD17fSx0LmJ0Q29sbGlzaW9uQ29uZmlndXJhdGlvbj1GdCxGdC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtzYSh0aGlzLldoKX07ZnVuY3Rpb24gRHQoKXt0aGlzLldoPXBhKCksQShEdClbdGhpcy5XaF09dGhpc31EdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksRHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPUR0LER0LnByb3RvdHlwZS5YaD1EdCxEdC5ZaD17fSx0LmJ0RGJ2dEJyb2FkcGhhc2U9RHQsRHQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bGEodGhpcy5XaCl9O2Z1bmN0aW9uIEIoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRCcm9hZHBoYXNlUHJveHksIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9Qi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksQi5wcm90b3R5cGUuY29uc3RydWN0b3I9QixCLnByb3RvdHlwZS5YaD1CLEIuWWg9e30sdC5idEJyb2FkcGhhc2VQcm94eT1CLEIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwPUIucHJvdG90eXBlLlpoPWZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMuV2gpfSxCLnByb3RvdHlwZS5zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cD1CLnByb3RvdHlwZS5haT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksY2EobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KEIucHJvdG90eXBlLCJtX2NvbGxpc2lvbkZpbHRlckdyb3VwIix7Z2V0OkIucHJvdG90eXBlLlpoLHNldDpCLnByb3RvdHlwZS5haX0pLEIucHJvdG90eXBlLmdldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Qi5wcm90b3R5cGUuJGg9ZnVuY3Rpb24oKXtyZXR1cm4geWEodGhpcy5XaCl9LEIucHJvdG90eXBlLnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2s9Qi5wcm90b3R5cGUuYmk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGhhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCLnByb3RvdHlwZSwibV9jb2xsaXNpb25GaWx0ZXJNYXNrIix7Z2V0OkIucHJvdG90eXBlLiRoLHNldDpCLnByb3RvdHlwZS5iaX0pLEIucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7ZmEodGhpcy5XaCl9O2Z1bmN0aW9uIF8oZSxvLG4scil7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmKG49bi5XaCksciYmdHlwZW9mIHI9PSJvYmplY3QiJiYocj1yLldoKSx0aGlzLldoPXI9PT12b2lkIDA/bWEoZSxvLG4pOmJhKGUsbyxuLHIpLEEoXylbdGhpcy5XaF09dGhpc31fLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxfLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1fLF8ucHJvdG90eXBlLlhoPV8sXy5ZaD17fSx0LmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbz1fLF8ucHJvdG90eXBlLmdldF9tX2xpbmVhckRhbXBpbmc9Xy5wcm90b3R5cGUuR2k9ZnVuY3Rpb24oKXtyZXR1cm4gZ2EodGhpcy5XaCl9LF8ucHJvdG90eXBlLnNldF9tX2xpbmVhckRhbXBpbmc9Xy5wcm90b3R5cGUuQWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGRhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9saW5lYXJEYW1waW5nIix7Z2V0Ol8ucHJvdG90eXBlLkdpLHNldDpfLnByb3RvdHlwZS5Ban0pLF8ucHJvdG90eXBlLmdldF9tX2FuZ3VsYXJEYW1waW5nPV8ucHJvdG90eXBlLm9pPWZ1bmN0aW9uKCl7cmV0dXJuIFdhKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9hbmd1bGFyRGFtcGluZz1fLnByb3RvdHlwZS5qaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksQ2EobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2FuZ3VsYXJEYW1waW5nIix7Z2V0Ol8ucHJvdG90eXBlLm9pLHNldDpfLnByb3RvdHlwZS5qan0pLF8ucHJvdG90eXBlLmdldF9tX2ZyaWN0aW9uPV8ucHJvdG90eXBlLnlpPWZ1bmN0aW9uKCl7cmV0dXJuIGphKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9mcmljdGlvbj1fLnByb3RvdHlwZS5zaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdmEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2ZyaWN0aW9uIix7Z2V0Ol8ucHJvdG90eXBlLnlpLHNldDpfLnByb3RvdHlwZS5zan0pLF8ucHJvdG90eXBlLmdldF9tX3JvbGxpbmdGcmljdGlvbj1fLnByb3RvdHlwZS5SaT1mdW5jdGlvbigpe3JldHVybiBEYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fcm9sbGluZ0ZyaWN0aW9uPV8ucHJvdG90eXBlLkxqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxSYShvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoXy5wcm90b3R5cGUsIm1fcm9sbGluZ0ZyaWN0aW9uIix7Z2V0Ol8ucHJvdG90eXBlLlJpLHNldDpfLnByb3RvdHlwZS5Man0pLF8ucHJvdG90eXBlLmdldF9tX3Jlc3RpdHV0aW9uPV8ucHJvdG90eXBlLlFpPWZ1bmN0aW9uKCl7cmV0dXJuIFNhKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9yZXN0aXR1dGlvbj1fLnByb3RvdHlwZS5Laj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSWEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX3Jlc3RpdHV0aW9uIix7Z2V0Ol8ucHJvdG90eXBlLlFpLHNldDpfLnByb3RvdHlwZS5Lan0pLF8ucHJvdG90eXBlLmdldF9tX2xpbmVhclNsZWVwaW5nVGhyZXNob2xkPV8ucHJvdG90eXBlLkhpPWZ1bmN0aW9uKCl7cmV0dXJuIE9hKHRoaXMuV2gpfSxfLnByb3RvdHlwZS5zZXRfbV9saW5lYXJTbGVlcGluZ1RocmVzaG9sZD1fLnByb3RvdHlwZS5Caj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksQmEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2xpbmVhclNsZWVwaW5nVGhyZXNob2xkIix7Z2V0Ol8ucHJvdG90eXBlLkhpLHNldDpfLnByb3RvdHlwZS5Can0pLF8ucHJvdG90eXBlLmdldF9tX2FuZ3VsYXJTbGVlcGluZ1RocmVzaG9sZD1fLnByb3RvdHlwZS5waT1mdW5jdGlvbigpe3JldHVybiBQYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYW5ndWxhclNsZWVwaW5nVGhyZXNob2xkPV8ucHJvdG90eXBlLmtqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx4YShvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoXy5wcm90b3R5cGUsIm1fYW5ndWxhclNsZWVwaW5nVGhyZXNob2xkIix7Z2V0Ol8ucHJvdG90eXBlLnBpLHNldDpfLnByb3RvdHlwZS5ran0pLF8ucHJvdG90eXBlLmdldF9tX2FkZGl0aW9uYWxEYW1waW5nPV8ucHJvdG90eXBlLmtpPWZ1bmN0aW9uKCl7cmV0dXJuISFUYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYWRkaXRpb25hbERhbXBpbmc9Xy5wcm90b3R5cGUuZmo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEZhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9hZGRpdGlvbmFsRGFtcGluZyIse2dldDpfLnByb3RvdHlwZS5raSxzZXQ6Xy5wcm90b3R5cGUuZmp9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsRGFtcGluZ0ZhY3Rvcj1fLnByb3RvdHlwZS5saT1mdW5jdGlvbigpe3JldHVybiBNYSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYWRkaXRpb25hbERhbXBpbmdGYWN0b3I9Xy5wcm90b3R5cGUuZ2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEFhKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9hZGRpdGlvbmFsRGFtcGluZ0ZhY3RvciIse2dldDpfLnByb3RvdHlwZS5saSxzZXQ6Xy5wcm90b3R5cGUuZ2p9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsTGluZWFyRGFtcGluZ1RocmVzaG9sZFNxcj1fLnByb3RvdHlwZS5taT1mdW5jdGlvbigpe3JldHVybiB3YSh0aGlzLldoKX0sXy5wcm90b3R5cGUuc2V0X21fYWRkaXRpb25hbExpbmVhckRhbXBpbmdUaHJlc2hvbGRTcXI9Xy5wcm90b3R5cGUuaGo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGthKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibV9hZGRpdGlvbmFsTGluZWFyRGFtcGluZ1RocmVzaG9sZFNxciIse2dldDpfLnByb3RvdHlwZS5taSxzZXQ6Xy5wcm90b3R5cGUuaGp9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdUaHJlc2hvbGRTcXI9Xy5wcm90b3R5cGUuamk9ZnVuY3Rpb24oKXtyZXR1cm4gTGEodGhpcy5XaCl9LF8ucHJvdG90eXBlLnNldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ1RocmVzaG9sZFNxcj1fLnByb3RvdHlwZS5laj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksSGEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ1RocmVzaG9sZFNxciIse2dldDpfLnByb3RvdHlwZS5qaSxzZXQ6Xy5wcm90b3R5cGUuZWp9KSxfLnByb3RvdHlwZS5nZXRfbV9hZGRpdGlvbmFsQW5ndWxhckRhbXBpbmdGYWN0b3I9Xy5wcm90b3R5cGUuaWk9ZnVuY3Rpb24oKXtyZXR1cm4gWWEodGhpcy5XaCl9LF8ucHJvdG90eXBlLnNldF9tX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3Rvcj1fLnByb3RvdHlwZS5kaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksVmEobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KF8ucHJvdG90eXBlLCJtX2FkZGl0aW9uYWxBbmd1bGFyRGFtcGluZ0ZhY3RvciIse2dldDpfLnByb3RvdHlwZS5paSxzZXQ6Xy5wcm90b3R5cGUuZGp9KSxfLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe1FhKHRoaXMuV2gpfTtmdW5jdGlvbiBsKGUpe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdGhpcy5XaD1FYShlKSxBKGwpW3RoaXMuV2hdPXRoaXN9bC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSksbC5wcm90b3R5cGUuY29uc3RydWN0b3I9bCxsLnByb3RvdHlwZS5YaD1sLGwuWWg9e30sdC5idFJpZ2lkQm9keT1sLGwucHJvdG90eXBlLmdldENlbnRlck9mTWFzc1RyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBhKFhhKHRoaXMuV2gpLE8pfSxsLnByb3RvdHlwZS5zZXRDZW50ZXJPZk1hc3NUcmFuc2Zvcm09ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFVhKG8sZSl9LGwucHJvdG90eXBlLnNldFNsZWVwaW5nVGhyZXNob2xkcz1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLEdhKG4sZSxvKX0sbC5wcm90b3R5cGUuZ2V0TGluZWFyRGFtcGluZz1mdW5jdGlvbigpe3JldHVybiB6YSh0aGlzLldoKX0sbC5wcm90b3R5cGUuZ2V0QW5ndWxhckRhbXBpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gTmEodGhpcy5XaCl9LGwucHJvdG90eXBlLnNldERhbXBpbmc9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxxYShuLGUsbyl9LGwucHJvdG90eXBlLnNldE1hc3NQcm9wcz1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLFphKG4sZSxvKX0sbC5wcm90b3R5cGUuZ2V0TGluZWFyRmFjdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGEoS2EodGhpcy5XaCkseSl9LGwucHJvdG90eXBlLnNldExpbmVhckZhY3Rvcj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksJGEobyxlKX0sbC5wcm90b3R5cGUuYXBwbHlUb3JxdWU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEphKG8sZSl9LGwucHJvdG90eXBlLmFwcGx5TG9jYWxUb3JxdWU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHRzKG8sZSl9LGwucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxlcyhuLGUsbyl9LGwucHJvdG90eXBlLmFwcGx5Q2VudHJhbEZvcmNlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvcyhvLGUpfSxsLnByb3RvdHlwZS5hcHBseUNlbnRyYWxMb2NhbEZvcmNlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxucyhvLGUpfSxsLnByb3RvdHlwZS5hcHBseVRvcnF1ZUltcHVsc2U9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHJzKG8sZSl9LGwucHJvdG90eXBlLmFwcGx5SW1wdWxzZT1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLF9zKG4sZSxvKX0sbC5wcm90b3R5cGUuYXBwbHlDZW50cmFsSW1wdWxzZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksaXMobyxlKX0sbC5wcm90b3R5cGUudXBkYXRlSW5lcnRpYVRlbnNvcj1mdW5jdGlvbigpe2FzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5nZXRMaW5lYXJWZWxvY2l0eT1mdW5jdGlvbigpe3JldHVybiBhKHNzKHRoaXMuV2gpLHkpfSxsLnByb3RvdHlwZS5nZXRBbmd1bGFyVmVsb2NpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gYShwcyh0aGlzLldoKSx5KX0sbC5wcm90b3R5cGUuc2V0TGluZWFyVmVsb2NpdHk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGxzKG8sZSl9LGwucHJvdG90eXBlLnNldEFuZ3VsYXJWZWxvY2l0eT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksdXMobyxlKX0sbC5wcm90b3R5cGUuZ2V0TW90aW9uU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gYShjcyh0aGlzLldoKSxvdCl9LGwucHJvdG90eXBlLnNldE1vdGlvblN0YXRlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx5cyhvLGUpfSxsLnByb3RvdHlwZS5nZXRBbmd1bGFyRmFjdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIGEoaHModGhpcy5XaCkseSl9LGwucHJvdG90eXBlLnNldEFuZ3VsYXJGYWN0b3I9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGZzKG8sZSl9LGwucHJvdG90eXBlLnVwY2FzdD1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO3JldHVybiBlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGEobXMobyxlKSxsKX0sbC5wcm90b3R5cGUuZ2V0QWFiYj1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLGJzKG4sZSxvKX0sbC5wcm90b3R5cGUuYXBwbHlHcmF2aXR5PWZ1bmN0aW9uKCl7Z3ModGhpcy5XaCl9LGwucHJvdG90eXBlLmdldEdyYXZpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gYShkcyh0aGlzLldoKSx5KX0sbC5wcm90b3R5cGUuc2V0R3Jhdml0eT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksV3MobyxlKX0sbC5wcm90b3R5cGUuZ2V0QnJvYWRwaGFzZVByb3h5PWZ1bmN0aW9uKCl7cmV0dXJuIGEoQ3ModGhpcy5XaCksQil9LGwucHJvdG90eXBlLmNsZWFyRm9yY2VzPWZ1bmN0aW9uKCl7anModGhpcy5XaCl9LGwucHJvdG90eXBlLnNldEFuaXNvdHJvcGljRnJpY3Rpb249ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx2cyhuLGUsbyl9LGwucHJvdG90eXBlLmdldENvbGxpc2lvblNoYXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoRHModGhpcy5XaCksUSl9LGwucHJvdG90eXBlLnNldENvbnRhY3RQcm9jZXNzaW5nVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxScyhvLGUpfSxsLnByb3RvdHlwZS5zZXRBY3RpdmF0aW9uU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFNzKG8sZSl9LGwucHJvdG90eXBlLmZvcmNlQWN0aXZhdGlvblN0YXRlPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxJcyhvLGUpfSxsLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZT09PXZvaWQgMD9PcyhvKTpCcyhvLGUpfSxsLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiEhUHModGhpcy5XaCl9LGwucHJvdG90eXBlLmlzS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISF4cyh0aGlzLldoKX0sbC5wcm90b3R5cGUuaXNTdGF0aWNPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4hIVRzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuISFGcyh0aGlzLldoKX0sbC5wcm90b3R5cGUuZ2V0UmVzdGl0dXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gTXModGhpcy5XaCl9LGwucHJvdG90eXBlLmdldEZyaWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIEFzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5nZXRSb2xsaW5nRnJpY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gd3ModGhpcy5XaCl9LGwucHJvdG90eXBlLnNldFJlc3RpdHV0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxrcyhvLGUpfSxsLnByb3RvdHlwZS5zZXRGcmljdGlvbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksTHMobyxlKX0sbC5wcm90b3R5cGUuc2V0Um9sbGluZ0ZyaWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxIcyhvLGUpfSxsLnByb3RvdHlwZS5nZXRXb3JsZFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBhKFlzKHRoaXMuV2gpLE8pfSxsLnByb3RvdHlwZS5nZXRDb2xsaXNpb25GbGFncz1mdW5jdGlvbigpe3JldHVybiBWcyh0aGlzLldoKX0sbC5wcm90b3R5cGUuc2V0Q29sbGlzaW9uRmxhZ3M9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFFzKG8sZSl9LGwucHJvdG90eXBlLnNldFdvcmxkVHJhbnNmb3JtPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxFcyhvLGUpfSxsLnByb3RvdHlwZS5zZXRDb2xsaXNpb25TaGFwZT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWHMobyxlKX0sbC5wcm90b3R5cGUuc2V0Q2NkTW90aW9uVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxVcyhvLGUpfSxsLnByb3RvdHlwZS5zZXRDY2RTd2VwdFNwaGVyZVJhZGl1cz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksR3MobyxlKX0sbC5wcm90b3R5cGUuZ2V0VXNlckluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHpzKHRoaXMuV2gpfSxsLnByb3RvdHlwZS5zZXRVc2VySW5kZXg9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE5zKG8sZSl9LGwucHJvdG90eXBlLmdldFVzZXJQb2ludGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEocXModGhpcy5XaCksYnQpfSxsLnByb3RvdHlwZS5zZXRVc2VyUG9pbnRlcj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksWnMobyxlKX0sbC5wcm90b3R5cGUuZ2V0QnJvYWRwaGFzZUhhbmRsZT1mdW5jdGlvbigpe3JldHVybiBhKEtzKHRoaXMuV2gpLEIpfSxsLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpeyRzKHRoaXMuV2gpfTtmdW5jdGlvbiBSdCgpe3RoaXMuV2g9SnMoKSxBKFJ0KVt0aGlzLldoXT10aGlzfVJ0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxSdC5wcm90b3R5cGUuY29uc3RydWN0b3I9UnQsUnQucHJvdG90eXBlLlhoPVJ0LFJ0LlloPXt9LHQuYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXI9UnQsUnQucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7dHAodGhpcy5XaCl9O2Z1bmN0aW9uIE10KCl7dGhyb3ciY2Fubm90IGNvbnN0cnVjdCBhIGJ0Q29uc3RyYWludFNvbHZlciwgbm8gY29uc3RydWN0b3IgaW4gSURMIn1NdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksTXQucHJvdG90eXBlLmNvbnN0cnVjdG9yPU10LE10LnByb3RvdHlwZS5YaD1NdCxNdC5ZaD17fSx0LmJ0Q29uc3RyYWludFNvbHZlcj1NdCxNdC5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtlcCh0aGlzLldoKX07ZnVuY3Rpb24gcygpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidERpc3BhdGNoZXJJbmZvLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifXMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLHMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXMscy5wcm90b3R5cGUuWGg9cyxzLlloPXt9LHQuYnREaXNwYXRjaGVySW5mbz1zLHMucHJvdG90eXBlLmdldF9tX3RpbWVTdGVwPXMucHJvdG90eXBlLlhpPWZ1bmN0aW9uKCl7cmV0dXJuIG9wKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV90aW1lU3RlcD1zLnByb3RvdHlwZS5Saj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbnAobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLCJtX3RpbWVTdGVwIix7Z2V0OnMucHJvdG90eXBlLlhpLHNldDpzLnByb3RvdHlwZS5San0pLHMucHJvdG90eXBlLmdldF9tX3N0ZXBDb3VudD1zLnByb3RvdHlwZS5WaT1mdW5jdGlvbigpe3JldHVybiBycCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fc3RlcENvdW50PXMucHJvdG90eXBlLlBqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxfcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fc3RlcENvdW50Iix7Z2V0OnMucHJvdG90eXBlLlZpLHNldDpzLnByb3RvdHlwZS5Qan0pLHMucHJvdG90eXBlLmdldF9tX2Rpc3BhdGNoRnVuYz1zLnByb3RvdHlwZS51aT1mdW5jdGlvbigpe3JldHVybiBpcCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fZGlzcGF0Y2hGdW5jPXMucHJvdG90eXBlLm9qPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxhcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fZGlzcGF0Y2hGdW5jIix7Z2V0OnMucHJvdG90eXBlLnVpLHNldDpzLnByb3RvdHlwZS5van0pLHMucHJvdG90eXBlLmdldF9tX3RpbWVPZkltcGFjdD1zLnByb3RvdHlwZS5XaT1mdW5jdGlvbigpe3JldHVybiBzcCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fdGltZU9mSW1wYWN0PXMucHJvdG90eXBlLlFqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxwcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fdGltZU9mSW1wYWN0Iix7Z2V0OnMucHJvdG90eXBlLldpLHNldDpzLnByb3RvdHlwZS5Ran0pLHMucHJvdG90eXBlLmdldF9tX3VzZUNvbnRpbnVvdXM9cy5wcm90b3R5cGUuWmk9ZnVuY3Rpb24oKXtyZXR1cm4hIWxwKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV91c2VDb250aW51b3VzPXMucHJvdG90eXBlLlRqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx1cChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fdXNlQ29udGludW91cyIse2dldDpzLnByb3RvdHlwZS5aaSxzZXQ6cy5wcm90b3R5cGUuVGp9KSxzLnByb3RvdHlwZS5nZXRfbV9lbmFibGVTYXRDb252ZXg9cy5wcm90b3R5cGUud2k9ZnVuY3Rpb24oKXtyZXR1cm4hIWNwKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV9lbmFibGVTYXRDb252ZXg9cy5wcm90b3R5cGUucWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLHlwKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSwibV9lbmFibGVTYXRDb252ZXgiLHtnZXQ6cy5wcm90b3R5cGUud2ksc2V0OnMucHJvdG90eXBlLnFqfSkscy5wcm90b3R5cGUuZ2V0X21fZW5hYmxlU1BVPXMucHJvdG90eXBlLnZpPWZ1bmN0aW9uKCl7cmV0dXJuISFocCh0aGlzLldoKX0scy5wcm90b3R5cGUuc2V0X21fZW5hYmxlU1BVPXMucHJvdG90eXBlLnBqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxmcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fZW5hYmxlU1BVIix7Z2V0OnMucHJvdG90eXBlLnZpLHNldDpzLnByb3RvdHlwZS5wan0pLHMucHJvdG90eXBlLmdldF9tX3VzZUVwYT1zLnByb3RvdHlwZS5haj1mdW5jdGlvbigpe3JldHVybiEhbXAodGhpcy5XaCl9LHMucHJvdG90eXBlLnNldF9tX3VzZUVwYT1zLnByb3RvdHlwZS5Waj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksYnAobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLCJtX3VzZUVwYSIse2dldDpzLnByb3RvdHlwZS5haixzZXQ6cy5wcm90b3R5cGUuVmp9KSxzLnByb3RvdHlwZS5nZXRfbV9hbGxvd2VkQ2NkUGVuZXRyYXRpb249cy5wcm90b3R5cGUubmk9ZnVuY3Rpb24oKXtyZXR1cm4gZ3AodGhpcy5XaCl9LHMucHJvdG90eXBlLnNldF9tX2FsbG93ZWRDY2RQZW5ldHJhdGlvbj1zLnByb3RvdHlwZS5paj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksZHAobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLCJtX2FsbG93ZWRDY2RQZW5ldHJhdGlvbiIse2dldDpzLnByb3RvdHlwZS5uaSxzZXQ6cy5wcm90b3R5cGUuaWp9KSxzLnByb3RvdHlwZS5nZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWw9cy5wcm90b3R5cGUuJGk9ZnVuY3Rpb24oKXtyZXR1cm4hIVdwKHRoaXMuV2gpfSxzLnByb3RvdHlwZS5zZXRfbV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWw9cy5wcm90b3R5cGUuVWo9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLENwKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSwibV91c2VDb252ZXhDb25zZXJ2YXRpdmVEaXN0YW5jZVV0aWwiLHtnZXQ6cy5wcm90b3R5cGUuJGksc2V0OnMucHJvdG90eXBlLlVqfSkscy5wcm90b3R5cGUuZ2V0X21fY29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VUaHJlc2hvbGQ9cy5wcm90b3R5cGUucmk9ZnVuY3Rpb24oKXtyZXR1cm4ganAodGhpcy5XaCl9LHMucHJvdG90eXBlLnNldF9tX2NvbnZleENvbnNlcnZhdGl2ZURpc3RhbmNlVGhyZXNob2xkPXMucHJvdG90eXBlLmxqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSx2cChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsIm1fY29udmV4Q29uc2VydmF0aXZlRGlzdGFuY2VUaHJlc2hvbGQiLHtnZXQ6cy5wcm90b3R5cGUucmksc2V0OnMucHJvdG90eXBlLmxqfSkscy5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtEcCh0aGlzLldoKX07ZnVuY3Rpb24gUygpe3Rocm93ImNhbm5vdCBjb25zdHJ1Y3QgYSBidENvbnRhY3RTb2x2ZXJJbmZvLCBubyBjb25zdHJ1Y3RvciBpbiBJREwifVMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLFMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVMsUy5wcm90b3R5cGUuWGg9UyxTLlloPXt9LHQuYnRDb250YWN0U29sdmVySW5mbz1TLFMucHJvdG90eXBlLmdldF9tX3NwbGl0SW1wdWxzZT1TLnByb3RvdHlwZS5UaT1mdW5jdGlvbigpe3JldHVybiEhUnAodGhpcy5XaCl9LFMucHJvdG90eXBlLnNldF9tX3NwbGl0SW1wdWxzZT1TLnByb3RvdHlwZS5Oaj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksU3AobyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KFMucHJvdG90eXBlLCJtX3NwbGl0SW1wdWxzZSIse2dldDpTLnByb3RvdHlwZS5UaSxzZXQ6Uy5wcm90b3R5cGUuTmp9KSxTLnByb3RvdHlwZS5nZXRfbV9zcGxpdEltcHVsc2VQZW5ldHJhdGlvblRocmVzaG9sZD1TLnByb3RvdHlwZS5VaT1mdW5jdGlvbigpe3JldHVybiBJcCh0aGlzLldoKX0sUy5wcm90b3R5cGUuc2V0X21fc3BsaXRJbXB1bHNlUGVuZXRyYXRpb25UaHJlc2hvbGQ9Uy5wcm90b3R5cGUuT2o9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLE9wKG8sZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTLnByb3RvdHlwZSwibV9zcGxpdEltcHVsc2VQZW5ldHJhdGlvblRocmVzaG9sZCIse2dldDpTLnByb3RvdHlwZS5VaSxzZXQ6Uy5wcm90b3R5cGUuT2p9KSxTLnByb3RvdHlwZS5nZXRfbV9udW1JdGVyYXRpb25zPVMucHJvdG90eXBlLk1pPWZ1bmN0aW9uKCl7cmV0dXJuIEJwKHRoaXMuV2gpfSxTLnByb3RvdHlwZS5zZXRfbV9udW1JdGVyYXRpb25zPVMucHJvdG90eXBlLkdqPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxQcChvLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUy5wcm90b3R5cGUsIm1fbnVtSXRlcmF0aW9ucyIse2dldDpTLnByb3RvdHlwZS5NaSxzZXQ6Uy5wcm90b3R5cGUuR2p9KSxTLnByb3RvdHlwZS5fX2Rlc3Ryb3lfXz1mdW5jdGlvbigpe3hwKHRoaXMuV2gpfTtmdW5jdGlvbiBJKGUsbyxuLHIpe2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksdGhpcy5XaD1UcChlLG8sbixyKSxBKEkpW3RoaXMuV2hdPXRoaXN9SS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSksSS5wcm90b3R5cGUuY29uc3RydWN0b3I9SSxJLnByb3RvdHlwZS5YaD1JLEkuWWg9e30sdC5idERpc2NyZXRlRHluYW1pY3NXb3JsZD1JLEkucHJvdG90eXBlLnNldEdyYXZpdHk9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLEZwKG8sZSl9LEkucHJvdG90eXBlLmdldEdyYXZpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gYShNcCh0aGlzLldoKSx5KX0sSS5wcm90b3R5cGUuYWRkUmlnaWRCb2R5PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/QXAocixlKTpuPT09dm9pZCAwP19lYl9idERpc2NyZXRlRHluYW1pY3NXb3JsZF9hZGRSaWdpZEJvZHlfMihyLGUsbyk6d3AocixlLG8sbil9LEkucHJvdG90eXBlLnJlbW92ZVJpZ2lkQm9keT1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksa3AobyxlKX0sSS5wcm90b3R5cGUuc3RlcFNpbXVsYXRpb249ZnVuY3Rpb24oZSxvLG4pe3ZhciByPXRoaXMuV2g7cmV0dXJuIGUmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/THAocixlKTpuPT09dm9pZCAwP0hwKHIsZSxvKTpZcChyLGUsbyxuKX0sSS5wcm90b3R5cGUuc2V0Q29udGFjdEFkZGVkQ2FsbGJhY2s9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLFZwKG8sZSl9LEkucHJvdG90eXBlLnNldENvbnRhY3RQcm9jZXNzZWRDYWxsYmFjaz1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksUXAobyxlKX0sSS5wcm90b3R5cGUuc2V0Q29udGFjdERlc3Ryb3llZENhbGxiYWNrPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxFcChvLGUpfSxJLnByb3RvdHlwZS5nZXREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGEoWHAodGhpcy5XaCksSyl9LEkucHJvdG90eXBlLmdldFBhaXJDYWNoZT1mdW5jdGlvbigpe3JldHVybiBhKFVwKHRoaXMuV2gpLEopfSxJLnByb3RvdHlwZS5nZXREaXNwYXRjaEluZm89ZnVuY3Rpb24oKXtyZXR1cm4gYShHcCh0aGlzLldoKSxzKX0sSS5wcm90b3R5cGUuYWRkQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/enAocixlKTpuPT09dm9pZCAwP05wKHIsZSxvKTpxcChyLGUsbyxuKX0sSS5wcm90b3R5cGUucmVtb3ZlQ29sbGlzaW9uT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxacChvLGUpfSxJLnByb3RvdHlwZS5nZXRCcm9hZHBoYXNlPWZ1bmN0aW9uKCl7cmV0dXJuIGEoS3AodGhpcy5XaCksYXQpfSxJLnByb3RvdHlwZS5jb252ZXhTd2VlcFRlc3Q9ZnVuY3Rpb24oZSxvLG4scixjKXt2YXIgRD10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLHImJnR5cGVvZiByPT0ib2JqZWN0IiYmKHI9ci5XaCksYyYmdHlwZW9mIGM9PSJvYmplY3QiJiYoYz1jLldoKSwkcChELGUsbyxuLHIsYyl9LEkucHJvdG90eXBlLmNvbnRhY3RQYWlyVGVzdD1mdW5jdGlvbihlLG8sbil7dmFyIHI9dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLG8mJnR5cGVvZiBvPT0ib2JqZWN0IiYmKG89by5XaCksbiYmdHlwZW9mIG49PSJvYmplY3QiJiYobj1uLldoKSxKcChyLGUsbyxuKX0sSS5wcm90b3R5cGUuY29udGFjdFRlc3Q9ZnVuY3Rpb24oZSxvKXt2YXIgbj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSx0bChuLGUsbyl9LEkucHJvdG90eXBlLnVwZGF0ZVNpbmdsZUFhYmI9ZnVuY3Rpb24oZSl7dmFyIG89dGhpcy5XaDtlJiZ0eXBlb2YgZT09Im9iamVjdCImJihlPWUuV2gpLGVsKG8sZSl9LEkucHJvdG90eXBlLmFkZEFjdGlvbj1mdW5jdGlvbihlKXt2YXIgbz10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksb2wobyxlKX0sSS5wcm90b3R5cGUucmVtb3ZlQWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxubChvLGUpfSxJLnByb3RvdHlwZS5nZXRTb2x2ZXJJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIGEocmwodGhpcy5XaCksUyl9LEkucHJvdG90eXBlLnNldEludGVybmFsVGlja0NhbGxiYWNrPWZ1bmN0aW9uKGUsbyxuKXt2YXIgcj10aGlzLldoO2UmJnR5cGVvZiBlPT0ib2JqZWN0IiYmKGU9ZS5XaCksbyYmdHlwZW9mIG89PSJvYmplY3QiJiYobz1vLldoKSxuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihuPW4uV2gpLG89PT12b2lkIDA/X2wocixlKTpuPT09dm9pZCAwP2lsKHIsZSxvKTphbChyLGUsbyxuKX0sSS5wcm90b3R5cGUuX19kZXN0cm95X189ZnVuY3Rpb24oKXtzbCh0aGlzLldoKX07ZnVuY3Rpb24gU3QoKXt0aHJvdyJjYW5ub3QgY29uc3RydWN0IGEgYnRBY3Rpb25JbnRlcmZhY2UsIG5vIGNvbnN0cnVjdG9yIGluIElETCJ9cmV0dXJuIFN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxTdC5wcm90b3R5cGUuY29uc3RydWN0b3I9U3QsU3QucHJvdG90eXBlLlhoPVN0LFN0LlloPXt9LHQuYnRBY3Rpb25JbnRlcmZhY2U9U3QsU3QucHJvdG90eXBlLnVwZGF0ZUFjdGlvbj1mdW5jdGlvbihlLG8pe3ZhciBuPXRoaXMuV2g7ZSYmdHlwZW9mIGU9PSJvYmplY3QiJiYoZT1lLldoKSxvJiZ0eXBlb2Ygbz09Im9iamVjdCImJihvPW8uV2gpLHBsKG4sZSxvKX0sU3QucHJvdG90eXBlLl9fZGVzdHJveV9fPWZ1bmN0aW9uKCl7bGwodGhpcy5XaCl9LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3QuUEhZX0ZMT0FUPXVsKCksdC5QSFlfRE9VQkxFPWNsKCksdC5QSFlfSU5URUdFUj15bCgpLHQuUEhZX1NIT1JUPWhsKCksdC5QSFlfRklYRURQT0lOVDg4PWZsKCksdC5QSFlfVUNIQVI9bWwoKX1PZT9lKCk6VnQudW5zaGlmdChlKX0oKSx0LkNPTlRBQ1RfQURERURfQ0FMTEJBQ0tfU0lHTkFUVVJFPSJpaWlpaWlpaSIsdC5DT05UQUNUX0RFU1RST1lFRF9DQUxMQkFDS19TSUdOQVRVUkU9ImlpIix0LkNPTlRBQ1RfUFJPQ0VTU0VEX0NBTExCQUNLX1NJR05BVFVSRT0iaWlpaSIsdC5JTlRFUk5BTF9USUNLX0NBTExCQUNLX1NJR05BVFVSRT0idmlmIix0aGlzLkFtbW89dCxwLnJlYWR5fWxldCBBdD1bXSx6dD1bXSxJdD17fSxOLGcsdWUsS3QsY2UsJHQ9MTUwLEp0PTE1MCx5dD0xLHRlPSExLGplPTYwLGk9ey4uLntzaXplOjkuNSxzdGFydGluZ0hlaWdodDo4LHNwaW5Gb3JjZTo2LHRocm93Rm9yY2U6NSxncmF2aXR5OjEsbWFzczoxLGZyaWN0aW9uOi44LHJlc3RpdHV0aW9uOi4xLGxpbmVhckRhbXBpbmc6LjUsYW5ndWxhckRhbXBpbmc6LjQsc2V0dGxlVGltZW91dDo1ZTN9fSx5ZSxrO3NlbGYub25tZXNzYWdlPXA9Pntzd2l0Y2gocC5kYXRhLmFjdGlvbil7Y2FzZSJyb2xsRGllIjpiZShwLmRhdGEuc2lkZXMpO2JyZWFrO2Nhc2UiaW5pdCI6ZGwocC5kYXRhKS50aGVuKCgpPT57c2VsZi5wb3N0TWVzc2FnZSh7YWN0aW9uOiJpbml0LWNvbXBsZXRlIn0pfSk7YnJlYWs7Y2FzZSJjbGVhckRpY2UiOlJsKCk7YnJlYWs7Y2FzZSJyZW1vdmVEaWUiOkRlKHAuZGF0YS5pZCk7YnJlYWs7Y2FzZSJyZXNpemUiOiR0PXAuZGF0YS53aWR0aCxKdD1wLmRhdGEuaGVpZ2h0LHl0PSR0L0p0LG1lKGkuc2l6ZSxpLnN0YXJ0aW5nSGVpZ2h0KzEwKTticmVhaztjYXNlInVwZGF0ZUNvbmZpZyI6V2wocC5kYXRhLm9wdGlvbnMpO2JyZWFrO2Nhc2UiY29ubmVjdCI6dWU9cC5wb3J0c1swXSx1ZS5vbm1lc3NhZ2U9dD0+e3N3aXRjaCh0LmRhdGEuYWN0aW9uKXtjYXNlImluaXRCdWZmZXIiOms9bmV3IEZsb2F0MzJBcnJheSh0LmRhdGEuZGljZUJ1ZmZlciksa1swXT0tMTticmVhaztjYXNlImxvYWRNb2RlbHMiOkNsKHQuZGF0YS5vcHRpb25zKTticmVhaztjYXNlImFkZERpZSI6dC5kYXRhLm9wdGlvbnMubmV3U3RhcnRQb2ludCYmaGUoKTtjb25zdCBtPURsKHQuZGF0YS5vcHRpb25zKTtiZShtKTticmVhaztjYXNlInJvbGxEaWUiOmJlKHQuZGF0YS5pZCk7YnJlYWs7Y2FzZSJyZW1vdmVEaWUiOkRlKHQuZGF0YS5pZCk7YnJlYWs7Y2FzZSJzdG9wU2ltdWxhdGlvbiI6dGU9ITA7YnJlYWs7Y2FzZSJyZXN1bWVTaW11bGF0aW9uIjp0LmRhdGEubmV3U3RhcnRQb2ludCYmaGUoKSx0ZT0hMSxTZSgpO2JyZWFrO2Nhc2Uic3RlcFNpbXVsYXRpb24iOms9bmV3IEZsb2F0MzJBcnJheSh0LmRhdGEuZGljZUJ1ZmZlciksU2UoKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoImFjdGlvbiBub3QgZm91bmQgaW4gcGh5c2ljcyB3b3JrZXIgZnJvbSB3b3JsZE9mZnNjcmVlbiB3b3JrZXI6Iix0LmRhdGEuYWN0aW9uKX19O2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiYWN0aW9uIG5vdCBmb3VuZCBpbiBwaHlzaWNzIHdvcmtlcjoiLHAuZGF0YS5hY3Rpb24pfX07Y29uc3QgZGw9YXN5bmMgcD0+eyR0PXAud2lkdGgsSnQ9cC5oZWlnaHQseXQ9JHQvSnQsaT17Li4uaSwuLi5wLm9wdGlvbnN9LGkuZ3Jhdml0eT09PTB8fGkuZ3Jhdml0eStpLm1hc3MvMyxpLm1hc3M9MStpLm1hc3MvMyxpLnNwaW5Gb3JjZT1pLnNwaW5Gb3JjZS9qZSxpLnRocm93Rm9yY2U9aS50aHJvd0ZvcmNlLzIvaS5tYXNzKigxK2kuc2NhbGUvNiksaS5zdGFydGluZ0hlaWdodD1pLnN0YXJ0aW5nSGVpZ2h0PDE/MTppLnN0YXJ0aW5nSGVpZ2h0O2NvbnN0IHQ9e2xvY2F0ZUZpbGU6KCk9PmAke2kub3JpZ2luK2kuYXNzZXRQYXRofWFtbW8vYW1tby53YXNtLndhc21gfTtnPWF3YWl0IG5ldyBnbCh0KSxLdD1uZXcgZy5idFRyYW5zZm9ybSxjZT1uZXcgZy5idFZlY3RvcjMoMCwwLDApLHllPVAoMCwwLDApLGhlKCksTj1TbCgpLG1lKGkuc2l6ZSxpLnN0YXJ0aW5nSGVpZ2h0KzEwKX0sV2w9cD0+e2k9ey4uLmksLi4ucH0saS5tYXNzPTEraS5tYXNzLzMsaS5ncmF2aXR5PWkuZ3Jhdml0eT09PTA/MDppLmdyYXZpdHkraS5tYXNzLzMsaS5zcGluRm9yY2U9aS5zcGluRm9yY2UvamUsaS50aHJvd0ZvcmNlPWkudGhyb3dGb3JjZS8yL2kubWFzcyooMStpLnNjYWxlLzYpLGkuc3RhcnRpbmdIZWlnaHQ9aS5zdGFydGluZ0hlaWdodDwxPzE6aS5zdGFydGluZ0hlaWdodCx2ZSgpLG1lKGkuc2l6ZSxpLnN0YXJ0aW5nSGVpZ2h0KzEwKSxOLnNldEdyYXZpdHkoUCgwLC05LjgxKmkuZ3Jhdml0eSwwKSksT2JqZWN0LnZhbHVlcyhJdCkubWFwKHQ9Pnt0LmNvbnZleEh1bGwuc2V0TG9jYWxTY2FsaW5nKFAoaS5zY2FsZSxpLnNjYWxlLGkuc2NhbGUpKX0pfSxDbD1hc3luYyh7Y29sbGlkZXJzOnAsbWVzaE5hbWU6dH0pPT57bGV0IG09ITEsZD0hMTtwLmZvckVhY2goKHYsTCk9PntJdFt0KyJfIit2Lm5hbWVdPXYsSXRbdCsiXyIrdi5uYW1lXS5jb252ZXhIdWxsPWpsKHYpLGR8fChkPXYuaWQ9PT0iZDEwX2NvbGxpZGVyIiksbXx8KG09di5pZD09PSJkMTAwX2NvbGxpZGVyIil9KSwhbSYmZCYmKEl0W2Ake3R9X2QxMDBfY29sbGlkZXJgXT1JdFtgJHt0fV9kMTBfY29sbGlkZXJgXSl9LFA9KHAsdCxtKT0+KGNlLnNldFZhbHVlKHAsdCxtKSxjZSksaGU9KCk9PntsZXQgcD1pLnNpemUsdD0uNSxtPXAqeXQvMi10LGQ9cCp5dC8tMit0LHY9cC8yLXQsTD1wLy0yK3QsSD1zdChtLGQsTWF0aC5yYW5kb20oKSkscT1zdCh2LEwsTWF0aC5yYW5kb20oKSksWT1NYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpLGo9TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKSxaPU1hdGgucm91bmQoTWF0aC5yYW5kb20oKSk7aS5zdGFydFBvc2l0aW9uPVtaP0g6aj9kOm0saS5zdGFydGluZ0hlaWdodCxaP1k/TDp2OnFdfSxqbD1wPT57Y29uc3QgdD1uZXcgZy5idENvbnZleEh1bGxTaGFwZTtsZXQgbT1wLnBvc2l0aW9ucy5sZW5ndGg7Zm9yKGxldCBkPTA7ZDxtO2QrPTMpe2xldCB2PVAocC5wb3NpdGlvbnNbZF0scC5wb3NpdGlvbnNbZCsxXSxwLnBvc2l0aW9uc1tkKzJdKTt0LmFkZFBvaW50KHYsITApfXJldHVybiB0LnNldExvY2FsU2NhbGluZyhQKHAuc2NhbGluZ1swXSppLnNjYWxlLHAuc2NhbGluZ1sxXSppLnNjYWxlLHAuc2NhbGluZ1syXSppLnNjYWxlKSksdH0sdmw9KHAsdCk9Pntjb25zdHttYXNzOm09LjEsY29sbGlzaW9uRmxhZ3M6ZD0wLHBvczp2PVswLDAsMF0scXVhdDpMPVtzdCgtMS41LDEuNSxNYXRoLnJhbmRvbSgpKSxzdCgtMS41LDEuNSxNYXRoLnJhbmRvbSgpKSxzdCgtMS41LDEuNSxNYXRoLnJhbmRvbSgpKSwtMV0sc2NhbGU6SD1bMSwxLDFdLGZyaWN0aW9uOnE9aS5mcmljdGlvbixyZXN0aXR1dGlvbjpZPWkucmVzdGl0dXRpb259PXQsaj1uZXcgZy5idFRyYW5zZm9ybTtqLnNldElkZW50aXR5KCksai5zZXRPcmlnaW4oUCh2WzBdLHZbMV0sdlsyXSkpLGouc2V0Um90YXRpb24obmV3IGcuYnRRdWF0ZXJuaW9uKExbMF0sTFsxXSxMWzJdLExbM10pKTtjb25zdCBaPW5ldyBnLmJ0RGVmYXVsdE1vdGlvblN0YXRlKGopLGh0PVAoMCwwLDApO20+MCYmcC5jYWxjdWxhdGVMb2NhbEluZXJ0aWEobSxodCk7Y29uc3Qgd3Q9bmV3IGcuYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKG0sWixwLGh0KSxHPW5ldyBnLmJ0UmlnaWRCb2R5KHd0KTtyZXR1cm4gbT4wJiZHLnNldEFjdGl2YXRpb25TdGF0ZSg0KSxHLnNldENvbGxpc2lvbkZsYWdzKGQpLEcuc2V0RnJpY3Rpb24ocSksRy5zZXRSZXN0aXR1dGlvbihZKSxHLnNldERhbXBpbmcoaS5saW5lYXJEYW1waW5nLGkuYW5ndWxhckRhbXBpbmcpLEd9O2xldCBmZT1bXTtjb25zdCBtZT0ocCx0KT0+e2NvbnN0IG09W10sZD1QKDAsMCwwKSx2PW5ldyBnLmJ0VHJhbnNmb3JtO3Yuc2V0SWRlbnRpdHkoKSx2LnNldE9yaWdpbihQKDAsLS41LDApKTtjb25zdCBMPW5ldyBnLmJ0Qm94U2hhcGUoUChwKnl0LDEscCkpLEg9bmV3IGcuYnREZWZhdWx0TW90aW9uU3RhdGUodikscT1uZXcgZy5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oMCxILEwsZCksWT1uZXcgZy5idFJpZ2lkQm9keShxKTtZLnNldEZyaWN0aW9uKGkuZnJpY3Rpb24pLFkuc2V0UmVzdGl0dXRpb24oaS5yZXN0aXR1dGlvbiksTi5hZGRSaWdpZEJvZHkoWSksbS5wdXNoKFkpO2NvbnN0IGo9bmV3IGcuYnRUcmFuc2Zvcm07ai5zZXRJZGVudGl0eSgpLGouc2V0T3JpZ2luKFAoMCx0LS41LDApKTtjb25zdCBaPW5ldyBnLmJ0Qm94U2hhcGUoUChwKnl0LDEscCkpLGh0PW5ldyBnLmJ0RGVmYXVsdE1vdGlvblN0YXRlKGopLHd0PW5ldyBnLmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbygwLGh0LFosZCksRz1uZXcgZy5idFJpZ2lkQm9keSh3dCk7Ry5zZXRGcmljdGlvbihpLmZyaWN0aW9uKSxHLnNldFJlc3RpdHV0aW9uKGkucmVzdGl0dXRpb24pLE4uYWRkUmlnaWRCb2R5KEcpLG0ucHVzaChHKTtjb25zdCBOdD1uZXcgZy5idFRyYW5zZm9ybTtOdC5zZXRJZGVudGl0eSgpLE50LnNldE9yaWdpbihQKDAsMCxwLy0yLS41KSk7Y29uc3QgT3Q9bmV3IGcuYnRCb3hTaGFwZShQKHAqeXQsdCwxKSksZWU9bmV3IGcuYnREZWZhdWx0TW90aW9uU3RhdGUoTnQpLEJ0PW5ldyBnLmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbygwLGVlLE90LGQpLGZ0PW5ldyBnLmJ0UmlnaWRCb2R5KEJ0KTtmdC5zZXRGcmljdGlvbihpLmZyaWN0aW9uKSxmdC5zZXRSZXN0aXR1dGlvbihpLnJlc3RpdHV0aW9uKSxOLmFkZFJpZ2lkQm9keShmdCksbS5wdXNoKGZ0KTtjb25zdCBrdD1uZXcgZy5idFRyYW5zZm9ybTtrdC5zZXRJZGVudGl0eSgpLGt0LnNldE9yaWdpbihQKDAsMCxwLzIrLjUpKTtjb25zdCBXdD1uZXcgZy5idEJveFNoYXBlKFAocCp5dCx0LDEpKSxvZT1uZXcgZy5idERlZmF1bHRNb3Rpb25TdGF0ZShrdCksTHQ9bmV3IGcuYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKDAsb2UsV3QsZCksQ3Q9bmV3IGcuYnRSaWdpZEJvZHkoTHQpO0N0LnNldEZyaWN0aW9uKGkuZnJpY3Rpb24pLEN0LnNldFJlc3RpdHV0aW9uKGkucmVzdGl0dXRpb24pLE4uYWRkUmlnaWRCb2R5KEN0KSxtLnB1c2goQ3QpO2NvbnN0IEh0PW5ldyBnLmJ0VHJhbnNmb3JtO0h0LnNldElkZW50aXR5KCksSHQuc2V0T3JpZ2luKFAocCp5dC8tMi0uNSwwLDApKTtjb25zdCBZdD1uZXcgZy5idEJveFNoYXBlKFAoMSx0LHApKSxYdD1uZXcgZy5idERlZmF1bHRNb3Rpb25TdGF0ZShIdCksbmU9bmV3IGcuYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKDAsWHQsWXQsZCksUHQ9bmV3IGcuYnRSaWdpZEJvZHkobmUpO1B0LnNldEZyaWN0aW9uKGkuZnJpY3Rpb24pLFB0LnNldFJlc3RpdHV0aW9uKGkucmVzdGl0dXRpb24pLE4uYWRkUmlnaWRCb2R5KFB0KSxtLnB1c2goUHQpO2NvbnN0IHR0PW5ldyBnLmJ0VHJhbnNmb3JtO3R0LnNldElkZW50aXR5KCksdHQuc2V0T3JpZ2luKFAocCp5dC8yKy41LDAsMCkpO2NvbnN0IFV0PW5ldyBnLmJ0Qm94U2hhcGUoUCgxLHQscCkpLHJlPW5ldyBnLmJ0RGVmYXVsdE1vdGlvblN0YXRlKHR0KSxfZT1uZXcgZy5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oMCxyZSxVdCxkKSxWdD1uZXcgZy5idFJpZ2lkQm9keShfZSk7VnQuc2V0RnJpY3Rpb24oaS5mcmljdGlvbiksVnQuc2V0UmVzdGl0dXRpb24oaS5yZXN0aXR1dGlvbiksTi5hZGRSaWdpZEJvZHkoVnQpLG0ucHVzaChWdCksZmUubGVuZ3RoJiZ2ZSgpLGZlPVsuLi5tXX0sdmU9KCk9PntmZS5mb3JFYWNoKHA9Pk4ucmVtb3ZlUmlnaWRCb2R5KHApKX0sRGw9cD0+e3ZhciBaO2NvbnN0e3NpZGVzOnQsaWQ6bSxtZXNoTmFtZTpkLHNjYWxlOnZ9PXA7bGV0IEw9YCR7dH1fY29sbGlkZXJgO2NvbnN0IEg9YCR7ZH1fJHtMfWAsWT0oKChaPUl0W0hdKT09bnVsbD92b2lkIDA6Wi5waHlzaWNzTWFzcyl8fC4xKSppLm1hc3MqaS5zY2FsZSxqPXZsKEl0W0hdLmNvbnZleEh1bGwse21hc3M6WSxzY2FsaW5nOkl0W0hdLnNjYWxpbmcscG9zOmkuc3RhcnRQb3NpdGlvbn0pO3JldHVybiBqLmlkPW0sai50aW1lb3V0PWkuc2V0dGxlVGltZW91dCxqLm1hc3M9WSxOLmFkZFJpZ2lkQm9keShqKSxBdC5wdXNoKGopLGp9LGJlPXA9PntwLnNldExpbmVhclZlbG9jaXR5KFAoc3QoLWkuc3RhcnRQb3NpdGlvblswXSouNSwtaS5zdGFydFBvc2l0aW9uWzBdKmkudGhyb3dGb3JjZSxNYXRoLnJhbmRvbSgpKSxzdCgtaS5zdGFydFBvc2l0aW9uWzFdLC1pLnN0YXJ0UG9zaXRpb25bMV0qMixNYXRoLnJhbmRvbSgpKSxzdCgtaS5zdGFydFBvc2l0aW9uWzJdKi41LC1pLnN0YXJ0UG9zaXRpb25bMl0qaS50aHJvd0ZvcmNlLE1hdGgucmFuZG9tKCkpKSk7Y29uc3QgdD1uZXcgZy5idFZlY3RvcjMoc3QoLWkuc3BpbkZvcmNlLGkuc3BpbkZvcmNlLE1hdGgucmFuZG9tKCkpLHN0KC1pLnNwaW5Gb3JjZSxpLnNwaW5Gb3JjZSxNYXRoLnJhbmRvbSgpKSxzdCgtaS5zcGluRm9yY2UsaS5zcGluRm9yY2UsTWF0aC5yYW5kb20oKSkpLG09TWF0aC5hYnMoaS5zY2FsZS0xKStpLnNjYWxlKmkuc2NhbGUqKHAubWFzcy9pLm1hc3MpKi43NTtwLmFwcGx5SW1wdWxzZSh0LFAobSxtLG0pKX0sRGU9cD0+e3p0PXp0LmZpbHRlcih0PT57bGV0IG09dC5pZD09PXA7cmV0dXJuIG0mJk4ucmVtb3ZlUmlnaWRCb2R5KHQpLCFtfSl9LFJsPSgpPT57ay5ieXRlTGVuZ3RoJiZrLmZpbGwoMCksdGU9ITAsQXQuZm9yRWFjaChwPT5OLnJlbW92ZVJpZ2lkQm9keShwKSksenQuZm9yRWFjaChwPT5OLnJlbW92ZVJpZ2lkQm9keShwKSksQXQ9W10senQ9W119LFNsPSgpPT57Y29uc3QgcD1uZXcgZy5idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uLHQ9bmV3IGcuYnREYnZ0QnJvYWRwaGFzZSxtPW5ldyBnLmJ0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyLGQ9bmV3IGcuYnRDb2xsaXNpb25EaXNwYXRjaGVyKHApLHY9bmV3IGcuYnREaXNjcmV0ZUR5bmFtaWNzV29ybGQoZCx0LG0scCk7cmV0dXJuIHYuc2V0R3Jhdml0eShQKDAsLTkuODEqaS5ncmF2aXR5LDApKSx2fSxJbD1wPT57Y29uc3QgdD1wLzFlMztOLnN0ZXBTaW11bGF0aW9uKHQsMiwxLzkwKSxrWzBdPUF0Lmxlbmd0aDtmb3IobGV0IG09QXQubGVuZ3RoLTE7bT49MDttLS0pe2NvbnN0IGQ9QXRbbV0sdj1kLmdldExpbmVhclZlbG9jaXR5KCkubGVuZ3RoKCksTD1kLmdldEFuZ3VsYXJWZWxvY2l0eSgpLmxlbmd0aCgpO2lmKHY8LjAxJiZMPC4wMDV8fGQudGltZW91dDwwKXtrW20qOCsxXT1kLmlkLGtbbSo4KzJdPS0xLGQuYXNsZWVwPSEwLGQuc2V0TWFzc1Byb3BzKDApLGQuZm9yY2VBY3RpdmF0aW9uU3RhdGUoMyksZC5zZXRMaW5lYXJWZWxvY2l0eSh5ZSksZC5zZXRBbmd1bGFyVmVsb2NpdHkoeWUpLHp0LnB1c2goQXQuc3BsaWNlKG0sMSlbMF0pO2NvbnRpbnVlfWQudGltZW91dC09cDtjb25zdCBIPWQuZ2V0TW90aW9uU3RhdGUoKTtpZihIKXtILmdldFdvcmxkVHJhbnNmb3JtKEt0KTtsZXQgcT1LdC5nZXRPcmlnaW4oKSxZPUt0LmdldFJvdGF0aW9uKCksaj1tKjgrMTtrW2pdPWQuaWQsa1tqKzFdPXEueCgpLGtbaisyXT1xLnkoKSxrW2orM109cS56KCksa1tqKzRdPVkueCgpLGtbais1XT1ZLnkoKSxrW2orNl09WS56KCksa1tqKzddPVkudygpfX19O2xldCBSZT1uZXcgRGF0ZSgpLmdldFRpbWUoKTtjb25zdCBTZT0oKT0+e2xldCBwPW5ldyBEYXRlKCkuZ2V0VGltZSgpO2NvbnN0IHQ9cC1SZTtSZT1wLCF0ZSYmay5ieXRlTGVuZ3RoJiYoSWwodCksdWUucG9zdE1lc3NhZ2Uoe2FjdGlvbjoidXBkYXRlcyIsZGljZUJ1ZmZlcjprLmJ1ZmZlcn0sW2suYnVmZmVyXSkpfX0pKCk7Cg==",O=typeof window<"u"&&window.Blob&&new Blob([atob($)],{type:"text/javascript;charset=utf-8"});function Gl(){const C=O&&(window.URL||window.webkitURL).createObjectURL(O);try{return C?new Worker(C):new Worker("data:application/javascript;base64,"+$)}finally{C&&(window.URL||window.webkitURL).revokeObjectURL(C)}}const Wl=C=>{let Y;return function(){let F=this,dl=arguments;Y&&window.cancelAnimationFrame(Y),Y=window.requestAnimationFrame(function(){C.apply(F,dl)})}},Vl=(C={dedupe:!1})=>{const{dedupe:Y}=C;let F=[],dl;const nl=J=>(Y&&(F=[]),F.push(J),dl||(dl=el()),dl.finally(()=>{dl=void 0})),el=async()=>{const J=[];for(;F.length;){const il=F.shift();J.push(await il())}return J};return{push:nl,queue:F,flush:()=>dl||Promise.resolve([])}},Jl=C=>JSON.parse(JSON.stringify(C));class q{static value(){const Y=window.crypto||window.msCrypto,F=new Uint32Array(1);return Y.getRandomValues(F)[0]/2**32}static range(Y,F){return Math.floor(Math.pow(10,14)*this.value()*this.value())%(F-Y+1)+Y}}const Rl=C=>{let Y=!1,F=C.slice(C.startsWith("#")?1:0);F.length===3?F=[...F].map(nl=>nl+nl).join(""):F.length===8&&(Y=!0),F=parseInt(F,16);let dl={r:F>>>16,g:(F&65280)>>>8,b:F&255};return Y&&(dl.r=F>>>24,dl.g=(F&16711680)>>>16,dl.b=(F&65280)>>>8,dl.a=F&255),dl},ul={id:`dice-canvas-${Date.now()}`,enableShadows:!0,shadowTransparency:.8,lightIntensity:1,delay:10,scale:5,theme:"default",themeColor:"#2e8555",offscreen:!0,assetPath:"/assets/dice-box/",origin:location.origin,meshFile:"models/default.json",suspendSimulation:!1};var H,o,f,x,u,e,K,a,z,t,k,_,Q,ll,P,bl,B,g,w,M;class pl{constructor(Y,F={}){if(p(this,k),p(this,Q),p(this,P),p(this,B),p(this,w),N(this,"rollCollectionData",{}),N(this,"rollGroupData",{}),N(this,"rollDiceData",{}),N(this,"themeData",[]),N(this,"themesLoadedData",{}),p(this,H,0),p(this,o,0),p(this,f,0),p(this,x,0),p(this,u,{}),p(this,e,void 0),p(this,K,void 0),p(this,a,void 0),p(this,z,void 0),p(this,t,void 0),N(this,"noop",()=>{}),typeof F!="object")throw new Error("Config options should be an object. Config reference: https://fantasticdice.games/docs/usage/config#configuration-options");const{onDieComplete:dl,onRollComplete:nl,onRemoveComplete:el,onThemeConfigLoaded:J,onThemeLoaded:il,...tl}=F;this.config={...ul,...tl},this.onDieComplete=F.onDieComplete||this.noop,this.onRollComplete=F.onRollComplete||this.noop,this.onRemoveComplete=F.onRemoveComplete||this.noop,this.onThemeLoaded=F.onThemeLoaded||this.noop,this.onThemeConfigLoaded=F.onThemeConfigLoaded||this.noop,this.canvas=cl({selector:Y,id:this.config.id}),this.loadThemeQueue=Vl({dedupe:!0})}resizeWorld(){const Y=Wl(()=>{W(this,u).resize({width:this.canvas.clientWidth,height:this.canvas.clientHeight}),W(this,a).postMessage({action:"resize",width:this.canvas.clientWidth,height:this.canvas.clientHeight})});window.addEventListener("resize",Y)}async init(){return y(this,Q,ll).call(this),await y(this,k,_).call(this),this.resizeWorld(),W(this,u).onRollResult=Y=>{const F=this.rollDiceData[Y.rollId],dl=this.rollGroupData[F.groupId],nl=this.rollCollectionData[F.collectionId];dl.rolls[F.rollId].value=Y.value,nl.completedRolls++,nl.completedRolls==nl.rolls.length&&nl.resolve(Object.values(nl.rolls).map(({collectionId:tl,id:V,meshName:sl,...Xl})=>Xl));const{collectionId:el,id:J,...il}=F;this.onDieComplete(il)},W(this,u).onRollComplete=()=>{this.onRollComplete(this.getRollResults())},W(this,u).onDieRemoved=Y=>{let F=this.rollDiceData[Y];const dl=this.rollCollectionData[F.removeCollectionId];dl.completedRolls++,delete this.rollDiceData[F.rollId];const nl=this.rollGroupData[F.groupId];delete nl.rolls[F.rollId];const el=y(this,w,M).call(this,F.groupId);nl.value=el.value,nl.qty=el.rollsArray.length,dl.completedRolls==dl.rolls.length&&dl.resolve(Object.values(dl.rolls).map(({id:Xl,...Yl})=>Yl));const{collectionId:J,id:il,removeCollectionId:tl,meshName:V,...sl}=F;this.onRemoveComplete(sl)},await Promise.all([W(this,e),W(this,z)]),y(this,P,bl).call(this),await this.loadThemeQueue.push(()=>this.loadTheme(this.config.theme)),this}async getThemeConfig(Y){const F=`${this.config.origin}${this.config.assetPath}themes/${Y}`;let dl;Y==="default"?dl={name:"Default Colors",material:{type:"color",diffuseTexture:{light:"diffuse-light.png",dark:"diffuse-dark.png"},diffuseLevel:1,bumpTexture:"normal.png",bumpLevel:.5,specularTexture:"specular.jpg",specularPower:1}}:dl=await fetch(`${F}/theme.config.json`).then(J=>{if(J.ok){const il=J.headers.get("content-type");if(il&&il.indexOf("application/json")!==-1||J.type&&J.type==="basic")return J.json();throw new Error(`Incorrect contentType: ${il}. Expected "application/json" or "basic"`)}else throw new Error(`Unable to fetch config file for theme: '${Y}'. Request rejected with status ${J.status}: ${J.statusText}`)}).catch(J=>console.error(J));let nl=this.config.origin+this.config.assetPath+this.config.meshFile,el="default";if(!dl)throw new Error("No theme config data to work with.");if(dl.hasOwnProperty("meshFile")&&(nl=`${F}/${dl.meshFile}`,dl.hasOwnProperty("meshName")?el=dl.meshName:(console.warn("You should provide a meshName in your theme.config.json file"),el=dl.meshFile.replace(/(.*)\..{2,4}$/,"$1"))),dl.hasOwnProperty("diceAvailable")||(dl.diceAvailable=["d4","d6","d8","d10","d12","d20","d100"]),dl.hasOwnProperty("extends")){let J=this.themesLoadedData[dl.extends];J||(J=await this.loadTheme(dl.extends).catch(il=>console.error(il))),J&&(dl.diceInherited=[...dl.diceInherited||[]],J.diceAvailable.map(il=>{dl.diceInherited[il]=J.systemName}))}return Object.assign(dl,{basePath:F,meshFilePath:nl,meshName:el,theme:Y}),dl}async loadTheme(Y){if(this.themesLoadedData[Y])return this.themesLoadedData[Y];const F=this.themesLoadedData[Y]=await this.getThemeConfig(Y).catch(dl=>console.error(dl));if(this.onThemeConfigLoaded(F),!!F)return await W(this,u).loadTheme(F).catch(dl=>console.error(dl)),this.onThemeLoaded(F),F}async updateConfig(Y){const F={...this.config,...Y};return await this.loadThemeQueue.push(()=>this.loadTheme(F.theme)),this.config=F,W(this,u).updateConfig(F),W(this,a).postMessage({action:"updateConfig",options:F}),this}clear(){return i(this,H,0),i(this,o,0),i(this,f,0),i(this,x,0),this.rollCollectionData={},this.rollGroupData={},this.rollDiceData={},W(this,u).clear(),W(this,a).postMessage({action:"clearDice"}),this}hide(){return this.canvas.style.display="none",this}show(){return this.canvas.style.display="block",this}roll(Y,{theme:F=this.config.theme,themeColor:dl=this.config.themeColor,newStartPoint:nl=!0}={}){this.clear();const el=S(this,H)._++;this.rollCollectionData[el]=new T({id:el,notation:Y,theme:F,themeColor:dl,newStartPoint:nl});const J=this.createNotationArray(Y,this.themesLoadedData[F].diceAvailable);return y(this,B,g).call(this,J,el),this.rollCollectionData[el].promise}add(Y,{theme:F=this.config.theme,themeColor:dl=this.config.themeColor,newStartPoint:nl=!0}={}){const el=S(this,H)._++;this.rollCollectionData[el]=new T({id:el,notation:Y,theme:F,themeColor:dl,newStartPoint:nl});const J=this.createNotationArray(Y,this.themesLoadedData[F].diceAvailable);return y(this,B,g).call(this,J,el),this.rollCollectionData[el].promise}reroll(Y,{remove:F=!1,hide:dl=!1,newStartPoint:nl=!0}={}){const el=(Array.isArray(Y)?Y:[Y]).map(({value:J,...il})=>il);return F===!0&&this.remove(el,{hide:dl}),this.add(el,{newStartPoint:nl})}remove(Y,{hide:F=!1}={}){const dl=Array.isArray(Y)?Y:[Y],nl=S(this,H)._++;return this.rollCollectionData[nl]=new T({id:nl,notation:Y,rolls:dl}),dl.map(el=>{this.rollDiceData[el.rollId].removeCollectionId=nl;let J=this.rollDiceData[el.rollId].id;W(this,u).remove({id:J,rollId:el.rollId}),W(this,a).postMessage({action:"removeDie",id:J})}),this.rollCollectionData[nl].promise}createNotationArray(Y,F){const dl=Array.isArray(Y)?Y:[Y];let nl=[];const el=tl=>{if(tl.hasOwnProperty("qty")||(tl.qty=1),tl.hasOwnProperty("sides"))return!0;{const V="Roll notation is missing sides";throw new Error(V)}},J=tl=>{tl=tl.toString();let V=tl.split(".");return V[1]?V[1]=parseInt(V[1])+1:V[1]=1,V[0]+"."+V[1]},il=tl=>{tl.hasOwnProperty("rollId")&&this.rollDiceData.hasOwnProperty(tl.rollId)&&(tl.rollId=J(tl.rollId))};return dl.forEach(tl=>{typeof tl=="string"?nl.push(this.parse(tl,F)):typeof dl=="object"&&(il(tl),el(tl)&&nl.push(tl))}),nl}parse(Y,F){const dl=/(\d+)([dD]{1}\d+)(.*)$/i,nl=/(\d+)[dD]([0%]+)(.*)$/i,el=/(\d+)[dD](f+[ate]*)(.*)$/i,J=/(\d+)[dD]([\d\w]+)([+-]{0,1}\d+)?/i,il=/([+-])(\d+)/,tl=Y.trim().replace(/\s+/g,""),V=(Hl,Bl)=>{if(Hl=Number(Hl),Number.isNaN(Hl)||!Number.isInteger(Hl)||Hl<1)throw new Error(Bl);return Hl},sl=tl.match(nl)||tl.match(dl)||tl.match(el)||tl.match(J);let Xl=0;const Yl="Invalid notation: "+Y;if(!sl||!sl.length||sl.length<3)throw new Error(Yl);if(sl[3]&&il.test(sl[3])){const Hl=sl[3].match(il);let Bl=V(Hl[2],Yl);Hl[1].trim()==="-"&&(Bl*=-1),Xl=Bl}const yl={qty:V(sl[1],Yl),modifier:Xl};return tl.match(nl)?yl.sides="100":tl.match(el)?yl.sides="fate":(F.includes(tl.match(J)[2]),yl.sides=sl[2]),yl}getRollResults(){return Object.entries(this.rollGroupData).map(([Y,F])=>{const dl=y(this,w,M).call(this,Y);F.value=dl.value,F.qty=dl.rollsArray.length;const nl={...F};return nl.rolls=dl.rollsArray,nl})}}H=new WeakMap,o=new WeakMap,f=new WeakMap,x=new WeakMap,u=new WeakMap,e=new WeakMap,K=new WeakMap,a=new WeakMap,z=new WeakMap,t=new WeakMap,k=new WeakSet,_=async function(){i(this,e,new Promise((Y,F)=>{i(this,K,Y)}));const C=()=>{W(this,K).call(this)};if("OffscreenCanvas"in window&&"transferControlToOffscreen"in this.canvas&&this.config.offscreen){const Y=await __vitePreload(()=>import("./world.offscreen-932287d9.js"),[]).then(F=>F.default);i(this,u,new Y({canvas:this.canvas,options:this.config,onInitComplete:C}))}else{this.config.offscreen&&(console.warn("This browser does not support OffscreenCanvas. Using standard canvas fallback."),this.config.offscreen=!1);const Y=await __vitePreload(()=>import("./world.onscreen-bda1bb7a.js"),[]).then(F=>F.default);i(this,u,new Y({canvas:this.canvas,options:this.config,onInitComplete:C}))}},Q=new WeakSet,ll=function(){i(this,a,new Gl),i(this,z,new Promise((C,Y)=>{i(this,t,C)})),W(this,a).onmessage=C=>{switch(C.data.action){case"init-complete":W(this,t).call(this)}},W(this,a).postMessage({action:"init",width:this.canvas.clientWidth,height:this.canvas.clientHeight,options:this.config})},P=new WeakSet,bl=function(){const C=new MessageChannel;W(this,u).connect(C.port1),W(this,a).postMessage({action:"connect"},[C.port2])},B=new WeakSet,g=async function(C,Y){const F=this.rollCollectionData[Y];let dl=F.newStartPoint;C.forEach(async nl=>{if(!nl.sides)throw new Error("Improper dice notation or unable to parse notation");const el=nl.theme||F.theme||this.config.theme,J=nl.themeColor||F.themeColor||this.config.themeColor,il={},tl=nl.groupId!==void 0;let V;const sl=()=>this.loadTheme(el);await this.loadThemeQueue.push(sl);const{meshName:Xl,diceAvailable:Yl,diceInherited:yl={},material:{type:Hl}}=this.themesLoadedData[el],Bl=Object.keys(yl);let Cl="",Tl;Hl==="color"&&(Tl=Rl(J),Cl=Tl.r*.299+Tl.g*.587+Tl.b*.114>175?"_dark":"_light");for(var Ql=0,cd=nl.qty;Ql<cd;Ql++){let nd=nl.rollId!==void 0?nl.rollId:S(this,f)._++,ud=nl.id!==void 0?nl.id:S(this,x)._++;V=tl?nl.groupId:W(this,o);const yd=Number.isInteger(nl.sides)?`d${nl.sides}`:nl.sides;nl.sides=yd;const sd={sides:yd,groupId:V,collectionId:F.id,rollId:nd,id:ud,theme:el,themeColor:J,meshName:Xl};if(il[nd]=sd,this.rollDiceData[nd]=sd,F.rolls.push(this.rollDiceData[nd]),sd.sides==="fate"&&!Yl.includes(sd.sides)&&!Bl.includes(sd.sides)){console.warn(`fate die unavailable in '${el}' theme. Using fallback.`);const Gd=-1,Vd=1;sd.value=q.range(Gd,Vd),W(this,u).addNonDie(sd)}else if(this.config.suspendSimulation||!Yl.includes(sd.sides)&&!Bl.includes(sd.sides))console.warn(this.config.suspendSimulation?"3D simulation suspended. Using fallback.":`${sd.sides} die unavailable in '${el}' theme. Using fallback.`),sd.value=q.range(1,sd.sides),W(this,u).addNonDie(sd);else{let Gd;if(Bl.includes(sd.sides)){const Vd=yl[sd.sides];Gd=this.themesLoadedData[Vd]}W(this,u).add({...sd,newStartPoint:dl,theme:Gd?.systemName||el,meshName:Gd?.meshName||Xl,colorSuffix:Cl})}dl=!1}tl?Object.assign(this.rollGroupData[V].rolls,il):(nl.rolls=il,nl.id=V,this.rollGroupData[V]=nl,++S(this,o)._)})},w=new WeakSet,M=function(C){const Y=this.rollGroupData[C],F=Object.values(Y.rolls).map(({collectionId:nl,id:el,meshName:J,...il})=>il);let dl=F.reduce((nl,el)=>{const J=isNaN(el.value)?0:el.value;return nl+J},0);return dl+=Y.modifier?Y.modifier:0,{value:dl,rollsArray:F}};class T{constructor(Y){Object.assign(this,Y),this.rolls=Y.rolls||[],this.completedRolls=0;const F=this;this.promise=new Promise((dl,nl)=>{F.resolve=dl,F.reject=nl})}}function SetThemeMode(C,Y){const F=window.matchMedia("(prefers-color-scheme: dark)");console.log(F.matches);const dl=F.matches?"dark":"light",nl=F.matches?"light":"dark";for(var el=0;el<Y.styleSheets.length;el++)for(var J=0;J<Y.styleSheets[el].cssRules.length;J++){let il=Y.styleSheets[el].cssRules[J];il&&il.media&&il.media.mediaText.includes("prefers-color-scheme")&&(C.mode=="LIGHT"?(il.media.appendMedium(`(prefers-color-scheme: ${dl})`),il.media.mediaText.includes(nl)&&il.media.deleteMedium(`(prefers-color-scheme: ${nl})`)):C.mode=="DARK"&&(il.media.appendMedium(`(prefers-color-scheme: ${nl})`),il.media.mediaText.includes(dl)&&il.media.deleteMedium(`(prefers-color-scheme: ${dl})`)))}}function evaluateMathExpression(command){const expression=command.replace("/math","").trim(),validExpressionRegex=/^[-+*/()\d\s]+$/;if(!validExpressionRegex.test(expression))return"That's not math. (Invalid expression.)";try{const result=eval(expression);return`The answer to ${expression} is ${result}.`}catch(C){return`Error: ${C}`}}const style="",mobile=window.innerWidth<Constants.MOBILEWIDTH;let currentTheme;document.querySelector("#app").innerHTML=`
<header id="headerContainer" class="headerContainer"></header>
<section id="chatContainer" class="chatContainer">
    <div id="diceContainer" class="diceCont"></div>
    <ul id="chatLog">
    </ul>
</section>
<div class="inputContainer">
    <div id="targetSelect">
        <label for="players">${mobile?"Send:":"Send To:"}</label>

        <select name="players" id="playerSelect">
        </select>
        <div id="safetyButtons">${mobile?"":"Safety:"}
            <button id="happyButton" type="button"><embed class="svg" src="/check.svg" /></button>
            <button id="waryButton" type="button"><embed class="svg" src="/circle.svg" /></button>
            <button id="badButton" type="button"><embed class="svg" src="/cross.svg" /></button>
        </div>
    </div>
    <div id="chatInputContainer">
    <input id="chat-input" class="chatInput" type="text" name="message" placeholder="Type Message ..." class="form-control">
        <span>
            <button id="chat-button" type="button" class="button">Send</button>
        </span>
    </div>
</div>`;let userName="",userId="",userColor="",unread=0,whispered=!1,gamePlayers=[],lastRumbleMessage={chatlog:"",sender:"",created:"",color:""},lastClashmessage={chatlog:"",sender:"",created:"",color:""},lastFriendmessage={chatlog:"",sender:"",created:"",color:""};const slashWhisperRegex=/^\/whisper (\w+) (.+)$/,slashWRegex=/^\/w (\w+) (.+)$/,rollCommand="/roll ";let diceBox;await OBR.onReady(async()=>{const C=await OBR.theme.getTheme();currentTheme=C.mode,SetThemeMode(C,document),OBR.theme.onChange(Y=>{currentTheme=Y.mode,SetThemeMode(Y,document)}),await SetupOnChangeEvents(),userName=await OBR.player.getName(),userId=await OBR.player.getId(),userColor=await OBR.player.getColor(),gamePlayers=(await OBR.party.getPlayers()).map(Y=>({id:Y.id,name:Y.name})),SetupSendButtons(),SetupSafetyButtons(),UpdatePlayerSelect(),SetupDiceBox()});function SetupSafetyButtons(){const C=document.querySelector("#happyButton");C.onclick=async function(){const dl={},nl=new Date().toISOString();return dl[`${Constants.EXTENSIONID}/metadata_chatSafety`]={safety:"happy",created:nl},await OBR.player.setMetadata(dl)};const Y=document.querySelector("#badButton");Y.onclick=async function(){const dl={},nl=new Date().toISOString();return dl[`${Constants.EXTENSIONID}/metadata_chatSafety`]={safety:"bad",created:nl},await OBR.player.setMetadata(dl)};const F=document.querySelector("#waryButton");F.onclick=async function(){const dl={},nl=new Date().toISOString();return dl[`${Constants.EXTENSIONID}/metadata_chatSafety`]={safety:"wary",created:nl},await OBR.player.setMetadata(dl)}}function SetupSendButtons(){const C=document.querySelector("#chat-input");C.addEventListener("keypress",async function(F){F.key==="Enter"&&await SendtoChatLog(C)});const Y=document.querySelector("#chat-button");Y.onclick=async function(){C.value&&await SendtoChatLog(C)}}function IsThisOld(C){const F=new Date,dl=new Date(C);return F-dl>3e3}async function SetupOnChangeEvents(){OBR.player.onChange(async C=>{userName=C.name,userId=C.id,userColor=C.color,await HandleMessage(C.metadata)}),OBR.party.onChange(C=>{gamePlayers=C.map(Y=>({id:Y.id,name:Y.name})),UpdatePlayerSelect(),C.forEach(async Y=>{await HandleMessage(Y.metadata)})}),OBR.action.onOpenChange(async C=>{C&&(whispered=!1,unread=0,await OBR.action.setBadgeText(void 0),await OBR.action.setBadgeBackgroundColor("#BB99FF"),await OBR.action.setIcon("/icon.svg"))})}async function HandleMessage(C){const Y=document.querySelector("#chatLog"),F=await OBR.action.isOpen(),dl=new Date().toLocaleTimeString();if(C[`${Constants.EXTENSIONID}/metadata_chatlog`]!=null){const nl=C[`${Constants.EXTENSIONID}/metadata_chatlog`];if((lastRumbleMessage.chatlog!=nl.chatlog||lastRumbleMessage.sender!=nl.sender)&&!IsThisOld(nl.created)){lastRumbleMessage=nl;const el=nl.chatlog;lastRumbleMessage=nl;const J=nl.senderId==userId,il=document.createElement("li"),tl=document.createElement("li"),V=J?" itsMe":"";if(nl.senderId==userId||nl.targetId=="0000"){const sl=J&&nl.targetId!="0000"?` to [${nl.target}]`:"";il.className="rumbleAuthor"+V,il.style.color=nl.color,il.innerText=`[${dl}] - ${nl.sender}`+sl,tl.className="rumbleLog"+V,tl.innerText="â€¢    "+el,Y.append(il),Y.append(tl),unread=J?unread:unread+1}else nl.targetId==userId&&(il.className="rumbleAuthor"+V,il.style.color=nl.color,il.innerText=`[${dl}] - ${nl.sender} to [You]`,tl.className="rumbleLog outline"+V,tl.innerText="â€¢    "+el,Y.append(il),Y.append(tl),unread=unread+1,whispered=!0)}}if(C[`${Constants.CLASHID}/metadata_chatlog`]!=null){const nl=C[`${Constants.CLASHID}/metadata_chatlog`];if((lastClashmessage.chatlog!=nl.chatlog||lastClashmessage.sender!=nl.sender)&&!IsThisOld(nl.created)){if(nl.targetId==userId){lastClashmessage=nl;const el=nl.chatlog,J=document.createElement("li");J.className="rumbleAuthor clashLog",J.innerText=`[${dl}] - ${nl.sender} to [You]`;const il=document.createElement("li");il.className=nl.critical?"clashLog glow":"clashLog",il.innerText="ðŸ¡†    "+el,Y.append(J),Y.append(il)}else if(nl.targetId=="0000"){lastClashmessage=nl;const el=nl.chatlog,J=document.createElement("li");J.className="rumbleAuthor clashLog",J.innerText=`[${dl}] - ${nl.sender}`;const il=document.createElement("li");il.className=nl.critical?"clashLog glow":"clashLog",il.innerText="ðŸ¡†    "+el,Y.append(J),Y.append(il),unread=unread+1}}}if(C[`${Constants.OUTSIDEID}/metadata_chatlog`]!=null){const nl=C[`${Constants.OUTSIDEID}/metadata_chatlog`];if((lastFriendmessage.chatlog!=nl.chatlog||lastFriendmessage.sender!=nl.sender)&&!IsThisOld(nl.created)){if(nl.targetId==userId){lastFriendmessage=nl;const el=nl.chatlog,J=document.createElement("li");J.className="rumbleAuthor friendLog",J.innerText=`[${dl}] - ${nl.sender} to [You]`;const il=document.createElement("li");il.className="friendLog",il.innerText="ðŸ¢¥    "+el,Y.append(J),Y.append(il)}else if(nl.targetId=="0000"){lastFriendmessage=nl;const el=nl.chatlog,J=document.createElement("li");J.className="rumbleAuthor friendLog",J.innerText=`[${dl}] - ${nl.sender}`;const il=document.createElement("li");il.className="friendLog",il.innerText="ðŸ¢¥    "+el,Y.append(J),Y.append(il),unread=unread+1}}}if(C[`${Constants.EXTENSIONID}/metadata_chatSafety`]!=null){const nl=await OBR.player.getRole(),el=C[`${Constants.EXTENSIONID}/metadata_chatSafety`];if(!IsThisOld(el.created)){if(el.safety=="bad"){const J=document.createElement("li"),il=document.createElement("li"),tl=new Date().toLocaleTimeString();J.className="rumbleAuthor clashLog",J.innerText=`[${tl}] - âŒ Full Stop âŒ`,il.className="clashLog",il.innerText="ðŸ¡†    Someone is concerned with the current situation. Talk it out.",Y.append(J),Y.append(il),unread=unread+1,whispered=!0,OBR.popover.open({id:"com.battle-system.rumble",url:`/subindex/sub${el.safety}.html`,height:400,width:400})}if(el.safety=="wary"){const J=document.createElement("li"),il=document.createElement("li"),tl=new Date().toLocaleTimeString();J.className="rumbleAuthor clashLog",J.innerText=`[${tl}] - ðŸŸ¡ Let's be careful ðŸŸ¡`,il.className="clashLog",il.innerText="ðŸ¡†    Someone is starting to feel wary about what's going on.",Y.append(J),Y.append(il),unread=unread+1,whispered=!0,OBR.popover.open({id:"com.battle-system.rumble",url:`/subindex/sub${el.safety}.html`,height:400,width:400})}if(nl=="GM"&&el.safety=="happy"){const J=document.createElement("li"),il=document.createElement("li"),tl=new Date().toLocaleTimeString();J.className="rumbleAuthor clashLog",J.innerText=`[${tl}] - âœ… Great Job! âœ…`,il.className="clashLog",il.innerText="ðŸ¡†    Someone has shown their approval!",Y.append(J),Y.append(il),unread=unread+1,OBR.popover.open({id:"com.battle-system.rumble",url:`/subindex/sub${el.safety}.html`,height:200,width:200})}}}if(F&&(whispered=!1,unread=0),!F&&unread>0&&(await OBR.action.setIcon("/icon-filled.svg"),await OBR.action.setBadgeText(unread.toString()),whispered)){const nl=currentTheme=="DARK"?"yellow":"#159cc5";await OBR.action.setBadgeBackgroundColor(nl)}}function UpdatePlayerSelect(){const C=document.getElementById("playerSelect");let Y=C.value;const F=document.createElement("option");F.setAttribute("value","0000");const dl=document.createTextNode("Everyone");if(F.appendChild(dl),C.innerHTML="",C.appendChild(F),gamePlayers.forEach(el=>{let J=document.createElement("option");J.setAttribute("value",el.id);let il=document.createTextNode(el.name);J.appendChild(il),C.appendChild(J)}),!gamePlayers.find(el=>el.id===Y)&&Y&&Y!=="0000"){let el=document.createElement("option");el.setAttribute("value",Y);let J=document.createTextNode("(Disconnected)");el.appendChild(J),C.appendChild(el),C.value=Y}else Y&&(C.value=Y)}async function SendSlashWhispertoChatLog(C,Y){if(C){const F=C[1],dl=C[2],nl=gamePlayers.find(el=>el.name.toLowerCase()===F.toLowerCase());if(nl&&dl){const el={},J=new Date().toISOString();return el[`${Constants.EXTENSIONID}/metadata_chatlog`]={chatlog:dl,sender:userName,senderId:userId,target:nl.name,targetId:nl.id,created:J,color:userColor},Y.value="",await OBR.player.setMetadata(el)}}}async function SendtoChatLog(C){if(C.value)if(C.value.startsWith("/whisper")){const Y=C.value.match(slashWhisperRegex);await SendSlashWhispertoChatLog(Y,C)}else if(C.value.startsWith("/w")){const Y=C.value.match(slashWRegex);await SendSlashWhispertoChatLog(Y,C)}else if(C.value.startsWith("/math")){const Y=evaluateMathExpression(C.value).toString();await SendMathtoChatLog(Y),C.value=""}else if(C.value.startsWith(rollCommand)){const Y=C.value.substring(rollCommand.length),F=new distExports.DiceRoller;try{const dl=F.roll(Y);let nl=[];dl.type=="die"?dl.rolls.forEach(tl=>{const V=tl;nl.push(`[${V.critical==="success"?"ðŸ’¥":""}${V.value}${V.valid?"":"âœ•"}]`)}):dl.type=="number"||dl.dice.forEach(async tl=>{const V=tl;V.rolls?.length>0&&V.rolls.forEach(sl=>{const Xl=sl;nl.push(`[D${Xl.die}â®ž${Xl.critical==="success"?"ðŸ’¥":""}${Xl.value}${Xl.valid?"":"âœ•"}]`)})});let el=" rolled ",J=Y;dl.label&&(J=Y.replace(dl.label,""),el+="â­"+dl.label+"â­"),el+=`[${J}] â†’ ${nl.join(", ")} for ${dl.value}!`,await SendRolltoChatLog(el),C.value=""}catch{console.log("Rumble was unable to parse that roll notation.")}}else{const Y=document.getElementById("playerSelect"),F=Y.value,dl=Y.options[Y.selectedIndex].text,nl={},el=new Date().toISOString();return nl[`${Constants.EXTENSIONID}/metadata_chatlog`]={chatlog:C.value,sender:userName,senderId:userId,target:dl,targetId:F,created:el,color:userColor},C.value="",await OBR.player.setMetadata(nl)}}async function SendRolltoChatLog(C){if(C){const Y={},F=new Date().toISOString();return Y[`${Constants.CLASHID}/metadata_chatlog`]={chatlog:userName+C,sender:"Rumble!",senderId:userId,target:"",targetId:"0000",created:F,color:userColor},await OBR.player.setMetadata(Y)}}async function SendMathtoChatLog(C){if(C){const Y={},F=new Date().toISOString();return Y[`${Constants.CLASHID}/metadata_chatlog`]={chatlog:C,sender:"Rumble!",senderId:userId,target:"",targetId:userId,created:F,color:userColor},await OBR.player.setMetadata(Y)}}function ParseResultsToString(C){let Y=[],F=0;return C.forEach(dl=>{let nl=[];dl.rolls.length>0&&dl.rolls.forEach(el=>{nl.push(el.value)}),Y.push(`${dl.qty}${dl.sides} â†’ [${nl.join("-")}]`),F+=dl.value}),` rolled (${Y.join(", ")}) for ${F}!`}async function SetupDiceBox(){diceBox=new pl("#diceContainer",{id:"diceContainer",assetPath:"/assets/",scale:15,gravity:5,theme:"default",themeColor:"#159cc5"}),diceBox.init().then(()=>{const C=new DiceUIPicker({target:"#headerContainer",onSubmit:Y=>{const F=document.querySelector("#throwButton"),dl=document.querySelector("#resetButton");F.disabled=!0,dl.disabled=!0,diceBox.roll(Y)},onClear:()=>{diceBox.clear()},onReroll:Y=>{Y.forEach(F=>diceBox.add(F))}});C.ready(),diceBox.onRollComplete=async Y=>{const F=document.querySelector("#throwButton"),dl=document.querySelector("#resetButton");let nl=ParseResultsToString(Y);await SendRolltoChatLog(nl),await delay(2e3),C.updateNotation(!0),F.disabled=!1,dl.disabled=!1}})}function delay(C){return new Promise(Y=>setTimeout(Y,C))}export{Jl as J};
